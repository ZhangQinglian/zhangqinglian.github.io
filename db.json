{"meta":{"version":1,"warehouse":"5.0.1"},"models":{"Asset":[{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo-algolia-nebula-blue-full.svg","path":"images/logo-algolia-nebula-blue-full.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/js/bookmark.js","path":"js/bookmark.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/comments.js","path":"js/comments.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/comments-buttons.js","path":"js/comments-buttons.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/config.js","path":"js/config.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/motion.js","path":"js/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/next-boot.js","path":"js/next-boot.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/pjax.js","path":"js/pjax.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/schedule.js","path":"js/schedule.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/sidebar.js","path":"js/sidebar.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/css/noscript.styl","path":"css/noscript.styl","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/addtoany.js","path":"js/third-party/addtoany.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/fancybox.js","path":"js/third-party/fancybox.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/pace.js","path":"js/third-party/pace.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/quicklink.js","path":"js/third-party/quicklink.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/analytics/baidu-analytics.js","path":"js/third-party/analytics/baidu-analytics.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/analytics/growingio.js","path":"js/third-party/analytics/growingio.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/analytics/matomo.js","path":"js/third-party/analytics/matomo.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/chat/chatra.js","path":"js/third-party/chat/chatra.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/math/katex.js","path":"js/third-party/math/katex.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/math/mathjax.js","path":"js/third-party/math/mathjax.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/chat/tidio.js","path":"js/third-party/chat/tidio.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/changyan.js","path":"js/third-party/comments/changyan.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/disqusjs.js","path":"js/third-party/comments/disqusjs.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/disqus.js","path":"js/third-party/comments/disqus.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/gitalk.js","path":"js/third-party/comments/gitalk.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/livere.js","path":"js/third-party/comments/livere.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/utterances.js","path":"js/third-party/comments/utterances.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/comments/isso.js","path":"js/third-party/comments/isso.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/search/algolia-search.js","path":"js/third-party/search/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/search/local-search.js","path":"js/third-party/search/local-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/tags/pdf.js","path":"js/third-party/tags/pdf.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/tags/mermaid.js","path":"js/third-party/tags/mermaid.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/tags/wavedrom.js","path":"js/third-party/tags/wavedrom.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/statistics/lean-analytics.js","path":"js/third-party/statistics/lean-analytics.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/statistics/firestore.js","path":"js/third-party/statistics/firestore.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/third-party/analytics/google-analytics.js","path":"js/third-party/analytics/google-analytics.js","modified":0,"renderable":1},{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/img/404.jpg","path":"img/404.jpg","modified":0,"renderable":0},{"_id":"source/img/about.jpg","path":"img/about.jpg","modified":0,"renderable":0},{"_id":"source/img/algolia.svg","path":"img/algolia.svg","modified":0,"renderable":0},{"_id":"source/img/archive_banner.jpg","path":"img/archive_banner.jpg","modified":0,"renderable":0},{"_id":"source/img/avatar.jpg","path":"img/avatar.jpg","modified":0,"renderable":0},{"_id":"source/img/comment_bg.png","path":"img/comment_bg.png","modified":0,"renderable":0},{"_id":"source/img/favicon.ico","path":"img/favicon.ico","modified":0,"renderable":0},{"_id":"source/img/friend_404.gif","path":"img/friend_404.gif","modified":0,"renderable":0},{"_id":"source/img/icp.png","path":"img/icp.png","modified":0,"renderable":0},{"_id":"source/img/index.jpg","path":"img/index.jpg","modified":0,"renderable":0},{"_id":"source/img/link_banner.jpg","path":"img/link_banner.jpg","modified":0,"renderable":0},{"_id":"source/img/loading.gif","path":"img/loading.gif","modified":0,"renderable":0},{"_id":"source/img/post.jpg","path":"img/post.jpg","modified":0,"renderable":0},{"_id":"source/img/post_loadding.svg","path":"img/post_loadding.svg","modified":0,"renderable":0},{"_id":"source/music/file/lrc/bushuo.lrc","path":"music/file/lrc/bushuo.lrc","modified":0,"renderable":0},{"_id":"source/music/file/lrc/goodbye.lrc","path":"music/file/lrc/goodbye.lrc","modified":0,"renderable":0},{"_id":"source/music/file/lrc/jiandan.lrc","path":"music/file/lrc/jiandan.lrc","modified":0,"renderable":0},{"_id":"source/music/file/lrc/kanjian.lrc","path":"music/file/lrc/kanjian.lrc","modified":0,"renderable":0},{"_id":"source/music/file/lrc/lastdance.lrc","path":"music/file/lrc/lastdance.lrc","modified":0,"renderable":0},{"_id":"source/music/file/lrc/mengnalisha.lrc","path":"music/file/lrc/mengnalisha.lrc","modified":0,"renderable":0},{"_id":"source/music/file/lrc/mingbai.lrc","path":"music/file/lrc/mingbai.lrc","modified":0,"renderable":0},{"_id":"source/music/file/lrc/niujiaojian.lrc","path":"music/file/lrc/niujiaojian.lrc","modified":0,"renderable":0},{"_id":"source/music/file/lrc/sanbuqu.lrc","path":"music/file/lrc/sanbuqu.lrc","modified":0,"renderable":0},{"_id":"source/music/file/lrc/sheng_ru_xia_hua.lrc","path":"music/file/lrc/sheng_ru_xia_hua.lrc","modified":0,"renderable":0},{"_id":"source/music/file/lrc/xinqiang.lrc","path":"music/file/lrc/xinqiang.lrc","modified":0,"renderable":0},{"_id":"source/music/file/lrc/zaishushangchangge.lrc","path":"music/file/lrc/zaishushangchangge.lrc","modified":0,"renderable":0}],"Cache":[{"_id":"source/CNAME","hash":"4822c6d40c444124c5a1166a3efcb540bd8b2aac","modified":1724210179778},{"_id":"source/.DS_Store","hash":"cc75fbdb977a72e3c33a32b977ec965c1597d5c5","modified":1724210179777},{"_id":"source/404/index.md","hash":"649f2386b36cefbba0409c928072de011ff0b49b","modified":1724210179778},{"_id":"source/bookmark/index.md","hash":"3ae139899eba5f34dcfcbd2a68a7527dd4404645","modified":1724210179787},{"_id":"source/_data/link.yml","hash":"11faecce47bdeccb67f24b6f7b5f8349beee5012","modified":1724210179778},{"_id":"source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1724210179788},{"_id":"source/img/algolia.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1724210179796},{"_id":"source/img/comment_bg.png","hash":"1adfc4ee925fb4f922c24d7774e7c46d940fe31b","modified":1724210179797},{"_id":"source/img/avatar.jpg","hash":"e8528ffc7bf4c5e89e9e26efc3205e0280575c09","modified":1724210179797},{"_id":"source/img/favicon.ico","hash":"546668313d006a1bca09c7411c30f9a8a19abb03","modified":1724210179797},{"_id":"source/img/icp.png","hash":"cb1fd69b38ec23ce8366668ddffbbd0160de0104","modified":1724210179800},{"_id":"source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1724210179799},{"_id":"source/img/post_loadding.svg","hash":"549c58cd09dbeefd573ce10646c49ded8bcc48ec","modified":1724210179807},{"_id":"source/link/index.md","hash":"c11439c2093ebe9e2d12ebac8bfb2c1f3f6ee8af","modified":1724210179807},{"_id":"source/img/loading.gif","hash":"5f0287fb8fb98872fe1998c6f781111819e71806","modified":1724210179806},{"_id":"source/_posts/Educational-experience-2.md","hash":"e54db969982e4daa8ec795d95ad0b79a6a81e395","modified":1724210179779},{"_id":"source/_posts/Educational-experience-1.md","hash":"0e12a6cf36717543726f8428c8953c2c4a54ed59","modified":1724210179778},{"_id":"source/music/index.md","hash":"f5e0f6a91756c1f8051778395f84a82b675cd83c","modified":1724210179809},{"_id":"source/_posts/andrdoi-arch-livedata.md","hash":"38fd889fb37895fc4664cc7c814786f0b5a51b06","modified":1724210179779},{"_id":"source/_posts/android-arch-lifecycle.md","hash":"b3235492f4169ecd7267b04c2ac001bce6b72e64","modified":1724210179780},{"_id":"source/_posts/android-glsurfaceview-overview.md","hash":"b42572b020658cd56153c37ea8158880a18f42eb","modified":1724210179781},{"_id":"source/_posts/GIF-and-LWZ.md","hash":"780ca56f8af480ff416eae8cff7b6a2855b0ebf2","modified":1724210179779},{"_id":"source/_posts/android-opengl-01.md","hash":"552fd348caee33e9a3ddc5731c5d6495254e8a02","modified":1724210179781},{"_id":"source/_posts/android-arch-room.md","hash":"00f6af9d3f94a8362f8c7ec4f201d58d6ae2952d","modified":1724210179780},{"_id":"source/_posts/android-arch-viewmodel.md","hash":"84ac16657ec39c84f11cba04daf7b6ba67440fab","modified":1724210179781},{"_id":"source/_posts/android-opengl-02.md","hash":"a938051dff0020e4032561e4e772081a56baafad","modified":1724210179781},{"_id":"source/_posts/android-player.md","hash":"210d3eb820873282443e5d05b4917c112e6e6234","modified":1724210179782},{"_id":"source/_posts/array-list-in-c.md","hash":"c9e052ebcd17732a0c3e7cf0f520ed7d85d11b5e","modified":1724210179782},{"_id":"source/_posts/android-opengl-es-triangle.md","hash":"e49b933d1156d5873cbb4ffbf6fc82cf4782271a","modified":1724210179782},{"_id":"source/_posts/android-opengl-es-and-EGL.md","hash":"904ac57a83722c8a138ad731c78f9cd2d2fd56fd","modified":1724210179782},{"_id":"source/_posts/android-arch-intro.md","hash":"64d0db72b5ddf82845bbe0d5cb4350ff97751fa6","modified":1724210179780},{"_id":"source/_posts/dart-event-loop.md","hash":"d58093ea2617b22d76f265fc4754bcb85e401033","modified":1724210179783},{"_id":"source/_posts/egl-1-4-quick-reference-card.md","hash":"c37e8640c54c9f2d762f9e47fab37c18b0c13480","modified":1724210179784},{"_id":"source/_posts/flutter-livedata.md","hash":"7f3f518f38c50ff808fa6d644c69ab20b18d6531","modified":1724210179784},{"_id":"source/_posts/dart-thread-model.md","hash":"a7a6176ac77678e5a672999148aa0a288db9c874","modified":1724210179783},{"_id":"source/_posts/diy-code.md","hash":"9102829873e172411c32f118230445ed1582ce58","modified":1724210179783},{"_id":"source/_posts/go-home.md","hash":"6b4b6a4fcaea50be4baabb949653a3b283a31a5a","modified":1724210179785},{"_id":"source/_posts/last-dance.md","hash":"a7b2068cbbbcece68f1f0b010c7c3a88803191b7","modified":1724210179785},{"_id":"source/_posts/flutter-localizations.md","hash":"2fadba3981cb85c4e993e45c289f557fae004e01","modified":1724210179784},{"_id":"source/_posts/mac-practices.md","hash":"bf04017a227fcfccc2bd1aa00601bab988beb1b9","modified":1724210179786},{"_id":"source/_posts/gif-bytes-format.md","hash":"9bebb75518782395572d11fe5511e4befdfb406b","modified":1724210179784},{"_id":"source/_posts/tcpip-overview.md","hash":"f4056edd4b1d00533dc6cc712c1c4ead64ea9e05","modified":1724210179786},{"_id":"source/_posts/git-intro.md","hash":"d93b08a57cfc35487b63b4263e053e51295a34d8","modified":1724210179785},{"_id":"source/_posts/tiktok-app.md","hash":"89d6b13b5698dc9c2281b43cf4e4f13c367539e3","modified":1724210179786},{"_id":"source/_posts/living-optimize.md","hash":"bcb3b6a32c879889a0e714aa9a157b5cc71189f0","modified":1724210179786},{"_id":"source/_posts/upload-jcenter.md","hash":"325f00d0be684b61aa7207cbe5ca48cb0e3008aa","modified":1724210179787},{"_id":"source/_posts/welcome.md","hash":"dad895468de83a05e6cbc0434adfcd27c49a0d2a","modified":1724210179787},{"_id":"source/_posts/xiangsuhua20160806.md","hash":"62c00f2efb593f795703e2033acfbc00d3c4d32d","modified":1724210179787},{"_id":"source/music/file/lrc/bushuo.lrc","hash":"ba7b9a89898a0e52c8537a0d0800016c375a61ce","modified":1724210179807},{"_id":"source/_posts/last-dance/lastdance.lrc","hash":"ad992a5264b4351678f45308f87ad26f7351755e","modified":1724210179786},{"_id":"source/music/file/lrc/goodbye.lrc","hash":"84000fe7591e49bd2290f5ddc93bd9cbb80625b1","modified":1724210179807},{"_id":"source/tags/index.md","hash":"9fa172a570d213cc680dd777344a9abe742257ef","modified":1724210179810},{"_id":"source/music/file/lrc/jiandan.lrc","hash":"10252f2f6ae51c45b666d0df3ced905a2f47a345","modified":1724210179807},{"_id":"source/music/file/lrc/mengnalisha.lrc","hash":"35a877bb0f3b926d3c45bde9d79296a4a54936c6","modified":1724210179808},{"_id":"source/music/file/lrc/kanjian.lrc","hash":"df1e654842c3b16eee1de299df503aa7a3969792","modified":1724210179808},{"_id":"source/music/file/lrc/mingbai.lrc","hash":"5d7285e462b4cfd356322801c2e98d3e92596011","modified":1724210179808},{"_id":"source/music/file/lrc/lastdance.lrc","hash":"ad992a5264b4351678f45308f87ad26f7351755e","modified":1724210179808},{"_id":"source/music/file/lrc/sanbuqu.lrc","hash":"4fefff0b83fae016b9f04dc2abdb42c28e0586b6","modified":1724210179809},{"_id":"source/music/file/lrc/niujiaojian.lrc","hash":"1849878ed067894c730cb1f547c8fc7436cab900","modified":1724210179808},{"_id":"source/music/file/lrc/sheng_ru_xia_hua.lrc","hash":"2cd7eac794584f9f17d71d244217f106103f11f7","modified":1724210179809},{"_id":"source/music/file/lrc/zaishushangchangge.lrc","hash":"f2d4de02d8be368cd0503b0ce89ddbd2659a38b9","modified":1724210179809},{"_id":"source/_posts/jvm-preview.md","hash":"5b6b84f1f6bb554a83a4750d36a46dcb8d1db94e","modified":1724210179785},{"_id":"source/music/file/lrc/xinqiang.lrc","hash":"dda601b580c816012005f1c525b67049c41439d4","modified":1724210179809},{"_id":"source/img/archive_banner.jpg","hash":"8aba5eac9728e07052257b5638c4e98c75bd7b3d","modified":1724210179797},{"_id":"themes/next/.editorconfig","hash":"8570735a8d8d034a3a175afd1dd40b39140b3e6a","modified":1724210423738},{"_id":"themes/next/.gitattributes","hash":"ec43734985e1cafd53d88ded3020103f7416123c","modified":1724210423738},{"_id":"themes/next/_vendors.yml","hash":"3907151d0f181d5be0b4778b4f930015296c475a","modified":1724210423753},{"_id":"themes/next/.gitignore","hash":"417520c4dbbeab9c7e3ab10d944da0886366a0ee","modified":1724210423751},{"_id":"themes/next/.stylelintrc","hash":"9346cca6a24256a79f433670da634e8329f9a2a9","modified":1724210423752},{"_id":"themes/next/LICENSE.md","hash":"68fc9a03d50fd4b5ea97092b05967d1819dea2c4","modified":1724210423752},{"_id":"themes/next/package.json","hash":"655accf88e80dfdd525042da1d65114b47dcb52a","modified":1724210423777},{"_id":"themes/next/crowdin.yml","hash":"e026078448c77dcdd9ef50256bb6635a8f83dca6","modified":1724210423753},{"_id":"themes/next/renovate.json","hash":"cb29cc16e61b0b8a6dac34657d76822ae29ad5aa","modified":1724210423777},{"_id":"themes/next/README.md","hash":"20d3aab17b7d9b7ab537800a5ee932af8438664a","modified":1724210423752},{"_id":"themes/next/eslint.config.js","hash":"14b5636ce297048ea6835f7db4b1e4cf625a2c79","modified":1724210423756},{"_id":"themes/next/.githooks/install.js","hash":"0977cb57c8b91ea166b5bbc481e4ddeaf77e9b18","modified":1724210423738},{"_id":"themes/next/.githooks/pre-commit","hash":"f473eac1aaaa96c947d67988bbed140bbab1a821","modified":1724209301136},{"_id":"themes/next/.github/CODE_OF_CONDUCT.md","hash":"e78ec4eb6ce49a44ec321c49424ee0a0c1846537","modified":1724210423738},{"_id":"themes/next/.github/config.yml","hash":"7984e665e9de481a0e0e51fca5668337713f810b","modified":1724210423746},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"330656d93b6c03df9fb1f2f0e3534c971969473b","modified":1724210423739},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"2296426023773991b0c48c7fffeb790baca59b19","modified":1724210423745},{"_id":"themes/next/.github/issue_label_bot.yaml","hash":"fca600ddef6f80c5e61aeed21722d191e5606e5b","modified":1724210423746},{"_id":"themes/next/.github/label-commenter-config.yml","hash":"22d7dd8661cb2f22ff271ee96e444457814c66fd","modified":1724210423747},{"_id":"themes/next/.github/release.yml","hash":"112310b81f959747f8eaafc2ca2150e1dcf916d8","modified":1724210423747},{"_id":"themes/next/.github/labeler.yml","hash":"b7f67daa031c535940be82ea96f0fb9db59e1022","modified":1724210423747},{"_id":"themes/next/_config.yml","hash":"df15ee5204757684b0c22877d3cf4e8ba7d3686d","modified":1724210423753},{"_id":"themes/next/docs/AGPL3.md","hash":"0d2b8c5fa8a614723be0767cc3bca39c49578036","modified":1724210423754},{"_id":"themes/next/docs/LICENSE.txt","hash":"f5b14f791b7cfa1d16da981d929152e088a5d1b8","modified":1724210423754},{"_id":"themes/next/languages/README.md","hash":"b2567e32805dda79601157351a07e5ca9fe01315","modified":1724210423756},{"_id":"themes/next/languages/ar.yml","hash":"7d0f39e8684284a04bb9808521c87fecda8bd131","modified":1724210423756},{"_id":"themes/next/languages/de.yml","hash":"79b37df731c29665dee6cd7c90d278e1edfb6e24","modified":1724210423757},{"_id":"themes/next/languages/eo.yml","hash":"e34bb33ae827bf2f0727088599a73bc64bdad1b0","modified":1724210423757},{"_id":"themes/next/docs/AUTHORS.md","hash":"a648823121563c34a177ae91f5a774b5e29f01a0","modified":1724210423754},{"_id":"themes/next/languages/en.yml","hash":"ba0fd79a2b1d8db01a034180556061745965ff05","modified":1724210423757},{"_id":"themes/next/languages/default.yml","hash":"ba0fd79a2b1d8db01a034180556061745965ff05","modified":1724210423757},{"_id":"themes/next/languages/fa.yml","hash":"f3ffc444599f4ac92d62e9ed00a1490ebc277d70","modified":1724210423758},{"_id":"themes/next/languages/es.yml","hash":"dffc63ef42e1266b88e0acf08994fd17a9908d53","modified":1724210423758},{"_id":"themes/next/languages/bn.yml","hash":"564bed75da6e05b11dce6164508f97a15e2fb6c2","modified":1724210423757},{"_id":"themes/next/languages/ja.yml","hash":"543222bfc516aab6c33e8534f807972ecb8943a9","modified":1724210423759},{"_id":"themes/next/languages/ko.yml","hash":"d345a303310c8a5f4836c3683f3580f861ebd1b4","modified":1724210423759},{"_id":"themes/next/languages/nl.yml","hash":"3cb3687696635ec71b4ca40c5fc43b56acc8843e","modified":1724210423759},{"_id":"themes/next/languages/fr.yml","hash":"8ac44e58f71a38b7697a2f7f98a6971ed818cb5b","modified":1724210423758},{"_id":"themes/next/languages/id.yml","hash":"929df147f4f17d638b07de5fe52ca13e2549ab1c","modified":1724210423758},{"_id":"themes/next/languages/it.yml","hash":"16d716ecfd748def2f6486ef5a82d0ab7ceb4890","modified":1724210423758},{"_id":"themes/next/languages/tr.yml","hash":"a57e4ed089b893a95f5e1ecff17ce625165f4d46","modified":1724210423760},{"_id":"themes/next/languages/pt-BR.yml","hash":"76b8576ce228d540a16b1f0af5af2cce20923194","modified":1724210423759},{"_id":"themes/next/languages/vi.yml","hash":"7ebcba5e1128784195e4681dffc9d34c4e873fec","modified":1724210423761},{"_id":"themes/next/languages/ru.yml","hash":"c6d8de0ff7d8148d09993257cfd3b7aca755696c","modified":1724210423760},{"_id":"themes/next/languages/zh-CN.yml","hash":"741d7efe0262c9cdc2c648014b55599665d90f6b","modified":1724210423761},{"_id":"themes/next/languages/th.yml","hash":"6829e998b39f8f143e20b276bb1f62d95a29de58","modified":1724210423760},{"_id":"themes/next/languages/zh-TW.yml","hash":"4695c87d6b81b3a23d16ad6513d9eaa925f8d8ad","modified":1724210423761},{"_id":"themes/next/languages/pt.yml","hash":"70de366e10ea584ba039d40d6b35ac97f93454ad","modified":1724210423759},{"_id":"themes/next/languages/uk.yml","hash":"ff537047b4b4c3ca9a7b64fa7f428a9942751eeb","modified":1724210423761},{"_id":"themes/next/languages/zh-HK.yml","hash":"88ea50eeb9097ab4a87a44981a102d8594feb064","modified":1724210423761},{"_id":"themes/next/layout/_layout.njk","hash":"fc0a45112f2dcfc2642404e8934ea32a793c3bd7","modified":1724210423762},{"_id":"themes/next/languages/si.yml","hash":"2d712eedf3f60d04d36c3108cf5a12e2a52e875c","modified":1724210423760},{"_id":"themes/next/layout/archive.njk","hash":"d759f4d2cf5ddc6875ea250113a00662c1caf6d1","modified":1724210423775},{"_id":"themes/next/layout/category.njk","hash":"c68b7343d0f8145010f93351908cc36ef6212ec1","modified":1724210423776},{"_id":"themes/next/layout/index.njk","hash":"dd63e488ae8cc144335a5958acedf6a16edd7a92","modified":1724210423776},{"_id":"themes/next/languages/tk.yml","hash":"511726054873f6f8d7ce0d2e803f6731de0ddbe7","modified":1724210423760},{"_id":"themes/next/layout/tag.njk","hash":"9e16ba20c28a7f2c6bc75aa427f48122301a30aa","modified":1724210423776},{"_id":"themes/next/layout/post.njk","hash":"0bfce9f133f501a9a4837257e3b862b3bbca15be","modified":1724210423776},{"_id":"themes/next/.github/ISSUE_TEMPLATE/bug-report.yml","hash":"3f19cbf0c2b2fee6bf3788870b842c9ccc1425ca","modified":1724210423743},{"_id":"themes/next/.github/ISSUE_TEMPLATE/feature-request.yml","hash":"fbc3062cd4591c8329fab9db72803746f0d11920","modified":1724210423744},{"_id":"themes/next/test/index.js","hash":"6bf0289846538be3e9a63809af98f00e1fbdd90b","modified":1724210423812},{"_id":"themes/next/.github/workflows/codeql.yml","hash":"70a8975c47f4334ebcdd4e543b940346940054d6","modified":1724210423748},{"_id":"themes/next/layout/page.njk","hash":"af6d7570621be760536c216a56d74e40a1cceae2","modified":1724210423776},{"_id":"themes/next/.github/ISSUE_TEMPLATE/config.yml","hash":"c40ae7903b6cc99f94c9d45ac7ba8c2850bb1309","modified":1724210423744},{"_id":"themes/next/.github/workflows/label-commenter.yml","hash":"44eb8b9706b31a4917cacddde2b3aca4ff82955b","modified":1724210423750},{"_id":"themes/next/.github/workflows/labeler.yml","hash":"48e6e1e1406705379112766f4fd8388e1c53b281","modified":1724210423751},{"_id":"themes/next/.github/workflows/tester.yml","hash":"9a8c366c8a0bf0e0b92035fedd93e8979adaa560","modified":1724210423751},{"_id":"themes/next/.github/ISSUE_TEMPLATE/other.yml","hash":"10eca518b91a19984f6a5a912d41222042f61d63","modified":1724210423745},{"_id":"themes/next/.github/workflows/linter.yml","hash":"1d3d8fe53e9350e35d8349a19f65664789665e54","modified":1724210423751},{"_id":"themes/next/.github/workflows/lock.yml","hash":"275650a678684523f37187d0532f96aa0f49ce00","modified":1724210423751},{"_id":"themes/next/docs/zh-CN/README.md","hash":"287f57dbdfd23341800a0ff310f3474272b9dcc8","modified":1724210423755},{"_id":"themes/next/docs/zh-CN/CONTRIBUTING.md","hash":"a089f7a8368ab0b7d7b9b7ec0ac3767a453435df","modified":1724210423755},{"_id":"themes/next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"12a6631617695504d5cf2a94b57d87bd331bef6f","modified":1724210423755},{"_id":"themes/next/layout/_macro/post.njk","hash":"952449064fcb6a5cefc281b585f9149809f857f1","modified":1724210423762},{"_id":"themes/next/layout/_macro/sidebar.njk","hash":"547c62ab14d9e05d2d9116db9048a677fbe1fb6d","modified":1724210423762},{"_id":"themes/next/layout/_partials/comments.njk","hash":"d0c470b0f6690aa217e9ada848c5e2e73fb27c6f","modified":1724210423763},{"_id":"themes/next/docs/ru/README.md","hash":"0be2d7a75ffc3d9a963cf89a13bd1b50579f8304","modified":1724210423755},{"_id":"themes/next/layout/_partials/footer.njk","hash":"fbf8232cacf0df87e88e74860be66c9f86018302","modified":1724210423763},{"_id":"themes/next/layout/_partials/languages.njk","hash":"e43f22198cccb5f6e306b1ce0d28d12a4fb891f8","modified":1724210423765},{"_id":"themes/next/layout/_partials/pagination.njk","hash":"bc719473ed5948ab6859449d60b8d36cfc1542b4","modified":1724210423766},{"_id":"themes/next/layout/_partials/widgets.njk","hash":"d83fb59f02c5e6630a7770401a05c02f6f07358b","modified":1724210423768},{"_id":"themes/next/layout/_macro/post-collapse.njk","hash":"313637fe3569f98fd926e8cd0fcc75d098eb6e6e","modified":1724210423762},{"_id":"themes/next/layout/_scripts/index.njk","hash":"51704a2eadb0d363762ebf2e44994696e0843e40","modified":1724210423768},{"_id":"themes/next/layout/_scripts/vendors.njk","hash":"be80b9fe415a9a09d74c28e230995fd292dfc123","modified":1724210423768},{"_id":"themes/next/layout/_third-party/addtoany.njk","hash":"ef64c6bfb8540cd874701236b9be47db2496e98e","modified":1724210423769},{"_id":"themes/next/layout/_third-party/fancybox.njk","hash":"844559f46e2ff1c8be234d5763703106e2072a7b","modified":1724210423772},{"_id":"themes/next/scripts/filters/default-injects.js","hash":"872f01cb10e422a648ea505436532e776e92926b","modified":1724210423780},{"_id":"themes/next/scripts/filters/locals.js","hash":"9eb5310664759931287dd28ea39165dfb67f12ed","modified":1724210423780},{"_id":"themes/next/scripts/filters/minify.js","hash":"2063aaa1db448ebcf7b0fdbbc54d3991a368bbd3","modified":1724210423780},{"_id":"themes/next/scripts/events/index.js","hash":"bd9ea82376cd87df611ea3ae077875c7c595a3df","modified":1724210423777},{"_id":"themes/next/scripts/helpers/engine.js","hash":"049b1a0b66563e39f68710bb576a8c7342ae749c","modified":1724210423781},{"_id":"themes/next/scripts/helpers/font.js","hash":"3394185a7f0393c16ce52c8028f90da3e9239c55","modified":1724210423781},{"_id":"themes/next/layout/_third-party/quicklink.njk","hash":"0efed71ed530447718c4ea5bbd5fc8695b0b0d5f","modified":1724210423773},{"_id":"themes/next/scripts/helpers/next-config.js","hash":"25bb3ec3c7c456aa1d1650eb139605b7df7394eb","modified":1724210423781},{"_id":"themes/next/layout/_third-party/index.njk","hash":"dfd7cdd6ba89f8c3deabc27726c7a350cadafd11","modified":1724210423772},{"_id":"themes/next/scripts/filters/post.js","hash":"fdc8a0af90035e89c3fcb754a0eb189b8951a2bc","modified":1724210423781},{"_id":"themes/next/scripts/helpers/next-vendors.js","hash":"af3946a595f997eb43d9af87428e4898c9acbc82","modified":1724210423782},{"_id":"themes/next/scripts/helpers/next-paginator.js","hash":"e86c764b546e4fbb87970cabc4135a56f9ef9fe1","modified":1724210423782},{"_id":"themes/next/layout/_third-party/pace.njk","hash":"d7ad5714079f7f65446f880baf14722435ca9061","modified":1724210423773},{"_id":"themes/next/scripts/tags/button.js","hash":"c6ad2ed544fbb25ecb5d820c36e76302504271b7","modified":1724210423782},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"92c19d796bdb3320df9caea59bf52df7a95d9da9","modified":1724210423782},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"f57f7e09eb6220f681fa8385082b0960502ce5c4","modified":1724210423783},{"_id":"themes/next/scripts/tags/caniuse.js","hash":"935a311142a409c1896b3ae3f01fe7a9e2db1134","modified":1724210423782},{"_id":"themes/next/scripts/tags/note.js","hash":"7b94ddb46b7d4b0fe815f2fbe4bd375f07f55363","modified":1724210423783},{"_id":"themes/next/scripts/tags/index.js","hash":"1f6aba7820f1fb58b61969485148db21846e1aa9","modified":1724210423783},{"_id":"themes/next/scripts/tags/pdf.js","hash":"344636b6fd7e27e8831c1e194039afc0d61931cd","modified":1724210423784},{"_id":"themes/next/scripts/tags/label.js","hash":"8a73348186113bae0a51ea2f891c1bb882fab05a","modified":1724210423783},{"_id":"themes/next/scripts/tags/mermaid.js","hash":"7d7bbc4a9970bd4c5449bc71b94364a8ec61e5d2","modified":1724210423783},{"_id":"themes/next/scripts/tags/tabs.js","hash":"0eabe51da40b4b13e16419c8fe02452d9a4fef73","modified":1724210423784},{"_id":"themes/next/scripts/helpers/next-url.js","hash":"6281d47c1de98eb38f3aa0f6df29bbb19d412173","modified":1724210423782},{"_id":"themes/next/scripts/tags/video.js","hash":"2ee926448583be8f95af1f2884ae2c9c4830151d","modified":1724210423784},{"_id":"themes/next/scripts/helpers/navigation.js","hash":"78107021101553c3d23e89290f7530b60cf4aa86","modified":1724210423781},{"_id":"themes/next/scripts/tags/link-grid.js","hash":"18a483c2d5afd701f6080ffdddf2d1321370336c","modified":1724210423783},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1724210423803},{"_id":"themes/next/source/images/avatar.gif","hash":"2dbc3e2f2d624b2ca1afe6edc2ca17307f1950c8","modified":1724210423803},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1724210423803},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1724210423803},{"_id":"themes/next/source/images/logo-algolia-nebula-blue-full.svg","hash":"a38c6d92b368bfc42c72ad799ad03f3274957065","modified":1724210423804},{"_id":"themes/next/scripts/tags/wavedrom.js","hash":"b44dfeeb58b41945d469141787f3dbce4b117d08","modified":1724210423784},{"_id":"themes/next/source/images/logo.svg","hash":"099e11ab995a2c8981427a85476d082609848c77","modified":1724210423804},{"_id":"themes/next/source/js/bookmark.js","hash":"9ba4cceafd12c6d5ba8a6b986a046ef8319a7811","modified":1724210423804},{"_id":"themes/next/source/js/comments.js","hash":"66ae2e26ea36a41b72c638ea8b220296638ae952","modified":1724210423804},{"_id":"themes/next/source/js/motion.js","hash":"3864e56a829b698b98ec8d93b8916271ba6fd015","modified":1724210423805},{"_id":"themes/next/source/js/next-boot.js","hash":"8e2d589585f5270ee90285d3e65b69923c7629d8","modified":1724210423805},{"_id":"themes/next/source/js/comments-buttons.js","hash":"1a7344440321713426a0b2ab17e276b5bdf85ade","modified":1724210423804},{"_id":"themes/next/source/js/pjax.js","hash":"0996078604f356a4f6692b9b0838038b3b10aa8a","modified":1724210423805},{"_id":"themes/next/source/js/schedule.js","hash":"a1333258726caf84f368a8f8454639c7dc1626bb","modified":1724210423806},{"_id":"themes/next/source/js/sidebar.js","hash":"2ee359ae48273b01ba1e0768704524e08702c7eb","modified":1724210423806},{"_id":"themes/next/test/helpers/font.js","hash":"342ef3c6fd2dcca2a8802a516ed6d7f389fd2ca2","modified":1724210423811},{"_id":"themes/next/test/helpers/index.js","hash":"63ba28afed697f7b3574436b1133b8ecc9c0c357","modified":1724210423811},{"_id":"themes/next/source/js/utils.js","hash":"b2c0fd95770e58c25c9f99e1d66fe0e625e3cdab","modified":1724210423811},{"_id":"themes/next/test/helpers/next-url.js","hash":"90092dc7e78100bc1ebd1f8ffe4d1543f48e76a8","modified":1724210423812},{"_id":"themes/next/source/js/config.js","hash":"4c4ebbe3b3f3841a26f9d5af6d0ba8bc6da01c54","modified":1724210423805},{"_id":"themes/next/test/tags/button.js","hash":"48f2aa4c513e9e24bd6a811410520b74cd7ea88b","modified":1724210423812},{"_id":"themes/next/test/tags/caniuse.js","hash":"aa5e728445caeaf7c2ccd0f3fcb2cad0c93ca6d1","modified":1724210423812},{"_id":"themes/next/source/css/_colors.styl","hash":"3c6798c10cc220d83481cb3f3782e78558cee789","modified":1724210423784},{"_id":"themes/next/source/css/_mixins.styl","hash":"bbeae369eaba9a2565fc359a5b79184d21bdd167","modified":1724210423798},{"_id":"themes/next/test/tags/center-quote.js","hash":"7667342fd1a1417eaf6a254012b84ae40e8d13dd","modified":1724210423812},{"_id":"themes/next/test/tags/index.js","hash":"e8779e54f0979b221858f8bb74dd081bb503b910","modified":1724210423813},{"_id":"themes/next/test/tags/group-pictures.js","hash":"5c68ae0184f9da6e00ba199f2554d503d8e6da71","modified":1724210423813},{"_id":"themes/next/source/css/noscript.styl","hash":"dadc81256afb127b77eac6763d5ee0ec9c77f0a3","modified":1724210423803},{"_id":"themes/next/test/tags/mermaid.js","hash":"ea8e28bb5219417bddb97c5685a7f705ee2c8a80","modified":1724210423813},{"_id":"themes/next/test/tags/label.js","hash":"4ebf3698c258ca978b997acbdd0dece44069c09d","modified":1724210423813},{"_id":"themes/next/test/tags/link-grid.js","hash":"43d298fafb7c45a874b766d443843bd26346e689","modified":1724210423813},{"_id":"themes/next/test/tags/pdf.js","hash":"fd6ea5123560a90f7e7c1eface23dbe1455db25f","modified":1724210423814},{"_id":"themes/next/test/tags/video.js","hash":"b796fc4dceb20a30e730c322bb5474c0162464cc","modified":1724210423814},{"_id":"themes/next/test/tags/tabs.js","hash":"d63722919f9da2e44d6b952801e10a2915ea9c12","modified":1724210423814},{"_id":"themes/next/test/tags/note.js","hash":"3dcfcd65bf9f326972ea7571fdb1444200f5d07e","modified":1724210423813},{"_id":"themes/next/test/validate/index.js","hash":"5a95ccc8598667535bd022e988055c0e019f3670","modified":1724210423814},{"_id":"themes/next/layout/_partials/header/brand.njk","hash":"dd9c4c03e99dfde0dfb8edefcb2c933f2f560efc","modified":1724210423764},{"_id":"themes/next/layout/_partials/header/index.njk","hash":"650de421a8ce4cf685428ffbe0087ff84cbd1356","modified":1724210423764},{"_id":"themes/next/layout/_partials/head/head.njk","hash":"5388b157bba4a40b9312f4a45c6678974ccf0837","modified":1724210423763},{"_id":"themes/next/layout/_partials/header/menu-item.njk","hash":"41a8b0cc16f60fa085cb719d07216d86b6bc4bf8","modified":1724210423764},{"_id":"themes/next/layout/_partials/head/head-unique.njk","hash":"8da52a144060db1a0a088ccb2e6cc8376d1fce70","modified":1724210423763},{"_id":"themes/next/layout/_partials/header/menu.njk","hash":"ee6fc2f111572d3eeab0a2fecbb2d6b3e37ab26b","modified":1724210423764},{"_id":"themes/next/layout/_partials/post/post-copyright.njk","hash":"bfff923526d6800218f08dba6ce0bbf5c17755fd","modified":1724210423766},{"_id":"themes/next/layout/_partials/post/post-followme.njk","hash":"c1e33b4889f75acc490af3c8bde0ec56c518ff41","modified":1724210423766},{"_id":"themes/next/layout/_partials/post/post-meta.njk","hash":"9fa47e4fb342811da590ee4adc91cf81118c0a39","modified":1724210423767},{"_id":"themes/next/source/css/main.styl","hash":"921a58577f411cf4eb5cfd66db0a241f8f88578c","modified":1724210423803},{"_id":"themes/next/layout/_partials/header/sub-menu.njk","hash":"06480d8ec5f0b87eafd47f082f07968d7282dd5c","modified":1724210423764},{"_id":"themes/next/layout/_partials/post/post-related.njk","hash":"e0986db00a0201dd3c60570f964829c84ba5bc68","modified":1724210423767},{"_id":"themes/next/layout/_partials/page/page-header.njk","hash":"7ed4f102a1825195cff8d7995bf9219f323a9034","modified":1724210423765},{"_id":"themes/next/layout/_partials/page/categories.njk","hash":"17156d99941f28a225951ffdcfa9a115e20dc2d2","modified":1724210423765},{"_id":"themes/next/layout/_partials/page/breadcrumb.njk","hash":"89825e75cc45e9709fa6ba89883669eedaff6f46","modified":1724210423765},{"_id":"themes/next/layout/_partials/post/post-share.njk","hash":"16696990e4ce65fc8db18c4635082a5d5d06ff07","modified":1724210423767},{"_id":"themes/next/layout/_partials/sidebar/site-overview.njk","hash":"bc5708e38b6070dff0cab6bf9480971017ce4dda","modified":1724210423768},{"_id":"themes/next/layout/_partials/page/tags.njk","hash":"a18d1598e36cc72f2b0b24c3cc3c5990dfaa3254","modified":1724210423766},{"_id":"themes/next/layout/_partials/page/schedule.njk","hash":"0f4bc8e257da60f77c0c1738607b2bde55810684","modified":1724210423766},{"_id":"themes/next/layout/_partials/search/index.njk","hash":"6ad43135bd3aecf933ffdd750763e27ade36f97c","modified":1724210423768},{"_id":"themes/next/layout/_third-party/analytics/cloudflare.njk","hash":"a5b8297c2c383124dd6a56e256ecc0c0dcf489be","modified":1724210423769},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.njk","hash":"d89066ff53879693f023e540d59c86137172c529","modified":1724210423769},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.njk","hash":"6215309aee028dcb734452beec448c5afb6c63fc","modified":1724210423769},{"_id":"themes/next/layout/_partials/post/post-reward.njk","hash":"e8b8a7c41e9ec612d0c0c73419529d55d1c16256","modified":1724210423767},{"_id":"themes/next/layout/_third-party/analytics/matomo.njk","hash":"4e89648a8ec8194c5823064cbca39c938a799006","modified":1724210423770},{"_id":"themes/next/layout/_third-party/analytics/growingio.njk","hash":"8afaa772c390bd9d53a5cff9645ac3168334eb98","modified":1724210423769},{"_id":"themes/next/layout/_third-party/analytics/index.njk","hash":"f900306497b133e8b098bd9f4b96b93d1d96c185","modified":1724210423770},{"_id":"themes/next/layout/_third-party/analytics/plausible.njk","hash":"ef9f2bb7110507f1c4336800af9157d5fa9765bd","modified":1724210423770},{"_id":"themes/next/layout/_third-party/analytics/umami.njk","hash":"3343750682fbd8535e50f8129be3003ad26015b4","modified":1724210423770},{"_id":"themes/next/layout/_third-party/comments/changyan.njk","hash":"d1c950f8fbdf85e7a3eae5463767a89e858e8220","modified":1724210423771},{"_id":"themes/next/layout/_third-party/chat/tidio.njk","hash":"02aab857c27fc103216029be991688b12a73a525","modified":1724210423771},{"_id":"themes/next/layout/_third-party/chat/chatra.njk","hash":"d7263fca16d0278ccf1f6aa1c6df6902a6344a09","modified":1724210423771},{"_id":"themes/next/layout/_third-party/comments/disqus.njk","hash":"9375b19a89b7fa9474e558d085af5448d4c5c50c","modified":1724210423771},{"_id":"themes/next/layout/_third-party/analytics/microsoft-clarity.njk","hash":"9dc00fcb0a05899f048eace9f9160b78956655d5","modified":1724210423770},{"_id":"themes/next/layout/_third-party/comments/livere.njk","hash":"3b13b09fba84ec6000886890a6710736a2b8fafe","modified":1724210423772},{"_id":"themes/next/layout/_third-party/comments/utterances.njk","hash":"5a94032bc3512a10ad4328fc19ec07b819a1d687","modified":1724210423772},{"_id":"themes/next/layout/_third-party/comments/isso.njk","hash":"64cc3bdaf644fd32c0d0a247f29f5b6904da9af3","modified":1724210423772},{"_id":"themes/next/layout/_third-party/math/index.njk","hash":"abf37fc55aa86702118e8fdf5bf2d389dd589aa0","modified":1724210423773},{"_id":"themes/next/layout/_third-party/math/katex.njk","hash":"1ebf658690468ea197bdd0416eb7cfa4bd0b083a","modified":1724210423773},{"_id":"themes/next/scripts/events/lib/config.js","hash":"9ec51eb61f7fee612ffc5252f489003a0fa301fc","modified":1724210423777},{"_id":"themes/next/scripts/events/lib/navigation.js","hash":"dd3562686d95a50375e6fd32e717ccb0d99c1e3d","modified":1724210423778},{"_id":"themes/next/layout/_third-party/math/mathjax.njk","hash":"3677017fd4572b158311f5f5d870590ab25184e0","modified":1724210423773},{"_id":"themes/next/scripts/events/lib/highlight.js","hash":"8a8f752260be5b8098393f9879b61ffe904465e8","modified":1724210423777},{"_id":"themes/next/scripts/events/lib/utils.js","hash":"5942feb3f31ed3480bf50b0f5a4a305b5bdca3d6","modified":1724210423778},{"_id":"themes/next/scripts/events/lib/vendors.js","hash":"e2b4a9d6b08155735ec336eedc506763d5671821","modified":1724210423778},{"_id":"themes/next/layout/_third-party/comments/disqusjs.njk","hash":"0749cb6902baecdfd01f779a2a2513f6d2f6a823","modified":1724210423771},{"_id":"themes/next/layout/_third-party/search/localsearch.njk","hash":"e45ea3542cdc9ed7ec8447b5e6f35df4c5e82758","modified":1724210423774},{"_id":"themes/next/layout/_third-party/tags/pdf.njk","hash":"2c81984cc4f5123103460442f6e046f5b6c97127","modified":1724210423775},{"_id":"themes/next/layout/_third-party/search/algolia-search.njk","hash":"41b28f05e6233fb37700f7151f55868be10a0965","modified":1724210423774},{"_id":"themes/next/layout/_third-party/statistics/firestore.njk","hash":"d32ebe94560fa95824478ebbff531bffc47b194d","modified":1724210423774},{"_id":"themes/next/layout/_third-party/tags/wavedrom.njk","hash":"02202bf563fb5eedde2ccad4d6c5b9109d30a703","modified":1724210423775},{"_id":"themes/next/layout/_third-party/tags/mermaid.njk","hash":"099e031f52fb8e47b3af5b2684737efc9e643ee7","modified":1724210423775},{"_id":"themes/next/layout/_third-party/comments/gitalk.njk","hash":"b63b7e2ede0d3e66e732fa1a06bda9b19e1e85d4","modified":1724210423772},{"_id":"themes/next/scripts/filters/comment/changyan.js","hash":"5798cfc8f63665031dd3e01debed051628cec319","modified":1724210423778},{"_id":"themes/next/scripts/filters/comment/common.js","hash":"19a402a225c31edffc50f202a14e0d582d3db23e","modified":1724210423778},{"_id":"themes/next/scripts/events/lib/injects.js","hash":"d987709267a1bc6e5014411e9983d7c49c102c16","modified":1724210423777},{"_id":"themes/next/scripts/filters/comment/default-config.js","hash":"93ee5f9109dad885dc38c49bcee630c10f9dce6e","modified":1724210423779},{"_id":"themes/next/scripts/filters/comment/disqusjs.js","hash":"a600a98e7436edeb31e291abca359885567df3c9","modified":1724210423779},{"_id":"themes/next/layout/_third-party/statistics/busuanzi-counter.njk","hash":"a4bc501da0f22f7e420f0ca47e83988ce90b1368","modified":1724210423774},{"_id":"themes/next/scripts/filters/comment/disqus.js","hash":"7f71d6b271ba65ff333d5682e7575711d368c0d2","modified":1724210423779},{"_id":"themes/next/scripts/filters/comment/isso.js","hash":"ff8b5b5145220a17d0ecd9508ba9bd2d3b2da47d","modified":1724210423779},{"_id":"themes/next/scripts/filters/comment/livere.js","hash":"5a07d8bb52bc1d51a624ca8db54be144566c306b","modified":1724210423780},{"_id":"themes/next/scripts/filters/comment/utterances.js","hash":"d3bded697bc32dace689d2a6dfb6eb7514169d15","modified":1724210423780},{"_id":"themes/next/scripts/filters/comment/gitalk.js","hash":"7bb7dafdd7f6bca8464b54e17e552ce7f1714195","modified":1724210423779},{"_id":"themes/next/layout/_third-party/statistics/lean-analytics.njk","hash":"2446e748cdc102c78492216319ac02148db7daf6","modified":1724210423775},{"_id":"themes/next/source/js/third-party/fancybox.js","hash":"819f382c561fe5ec23c67cc5fabd63dd1cc22dc1","modified":1724210423808},{"_id":"themes/next/source/js/third-party/addtoany.js","hash":"5276c8f78ee562a8965216dc67d762e59cb4a9f2","modified":1724210423806},{"_id":"themes/next/layout/_third-party/statistics/index.njk","hash":"568ddf7955d11d93fb5e842b403a7ac8b1b7fdb1","modified":1724210423774},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"96e0a7c2a65ce68215e17e369085b2ea2f1334f2","modified":1724210423802},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"2c800eaab6c613e5d091be2111aaa786641aa0c2","modified":1724210423802},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"20d5c6aa136bbb55e03906d98ee90ad3fbaa80a7","modified":1724210423802},{"_id":"themes/next/source/js/third-party/pace.js","hash":"0ef04218b93561ba4d0ff420d556c3d90a756d32","modified":1724210423809},{"_id":"themes/next/source/js/third-party/quicklink.js","hash":"eed02e6fced8e5a653077205d4d4d7834ca71472","modified":1724210423809},{"_id":"themes/next/source/css/_variables/base.styl","hash":"8b4100f316e9924f2410802615107130588d721e","modified":1724210423802},{"_id":"themes/next/source/js/third-party/analytics/matomo.js","hash":"c6a25b26a1443caa70b47fd3dfa282271574deb5","modified":1724210423807},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"879b49f693af0c04c285b2dd0c9cccaf77347b7c","modified":1724210423802},{"_id":"themes/next/source/js/third-party/analytics/baidu-analytics.js","hash":"f629acc46ff40c071ffd31b77d5c7616f0fdd778","modified":1724210423806},{"_id":"themes/next/source/js/third-party/math/katex.js","hash":"83c54ee536e487a1031783443fe0cb63b1b4767e","modified":1724210423809},{"_id":"themes/next/source/js/third-party/math/mathjax.js","hash":"5c749b9c1c3bb738122d0516211ecff6496d4907","modified":1724210423809},{"_id":"themes/next/source/js/third-party/chat/tidio.js","hash":"b0079f6a4601e06ca6fe46e83a2f5af553e9bc3c","modified":1724210423807},{"_id":"themes/next/source/js/third-party/comments/changyan.js","hash":"260d1a77d6a3bb33a579d3e4cca1997003e799b5","modified":1724210423807},{"_id":"themes/next/source/js/third-party/comments/disqusjs.js","hash":"1e826dea3f684c0515f362dc1352447a1f0eae71","modified":1724210423807},{"_id":"themes/next/source/js/third-party/chat/chatra.js","hash":"c32180522788c10e51df1803aa6842ef0432ddc9","modified":1724210423807},{"_id":"themes/next/source/js/third-party/comments/livere.js","hash":"2247d88c934c765c43013337860774aaa99f0b31","modified":1724210423808},{"_id":"themes/next/source/js/third-party/comments/gitalk.js","hash":"0ec038cf83e8ec067534f16a54041e47a3c1e59a","modified":1724210423808},{"_id":"themes/next/source/js/third-party/comments/disqus.js","hash":"da361917d65e5dca8362f8cdeb6c8cc0e8316cec","modified":1724210423807},{"_id":"themes/next/source/js/third-party/comments/utterances.js","hash":"f67f90eb03e284c82da2b8cf2f1e31801813c16d","modified":1724210423808},{"_id":"themes/next/source/js/third-party/comments/isso.js","hash":"753a873b6f566aff5ba77ca23f91b78eb880ca64","modified":1724210423808},{"_id":"themes/next/source/js/third-party/search/local-search.js","hash":"81a24bd19554b5bd148975026db64338d8710774","modified":1724210423810},{"_id":"themes/next/source/js/third-party/tags/pdf.js","hash":"af78c22f0e61c8c8aa8794e585e0d632c6d4fcb8","modified":1724210423811},{"_id":"themes/next/source/js/third-party/tags/mermaid.js","hash":"1d1b6d847215b16f26b230859d7e16501190ecc0","modified":1724210423810},{"_id":"themes/next/source/js/third-party/tags/wavedrom.js","hash":"40dcd10df6edf124088c329346e0cc0bdac74ef1","modified":1724210423811},{"_id":"themes/next/source/js/third-party/statistics/lean-analytics.js","hash":"835cbf54c49ef1327f47df70ff2636ad36b6f57d","modified":1724210423810},{"_id":"themes/next/source/js/third-party/statistics/firestore.js","hash":"6e0682bb42170d61b13b786295f45f9c785f8b73","modified":1724210423810},{"_id":"themes/next/source/js/third-party/search/algolia-search.js","hash":"35401af771f43dc633dd99a92ebf5295cd0b158a","modified":1724210423810},{"_id":"themes/next/source/js/third-party/analytics/growingio.js","hash":"78dd3cf04082b7dbe6246e404b2aa8e726922402","modified":1724210423806},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"b8445c828d78a38e2de50bdc86b3bff66285ea0f","modified":1724210423785},{"_id":"themes/next/source/css/_common/components/index.styl","hash":"2298e521253b3bf376a2412271bc2a7d305051f3","modified":1724210423785},{"_id":"themes/next/source/css/_common/outline/index.styl","hash":"8e34df131830d4fa3725e4590a672ba1cf1903e5","modified":1724210423792},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"d0a7c99095f490b0d2ed6b1be43d435960798cec","modified":1724210423794},{"_id":"themes/next/source/css/_common/components/reading-progress.styl","hash":"90a86045a33c1bae49fc2f6fa1e1b53170c7f77b","modified":1724210423788},{"_id":"themes/next/source/js/third-party/analytics/google-analytics.js","hash":"def07bcc7c17d8a0caad177fb1dd2f3a5e5b3536","modified":1724210423806},{"_id":"themes/next/source/css/_common/scaffolding/buttons.styl","hash":"a042571d85ff7265f799004239a45f36b716b8a6","modified":1724210423794},{"_id":"themes/next/source/css/_common/outline/mobile.styl","hash":"1dbf2c339adcd27026c3a2ded32ee91ce08cea26","modified":1724210423792},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"e840b23d33023e6d45e018f6e84b683dd56efd8d","modified":1724210423796},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"b56367ea676ea8e8783ea89cd4ab150c7da7a060","modified":1724210423795},{"_id":"themes/next/source/css/_common/scaffolding/toggles.styl","hash":"69c66aab4651e2e7ae9e65f08600144970648c60","modified":1724210423798},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"9dfe853c901bdc52fc950bacdf15484dbb9bf140","modified":1724210423798},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"dafc6d23c80d6fe3e55a7711e94210d2479b629a","modified":1724210423798},{"_id":"themes/next/source/css/_common/scaffolding/comments.styl","hash":"e4fecc889ba3317a64e9abba5842c79dff9b7827","modified":1724210423794},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"f23c53e32d140091b819be2603d1afbbb5d66933","modified":1724210423799},{"_id":"themes/next/source/css/_common/scaffolding/index.styl","hash":"523fb7b653b87ae37fc91fc8813e4ffad87b0d7e","modified":1724210423795},{"_id":"themes/next/source/css/_schemes/Mist/_layout.styl","hash":"fa4fd8f76464e214fb7318f325b13c2b62f4b478","modified":1724210423799},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"ab16a3dcdc0393b9b582ef59dcc13db9320e917c","modified":1724210423799},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expand.styl","hash":"485d23ccb42c0d0c8ead7ea8930dd3e06d79a285","modified":1724210423799},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"e31f6adbb22a451f07e4661cff9a2f12e4e99a36","modified":1724210423800},{"_id":"themes/next/source/css/_schemes/Muse/_sidebar.styl","hash":"c29a827e82d2820ed8977c92994da73721200fac","modified":1724210423800},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"6569a6640f79d247a8235b3914772c0e2f99ead2","modified":1724210423800},{"_id":"themes/next/source/css/_schemes/Muse/_sub-menu.styl","hash":"c48ccd8d6651fe1a01faff8f01179456d39ba9b1","modified":1724210423800},{"_id":"themes/next/source/css/_schemes/Pisces/_header.styl","hash":"dc03835e42d82eaf2633cf3b627990ad3e1f5967","modified":1724210423801},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"6ad168288b213cec357e9b5a97674ff2ef3a910c","modified":1724210423800},{"_id":"themes/next/source/css/_common/scaffolding/pagination.styl","hash":"f4228c759db4a650c8d38745c2edd1dc83c45687","modified":1724210423795},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"a92c4eb16bdb7806079467eb022ccf193bb0f794","modified":1724210423801},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"778ed2ad5643b93970c95626b325defeb586733f","modified":1724210423801},{"_id":"themes/next/source/css/_schemes/Muse/_header.styl","hash":"3fbfab591f280e2e7f3b0265901c93bc4bd137ed","modified":1724210423799},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"bc0b1b8312ec2e076c802419d603e382a1c32232","modified":1724210423801},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"8000075b227749a7495eaf417cac6ccfbe441580","modified":1724210423801},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"8afdc311c6b8db121758371f95cf1c5e77354f42","modified":1724210423785},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"51a97a33879289904cb523ddc2d88b5b0c60fa72","modified":1724210423785},{"_id":"themes/next/source/css/_common/components/post/index.styl","hash":"098d4bd034e986fcf7e443eac4fc2193935461b7","modified":1724210423786},{"_id":"themes/next/source/css/_common/components/pages/tag-cloud.styl","hash":"1a81d1a71fcf0699629ce6e72dfd0a15f3a2dd0a","modified":1724210423786},{"_id":"themes/next/source/css/_common/components/pages/index.styl","hash":"7504dbc5c70262b048143b2c37d2b5aa2809afa2","modified":1724210423786},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"6b816c2511242ee503fb5f34cd3e4dcdafc06b85","modified":1724210423786},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"809bab3414b1eb1ae44444eb821126868f764414","modified":1724210423787},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"aa366d37389760c8595529b850f461569577a1c5","modified":1724210423787},{"_id":"themes/next/source/css/_common/components/post/post-header.styl","hash":"1191f1bfa5c43e54be8e5b3cc0d802984e161747","modified":1724210423787},{"_id":"themes/next/source/css/_common/components/post/post-followme.styl","hash":"1ecfd64507954810b07a9d21fb5305b5378feda0","modified":1724210423787},{"_id":"themes/next/source/css/_common/components/post/post-body.styl","hash":"56d5b7ff73f466c9ae54f7204ae899281295d749","modified":1724210423786},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"ebfba158a0a4af3d1dabcacbc58986664de52140","modified":1724210423788},{"_id":"themes/next/source/css/_common/components/third-party/gitalk.styl","hash":"8f094c4ac17e2ab45569b12d157747f9c7333c12","modified":1724210423789},{"_id":"themes/next/source/css/_common/components/third-party/index.styl","hash":"54d12e2c5d9982f7b9e5b23be5133954a8514e9d","modified":1724210423789},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"9ac6f477177264c26a46e8333b8456720a0444dc","modified":1724210423788},{"_id":"themes/next/source/css/_common/components/third-party/math.styl","hash":"9d995eb4871a6c273d9d51558676a1fdabf69e72","modified":1724210423789},{"_id":"themes/next/source/css/_common/components/post/post-footer.styl","hash":"11497388f124bfbb4001495a67d3629a9f618405","modified":1724210423787},{"_id":"themes/next/source/css/_common/components/third-party/utterances.styl","hash":"56d90ae0559caa55b75f3c300ff2711f9ed65fc4","modified":1724210423790},{"_id":"themes/next/source/css/_common/components/third-party/disqusjs.styl","hash":"877a537d5b95beb048142e4fdee6f17e6ef9c7bb","modified":1724210423788},{"_id":"themes/next/source/css/_common/outline/header/bookmark.styl","hash":"e74f4bb47a101b014ee2a1783c87f3b87323f9a0","modified":1724210423790},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"549541d3a62d296427426fde8976289cb7ee2cc4","modified":1724210423801},{"_id":"themes/next/source/css/_common/outline/header/index.styl","hash":"6e0d0796ef7fbbb62ffdfb448753a850de82c74f","modified":1724210423791},{"_id":"themes/next/source/css/_common/outline/header/github-banner.styl","hash":"38c64c2d04e46848382bfa246a0e9c508294767b","modified":1724210423791},{"_id":"themes/next/source/css/_common/outline/footer/index.styl","hash":"4e967702cf4c637132346bc74ec8854426f1a68c","modified":1724210423790},{"_id":"themes/next/source/css/_common/components/third-party/search.styl","hash":"be60b8dacd4dc9d2b1b68982dc4f0c5325b9a315","modified":1724210423789},{"_id":"themes/next/source/css/_common/outline/header/menu.styl","hash":"a3dd3edea9c01b66b28a8367185269b9dcc3bdee","modified":1724210423791},{"_id":"themes/next/source/css/_common/outline/header/site-meta.styl","hash":"a851e9d5aefcd027c95eeb323860b6da70f202d1","modified":1724210423791},{"_id":"themes/next/source/css/_common/outline/sidebar/index.styl","hash":"0944dc38b11e89b472a17607ef049393f2a0439f","modified":1724210423792},{"_id":"themes/next/source/css/_common/outline/header/site-nav.styl","hash":"bf3ad8b4268f763a1e26377681644887694bc009","modified":1724210423791},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"46eece42510c2c89bb9209afb0262ad76a4b0b36","modified":1724210423793},{"_id":"themes/next/source/css/_common/outline/sidebar/related-posts.styl","hash":"b05908f04ef95f2d91e6eba89b12411c378d050f","modified":1724210423792},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"b47fb36915962309553ff7fb1782341585ed2b76","modified":1724210423788},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"5b38ac4a0f1ade0e681aff0e3366c481d9cf3dcd","modified":1724210423793},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"c6a27beb3f741211a14576026f3b4cfc44cc6407","modified":1724210423793},{"_id":"themes/next/source/css/_common/outline/sidebar/site-state.styl","hash":"26dd0adfcb1db6df29c6090c8d7e9b5a43583fb0","modified":1724210423794},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"24752d145c6fb8f5344dca9c7b9640839c02e009","modified":1724210423793},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"c2e354a565c8c1b32bd0ceacc972b17982758b67","modified":1724210423793},{"_id":"themes/next/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"f634f94828620e88c3f5a8db56f7944f6ba232b0","modified":1724210423794},{"_id":"themes/next/source/css/_common/scaffolding/highlight/fold.styl","hash":"42a0b65491ad85438596b3fe0b7f23973e4cef34","modified":1724210423795},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"0847400d8579b0a2dd1bf662c78954c10adf2680","modified":1724210423792},{"_id":"themes/next/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"393ff96234e4196b569d4b11496774eb78e147de","modified":1724210423796},{"_id":"themes/next/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"d6418fd2bbfba7b73ddf11ec62db9637fdf5d8af","modified":1724210423796},{"_id":"themes/next/source/css/_common/scaffolding/tags/index.styl","hash":"22cd37bd5df9972d5074710896aba4424ad5161c","modified":1724210423796},{"_id":"themes/next/source/css/_common/scaffolding/highlight/index.styl","hash":"138f78147bc6bd6005f329ada34dc79b7625542d","modified":1724210423795},{"_id":"themes/next/source/css/_common/scaffolding/tags/label.styl","hash":"debee14539272fbe3835a7d3853af2230baa3501","modified":1724210423796},{"_id":"themes/next/source/css/_common/scaffolding/tags/link-grid.styl","hash":"7f8a7345e6537a62cd9e9a94c8f7065b541d9b04","modified":1724210423796},{"_id":"themes/next/source/css/_common/scaffolding/tags/note.styl","hash":"98d4c20aff0f0fcfe1824017fb06ab21ef0d218e","modified":1724210423797},{"_id":"themes/next/source/css/_common/scaffolding/tags/mermaid.styl","hash":"48d35dba575a7c9e8845b16652e76b7d4a4646de","modified":1724210423797},{"_id":"themes/next/source/css/_common/scaffolding/tags/tabs.styl","hash":"33dd6ad015dde65fd46f34961655442e8e82b52e","modified":1724210423797},{"_id":"themes/next/source/css/_common/scaffolding/tags/wavedrom.styl","hash":"af113411ad9cca7674177be36af8dd399680834d","modified":1724210423797},{"_id":"themes/next/source/css/_common/scaffolding/tags/pdf.styl","hash":"b6654a1d7cf82577d8263faffee8af3ad4a5c0e8","modified":1724210423797},{"_id":"source/img/post.jpg","hash":"8869367a07479aff08fdc629124ab376a7e8ca62","modified":1724210179806},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"741566d6ac5f852b5c8dee6a8996b65e48e7c97f","modified":1724210423793},{"_id":"source/img/index.jpg","hash":"d1e4ed73d52410957799b7b1603345d6ce499588","modified":1724210179803},{"_id":"source/img/link_banner.jpg","hash":"b0230744c9962fea562a614925d89693deba6280","modified":1724210179805},{"_id":"source/img/about.jpg","hash":"b5350edcc0cb23276de6a863c9f98915d8f98f3d","modified":1724210179796},{"_id":"public/404/index.html","hash":"dfc48467c09711a0eb8dc0a65e64e47262b4b837","modified":1724214242865},{"_id":"public/bookmark/index.html","hash":"ffb9b14b548c1935f2383cf921932f620e4c5bc5","modified":1724214242865},{"_id":"public/link/index.html","hash":"734a73ce763626be295d2397404aa32a89b18f66","modified":1724214242865},{"_id":"public/music/index.html","hash":"b93f171913c30095e9d64e7f29a4dbdaff6e88c0","modified":1724214242865},{"_id":"public/tags/index.html","hash":"b92029fe799bc6d65110ae2ab93dc0babf4ac650","modified":1724214242865},{"_id":"public/2022/04/16/android-player/index.html","hash":"a260757bacbface2130919de9f83497bf65035d2","modified":1724214242865},{"_id":"public/2022/01/10/Educational-experience-1/index.html","hash":"24e750ccefe49e78c36cd2e41245605e7d47b28f","modified":1724214242865},{"_id":"public/2022/01/10/Educational-experience-2/index.html","hash":"fb3ee5842ac407275f78b21cd908583113d11c9a","modified":1724214242865},{"_id":"public/2022/01/20/array-list-in-c/index.html","hash":"f8f24a2a809c83a03d07a67117febb2c59fed960","modified":1724214242865},{"_id":"public/2021/01/21/egl-1-4-quick-reference-card/index.html","hash":"cc43db4828b3f57095ead37ca73c687b376db12b","modified":1724214242865},{"_id":"public/2021/01/21/android-opengl-es-and-EGL/index.html","hash":"5788192a9ffd1884b0f4e93537547d475b3aea65","modified":1724214242865},{"_id":"public/2021/01/27/android-opengl-es-triangle/index.html","hash":"1c157ae743abe362e3e24ce976d6fea80c991e5a","modified":1724214242865},{"_id":"public/2021/01/20/android-glsurfaceview-overview/index.html","hash":"2f98f70878dad594672a9cf2ae0f94c251fab760","modified":1724214242865},{"_id":"public/2020/07/13/living-optimize/index.html","hash":"2f53c9437f24afc642654ecbf6845a80483b9731","modified":1724214242865},{"_id":"public/2020/09/12/tiktok-app/index.html","hash":"dcffa64b4cf341d386899fa947dc6829bc714a08","modified":1724214242865},{"_id":"public/2020/03/30/android-opengl-02/index.html","hash":"affdbcdb37c938b4241457586a8145f4a607ef56","modified":1724214242865},{"_id":"public/2020/03/27/android-opengl-01/index.html","hash":"79cf8484c654c947490abfe9ac9ac77cd187923a","modified":1724214242865},{"_id":"public/2020/03/23/last-dance/index.html","hash":"ba45992e4dfc8eb61161a1711970329ca961abbe","modified":1724214242865},{"_id":"public/2020/01/31/go-home/index.html","hash":"edc70c5a29c2c1e8c1c5fc301b9ac47ced27e6dc","modified":1724214242865},{"_id":"public/2020/09/23/tcpip-overview/index.html","hash":"e0d8e4392f812a179dbc7cc3b5bbcc05d667fe28","modified":1724214242865},{"_id":"public/2018/03/06/flutter-localizations/index.html","hash":"d6d01a9dcf53dfc36c17714f5ecfbd6dcdf9ab48","modified":1724214242865},{"_id":"public/2019/09/11/flutter-livedata/index.html","hash":"9677a66257c8c1a56f6d15001e46439275e95908","modified":1724214242865},{"_id":"public/2017/12/07/jvm-preview/index.html","hash":"76ca01a0cabb62c516361af924873ff707cf6da8","modified":1724214242865},{"_id":"public/2017/11/17/GIF-and-LWZ/index.html","hash":"81c6c51930b7cbd7bec63578e941595827c5ed54","modified":1724214242865},{"_id":"public/2017/11/15/gif-bytes-format/index.html","hash":"659d15e4842bd80b745d74b232ff8fcbe7c1a514","modified":1724214242865},{"_id":"public/2017/11/03/git-intro/index.html","hash":"da703fbcac8e8c6a70d66532e58a2af5b0c7fe6c","modified":1724214242865},{"_id":"public/2017/06/12/diy-code/index.html","hash":"fb035f8d6198bc223bb84bbeee63032c14a5af65","modified":1724214242865},{"_id":"public/2017/05/23/android-arch-intro/index.html","hash":"10d49c1a0bf2ae01ce9b22adbc0093613c40fb16","modified":1724214242865},{"_id":"public/2017/05/22/android-arch-room/index.html","hash":"df06e7db47a730ab0c061e6d264bd8328d7977b2","modified":1724214242865},{"_id":"public/2017/05/22/android-arch-viewmodel/index.html","hash":"9e958545587b081691f82216abf89b51163e554a","modified":1724214242865},{"_id":"public/2017/05/21/andrdoi-arch-livedata/index.html","hash":"8abf3937d018df33943d354f1106a5a76a61940c","modified":1724214242865},{"_id":"public/2017/05/19/android-arch-lifecycle/index.html","hash":"be01120d905b47706f496ebadde15d0c070bf98b","modified":1724214242865},{"_id":"public/2016/08/17/dart-thread-model/index.html","hash":"8246f22e7fdb135fadafa9b297c992d6498865eb","modified":1724214242865},{"_id":"public/2016/08/12/upload-jcenter/index.html","hash":"3fd436bb88fd060ebbeb477001215e3bc6812739","modified":1724214242865},{"_id":"public/2016/08/06/xiangsuhua20160806/index.html","hash":"946b6ca498e1cf16a209f6d564d6e2e22c47aefa","modified":1724214242865},{"_id":"public/2016/04/26/dart-event-loop/index.html","hash":"ae684e2a53c18c4ebeffbaf1ad28081fc6fa7349","modified":1724214242865},{"_id":"public/2016/02/25/mac-practices/index.html","hash":"cdff3d46c575bb1a6d8253ed1b319eeab60b5159","modified":1724214242865},{"_id":"public/2016/01/03/welcome/index.html","hash":"5a52cc343a5871278e616095ccf81d43cd8f7c62","modified":1724214242865},{"_id":"public/archives/index.html","hash":"3c7bda64d5ddb8d27edf15d7c7ab2c5a94cc776a","modified":1724214242865},{"_id":"public/archives/page/2/index.html","hash":"744ea248028c073d559ca6aefe5cbf10e667b07f","modified":1724214242865},{"_id":"public/archives/page/3/index.html","hash":"12bd89c5e89a09d0b4f03bab43e91807a4fda051","modified":1724214242865},{"_id":"public/archives/page/4/index.html","hash":"8342ab1d53b92a5013ff3d4aa3558315c67fd023","modified":1724214242865},{"_id":"public/archives/2016/index.html","hash":"8fc15634d41b36dedd1ce044fb0b68c7b60960b8","modified":1724214242865},{"_id":"public/archives/2016/01/index.html","hash":"2b643067b60f93f2b9b14602ee2edd5cecc5b528","modified":1724214242865},{"_id":"public/archives/2016/02/index.html","hash":"c43f22ff5f87235dfb6654a5b5767ac82f72b25d","modified":1724214242865},{"_id":"public/archives/2016/04/index.html","hash":"64c99ec0e047945fea939ec8e615cab6cbbd9738","modified":1724214242865},{"_id":"public/archives/2016/08/index.html","hash":"fc880af71a80b56f75f89f970049af2bfe638d3c","modified":1724214242865},{"_id":"public/archives/2017/index.html","hash":"f77299f1034507ab0284b15bf1572c71107da8d2","modified":1724214242865},{"_id":"public/archives/2017/05/index.html","hash":"16c2a90551283eab2e05dca273f639c5af2df9d5","modified":1724214242865},{"_id":"public/archives/2017/06/index.html","hash":"0c69752521f2004e51cb8125efe19cd28da350c6","modified":1724214242865},{"_id":"public/archives/2017/11/index.html","hash":"ec97de9eec138c39d20c668fe16599f5a669781a","modified":1724214242865},{"_id":"public/archives/2017/12/index.html","hash":"0dc537e9431f025e836d9a36f3099498407779bb","modified":1724214242865},{"_id":"public/archives/2018/index.html","hash":"5bbc937b7cb43fd8533601081f133a2f748daa90","modified":1724214242865},{"_id":"public/archives/2018/03/index.html","hash":"401e9855bac1348ac2a554831d74d1734a680019","modified":1724214242865},{"_id":"public/archives/2019/index.html","hash":"f248f4ec96ecf1deb93485c9b407840d5dcf5171","modified":1724214242865},{"_id":"public/archives/2019/09/index.html","hash":"79261979f27a07e76de82c47c6810d29f73cefd7","modified":1724214242865},{"_id":"public/archives/2020/index.html","hash":"0571f8d147f2a6d1910bee8ff62438a684edd3bf","modified":1724214242865},{"_id":"public/archives/2020/01/index.html","hash":"669a786eec4963b378319e8cb252c51b90f77dfb","modified":1724214242865},{"_id":"public/archives/2020/03/index.html","hash":"a4367f7bbf6efac84d546cf756de32384a4785cf","modified":1724214242865},{"_id":"public/archives/2020/07/index.html","hash":"6d8dccac23d749f1ec621f0a85eb9a1b71fbeb21","modified":1724214242865},{"_id":"public/archives/2020/09/index.html","hash":"ced973568b08584016114a6b94432302f139d021","modified":1724214242865},{"_id":"public/archives/2021/index.html","hash":"f4fd15b0a4a3b4afd7f5af566edc86639ffa9594","modified":1724214242865},{"_id":"public/archives/2021/01/index.html","hash":"5450c8f483dbb47480c547bf968781667d074033","modified":1724214242865},{"_id":"public/archives/2022/index.html","hash":"4bf606cd826de5b11a76b726f28aa5fe6a5e0bee","modified":1724214242865},{"_id":"public/archives/2022/01/index.html","hash":"8aab8e309c931e8b52ac274bec736768e67ef008","modified":1724214242865},{"_id":"public/archives/2022/04/index.html","hash":"c477e35a85149754f715c868807aa8012d0bc36f","modified":1724214242865},{"_id":"public/index.html","hash":"64e8f0243cd41a3980ad884db7026e5a9db49366","modified":1724214242865},{"_id":"public/page/2/index.html","hash":"936b1b73815a9c0b323e7c0b5daf03aa00cb3e1b","modified":1724214242865},{"_id":"public/page/3/index.html","hash":"8f4f6142d3768f30e968bf795b3c28562b11527e","modified":1724214242865},{"_id":"public/page/4/index.html","hash":"c3010bc250c0bf7d506c2797173842afa76fb917","modified":1724214242865},{"_id":"public/tags//index.html","hash":"012551054a0044d16931ae2ce23e2f8999299be9","modified":1724214242865},{"_id":"public/tags//index.html","hash":"90a73d52af8f45dbe1c553e1a05bb1b16ae2b144","modified":1724214242865},{"_id":"public/tags//index.html","hash":"999cbfa4f3f4fa4bf97543e9473a4b43e59332e1","modified":1724214242865},{"_id":"public/tags/android/index.html","hash":"99d0966dc7397841fcea0a1c5fdee32b8825c75b","modified":1724214242865},{"_id":"public/tags/android/page/2/index.html","hash":"fc3cc5404bbc436043e9af37b6152c3060bebe24","modified":1724214242865},{"_id":"public/tags/opengl/index.html","hash":"f1a1f133c6f5a94fe3cb6aced00885f5177a4cd7","modified":1724214242865},{"_id":"public/tags/OpenGL-ES/index.html","hash":"c49fa3ec92cb3df4d515886d842bc575c3d3c988","modified":1724214242865},{"_id":"public/tags/EGL/index.html","hash":"57c6321308b6cae1aed9bfdcc6526d5a16c64555","modified":1724214242865},{"_id":"public/tags/player/index.html","hash":"5650b07d616a74f7de21d51877a35052da7e288f","modified":1724214242865},{"_id":"public/tags/C/index.html","hash":"b8146c78201c29ef1bba59cbf77deee89eff7f45","modified":1724214242865},{"_id":"public/tags/Dart/index.html","hash":"4b65fb304f63e155cffc68edbf69294facd645d4","modified":1724214242865},{"_id":"public/tags/dart/index.html","hash":"577b9267205d5d2bf568de6a393ac4ec325d222a","modified":1724214242865},{"_id":"public/tags/flutter/index.html","hash":"061dfee663849fdcaf5779e9099aae6be4c69984","modified":1724214242865},{"_id":"public/tags/java/index.html","hash":"c9ec23bf7ef1b8061a4c80875feaee9b470cac09","modified":1724214242865},{"_id":"public/tags//index.html","hash":"5914ebff3839b20dfe69f9ef3e303eb3f6c27496","modified":1724214242865},{"_id":"public/tags//index.html","hash":"4e9c6532f58cb591838cc23e8834f1e0e2ac1785","modified":1724214242865},{"_id":"public/tags//index.html","hash":"cfd9aeb074748fa09750ebc477ee41f7b40468af","modified":1724214242865},{"_id":"public/tags//index.html","hash":"e95c808985820e4c808aac1484b1dbfc10003ad6","modified":1724214242865},{"_id":"public/tags//index.html","hash":"fa3b68166d0e7b8b675dc91798e5ace955195616","modified":1724214242865},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1724214242865},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1724214242865},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1724214242865},{"_id":"public/images/logo-algolia-nebula-blue-full.svg","hash":"a38c6d92b368bfc42c72ad799ad03f3274957065","modified":1724214242865},{"_id":"public/images/logo.svg","hash":"099e11ab995a2c8981427a85476d082609848c77","modified":1724214242865},{"_id":"public/CNAME","hash":"4822c6d40c444124c5a1166a3efcb540bd8b2aac","modified":1724214242865},{"_id":"public/images/avatar.gif","hash":"2dbc3e2f2d624b2ca1afe6edc2ca17307f1950c8","modified":1724214242865},{"_id":"public/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1724214242865},{"_id":"public/img/algolia.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1724214242865},{"_id":"public/img/avatar.jpg","hash":"e8528ffc7bf4c5e89e9e26efc3205e0280575c09","modified":1724214242865},{"_id":"public/img/favicon.ico","hash":"546668313d006a1bca09c7411c30f9a8a19abb03","modified":1724214242865},{"_id":"public/img/comment_bg.png","hash":"1adfc4ee925fb4f922c24d7774e7c46d940fe31b","modified":1724214242865},{"_id":"public/img/icp.png","hash":"cb1fd69b38ec23ce8366668ddffbbd0160de0104","modified":1724214242865},{"_id":"public/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1724214242865},{"_id":"public/img/post_loadding.svg","hash":"549c58cd09dbeefd573ce10646c49ded8bcc48ec","modified":1724214242865},{"_id":"public/img/loading.gif","hash":"5f0287fb8fb98872fe1998c6f781111819e71806","modified":1724214242865},{"_id":"public/music/file/lrc/bushuo.lrc","hash":"ba7b9a89898a0e52c8537a0d0800016c375a61ce","modified":1724214242865},{"_id":"public/music/file/lrc/goodbye.lrc","hash":"84000fe7591e49bd2290f5ddc93bd9cbb80625b1","modified":1724214242865},{"_id":"public/music/file/lrc/jiandan.lrc","hash":"10252f2f6ae51c45b666d0df3ced905a2f47a345","modified":1724214242865},{"_id":"public/music/file/lrc/kanjian.lrc","hash":"df1e654842c3b16eee1de299df503aa7a3969792","modified":1724214242865},{"_id":"public/music/file/lrc/mingbai.lrc","hash":"5d7285e462b4cfd356322801c2e98d3e92596011","modified":1724214242865},{"_id":"public/music/file/lrc/mengnalisha.lrc","hash":"35a877bb0f3b926d3c45bde9d79296a4a54936c6","modified":1724214242865},{"_id":"public/music/file/lrc/lastdance.lrc","hash":"ad992a5264b4351678f45308f87ad26f7351755e","modified":1724214242865},{"_id":"public/music/file/lrc/sheng_ru_xia_hua.lrc","hash":"2cd7eac794584f9f17d71d244217f106103f11f7","modified":1724214242865},{"_id":"public/music/file/lrc/sanbuqu.lrc","hash":"4fefff0b83fae016b9f04dc2abdb42c28e0586b6","modified":1724214242865},{"_id":"public/2020/03/23/last-dance/lastdance.lrc","hash":"ad992a5264b4351678f45308f87ad26f7351755e","modified":1724214242865},{"_id":"public/music/file/lrc/niujiaojian.lrc","hash":"1849878ed067894c730cb1f547c8fc7436cab900","modified":1724214242865},{"_id":"public/music/file/lrc/zaishushangchangge.lrc","hash":"f2d4de02d8be368cd0503b0ce89ddbd2659a38b9","modified":1724214242865},{"_id":"public/music/file/lrc/xinqiang.lrc","hash":"dda601b580c816012005f1c525b67049c41439d4","modified":1724214242865},{"_id":"public/live2dw/assets/assets/mtn/00_idle.mtn","hash":"b224c60e463b9f71ddbfc0c720e430496c175f4f","modified":1724214242865},{"_id":"public/live2dw/assets/assets/mtn/03.mtn","hash":"f900737c7a98441cbb2e05255427e6260e19ae68","modified":1724214242865},{"_id":"public/live2dw/assets/assets/mtn/02.mtn","hash":"7eafc52edc73b7cb80ae70d34b43c6ac778fa47b","modified":1724214242865},{"_id":"public/live2dw/assets/assets/mtn/01.mtn","hash":"fb550833ae22c9954c3e01df37ed29b2d61700f2","modified":1724214242865},{"_id":"public/live2dw/assets/assets/mtn/05.mtn","hash":"dd20ad24b5d1830a5d44b9bccb28f922eea5e0e5","modified":1724214242865},{"_id":"public/live2dw/assets/assets/mtn/06.mtn","hash":"ad404bd852d276cdd3d054c953e23f90e4e45ae1","modified":1724214242865},{"_id":"public/live2dw/assets/assets/mtn/07.mtn","hash":"b7f2e3a9fa4f3ffbb6e64a08f8d9f45ca1868ffb","modified":1724214242865},{"_id":"public/live2dw/assets/assets/mtn/08.mtn","hash":"4411c7651ff65195b113d95e7d5ebef8a59a37d9","modified":1724214242865},{"_id":"public/live2dw/assets/assets/tororo.model.json","hash":"3b96ea33460642d288c98327444966d93a0c11ba","modified":1724214242865},{"_id":"public/live2dw/lib/L2Dwidget.min.js","hash":"5f1a807437cc723bcadc3791d37add5ceed566a2","modified":1724214242865},{"_id":"public/live2dw/assets/assets/tororo.pose.json","hash":"81438bf69b32c7c11e311b4fe043730cdc7b7ec2","modified":1724214242865},{"_id":"public/live2dw/assets/assets/mtn/04.mtn","hash":"c7a25d3c5d783639bae18db2f3cd284b819c3c85","modified":1724214242865},{"_id":"public/live2dw/assets/package.json","hash":"d6e947dfce594bf81d97bf387a9d2c2d41d17f38","modified":1724214242865},{"_id":"public/assets/css/APlayer.min.css","hash":"07372a2ba507388d0fed166d761b1c2c2a659dce","modified":1724214242865},{"_id":"public/assets/js/Meting.min.js","hash":"a0585220b918d78649a7893279e1ec4fb5abe835","modified":1724214242865},{"_id":"public/assets/js/APlayer.min.js","hash":"22caa28ff6b41a16ff40f15d38f1739e22359478","modified":1724214242865},{"_id":"public/img/archive_banner.jpg","hash":"8aba5eac9728e07052257b5638c4e98c75bd7b3d","modified":1724214242865},{"_id":"public/js/comments.js","hash":"66ae2e26ea36a41b72c638ea8b220296638ae952","modified":1724214242865},{"_id":"public/js/comments-buttons.js","hash":"1a7344440321713426a0b2ab17e276b5bdf85ade","modified":1724214242865},{"_id":"public/js/next-boot.js","hash":"8e2d589585f5270ee90285d3e65b69923c7629d8","modified":1724214242865},{"_id":"public/js/config.js","hash":"4c4ebbe3b3f3841a26f9d5af6d0ba8bc6da01c54","modified":1724214242865},{"_id":"public/js/pjax.js","hash":"0996078604f356a4f6692b9b0838038b3b10aa8a","modified":1724214242865},{"_id":"public/js/motion.js","hash":"3864e56a829b698b98ec8d93b8916271ba6fd015","modified":1724214242865},{"_id":"public/js/sidebar.js","hash":"2ee359ae48273b01ba1e0768704524e08702c7eb","modified":1724214242865},{"_id":"public/js/schedule.js","hash":"a1333258726caf84f368a8f8454639c7dc1626bb","modified":1724214242865},{"_id":"public/js/utils.js","hash":"b2c0fd95770e58c25c9f99e1d66fe0e625e3cdab","modified":1724214242865},{"_id":"public/js/bookmark.js","hash":"9ba4cceafd12c6d5ba8a6b986a046ef8319a7811","modified":1724214242865},{"_id":"public/css/main.css","hash":"ccb97cce9ed1014f3afd48731667445a8c65028a","modified":1724214242865},{"_id":"public/css/noscript.css","hash":"4cd5301e478e0e0d4b176740ec314087ec5cb707","modified":1724214242865},{"_id":"public/js/third-party/fancybox.js","hash":"819f382c561fe5ec23c67cc5fabd63dd1cc22dc1","modified":1724214242865},{"_id":"public/js/third-party/pace.js","hash":"0ef04218b93561ba4d0ff420d556c3d90a756d32","modified":1724214242865},{"_id":"public/js/third-party/quicklink.js","hash":"eed02e6fced8e5a653077205d4d4d7834ca71472","modified":1724214242865},{"_id":"public/js/third-party/analytics/growingio.js","hash":"78dd3cf04082b7dbe6246e404b2aa8e726922402","modified":1724214242865},{"_id":"public/js/third-party/analytics/matomo.js","hash":"c6a25b26a1443caa70b47fd3dfa282271574deb5","modified":1724214242865},{"_id":"public/js/third-party/math/katex.js","hash":"83c54ee536e487a1031783443fe0cb63b1b4767e","modified":1724214242865},{"_id":"public/js/third-party/chat/chatra.js","hash":"c32180522788c10e51df1803aa6842ef0432ddc9","modified":1724214242865},{"_id":"public/js/third-party/math/mathjax.js","hash":"5c749b9c1c3bb738122d0516211ecff6496d4907","modified":1724214242865},{"_id":"public/js/third-party/addtoany.js","hash":"5276c8f78ee562a8965216dc67d762e59cb4a9f2","modified":1724214242865},{"_id":"public/js/third-party/analytics/baidu-analytics.js","hash":"f629acc46ff40c071ffd31b77d5c7616f0fdd778","modified":1724214242865},{"_id":"public/js/third-party/chat/tidio.js","hash":"b0079f6a4601e06ca6fe46e83a2f5af553e9bc3c","modified":1724214242865},{"_id":"public/js/third-party/comments/changyan.js","hash":"260d1a77d6a3bb33a579d3e4cca1997003e799b5","modified":1724214242865},{"_id":"public/js/third-party/comments/livere.js","hash":"2247d88c934c765c43013337860774aaa99f0b31","modified":1724214242865},{"_id":"public/js/third-party/comments/gitalk.js","hash":"0ec038cf83e8ec067534f16a54041e47a3c1e59a","modified":1724214242865},{"_id":"public/js/third-party/comments/utterances.js","hash":"f67f90eb03e284c82da2b8cf2f1e31801813c16d","modified":1724214242865},{"_id":"public/js/third-party/comments/disqusjs.js","hash":"1e826dea3f684c0515f362dc1352447a1f0eae71","modified":1724214242865},{"_id":"public/js/third-party/comments/isso.js","hash":"753a873b6f566aff5ba77ca23f91b78eb880ca64","modified":1724214242865},{"_id":"public/js/third-party/search/local-search.js","hash":"81a24bd19554b5bd148975026db64338d8710774","modified":1724214242865},{"_id":"public/js/third-party/search/algolia-search.js","hash":"35401af771f43dc633dd99a92ebf5295cd0b158a","modified":1724214242865},{"_id":"public/js/third-party/tags/pdf.js","hash":"af78c22f0e61c8c8aa8794e585e0d632c6d4fcb8","modified":1724214242865},{"_id":"public/js/third-party/comments/disqus.js","hash":"da361917d65e5dca8362f8cdeb6c8cc0e8316cec","modified":1724214242865},{"_id":"public/js/third-party/tags/mermaid.js","hash":"1d1b6d847215b16f26b230859d7e16501190ecc0","modified":1724214242865},{"_id":"public/js/third-party/statistics/lean-analytics.js","hash":"835cbf54c49ef1327f47df70ff2636ad36b6f57d","modified":1724214242865},{"_id":"public/js/third-party/statistics/firestore.js","hash":"6e0682bb42170d61b13b786295f45f9c785f8b73","modified":1724214242865},{"_id":"public/js/third-party/tags/wavedrom.js","hash":"40dcd10df6edf124088c329346e0cc0bdac74ef1","modified":1724214242865},{"_id":"public/js/third-party/analytics/google-analytics.js","hash":"def07bcc7c17d8a0caad177fb1dd2f3a5e5b3536","modified":1724214242865},{"_id":"public/live2dw/lib/L2Dwidget.min.js.map","hash":"3290fe2df45f065b51a1cd7b24ec325cbf9bb5ce","modified":1724214242865},{"_id":"public/img/post.jpg","hash":"8869367a07479aff08fdc629124ab376a7e8ca62","modified":1724214242865},{"_id":"public/live2dw/assets/assets/moc/tororo.moc","hash":"44289e62545a7046e0f5231103a851750b78524e","modified":1724214242865},{"_id":"public/live2dw/lib/L2Dwidget.0.min.js","hash":"35bb5b588b6de25c9be2dd51d3fd331feafac02d","modified":1724214242865},{"_id":"public/live2dw/assets/assets/moc/tororo.2048/texture_00.png","hash":"98af764b541083e87fc2f8e85f02d2db38c898cc","modified":1724214242865},{"_id":"public/img/index.jpg","hash":"d1e4ed73d52410957799b7b1603345d6ce499588","modified":1724214242865},{"_id":"public/img/link_banner.jpg","hash":"b0230744c9962fea562a614925d89693deba6280","modified":1724214242865},{"_id":"public/live2dw/lib/L2Dwidget.0.min.js.map","hash":"35e71cc2a130199efb167b9a06939576602f0d75","modified":1724214242865},{"_id":"public/img/about.jpg","hash":"b5350edcc0cb23276de6a863c9f98915d8f98f3d","modified":1724214242865}],"Category":[],"Data":[{"_id":"link","data":{"class":{"class_name":"","link_list":{"1":{"name":"xxx","link":"https://blog.xxx.com","avatar":"https://cdn.xxxxx.top/avatar.png","descr":"xxxxxxx"},"2":{"name":"xxxxxx","link":"https://www.xxxxxxcn/","avatar":"https://xxxxx/avatar.png","descr":"xxxxxxx"}}}}}],"Page":[{"title":"404","date":"2020-03-19T15:47:32.000Z","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\t<head>\n\t\t<meta charset=\"UTF-8\">\n\t\t<title>404</title>\n\t</head>\n\t<body>\n\t\t<script type=\"text/javascript\" \t\t\t  src=\"//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js\" charset=\"utf-8\"></script>\n\t</body>\n</html>","source":"404/index.md","raw":"---\ntitle: 404\ndate: 2020-03-19 23:47:32\n---\n<!DOCTYPE html>\n<html lang=\"en\">\n\t<head>\n\t\t<meta charset=\"UTF-8\">\n\t\t<title>404</title>\n\t</head>\n\t<body>\n\t\t<script type=\"text/javascript\" \t\t\t  src=\"//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js\" charset=\"utf-8\"></script>\n\t</body>\n</html>","updated":"2024-08-21T03:16:19.778Z","path":"404/index.html","comments":1,"layout":"page","_id":"cm03be2vj00005p6t25khes7w","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"UTF-8\">\n        <title>404</title>\n    </head>\n    <body>\n        <script type=\"text/javascript\"               src=\"//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js\" charset=\"utf-8\"></script>\n    </body>\n</html>","excerpt":"","more":"<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"UTF-8\">\n        <title>404</title>\n    </head>\n    <body>\n        <script type=\"text/javascript\"               src=\"//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js\" charset=\"utf-8\"></script>\n    </body>\n</html>"},{"title":"","date":"2020-03-22T15:38:14.000Z","_content":"\n# \n\n[github](https://github.com/)\n[ TUNA ](http://mirrors.tuna.tsinghua.edu.cn/)\n[](http://tool.oschina.net/hexconvert/)\n[Vuash ](http://www.vua.sh/)\n[jCenter](https://bintray.com/bintray/jcenter)\n[](https://portal.qiniu.com/)\n\n## Android\n[AndroidXRef](http://androidxref.com/)\n[Android Open Source Project](https://source.android.com/index.html)\n[Android Developers](http://developer.android.com/intl/zh-cn/index.html)\n\n## OpenGL\n[OpenGL Document](https://www.khronos.org/registry/OpenGL-Refpages/)\n[LearnOpenGL CN](https://learnopengl-cn.github.io/)\n[OpenGL-The Cherno](https://www.youtube.com/playlist?list=PLlrATfBNZ98foTJPJ_Ev03o2oq3-GGOS2)\n\n## EGL\n[EGL Document](https://www.khronos.org/registry/EGL/)\n[EGL 1.4 API Quick Reference Card](https://www.khronos.org/files/egl-1-4-quick-reference-card.pdf)\n\n## Flutter\n[flutter.dev](https://flutter.dev/)\n[Dart](https://www.dartlang.org/)\n[Pub](https://pub.dartlang.org/)\n\n## Git\n[Git Doc](https://git-scm.com/doc)\n\n\n# \n[UpLabs](http://www.uplabs.com/)","source":"bookmark/index.md","raw":"---\ntitle: \ndate: 2020-03-22 23:38:14\n---\n\n# \n\n[github](https://github.com/)\n[ TUNA ](http://mirrors.tuna.tsinghua.edu.cn/)\n[](http://tool.oschina.net/hexconvert/)\n[Vuash ](http://www.vua.sh/)\n[jCenter](https://bintray.com/bintray/jcenter)\n[](https://portal.qiniu.com/)\n\n## Android\n[AndroidXRef](http://androidxref.com/)\n[Android Open Source Project](https://source.android.com/index.html)\n[Android Developers](http://developer.android.com/intl/zh-cn/index.html)\n\n## OpenGL\n[OpenGL Document](https://www.khronos.org/registry/OpenGL-Refpages/)\n[LearnOpenGL CN](https://learnopengl-cn.github.io/)\n[OpenGL-The Cherno](https://www.youtube.com/playlist?list=PLlrATfBNZ98foTJPJ_Ev03o2oq3-GGOS2)\n\n## EGL\n[EGL Document](https://www.khronos.org/registry/EGL/)\n[EGL 1.4 API Quick Reference Card](https://www.khronos.org/files/egl-1-4-quick-reference-card.pdf)\n\n## Flutter\n[flutter.dev](https://flutter.dev/)\n[Dart](https://www.dartlang.org/)\n[Pub](https://pub.dartlang.org/)\n\n## Git\n[Git Doc](https://git-scm.com/doc)\n\n\n# \n[UpLabs](http://www.uplabs.com/)","updated":"2024-08-21T03:16:19.787Z","path":"bookmark/index.html","comments":1,"layout":"page","_id":"cm03be2vm00025p6t11wc7x18","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><a href=\"https://github.com/\">github</a><br><a href=\"http://mirrors.tuna.tsinghua.edu.cn/\"> TUNA </a><br><a href=\"http://tool.oschina.net/hexconvert/\"></a><br><a href=\"http://www.vua.sh/\">Vuash </a><br><a href=\"https://bintray.com/bintray/jcenter\">jCenter</a><br><a href=\"https://portal.qiniu.com/\"></a></p>\n<h2 id=\"Android\"><a href=\"#Android\" class=\"headerlink\" title=\"Android\"></a>Android</h2><p><a href=\"http://androidxref.com/\">AndroidXRef</a><br><a href=\"https://source.android.com/index.html\">Android Open Source Project</a><br><a href=\"http://developer.android.com/intl/zh-cn/index.html\">Android Developers</a></p>\n<h2 id=\"OpenGL\"><a href=\"#OpenGL\" class=\"headerlink\" title=\"OpenGL\"></a>OpenGL</h2><p><a href=\"https://www.khronos.org/registry/OpenGL-Refpages/\">OpenGL Document</a><br><a href=\"https://learnopengl-cn.github.io/\">LearnOpenGL CN</a><br><a href=\"https://www.youtube.com/playlist?list=PLlrATfBNZ98foTJPJ_Ev03o2oq3-GGOS2\">OpenGL-The Cherno</a></p>\n<h2 id=\"EGL\"><a href=\"#EGL\" class=\"headerlink\" title=\"EGL\"></a>EGL</h2><p><a href=\"https://www.khronos.org/registry/EGL/\">EGL Document</a><br><a href=\"https://www.khronos.org/files/egl-1-4-quick-reference-card.pdf\">EGL 1.4 API Quick Reference Card</a></p>\n<h2 id=\"Flutter\"><a href=\"#Flutter\" class=\"headerlink\" title=\"Flutter\"></a>Flutter</h2><p><a href=\"https://flutter.dev/\">flutter.dev</a><br><a href=\"https://www.dartlang.org/\">Dart</a><br><a href=\"https://pub.dartlang.org/\">Pub</a></p>\n<h2 id=\"Git\"><a href=\"#Git\" class=\"headerlink\" title=\"Git\"></a>Git</h2><p><a href=\"https://git-scm.com/doc\">Git Doc</a></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><a href=\"http://www.uplabs.com/\">UpLabs</a></p>\n","excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><a href=\"https://github.com/\">github</a><br><a href=\"http://mirrors.tuna.tsinghua.edu.cn/\"> TUNA </a><br><a href=\"http://tool.oschina.net/hexconvert/\"></a><br><a href=\"http://www.vua.sh/\">Vuash </a><br><a href=\"https://bintray.com/bintray/jcenter\">jCenter</a><br><a href=\"https://portal.qiniu.com/\"></a></p>\n<h2 id=\"Android\"><a href=\"#Android\" class=\"headerlink\" title=\"Android\"></a>Android</h2><p><a href=\"http://androidxref.com/\">AndroidXRef</a><br><a href=\"https://source.android.com/index.html\">Android Open Source Project</a><br><a href=\"http://developer.android.com/intl/zh-cn/index.html\">Android Developers</a></p>\n<h2 id=\"OpenGL\"><a href=\"#OpenGL\" class=\"headerlink\" title=\"OpenGL\"></a>OpenGL</h2><p><a href=\"https://www.khronos.org/registry/OpenGL-Refpages/\">OpenGL Document</a><br><a href=\"https://learnopengl-cn.github.io/\">LearnOpenGL CN</a><br><a href=\"https://www.youtube.com/playlist?list=PLlrATfBNZ98foTJPJ_Ev03o2oq3-GGOS2\">OpenGL-The Cherno</a></p>\n<h2 id=\"EGL\"><a href=\"#EGL\" class=\"headerlink\" title=\"EGL\"></a>EGL</h2><p><a href=\"https://www.khronos.org/registry/EGL/\">EGL Document</a><br><a href=\"https://www.khronos.org/files/egl-1-4-quick-reference-card.pdf\">EGL 1.4 API Quick Reference Card</a></p>\n<h2 id=\"Flutter\"><a href=\"#Flutter\" class=\"headerlink\" title=\"Flutter\"></a>Flutter</h2><p><a href=\"https://flutter.dev/\">flutter.dev</a><br><a href=\"https://www.dartlang.org/\">Dart</a><br><a href=\"https://pub.dartlang.org/\">Pub</a></p>\n<h2 id=\"Git\"><a href=\"#Git\" class=\"headerlink\" title=\"Git\"></a>Git</h2><p><a href=\"https://git-scm.com/doc\">Git Doc</a></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><a href=\"http://www.uplabs.com/\">UpLabs</a></p>\n"},{"title":"","date":"2020-03-19T14:42:55.000Z","type":"link","top_img":"/img/link_banner.jpg","_content":"","source":"link/index.md","raw":"---\ntitle: \ndate: 2020-03-19 22:42:55\ntype: \"link\"\ntop_img: /img/link_banner.jpg\n---\n","updated":"2024-08-21T03:16:19.807Z","path":"link/index.html","comments":1,"layout":"page","_id":"cm03be2vo00055p6t06b511pg","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","excerpt":"","more":""},{"title":"","date":"2020-03-18T19:11:44.000Z","cover":"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/music.jpg","_content":"# \n{% aplayerlist %}\n{\n    \"narrow\": false,\n    \"autoplay\": false,\n    \"mode\": \"random\",       \n    \"showlrc\": 3, \n    \"mutex\": true,   \n    \"theme\": \"#e6d0b2\",\n    \"preload\": \"metadata\",\n    \"listmaxheight\": \"513px\",\n    \"music\": [\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/zaishushangchangge.lrc\"\n        },\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E6%98%8E%E7%99%BD.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/mingbai.lrc\"\n        },\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E5%BF%83%E5%A2%99.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/xinqiang.lrc\"\n        },\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E7%89%9B%E8%A7%92%E5%B0%96.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/niujiaojian.lrc\"\n        }\n        ,\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E7%AE%80%E5%8D%95.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/jiandan.lrc\"\n        }\n        ,\n        {\n            \"title\": \"Goodbye\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20Goodbye.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/goodbye.lrc\"\n        }\n        ,\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E8%92%99%E5%A8%9C%E4%B8%BD%E8%8E%8E.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/mengnalisha.lrc\"\n        }\n        ,\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E4%B8%89%E9%83%A8%E6%9B%B2.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/sanbuqu.lrc\"\n        }\n        ,\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E4%B8%8D%E8%AF%B4.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/bushuo.lrc\"\n        }\n        ,\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E7%9C%8B%E8%A7%81.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/kanjian.lrc\"\n        }\n    ]\n}\n{% endaplayerlist %}\n\n# \n{% aplayerlist %}\n{\n    \"narrow\": false,\n    \"autoplay\": false,\n    \"mode\": \"random\",       \n    \"showlrc\": 3, \n    \"mutex\": true,   \n    \"theme\": \"#e6d0b2\",\n    \"preload\": \"metadata\",\n    \"listmaxheight\": \"513px\",\n    \"music\": [\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/01%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20%E6%A1%9C%E8%8A%B1%E6%8A%84.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/02%20%E5%A4%A9%E9%96%80%20-%20%E6%83%B3%E3%81%84%E5%87%BA%E3%81%AF%E9%81%A0%E3%81%8F%E3%81%AE%E6%97%A5%E3%80%85.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/03%20%E5%A4%A9%E9%96%80%20-%20%E7%84%A6%E7%87%A5.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/04%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20%E9%9B%AA%E3%81%AE%E9%A7%85.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - Kiss\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/05%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20Kiss.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/06%20%E5%A4%A9%E9%96%80%20-%20%E3%82%AB%E3%83%8A%E3%82%A8%E3%81%AE%E6%B0%97%E6%8C%81%E3%81%A1.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/07%20%E5%A4%A9%E9%96%80%20-%20%E5%A4%A2.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/08%20%E5%A4%A9%E9%96%80%20-%20%E7%A9%BA%E3%81%A8%E6%B5%B7%E3%81%AE%E8%A9%A9.mp3c\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/09%20%E5%A4%A9%E9%96%80%20-%20%E5%B1%8A%E3%81%8B%E3%81%AA%E3%81%84%E6%B0%97%E6%8C%81%E3%81%A1.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - End Theme\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/10%20%E5%A4%A9%E9%96%80%20-%20End%20Theme.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \"One more time, One more chance\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/11%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20One%20more%20time%2C%20One%20more%20chance%20(piano%20version).mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        }\n    ]\n}\n{% endaplayerlist %}\n\n# \n{% aplayerlist %}\n{\n    \"narrow\": false,\n    \"autoplay\": false,\n    \"mode\": \"random\",       \n    \"showlrc\": 3, \n    \"mutex\": true,   \n    \"theme\": \"#e6d0b2\",\n    \"preload\": \"metadata\",\n    \"listmaxheight\": \"513px\",\n    \"music\": [\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E9%82%A3%E4%BA%9B%E5%B9%B4%E5%90%AC%E8%BF%87%E7%9A%84%E6%AD%8C/%E6%9C%B4%E6%A0%91%20-%20%E7%94%9F%E5%A6%82%E5%A4%8F%E8%8A%B1.flac\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E9%82%A3%E4%BA%9B%E5%B9%B4%E5%90%AC%E8%BF%87%E7%9A%84%E6%AD%8C/%E7%94%9F%E5%A6%82%E5%A4%8F%E8%8A%B1%E6%AD%8C%E6%9B%B2%E5%B0%81%E9%9D%A2.jpg\",\n            \"lrc\": \"file/lrc/sheng_ru_xia_hua.lrc\"\n        },\n                {\n            \"title\": \"Last Dance\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdance.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdancefengmian.jpg\",\n            \"lrc\": \"file/lrc/lastdance.lrc\"\n        }\n    ]\n}\n{% endaplayerlist %}","source":"music/index.md","raw":"---\ntitle: \ndate: 2020-03-19 03:11:44\ncover: https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/music.jpg\n---\n# \n{% aplayerlist %}\n{\n    \"narrow\": false,\n    \"autoplay\": false,\n    \"mode\": \"random\",       \n    \"showlrc\": 3, \n    \"mutex\": true,   \n    \"theme\": \"#e6d0b2\",\n    \"preload\": \"metadata\",\n    \"listmaxheight\": \"513px\",\n    \"music\": [\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/zaishushangchangge.lrc\"\n        },\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E6%98%8E%E7%99%BD.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/mingbai.lrc\"\n        },\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E5%BF%83%E5%A2%99.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/xinqiang.lrc\"\n        },\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E7%89%9B%E8%A7%92%E5%B0%96.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/niujiaojian.lrc\"\n        }\n        ,\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E7%AE%80%E5%8D%95.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/jiandan.lrc\"\n        }\n        ,\n        {\n            \"title\": \"Goodbye\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20Goodbye.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/goodbye.lrc\"\n        }\n        ,\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E8%92%99%E5%A8%9C%E4%B8%BD%E8%8E%8E.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/mengnalisha.lrc\"\n        }\n        ,\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E4%B8%89%E9%83%A8%E6%9B%B2.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/sanbuqu.lrc\"\n        }\n        ,\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E4%B8%8D%E8%AF%B4.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/bushuo.lrc\"\n        }\n        ,\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E7%9C%8B%E8%A7%81.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\n            \"lrc\": \"file/lrc/kanjian.lrc\"\n        }\n    ]\n}\n{% endaplayerlist %}\n\n# \n{% aplayerlist %}\n{\n    \"narrow\": false,\n    \"autoplay\": false,\n    \"mode\": \"random\",       \n    \"showlrc\": 3, \n    \"mutex\": true,   \n    \"theme\": \"#e6d0b2\",\n    \"preload\": \"metadata\",\n    \"listmaxheight\": \"513px\",\n    \"music\": [\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/01%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20%E6%A1%9C%E8%8A%B1%E6%8A%84.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/02%20%E5%A4%A9%E9%96%80%20-%20%E6%83%B3%E3%81%84%E5%87%BA%E3%81%AF%E9%81%A0%E3%81%8F%E3%81%AE%E6%97%A5%E3%80%85.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/03%20%E5%A4%A9%E9%96%80%20-%20%E7%84%A6%E7%87%A5.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/04%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20%E9%9B%AA%E3%81%AE%E9%A7%85.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - Kiss\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/05%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20Kiss.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/06%20%E5%A4%A9%E9%96%80%20-%20%E3%82%AB%E3%83%8A%E3%82%A8%E3%81%AE%E6%B0%97%E6%8C%81%E3%81%A1.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/07%20%E5%A4%A9%E9%96%80%20-%20%E5%A4%A2.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/08%20%E5%A4%A9%E9%96%80%20-%20%E7%A9%BA%E3%81%A8%E6%B5%B7%E3%81%AE%E8%A9%A9.mp3c\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - \",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/09%20%E5%A4%A9%E9%96%80%20-%20%E5%B1%8A%E3%81%8B%E3%81%AA%E3%81%84%E6%B0%97%E6%8C%81%E3%81%A1.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \" - End Theme\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/10%20%E5%A4%A9%E9%96%80%20-%20End%20Theme.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        },\n        {\n            \"title\": \"One more time, One more chance\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/11%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20One%20more%20time%2C%20One%20more%20chance%20(piano%20version).mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\" \n        }\n    ]\n}\n{% endaplayerlist %}\n\n# \n{% aplayerlist %}\n{\n    \"narrow\": false,\n    \"autoplay\": false,\n    \"mode\": \"random\",       \n    \"showlrc\": 3, \n    \"mutex\": true,   \n    \"theme\": \"#e6d0b2\",\n    \"preload\": \"metadata\",\n    \"listmaxheight\": \"513px\",\n    \"music\": [\n        {\n            \"title\": \"\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E9%82%A3%E4%BA%9B%E5%B9%B4%E5%90%AC%E8%BF%87%E7%9A%84%E6%AD%8C/%E6%9C%B4%E6%A0%91%20-%20%E7%94%9F%E5%A6%82%E5%A4%8F%E8%8A%B1.flac\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E9%82%A3%E4%BA%9B%E5%B9%B4%E5%90%AC%E8%BF%87%E7%9A%84%E6%AD%8C/%E7%94%9F%E5%A6%82%E5%A4%8F%E8%8A%B1%E6%AD%8C%E6%9B%B2%E5%B0%81%E9%9D%A2.jpg\",\n            \"lrc\": \"file/lrc/sheng_ru_xia_hua.lrc\"\n        },\n                {\n            \"title\": \"Last Dance\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdance.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdancefengmian.jpg\",\n            \"lrc\": \"file/lrc/lastdance.lrc\"\n        }\n    ]\n}\n{% endaplayerlist %}","updated":"2024-08-21T03:16:19.809Z","path":"music/index.html","comments":1,"layout":"page","_id":"cm03be2vo00075p6t4udo0yoi","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1>\n        <div id=\"aplayer-HgdWgcKI\" class=\"aplayer aplayer-tag-marker\" style=\"margin-bottom: 20px;\"></div>\n\t\t\t  <script>\n\t\t\t\t  var options = {\"narrow\":false,\"autoplay\":false,\"showlrc\":3,\"mode\":\"random\",\"mutex\":true,\"theme\":\"#e6d0b2\",\"preload\":\"metadata\",\"listmaxheight\":\"513px\",\"music\":[{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/zaishushangchangge.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E6%98%8E%E7%99%BD.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/mingbai.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E5%BF%83%E5%A2%99.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/xinqiang.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E7%89%9B%E8%A7%92%E5%B0%96.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/niujiaojian.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E7%AE%80%E5%8D%95.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/jiandan.lrc\"},{\"title\":\"Goodbye\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20Goodbye.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/goodbye.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E8%92%99%E5%A8%9C%E4%B8%BD%E8%8E%8E.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/mengnalisha.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E4%B8%89%E9%83%A8%E6%9B%B2.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/sanbuqu.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E4%B8%8D%E8%AF%B4.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/bushuo.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E7%9C%8B%E8%A7%81.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/kanjian.lrc\"}]};\n\t\t\t\t  options.element = document.getElementById(\"aplayer-HgdWgcKI\");\n\t\t\t\t  var ap = new APlayer(options);\n\t\t\t    window.aplayers || (window.aplayers = []);\n\t\t\t\t  window.aplayers.push(ap);\n\t\t\t  </script>\n\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1>\n        <div id=\"aplayer-QmRFYvBQ\" class=\"aplayer aplayer-tag-marker\" style=\"margin-bottom: 20px;\"></div>\n\t\t\t  <script>\n\t\t\t\t  var options = {\"narrow\":false,\"autoplay\":false,\"showlrc\":3,\"mode\":\"random\",\"mutex\":true,\"theme\":\"#e6d0b2\",\"preload\":\"metadata\",\"listmaxheight\":\"513px\",\"music\":[{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/01%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20%E6%A1%9C%E8%8A%B1%E6%8A%84.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/02%20%E5%A4%A9%E9%96%80%20-%20%E6%83%B3%E3%81%84%E5%87%BA%E3%81%AF%E9%81%A0%E3%81%8F%E3%81%AE%E6%97%A5%E3%80%85.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/03%20%E5%A4%A9%E9%96%80%20-%20%E7%84%A6%E7%87%A5.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/04%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20%E9%9B%AA%E3%81%AE%E9%A7%85.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - Kiss\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/05%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20Kiss.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/06%20%E5%A4%A9%E9%96%80%20-%20%E3%82%AB%E3%83%8A%E3%82%A8%E3%81%AE%E6%B0%97%E6%8C%81%E3%81%A1.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/07%20%E5%A4%A9%E9%96%80%20-%20%E5%A4%A2.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/08%20%E5%A4%A9%E9%96%80%20-%20%E7%A9%BA%E3%81%A8%E6%B5%B7%E3%81%AE%E8%A9%A9.mp3c\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/09%20%E5%A4%A9%E9%96%80%20-%20%E5%B1%8A%E3%81%8B%E3%81%AA%E3%81%84%E6%B0%97%E6%8C%81%E3%81%A1.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - End Theme\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/10%20%E5%A4%A9%E9%96%80%20-%20End%20Theme.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\"One more time, One more chance\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/11%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20One%20more%20time%2C%20One%20more%20chance%20(piano%20version).mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"}]};\n\t\t\t\t  options.element = document.getElementById(\"aplayer-QmRFYvBQ\");\n\t\t\t\t  var ap = new APlayer(options);\n\t\t\t    window.aplayers || (window.aplayers = []);\n\t\t\t\t  window.aplayers.push(ap);\n\t\t\t  </script>\n\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1>\n        <div id=\"aplayer-IjXfKYFx\" class=\"aplayer aplayer-tag-marker\" style=\"margin-bottom: 20px;\"></div>\n\t\t\t  <script>\n\t\t\t\t  var options = {\"narrow\":false,\"autoplay\":false,\"showlrc\":3,\"mode\":\"random\",\"mutex\":true,\"theme\":\"#e6d0b2\",\"preload\":\"metadata\",\"listmaxheight\":\"513px\",\"music\":[{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E9%82%A3%E4%BA%9B%E5%B9%B4%E5%90%AC%E8%BF%87%E7%9A%84%E6%AD%8C/%E6%9C%B4%E6%A0%91%20-%20%E7%94%9F%E5%A6%82%E5%A4%8F%E8%8A%B1.flac\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E9%82%A3%E4%BA%9B%E5%B9%B4%E5%90%AC%E8%BF%87%E7%9A%84%E6%AD%8C/%E7%94%9F%E5%A6%82%E5%A4%8F%E8%8A%B1%E6%AD%8C%E6%9B%B2%E5%B0%81%E9%9D%A2.jpg\",\"lrc\":\"file/lrc/sheng_ru_xia_hua.lrc\"},{\"title\":\"Last Dance\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdance.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdancefengmian.jpg\",\"lrc\":\"file/lrc/lastdance.lrc\"}]};\n\t\t\t\t  options.element = document.getElementById(\"aplayer-IjXfKYFx\");\n\t\t\t\t  var ap = new APlayer(options);\n\t\t\t    window.aplayers || (window.aplayers = []);\n\t\t\t\t  window.aplayers.push(ap);\n\t\t\t  </script>","excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1>\n        <div id=\"aplayer-HgdWgcKI\" class=\"aplayer aplayer-tag-marker\" style=\"margin-bottom: 20px;\"></div>\n\t\t\t  <script>\n\t\t\t\t  var options = {\"narrow\":false,\"autoplay\":false,\"showlrc\":3,\"mode\":\"random\",\"mutex\":true,\"theme\":\"#e6d0b2\",\"preload\":\"metadata\",\"listmaxheight\":\"513px\",\"music\":[{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/zaishushangchangge.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E6%98%8E%E7%99%BD.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/mingbai.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E5%BF%83%E5%A2%99.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/xinqiang.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E7%89%9B%E8%A7%92%E5%B0%96.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/niujiaojian.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E7%AE%80%E5%8D%95.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/jiandan.lrc\"},{\"title\":\"Goodbye\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20Goodbye.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/goodbye.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E8%92%99%E5%A8%9C%E4%B8%BD%E8%8E%8E.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/mengnalisha.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E4%B8%89%E9%83%A8%E6%9B%B2.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/sanbuqu.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E4%B8%8D%E8%AF%B4.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/bushuo.lrc\"},{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C/%5B%E9%83%AD%E9%9D%99%5D%20%E7%9C%8B%E8%A7%81.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E5%9C%A8%E6%A0%91%E4%B8%8A%E5%94%B1%E6%AD%8C%E5%B0%81%E9%9D%A2.png\",\"lrc\":\"file/lrc/kanjian.lrc\"}]};\n\t\t\t\t  options.element = document.getElementById(\"aplayer-HgdWgcKI\");\n\t\t\t\t  var ap = new APlayer(options);\n\t\t\t    window.aplayers || (window.aplayers = []);\n\t\t\t\t  window.aplayers.push(ap);\n\t\t\t  </script>\n\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1>\n        <div id=\"aplayer-QmRFYvBQ\" class=\"aplayer aplayer-tag-marker\" style=\"margin-bottom: 20px;\"></div>\n\t\t\t  <script>\n\t\t\t\t  var options = {\"narrow\":false,\"autoplay\":false,\"showlrc\":3,\"mode\":\"random\",\"mutex\":true,\"theme\":\"#e6d0b2\",\"preload\":\"metadata\",\"listmaxheight\":\"513px\",\"music\":[{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/01%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20%E6%A1%9C%E8%8A%B1%E6%8A%84.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/02%20%E5%A4%A9%E9%96%80%20-%20%E6%83%B3%E3%81%84%E5%87%BA%E3%81%AF%E9%81%A0%E3%81%8F%E3%81%AE%E6%97%A5%E3%80%85.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/03%20%E5%A4%A9%E9%96%80%20-%20%E7%84%A6%E7%87%A5.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/04%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20%E9%9B%AA%E3%81%AE%E9%A7%85.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - Kiss\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/05%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20Kiss.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/06%20%E5%A4%A9%E9%96%80%20-%20%E3%82%AB%E3%83%8A%E3%82%A8%E3%81%AE%E6%B0%97%E6%8C%81%E3%81%A1.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/07%20%E5%A4%A9%E9%96%80%20-%20%E5%A4%A2.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/08%20%E5%A4%A9%E9%96%80%20-%20%E7%A9%BA%E3%81%A8%E6%B5%B7%E3%81%AE%E8%A9%A9.mp3c\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - \",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/09%20%E5%A4%A9%E9%96%80%20-%20%E5%B1%8A%E3%81%8B%E3%81%AA%E3%81%84%E6%B0%97%E6%8C%81%E3%81%A1.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\" - End Theme\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/10%20%E5%A4%A9%E9%96%80%20-%20End%20Theme.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"},{\"title\":\"One more time, One more chance\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/11%20%E5%B1%B1%E5%B4%8E%E3%81%BE%E3%81%95%E3%82%88%E3%81%97%20-%20One%20more%20time%2C%20One%20more%20chance%20(piano%20version).mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3/%E7%A7%92%E9%80%9F%E4%BA%94%E5%8E%98%E7%B1%B3%E5%B0%81%E9%9D%A2.jpg\"}]};\n\t\t\t\t  options.element = document.getElementById(\"aplayer-QmRFYvBQ\");\n\t\t\t\t  var ap = new APlayer(options);\n\t\t\t    window.aplayers || (window.aplayers = []);\n\t\t\t\t  window.aplayers.push(ap);\n\t\t\t  </script>\n\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1>\n        <div id=\"aplayer-IjXfKYFx\" class=\"aplayer aplayer-tag-marker\" style=\"margin-bottom: 20px;\"></div>\n\t\t\t  <script>\n\t\t\t\t  var options = {\"narrow\":false,\"autoplay\":false,\"showlrc\":3,\"mode\":\"random\",\"mutex\":true,\"theme\":\"#e6d0b2\",\"preload\":\"metadata\",\"listmaxheight\":\"513px\",\"music\":[{\"title\":\"\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E9%82%A3%E4%BA%9B%E5%B9%B4%E5%90%AC%E8%BF%87%E7%9A%84%E6%AD%8C/%E6%9C%B4%E6%A0%91%20-%20%E7%94%9F%E5%A6%82%E5%A4%8F%E8%8A%B1.flac\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/%E9%82%A3%E4%BA%9B%E5%B9%B4%E5%90%AC%E8%BF%87%E7%9A%84%E6%AD%8C/%E7%94%9F%E5%A6%82%E5%A4%8F%E8%8A%B1%E6%AD%8C%E6%9B%B2%E5%B0%81%E9%9D%A2.jpg\",\"lrc\":\"file/lrc/sheng_ru_xia_hua.lrc\"},{\"title\":\"Last Dance\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdance.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdancefengmian.jpg\",\"lrc\":\"file/lrc/lastdance.lrc\"}]};\n\t\t\t\t  options.element = document.getElementById(\"aplayer-IjXfKYFx\");\n\t\t\t\t  var ap = new APlayer(options);\n\t\t\t    window.aplayers || (window.aplayers = []);\n\t\t\t\t  window.aplayers.push(ap);\n\t\t\t  </script>"},{"title":"","date":"2020-03-19T14:41:09.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: \ndate: 2020-03-19 22:41:09\ntype: \"tags\"\n---\n","updated":"2024-08-21T03:16:19.810Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cm03be2vp00095p6tfbylcong","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","excerpt":"","more":""}],"Post":[{"title":"","date":"2022-01-10T14:33:59.000Z","_content":"[Michelle Wan20181030](https://www.wenzhao.ca/2018/10/30/michelle-wan%ef%bc%9a%e6%95%99%e8%82%b2%e7%9a%84%e5%ae%9e%e8%b7%b5-%e9%80%89%e6%8b%a9%e4%b8%8e%e5%86%b3%e5%ae%9a%ef%bc%8820181030%ef%bc%89/)\n\n{% aplayerlist %}\n{\n    \"narrow\": false,\n    \"autoplay\": false,\n    \"mode\": \"random\",       \n    \"showlrc\": 3, \n    \"mutex\": true,   \n    \"theme\": \"#e6d0b2\",\n    \"preload\": \"metadata\",\n    \"listmaxheight\": \"513px\",\n    \"music\": [\n        {\n            \"title\": \"\",\n            \"url\": \"http://cdn.zqlxtt.cn/Educational-experience-2.mp3\"\n        }\n    ]\n}\n{% endaplayerlist %}\n\n Michelle. \n\n,\n\n\n\n<!-- more -->\n\n\n\n\n\n701399\n\n\n\nconsequences, \n\n//guideline ()\n\n/ \n\n///\n\n\n\n\n\n","source":"_posts/Educational-experience-2.md","raw":"---\ntitle: \ndate: 2022-01-10 22:33:59\ntags: ''\n---\n[Michelle Wan20181030](https://www.wenzhao.ca/2018/10/30/michelle-wan%ef%bc%9a%e6%95%99%e8%82%b2%e7%9a%84%e5%ae%9e%e8%b7%b5-%e9%80%89%e6%8b%a9%e4%b8%8e%e5%86%b3%e5%ae%9a%ef%bc%8820181030%ef%bc%89/)\n\n{% aplayerlist %}\n{\n    \"narrow\": false,\n    \"autoplay\": false,\n    \"mode\": \"random\",       \n    \"showlrc\": 3, \n    \"mutex\": true,   \n    \"theme\": \"#e6d0b2\",\n    \"preload\": \"metadata\",\n    \"listmaxheight\": \"513px\",\n    \"music\": [\n        {\n            \"title\": \"\",\n            \"url\": \"http://cdn.zqlxtt.cn/Educational-experience-2.mp3\"\n        }\n    ]\n}\n{% endaplayerlist %}\n\n Michelle. \n\n,\n\n\n\n<!-- more -->\n\n\n\n\n\n701399\n\n\n\nconsequences, \n\n//guideline ()\n\n/ \n\n///\n\n\n\n\n\n","slug":"Educational-experience-2","published":1,"updated":"2024-08-21T03:16:19.779Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vk00015p6t1gax1sfi","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><a href=\"https://www.wenzhao.ca/2018/10/30/michelle-wan%ef%bc%9a%e6%95%99%e8%82%b2%e7%9a%84%e5%ae%9e%e8%b7%b5-%e9%80%89%e6%8b%a9%e4%b8%8e%e5%86%b3%e5%ae%9a%ef%bc%8820181030%ef%bc%89/\">Michelle Wan20181030</a></p>\n\n        <div id=\"aplayer-XEFPleno\" class=\"aplayer aplayer-tag-marker\" style=\"margin-bottom: 20px;\"></div>\n\t\t\t  <script>\n\t\t\t\t  var options = {\"narrow\":false,\"autoplay\":false,\"showlrc\":3,\"mode\":\"random\",\"mutex\":true,\"theme\":\"#e6d0b2\",\"preload\":\"metadata\",\"listmaxheight\":\"513px\",\"music\":[{\"title\":\"\",\"url\":\"http://cdn.zqlxtt.cn/Educational-experience-2.mp3\",\"pic\":\"\"}]};\n\t\t\t\t  options.element = document.getElementById(\"aplayer-XEFPleno\");\n\t\t\t\t  var ap = new APlayer(options);\n\t\t\t    window.aplayers || (window.aplayers = []);\n\t\t\t\t  window.aplayers.push(ap);\n\t\t\t  </script>\n\n<p> Michelle. </p>\n<p>,</p>\n<p></p>\n<span id=\"more\"></span>\n\n<p></p>\n<p></p>\n<p>701399</p>\n<p></p>\n<p>consequences, </p>\n<p>//guideline ()</p>\n<p>/ </p>\n<p>///</p>\n<p></p>\n<p></p>\n<p></p>\n","excerpt":"<p><a href=\"https://www.wenzhao.ca/2018/10/30/michelle-wan%ef%bc%9a%e6%95%99%e8%82%b2%e7%9a%84%e5%ae%9e%e8%b7%b5-%e9%80%89%e6%8b%a9%e4%b8%8e%e5%86%b3%e5%ae%9a%ef%bc%8820181030%ef%bc%89/\">Michelle Wan20181030</a></p>\n\n        <div id=\"aplayer-XEFPleno\" class=\"aplayer aplayer-tag-marker\" style=\"margin-bottom: 20px;\"></div>\n\t\t\t  <script>\n\t\t\t\t  var options = {\"narrow\":false,\"autoplay\":false,\"showlrc\":3,\"mode\":\"random\",\"mutex\":true,\"theme\":\"#e6d0b2\",\"preload\":\"metadata\",\"listmaxheight\":\"513px\",\"music\":[{\"title\":\"\",\"url\":\"http://cdn.zqlxtt.cn/Educational-experience-2.mp3\",\"pic\":\"\"}]};\n\t\t\t\t  options.element = document.getElementById(\"aplayer-XEFPleno\");\n\t\t\t\t  var ap = new APlayer(options);\n\t\t\t    window.aplayers || (window.aplayers = []);\n\t\t\t\t  window.aplayers.push(ap);\n\t\t\t  </script>\n\n<p> Michelle. </p>\n<p>,</p>\n<p></p>","more":"<p></p>\n<p></p>\n<p>701399</p>\n<p></p>\n<p>consequences, </p>\n<p>//guideline ()</p>\n<p>/ </p>\n<p>///</p>\n<p></p>\n<p></p>\n<p></p>"},{"title":"","date":"2022-01-10T14:17:30.000Z","_content":"[Michelle Wan20181006](https://www.wenzhao.ca/2018/10/06/michelle-wan%ef%bc%9a%e6%95%99%e8%82%b2%e5%bf%83%e5%be%97-%e6%99%ba%e6%85%a7%e5%9c%b0%e7%bb%99%e5%ad%a9%e5%ad%90%e7%95%99%e7%99%bd%ef%bc%8820181006/)\n\n{% aplayerlist %}\n{\n    \"narrow\": false,\n    \"autoplay\": false,\n    \"mode\": \"random\",       \n    \"showlrc\": 3, \n    \"mutex\": true,   \n    \"theme\": \"#e6d0b2\",\n    \"preload\": \"metadata\",\n    \"listmaxheight\": \"513px\",\n    \"music\": [\n        {\n            \"title\": \"\",\n            \"url\": \"http://cdn.zqlxtt.cn/Educational-experience-1.mp3\"\n        }\n    ]\n}\n{% endaplayerlist %}\n\nMichelle Wan\n\n\n\n\n\n<!-- more -->\n\nyou are a part of it. \n\n\n\n \n\n\n\n1618\n\n1516\n\n\n\n? \n\nThe character of democracy creates democracy, and the character of oligarchy creates oligarchy; and always the better the character, the better the government. \n\n///\n\n\n\n\n\n\n\n","source":"_posts/Educational-experience-1.md","raw":"---\ntitle: \ndate: 2022-01-10 22:17:30\ntags: \n---\n[Michelle Wan20181006](https://www.wenzhao.ca/2018/10/06/michelle-wan%ef%bc%9a%e6%95%99%e8%82%b2%e5%bf%83%e5%be%97-%e6%99%ba%e6%85%a7%e5%9c%b0%e7%bb%99%e5%ad%a9%e5%ad%90%e7%95%99%e7%99%bd%ef%bc%8820181006/)\n\n{% aplayerlist %}\n{\n    \"narrow\": false,\n    \"autoplay\": false,\n    \"mode\": \"random\",       \n    \"showlrc\": 3, \n    \"mutex\": true,   \n    \"theme\": \"#e6d0b2\",\n    \"preload\": \"metadata\",\n    \"listmaxheight\": \"513px\",\n    \"music\": [\n        {\n            \"title\": \"\",\n            \"url\": \"http://cdn.zqlxtt.cn/Educational-experience-1.mp3\"\n        }\n    ]\n}\n{% endaplayerlist %}\n\nMichelle Wan\n\n\n\n\n\n<!-- more -->\n\nyou are a part of it. \n\n\n\n \n\n\n\n1618\n\n1516\n\n\n\n? \n\nThe character of democracy creates democracy, and the character of oligarchy creates oligarchy; and always the better the character, the better the government. \n\n///\n\n\n\n\n\n\n\n","slug":"Educational-experience-1","published":1,"updated":"2024-08-21T03:16:19.778Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vm00035p6t3cnm8bc6","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><a href=\"https://www.wenzhao.ca/2018/10/06/michelle-wan%ef%bc%9a%e6%95%99%e8%82%b2%e5%bf%83%e5%be%97-%e6%99%ba%e6%85%a7%e5%9c%b0%e7%bb%99%e5%ad%a9%e5%ad%90%e7%95%99%e7%99%bd%ef%bc%8820181006/\">Michelle Wan20181006</a></p>\n\n        <div id=\"aplayer-MwAIVmVj\" class=\"aplayer aplayer-tag-marker\" style=\"margin-bottom: 20px;\"></div>\n\t\t\t  <script>\n\t\t\t\t  var options = {\"narrow\":false,\"autoplay\":false,\"showlrc\":3,\"mode\":\"random\",\"mutex\":true,\"theme\":\"#e6d0b2\",\"preload\":\"metadata\",\"listmaxheight\":\"513px\",\"music\":[{\"title\":\"\",\"url\":\"http://cdn.zqlxtt.cn/Educational-experience-1.mp3\",\"pic\":\"\"}]};\n\t\t\t\t  options.element = document.getElementById(\"aplayer-MwAIVmVj\");\n\t\t\t\t  var ap = new APlayer(options);\n\t\t\t    window.aplayers || (window.aplayers = []);\n\t\t\t\t  window.aplayers.push(ap);\n\t\t\t  </script>\n\n<p>Michelle Wan</p>\n<p></p>\n<p></p>\n<span id=\"more\"></span>\n\n<p>you are a part of it. </p>\n<p></p>\n<p> </p>\n<p></p>\n<p>1618</p>\n<p>1516</p>\n<p></p>\n<p>? </p>\n<p>The character of democracy creates democracy, and the character of oligarchy creates oligarchy; and always the better the character, the better the government. </p>\n<p>///</p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n","excerpt":"<p><a href=\"https://www.wenzhao.ca/2018/10/06/michelle-wan%ef%bc%9a%e6%95%99%e8%82%b2%e5%bf%83%e5%be%97-%e6%99%ba%e6%85%a7%e5%9c%b0%e7%bb%99%e5%ad%a9%e5%ad%90%e7%95%99%e7%99%bd%ef%bc%8820181006/\">Michelle Wan20181006</a></p>\n\n        <div id=\"aplayer-MwAIVmVj\" class=\"aplayer aplayer-tag-marker\" style=\"margin-bottom: 20px;\"></div>\n\t\t\t  <script>\n\t\t\t\t  var options = {\"narrow\":false,\"autoplay\":false,\"showlrc\":3,\"mode\":\"random\",\"mutex\":true,\"theme\":\"#e6d0b2\",\"preload\":\"metadata\",\"listmaxheight\":\"513px\",\"music\":[{\"title\":\"\",\"url\":\"http://cdn.zqlxtt.cn/Educational-experience-1.mp3\",\"pic\":\"\"}]};\n\t\t\t\t  options.element = document.getElementById(\"aplayer-MwAIVmVj\");\n\t\t\t\t  var ap = new APlayer(options);\n\t\t\t    window.aplayers || (window.aplayers = []);\n\t\t\t\t  window.aplayers.push(ap);\n\t\t\t  </script>\n\n<p>Michelle Wan</p>\n<p></p>\n<p></p>","more":"<p>you are a part of it. </p>\n<p></p>\n<p> </p>\n<p></p>\n<p>1618</p>\n<p>1516</p>\n<p></p>\n<p>? </p>\n<p>The character of democracy creates democracy, and the character of oligarchy creates oligarchy; and always the better the character, the better the government. </p>\n<p>///</p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>"},{"title":"GIF and LWZ","date":"2017-11-17T08:42:56.000Z","cover":"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/4.webp","_content":" LZW  GIF  LZW \n\n> LZW LZWUnisys2003\n\n`` LWZ \n<!-- more -->\nAABCCBACBCBAABC\n\n\n|  |  |\n| --- | --- |\n| 0 | A |\n| 1 | B |\n| 2 | C |\n| 3 | AA |\n| 4 | BC |\n| 5 | CB |\n| 6 | AC |\n| 7 | BCB |\n| 8 | AAB |\n\n345678 6  15  LZW  LZW \n\n## LZW  GIF \nLZW  GIF  Global Color Table  Local Color Table \n\n[GIF ](http://www.jianshu.com/p/4fabac6b15b3) Image Data  `LZW Minimum Code Size` \n\n LZW  26  0 ~ 25 A~Z minimum code  28minmum code size 5  26  27  `clear code``end of information code`\n\n GIF  2^(2~8) \n\n| LZW Mini Code Size |  |  |  |\n| --- | --- | --- | ---|\n| 2 | #0 - #3 | #4 | #5 |\n| 3 | #0 - #7 | #8 | #9 |\n| 4 | #0 - #15 | #16 | #17 |\n| 5 | #0 - #31 | #32 | #33 |\n| 6 | #0 - #63 | #64 | #65 |\n| 7 | #0 - #127 | #128 | #129 |\n| 8 | #0 - #255 | #256 | #257 |\n\n\n LZW  LZW  GIF  12 \n\n### GIF  LZW\n\n[GIF ](http://www.jianshu.com/p/4fabac6b15b3)\n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/1.webp)\n\n\n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/2.webp)\n\n\n\n||||\n|---|---|---|\n|0|FFFFFF||\n|1|FF0000||\n|2|0000FF||\n|3|000000||\n\n\n\n|||\n|---|---|\n|#0|0|\n|#1|1|\n|#2|2|\n|#3|3|\n|#4| |\n|#5||\n\n\n\n    1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, ...\n    \n\n- Index Stream\n- Code Stream\n- Index Buffer\n- K\n\n (index ...) [index]  K\n\nK  #4\n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ...|| #4 |\n\n\n\n K\n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4 |\n|1|  | (1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4|\n\n K  + K  + K = (1,1) (1,1)  #6 - (1,1)  #6 (1) #1 K K  + K \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4 |\n|1|  | (1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4|\n|2|  + K | 1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 ... | #6 - (1,1)| #4 #1|\n\n K \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4 |\n|1|  K | (1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4|\n|2|  + K | 1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 ... | #6 - (1,1)| #4 #1|\n|3| K | 1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1 |\n\n K  + K  + K = (1,1) #6  + K  K  + K \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4 |\n|1|  K | (1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4|\n|2|  + K | 1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 ... | #6 - (1,1)| #4 #1|\n|3| K | 1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1 |\n|4|  + K | 1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 ...| | #4 #1|\n\n K \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4 |\n|1|  K | (1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4|\n|2|  + K | 1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 ... | #6 - (1,1)| #4 #1|\n|3| K | 1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1 |\n|4|  + K | 1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 ...| | #4 #1|\n|5|  K | 1 (1 1) [1] 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1|\n\n + K  (1,1,1) + K\n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4 |\n|1|  K | (1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4|\n|2|  + K | 1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 ... | #6 - (1,1)| #4 #1|\n|3| K | 1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1 |\n|4|  + K | 1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 ...| | #4 #1|\n|5|  K | 1 (1 1) [1] 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1|\n|6| | 1 1 1 (1) 1 2 2 2 2 2 1 1 1 1 ... | #7 - (1,1,1)| #4 #1 #6 |\n\n + K 26 LZW \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4 |\n|1|  K | (1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4|\n|2|  + K | 1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 ... | #6 - (1,1)| #4 #1|\n|3|  K | 1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1 |\n|4|  + K | 1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 ...| | #4 #1|\n|5|  K | 1 (1 1) [1] 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1|\n|6| | 1 1 1 (1) 1 2 2 2 2 2 1 1 1 1 ... | #7 - (1,1,1)| #4 #1 #6 |\n|7|  K | 1 1 1 (1) [1] 2 2 2 2 2 1 1 1 1 ...|| #4 #1 #6|\n|8|  + K | 1 1 1 (1 1) 2 2 2 2 2 1 1 1 1 ...||#4 #1 #6|\n|9|  K | 1 1 1 (1 1) [2] 2 2 2 2 1 1 1 1 ...||#4 #1 #6|\n|10|  + K |1 1 1 1 1 (2) 2 2 2 2 1 1 1 1 ...| #8 - (1,1,2)|#4 #1 #6 #6|\n|11|  K |1 1 1 1 1 (2) [2] 2 2 2 1 1 1 1 ...||#4 #1 #6 #6|\n|12|  + K |1 1 1 1 1 2 (2) 2 2 2 1 1 1 1 ...|#9 - (2,2)|#4 #1 #6 #6 #2|\n|13|  K |1 1 1 1 1 2 (2) [2] 2 2 1 1 1 1 ...||#4 #1 #6 #6 #2|\n|14|  + K |1 1 1 1 1 2 (2 2) 2 2 1 1 1 1 ...||#4 #1 #6 #6 #2|\n|15|  K |1 1 1 1 1 2 (2 2) [2] 2 1 1 1 1 ...||#4 #1 #6 #6 #2|\n|16|  + K |1 1 1 1 1 2 2 2 (2) 2 1 1 1 1 ...|#10 - (2,2,2)|#4 #1 #6 #6 #2 #9|\n|17|  K |1 1 1 1 1 2 2 2 (2) [2] 1 1 1 1 ...||#4 #1 #6 #6 #2 #9|\n|18|  + K |1 1 1 1 1 2 2 2 (2 2) 1 1 1 1 ...||#4 #1 #6 #6 #2 #9|\n|19|  K |1 1 1 1 1 2 2 2 (2 2) [1] 1 1 1 ...||#4 #1 #6 #6 #2 #9|\n|20|  + K |1 1 1 1 1 2 2 2 2 2 (1) 1 1 1 ...|#11 - (2,2,1)|#4 #1 #6 #6 #2 #9 #9|\n|21|  K |1 1 1 1 1 2 2 2 2 2 (1) [1] 1 1 ...||#4 #1 #6 #6 #2 #9 #9|\n|22|  + K |1 1 1 1 1 2 2 2 2 2 (1 1) 1 1 ...||#4 #1 #6 #6 #2 #9 #9|\n|23|  K |1 1 1 1 1 2 2 2 2 2 (1 1) [1] 1 ...||#4 #1 #6 #6 #2 #9 #9|\n|24|  + K |1 1 1 1 1 2 2 2 2 2 (1 1 1) 1 ...||#4 #1 #6 #6 #2 #9 #9|\n|25|  K |1 1 1 1 1 2 2 2 2 2 (1 1 1) [1] ...||#4 #1 #6 #6 #2 #9 #9|\n|26|  + K |1 1 1 1 1 2 2 2 2 2 1 1 1 (1) ...|#12 - (1,1,1,1)|#4 #1 #6 #6 #2 #9 #9 #7|\n\n\n #5\n\n\n    #4 #1 #6 #6 #2 #9 #9 #7 #8 #10 #2 #12 #1 #14 #15 #6 #0 #21 #0 #10 #7 #22 #23 #18 #26 #7 #10 #29 #13 #24 #12 #18 #16 #36 #12 #5\n    \n LZW  10*10 = 100 36\n\n### GIF  LZW \n\n LZW  GIF \n\n    #4 #1 #6 #6 #2 #9 #9 #7 #8 #10 #2 #12 #1 #14 #15 #6 #0 #21 #0 #10 #7 #22 #23 #18 #26 #7 #10 #29 #13 #24 #12 #18 #16 #36 #12 #5\n\n LZW \n\n\n\n- Code Stream\n- Index Stream\n- CODE   #6\n- CODE - 1  CODE \n- {CODE} CODE  #6 - 1,1  {CODE} = {11}\n- K \n\n #4 CODE  CODE = #1  CODE  1 \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n| 0 | | #4 (#1) #6 #6 #2 #9 #9 #7 ...|| 1 |\n\n ()  CODE []  CODE - 1CODE  #6 CODE - 1  #1 CODE  #6  #6  K = {CODE - 1}  CODE - 1 = {1} K = 1 {CODE - 1} + K#5 # 6 \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n| 0 | | #4 (#1) #6 #6 #2 #9 #9 #7 ...|| 1 |\n|1|  CODE | #4 [#1] \\(#6) #6 #2 #9 #9 #7 ... | #6 - 1,1|1,1,1|\n\nCODE  #6CODE - 1 #6 CODE  #6  {CODE}  K  K = 1 {CODE}  {CODE - 1} + K {CODE - 1}{11}{111}\n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n| 0 | | #4 (#1) #6 #6 #2 #9 #9 #7 ...|| 1 |\n|1|  CODE | #4 [#1] \\(#6) #6 #2 #9 #9 #7 ... | #6 - 1,1|1,1,1|\n|2|  CODE| #4 #1 [#6] \\(#6) #2 #9 #9 #7 ... | #7 - 1,1,1| 1,1,1,1,1|\n\nCODE  #2CODE - 1  #6 CODE  #2  {CODE}  {CODE}  K  K = 2 {CODE - 1} + K {112}\n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n| 0 | | #4 (#1) #6 #6 #2 #9 #9 #7 ...|| 1 |\n|1|  CODE | #4 [#1] \\(#6) #6 #2 #9 #9 #7 ... | #6 - 1,1|1,1,1|\n|2|  CODE| #4 #1 [#6] \\(#6) #2 #9 #9 #7 ... | #7 - 1,1,1| 1,1,1,1,1|\n|3|  CODE| #4 #1 #6 [#6] \\(#2) #9 #9 #7 ... | #8 - 1,1,2| 1,1,1,1,1,2|\n\n CODE K  {CODE}  K  {CODE - 1}   {CODE - 1}+K CODE {CODE} {CODE - 1} + K 6 \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n| 0 | | #4 (#1) #6 #6 #2 #9 #9 #7 ...|| 1 |\n|1|  CODE | #4 [#1] \\(#6) #6 #2 #9 #9 #7 ... | #6 - 1,1|1,1,1|\n|2|  CODE| #4 #1 [#6] \\(#6) #2 #9 #9 #7 ... | #7 - 1,1,1| 1,1,1,1,1|\n|3|  CODE| #4 #1 #6 [#6] \\(#2) #9 #9 #7 ... | #8 - 1,1,2| 1,1,1,1,1,2|\n|4|   CODE|  #4 #1 #6 #6 [#2] \\(#9) #9 #7 ... |#9 - 2,2|1,1,1,1,1,2,2,2|\n|5|  CODE |#4 #1 #6 #6 #2 [#9] \\(#9) #7 ...| #10 - 2,2,2|1,1,1,1,1,2,2,2,2,2|\n|6|  CODE|#4 #1 #6 #6 #2 #9 [#9] \\(#7) ...| #11 - 2,2,1|1,1,1,1,1,2,2,2,2,2,1,1,1|\n\n\n\n    1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, ...\n\n\n\n>  #4\n\n## \n\n### \n GIF  LZW \n\n    #4 #1 #6 #6 #2 #9 #9 #7 #8 #10 #2 #12 #1 #14 #15 #6 #0 #21 #0 #10 #7 #22 #23 #18 #26 #7 #10 #29 #13 #24 #12 #18 #16 #36 #12 #5\n    \n GIF  12 (mini code size) + 1  mini code size  2#4 + #1  + #6 #6 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/3.webp)\n\n\n code size  SIZESIZE  mini code size + 1 GIF  = 2^SIZE - 1  SIZE  SIZE 3 #7  SIZE  4  6  #7 #6 #6  4  12  #6  #2  2D  #2\n\n SIZE  #7  #8  #8 1000 #6 #6 #6 3\n\n### \n\n SIZE  3 8C  3 100 = #4#1#6#6 #2 #6  2  #7 - 1,1,1 7  2^3 - 1 = 2^SIZE - 1 SIZE  1 \n\n SIZE = 5\n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/4.webp)\n\n## \n[GIF ](http://www.jianshu.com/p/4fabac6b15b3) Image Data  Image Data \n\n    02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00\n    \n 02  mini code size = 2 SIZE = 3  16  22 \n\n 8C = 1 0 - 0 0 1 - 1 0 0 1 0 0 #4 0 0 1  #1`GIF  LZW `\n\n 2D = 0 0 1 0 - 1 1 0 - 1, 1  1 0  1 1 0  # 6 1 1 0  #6 `GIF  LZW ` #6 SIZE  + 1  4 0 0 1 0  #2 \n\n 99 = 1 0 0 1 - 1 0 0 1  1 0 0 1 #9 1 0 0 1  #9 \n\n #4 #1 #6 #6 #2 #9 #9`GIF  LZW`\n\n>  `GIF  LZW ```\n\n\n## \n\nGIF  LZW ","source":"_posts/GIF-and-LWZ.md","raw":"---\ntitle: GIF and LWZ\ndate: 2017-11-17 16:42:56\ntags: \ncover: https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/4.webp\n---\n LZW  GIF  LZW \n\n> LZW LZWUnisys2003\n\n`` LWZ \n<!-- more -->\nAABCCBACBCBAABC\n\n\n|  |  |\n| --- | --- |\n| 0 | A |\n| 1 | B |\n| 2 | C |\n| 3 | AA |\n| 4 | BC |\n| 5 | CB |\n| 6 | AC |\n| 7 | BCB |\n| 8 | AAB |\n\n345678 6  15  LZW  LZW \n\n## LZW  GIF \nLZW  GIF  Global Color Table  Local Color Table \n\n[GIF ](http://www.jianshu.com/p/4fabac6b15b3) Image Data  `LZW Minimum Code Size` \n\n LZW  26  0 ~ 25 A~Z minimum code  28minmum code size 5  26  27  `clear code``end of information code`\n\n GIF  2^(2~8) \n\n| LZW Mini Code Size |  |  |  |\n| --- | --- | --- | ---|\n| 2 | #0 - #3 | #4 | #5 |\n| 3 | #0 - #7 | #8 | #9 |\n| 4 | #0 - #15 | #16 | #17 |\n| 5 | #0 - #31 | #32 | #33 |\n| 6 | #0 - #63 | #64 | #65 |\n| 7 | #0 - #127 | #128 | #129 |\n| 8 | #0 - #255 | #256 | #257 |\n\n\n LZW  LZW  GIF  12 \n\n### GIF  LZW\n\n[GIF ](http://www.jianshu.com/p/4fabac6b15b3)\n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/1.webp)\n\n\n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/2.webp)\n\n\n\n||||\n|---|---|---|\n|0|FFFFFF||\n|1|FF0000||\n|2|0000FF||\n|3|000000||\n\n\n\n|||\n|---|---|\n|#0|0|\n|#1|1|\n|#2|2|\n|#3|3|\n|#4| |\n|#5||\n\n\n\n    1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, ...\n    \n\n- Index Stream\n- Code Stream\n- Index Buffer\n- K\n\n (index ...) [index]  K\n\nK  #4\n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ...|| #4 |\n\n\n\n K\n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4 |\n|1|  | (1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4|\n\n K  + K  + K = (1,1) (1,1)  #6 - (1,1)  #6 (1) #1 K K  + K \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4 |\n|1|  | (1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4|\n|2|  + K | 1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 ... | #6 - (1,1)| #4 #1|\n\n K \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4 |\n|1|  K | (1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4|\n|2|  + K | 1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 ... | #6 - (1,1)| #4 #1|\n|3| K | 1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1 |\n\n K  + K  + K = (1,1) #6  + K  K  + K \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4 |\n|1|  K | (1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4|\n|2|  + K | 1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 ... | #6 - (1,1)| #4 #1|\n|3| K | 1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1 |\n|4|  + K | 1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 ...| | #4 #1|\n\n K \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4 |\n|1|  K | (1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4|\n|2|  + K | 1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 ... | #6 - (1,1)| #4 #1|\n|3| K | 1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1 |\n|4|  + K | 1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 ...| | #4 #1|\n|5|  K | 1 (1 1) [1] 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1|\n\n + K  (1,1,1) + K\n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4 |\n|1|  K | (1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4|\n|2|  + K | 1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 ... | #6 - (1,1)| #4 #1|\n|3| K | 1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1 |\n|4|  + K | 1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 ...| | #4 #1|\n|5|  K | 1 (1 1) [1] 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1|\n|6| | 1 1 1 (1) 1 2 2 2 2 2 1 1 1 1 ... | #7 - (1,1,1)| #4 #1 #6 |\n\n + K 26 LZW \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n|0| | (1) 1 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4 |\n|1|  K | (1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 ... || #4|\n|2|  + K | 1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 ... | #6 - (1,1)| #4 #1|\n|3|  K | 1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1 |\n|4|  + K | 1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 ...| | #4 #1|\n|5|  K | 1 (1 1) [1] 1 2 2 2 2 2 1 1 1 1 ... | | #4 #1|\n|6| | 1 1 1 (1) 1 2 2 2 2 2 1 1 1 1 ... | #7 - (1,1,1)| #4 #1 #6 |\n|7|  K | 1 1 1 (1) [1] 2 2 2 2 2 1 1 1 1 ...|| #4 #1 #6|\n|8|  + K | 1 1 1 (1 1) 2 2 2 2 2 1 1 1 1 ...||#4 #1 #6|\n|9|  K | 1 1 1 (1 1) [2] 2 2 2 2 1 1 1 1 ...||#4 #1 #6|\n|10|  + K |1 1 1 1 1 (2) 2 2 2 2 1 1 1 1 ...| #8 - (1,1,2)|#4 #1 #6 #6|\n|11|  K |1 1 1 1 1 (2) [2] 2 2 2 1 1 1 1 ...||#4 #1 #6 #6|\n|12|  + K |1 1 1 1 1 2 (2) 2 2 2 1 1 1 1 ...|#9 - (2,2)|#4 #1 #6 #6 #2|\n|13|  K |1 1 1 1 1 2 (2) [2] 2 2 1 1 1 1 ...||#4 #1 #6 #6 #2|\n|14|  + K |1 1 1 1 1 2 (2 2) 2 2 1 1 1 1 ...||#4 #1 #6 #6 #2|\n|15|  K |1 1 1 1 1 2 (2 2) [2] 2 1 1 1 1 ...||#4 #1 #6 #6 #2|\n|16|  + K |1 1 1 1 1 2 2 2 (2) 2 1 1 1 1 ...|#10 - (2,2,2)|#4 #1 #6 #6 #2 #9|\n|17|  K |1 1 1 1 1 2 2 2 (2) [2] 1 1 1 1 ...||#4 #1 #6 #6 #2 #9|\n|18|  + K |1 1 1 1 1 2 2 2 (2 2) 1 1 1 1 ...||#4 #1 #6 #6 #2 #9|\n|19|  K |1 1 1 1 1 2 2 2 (2 2) [1] 1 1 1 ...||#4 #1 #6 #6 #2 #9|\n|20|  + K |1 1 1 1 1 2 2 2 2 2 (1) 1 1 1 ...|#11 - (2,2,1)|#4 #1 #6 #6 #2 #9 #9|\n|21|  K |1 1 1 1 1 2 2 2 2 2 (1) [1] 1 1 ...||#4 #1 #6 #6 #2 #9 #9|\n|22|  + K |1 1 1 1 1 2 2 2 2 2 (1 1) 1 1 ...||#4 #1 #6 #6 #2 #9 #9|\n|23|  K |1 1 1 1 1 2 2 2 2 2 (1 1) [1] 1 ...||#4 #1 #6 #6 #2 #9 #9|\n|24|  + K |1 1 1 1 1 2 2 2 2 2 (1 1 1) 1 ...||#4 #1 #6 #6 #2 #9 #9|\n|25|  K |1 1 1 1 1 2 2 2 2 2 (1 1 1) [1] ...||#4 #1 #6 #6 #2 #9 #9|\n|26|  + K |1 1 1 1 1 2 2 2 2 2 1 1 1 (1) ...|#12 - (1,1,1,1)|#4 #1 #6 #6 #2 #9 #9 #7|\n\n\n #5\n\n\n    #4 #1 #6 #6 #2 #9 #9 #7 #8 #10 #2 #12 #1 #14 #15 #6 #0 #21 #0 #10 #7 #22 #23 #18 #26 #7 #10 #29 #13 #24 #12 #18 #16 #36 #12 #5\n    \n LZW  10*10 = 100 36\n\n### GIF  LZW \n\n LZW  GIF \n\n    #4 #1 #6 #6 #2 #9 #9 #7 #8 #10 #2 #12 #1 #14 #15 #6 #0 #21 #0 #10 #7 #22 #23 #18 #26 #7 #10 #29 #13 #24 #12 #18 #16 #36 #12 #5\n\n LZW \n\n\n\n- Code Stream\n- Index Stream\n- CODE   #6\n- CODE - 1  CODE \n- {CODE} CODE  #6 - 1,1  {CODE} = {11}\n- K \n\n #4 CODE  CODE = #1  CODE  1 \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n| 0 | | #4 (#1) #6 #6 #2 #9 #9 #7 ...|| 1 |\n\n ()  CODE []  CODE - 1CODE  #6 CODE - 1  #1 CODE  #6  #6  K = {CODE - 1}  CODE - 1 = {1} K = 1 {CODE - 1} + K#5 # 6 \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n| 0 | | #4 (#1) #6 #6 #2 #9 #9 #7 ...|| 1 |\n|1|  CODE | #4 [#1] \\(#6) #6 #2 #9 #9 #7 ... | #6 - 1,1|1,1,1|\n\nCODE  #6CODE - 1 #6 CODE  #6  {CODE}  K  K = 1 {CODE}  {CODE - 1} + K {CODE - 1}{11}{111}\n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n| 0 | | #4 (#1) #6 #6 #2 #9 #9 #7 ...|| 1 |\n|1|  CODE | #4 [#1] \\(#6) #6 #2 #9 #9 #7 ... | #6 - 1,1|1,1,1|\n|2|  CODE| #4 #1 [#6] \\(#6) #2 #9 #9 #7 ... | #7 - 1,1,1| 1,1,1,1,1|\n\nCODE  #2CODE - 1  #6 CODE  #2  {CODE}  {CODE}  K  K = 2 {CODE - 1} + K {112}\n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n| 0 | | #4 (#1) #6 #6 #2 #9 #9 #7 ...|| 1 |\n|1|  CODE | #4 [#1] \\(#6) #6 #2 #9 #9 #7 ... | #6 - 1,1|1,1,1|\n|2|  CODE| #4 #1 [#6] \\(#6) #2 #9 #9 #7 ... | #7 - 1,1,1| 1,1,1,1,1|\n|3|  CODE| #4 #1 #6 [#6] \\(#2) #9 #9 #7 ... | #8 - 1,1,2| 1,1,1,1,1,2|\n\n CODE K  {CODE}  K  {CODE - 1}   {CODE - 1}+K CODE {CODE} {CODE - 1} + K 6 \n\n|  |  |  |  |  |\n| --- | --- | --- | --- | --- |\n| 0 | | #4 (#1) #6 #6 #2 #9 #9 #7 ...|| 1 |\n|1|  CODE | #4 [#1] \\(#6) #6 #2 #9 #9 #7 ... | #6 - 1,1|1,1,1|\n|2|  CODE| #4 #1 [#6] \\(#6) #2 #9 #9 #7 ... | #7 - 1,1,1| 1,1,1,1,1|\n|3|  CODE| #4 #1 #6 [#6] \\(#2) #9 #9 #7 ... | #8 - 1,1,2| 1,1,1,1,1,2|\n|4|   CODE|  #4 #1 #6 #6 [#2] \\(#9) #9 #7 ... |#9 - 2,2|1,1,1,1,1,2,2,2|\n|5|  CODE |#4 #1 #6 #6 #2 [#9] \\(#9) #7 ...| #10 - 2,2,2|1,1,1,1,1,2,2,2,2,2|\n|6|  CODE|#4 #1 #6 #6 #2 #9 [#9] \\(#7) ...| #11 - 2,2,1|1,1,1,1,1,2,2,2,2,2,1,1,1|\n\n\n\n    1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, ...\n\n\n\n>  #4\n\n## \n\n### \n GIF  LZW \n\n    #4 #1 #6 #6 #2 #9 #9 #7 #8 #10 #2 #12 #1 #14 #15 #6 #0 #21 #0 #10 #7 #22 #23 #18 #26 #7 #10 #29 #13 #24 #12 #18 #16 #36 #12 #5\n    \n GIF  12 (mini code size) + 1  mini code size  2#4 + #1  + #6 #6 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/3.webp)\n\n\n code size  SIZESIZE  mini code size + 1 GIF  = 2^SIZE - 1  SIZE  SIZE 3 #7  SIZE  4  6  #7 #6 #6  4  12  #6  #2  2D  #2\n\n SIZE  #7  #8  #8 1000 #6 #6 #6 3\n\n### \n\n SIZE  3 8C  3 100 = #4#1#6#6 #2 #6  2  #7 - 1,1,1 7  2^3 - 1 = 2^SIZE - 1 SIZE  1 \n\n SIZE = 5\n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/4.webp)\n\n## \n[GIF ](http://www.jianshu.com/p/4fabac6b15b3) Image Data  Image Data \n\n    02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00\n    \n 02  mini code size = 2 SIZE = 3  16  22 \n\n 8C = 1 0 - 0 0 1 - 1 0 0 1 0 0 #4 0 0 1  #1`GIF  LZW `\n\n 2D = 0 0 1 0 - 1 1 0 - 1, 1  1 0  1 1 0  # 6 1 1 0  #6 `GIF  LZW ` #6 SIZE  + 1  4 0 0 1 0  #2 \n\n 99 = 1 0 0 1 - 1 0 0 1  1 0 0 1 #9 1 0 0 1  #9 \n\n #4 #1 #6 #6 #2 #9 #9`GIF  LZW`\n\n>  `GIF  LZW ```\n\n\n## \n\nGIF  LZW ","slug":"GIF-and-LWZ","published":1,"updated":"2024-08-21T03:16:19.779Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vo00065p6t41ok1m8h","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p> LZW  GIF  LZW </p>\n<blockquote>\n<p>LZW LZWUnisys2003</p>\n</blockquote>\n<p><code></code> LWZ </p>\n<span id=\"more\"></span>\n<p>AABCCBACBCBAABC<br></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td>A</td>\n</tr>\n<tr>\n<td>1</td>\n<td>B</td>\n</tr>\n<tr>\n<td>2</td>\n<td>C</td>\n</tr>\n<tr>\n<td>3</td>\n<td>AA</td>\n</tr>\n<tr>\n<td>4</td>\n<td>BC</td>\n</tr>\n<tr>\n<td>5</td>\n<td>CB</td>\n</tr>\n<tr>\n<td>6</td>\n<td>AC</td>\n</tr>\n<tr>\n<td>7</td>\n<td>BCB</td>\n</tr>\n<tr>\n<td>8</td>\n<td>AAB</td>\n</tr>\n</tbody></table>\n<p>345678 6  15  LZW  LZW </p>\n<h2 id=\"LZW--GIF-\"><a href=\"#LZW--GIF-\" class=\"headerlink\" title=\"LZW  GIF \"></a>LZW  GIF </h2><p>LZW  GIF  Global Color Table  Local Color Table </p>\n<p><a href=\"http://www.jianshu.com/p/4fabac6b15b3\">GIF </a> Image Data  <code>LZW Minimum Code Size</code> </p>\n<p> LZW  26  0 ~ 25 A~Z minimum code  28minmum code size 5  26  27  <code>clear code</code><code>end of information code</code></p>\n<p> GIF  2^(2~8) </p>\n<table>\n<thead>\n<tr>\n<th>LZW Mini Code Size</th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>2</td>\n<td>#0 - #3</td>\n<td>#4</td>\n<td>#5</td>\n</tr>\n<tr>\n<td>3</td>\n<td>#0 - #7</td>\n<td>#8</td>\n<td>#9</td>\n</tr>\n<tr>\n<td>4</td>\n<td>#0 - #15</td>\n<td>#16</td>\n<td>#17</td>\n</tr>\n<tr>\n<td>5</td>\n<td>#0 - #31</td>\n<td>#32</td>\n<td>#33</td>\n</tr>\n<tr>\n<td>6</td>\n<td>#0 - #63</td>\n<td>#64</td>\n<td>#65</td>\n</tr>\n<tr>\n<td>7</td>\n<td>#0 - #127</td>\n<td>#128</td>\n<td>#129</td>\n</tr>\n<tr>\n<td>8</td>\n<td>#0 - #255</td>\n<td>#256</td>\n<td>#257</td>\n</tr>\n</tbody></table>\n<p><br> LZW  LZW  GIF  12 </p>\n<h3 id=\"GIF--LZW\"><a href=\"#GIF--LZW\" class=\"headerlink\" title=\"GIF  LZW\"></a>GIF  LZW</h3><p><a href=\"http://www.jianshu.com/p/4fabac6b15b3\">GIF </a></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/1.webp\" alt=\"image\"></p>\n<p></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/2.webp\" alt=\"image\"></p>\n<p></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td>FFFFFF</td>\n<td></td>\n</tr>\n<tr>\n<td>1</td>\n<td>FF0000</td>\n<td></td>\n</tr>\n<tr>\n<td>2</td>\n<td>0000FF</td>\n<td></td>\n</tr>\n<tr>\n<td>3</td>\n<td>000000</td>\n<td></td>\n</tr>\n</tbody></table>\n<p></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>#0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>#1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>#2</td>\n<td>2</td>\n</tr>\n<tr>\n<td>#3</td>\n<td>3</td>\n</tr>\n<tr>\n<td>#4</td>\n<td></td>\n</tr>\n<tr>\n<td>#5</td>\n<td></td>\n</tr>\n</tbody></table>\n<p></p>\n<pre><code>1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, ...</code></pre><p></p>\n<ul>\n<li>Index Stream</li>\n<li>Code Stream</li>\n<li>Index Buffer</li>\n<li>K</li>\n</ul>\n<p> (index ) [index]  K</p>\n<p>K  #4</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n</tbody></table>\n<p></p>\n<p> K</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>1</td>\n<td></td>\n<td>(1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n</tbody></table>\n<p> K  + K  + K = (1,1) (1,1)  #6 - (1,1)  #6 (1) #1 K K  + K </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>1</td>\n<td></td>\n<td>(1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>2</td>\n<td> + K</td>\n<td>1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#6 - (1,1)</td>\n<td>#4 #1</td>\n</tr>\n</tbody></table>\n<p> K </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>1</td>\n<td> K</td>\n<td>(1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>2</td>\n<td> + K</td>\n<td>1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#6 - (1,1)</td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>3</td>\n<td> K</td>\n<td>1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n</tbody></table>\n<p> K  + K  + K = (1,1) #6  + K  K  + K </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>1</td>\n<td> K</td>\n<td>(1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>2</td>\n<td> + K</td>\n<td>1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#6 - (1,1)</td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>3</td>\n<td> K</td>\n<td>1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>4</td>\n<td> + K</td>\n<td>1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n</tbody></table>\n<p> K </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>1</td>\n<td> K</td>\n<td>(1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>2</td>\n<td> + K</td>\n<td>1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#6 - (1,1)</td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>3</td>\n<td> K</td>\n<td>1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>4</td>\n<td> + K</td>\n<td>1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>5</td>\n<td> K</td>\n<td>1 (1 1) [1] 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n</tbody></table>\n<p> + K  (1,1,1) + K</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>1</td>\n<td> K</td>\n<td>(1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>2</td>\n<td> + K</td>\n<td>1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#6 - (1,1)</td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>3</td>\n<td> K</td>\n<td>1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>4</td>\n<td> + K</td>\n<td>1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>5</td>\n<td> K</td>\n<td>1 (1 1) [1] 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>6</td>\n<td></td>\n<td>1 1 1 (1) 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#7 - (1,1,1)</td>\n<td>#4 #1 #6</td>\n</tr>\n</tbody></table>\n<p> + K 26 LZW </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>1</td>\n<td> K</td>\n<td>(1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>2</td>\n<td> + K</td>\n<td>1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#6 - (1,1)</td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>3</td>\n<td> K</td>\n<td>1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>4</td>\n<td> + K</td>\n<td>1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>5</td>\n<td> K</td>\n<td>1 (1 1) [1] 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>6</td>\n<td></td>\n<td>1 1 1 (1) 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#7 - (1,1,1)</td>\n<td>#4 #1 #6</td>\n</tr>\n<tr>\n<td>7</td>\n<td> K</td>\n<td>1 1 1 (1) [1] 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6</td>\n</tr>\n<tr>\n<td>8</td>\n<td> + K</td>\n<td>1 1 1 (1 1) 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6</td>\n</tr>\n<tr>\n<td>9</td>\n<td> K</td>\n<td>1 1 1 (1 1) [2] 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6</td>\n</tr>\n<tr>\n<td>10</td>\n<td> + K</td>\n<td>1 1 1 1 1 (2) 2 2 2 2 1 1 1 1 </td>\n<td>#8 - (1,1,2)</td>\n<td>#4 #1 #6 #6</td>\n</tr>\n<tr>\n<td>11</td>\n<td> K</td>\n<td>1 1 1 1 1 (2) [2] 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6</td>\n</tr>\n<tr>\n<td>12</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 (2) 2 2 2 1 1 1 1 </td>\n<td>#9 - (2,2)</td>\n<td>#4 #1 #6 #6 #2</td>\n</tr>\n<tr>\n<td>13</td>\n<td> K</td>\n<td>1 1 1 1 1 2 (2) [2] 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2</td>\n</tr>\n<tr>\n<td>14</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 (2 2) 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2</td>\n</tr>\n<tr>\n<td>15</td>\n<td> K</td>\n<td>1 1 1 1 1 2 (2 2) [2] 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2</td>\n</tr>\n<tr>\n<td>16</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 2 2 (2) 2 1 1 1 1 </td>\n<td>#10 - (2,2,2)</td>\n<td>#4 #1 #6 #6 #2 #9</td>\n</tr>\n<tr>\n<td>17</td>\n<td> K</td>\n<td>1 1 1 1 1 2 2 2 (2) [2] 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9</td>\n</tr>\n<tr>\n<td>18</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 2 2 (2 2) 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9</td>\n</tr>\n<tr>\n<td>19</td>\n<td> K</td>\n<td>1 1 1 1 1 2 2 2 (2 2) [1] 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9</td>\n</tr>\n<tr>\n<td>20</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 2 2 2 2 (1) 1 1 1 </td>\n<td>#11 - (2,2,1)</td>\n<td>#4 #1 #6 #6 #2 #9 #9</td>\n</tr>\n<tr>\n<td>21</td>\n<td> K</td>\n<td>1 1 1 1 1 2 2 2 2 2 (1) [1] 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9 #9</td>\n</tr>\n<tr>\n<td>22</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 2 2 2 2 (1 1) 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9 #9</td>\n</tr>\n<tr>\n<td>23</td>\n<td> K</td>\n<td>1 1 1 1 1 2 2 2 2 2 (1 1) [1] 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9 #9</td>\n</tr>\n<tr>\n<td>24</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 2 2 2 2 (1 1 1) 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9 #9</td>\n</tr>\n<tr>\n<td>25</td>\n<td> K</td>\n<td>1 1 1 1 1 2 2 2 2 2 (1 1 1) [1] </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9 #9</td>\n</tr>\n<tr>\n<td>26</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 2 2 2 2 1 1 1 (1) </td>\n<td>#12 - (1,1,1,1)</td>\n<td>#4 #1 #6 #6 #2 #9 #9 #7</td>\n</tr>\n</tbody></table>\n<p> #5<br></p>\n<pre><code>#4 #1 #6 #6 #2 #9 #9 #7 #8 #10 #2 #12 #1 #14 #15 #6 #0 #21 #0 #10 #7 #22 #23 #18 #26 #7 #10 #29 #13 #24 #12 #18 #16 #36 #12 #5</code></pre><p> LZW  10*10 = 100 36</p>\n<h3 id=\"GIF--LZW-\"><a href=\"#GIF--LZW-\" class=\"headerlink\" title=\"GIF  LZW \"></a>GIF  LZW </h3><p> LZW  GIF </p>\n<pre><code>#4 #1 #6 #6 #2 #9 #9 #7 #8 #10 #2 #12 #1 #14 #15 #6 #0 #21 #0 #10 #7 #22 #23 #18 #26 #7 #10 #29 #13 #24 #12 #18 #16 #36 #12 #5</code></pre><p> LZW </p>\n<p></p>\n<ul>\n<li>Code Stream</li>\n<li>Index Stream</li>\n<li>CODE   #6</li>\n<li>CODE - 1  CODE </li>\n<li>{CODE} CODE  #6 - 1,1  {CODE} = {11}</li>\n<li>K </li>\n</ul>\n<p> #4 CODE  CODE = #1  CODE  1 </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>#4 (#1) #6 #6 #2 #9 #9 #7 </td>\n<td></td>\n<td>1</td>\n</tr>\n</tbody></table>\n<p> ()  CODE []  CODE - 1CODE  #6 CODE - 1  #1 CODE  #6  #6  K = {CODE - 1}  CODE - 1 = {1} K = 1 {CODE - 1} + K#5 # 6 </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>#4 (#1) #6 #6 #2 #9 #9 #7 </td>\n<td></td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td> CODE</td>\n<td>#4 [#1] (#6) #6 #2 #9 #9 #7 </td>\n<td>#6 - 1,1</td>\n<td>1,1,1</td>\n</tr>\n</tbody></table>\n<p>CODE  #6CODE - 1 #6 CODE  #6  {CODE}  K  K = 1 {CODE}  {CODE - 1} + K {CODE - 1}{11}{111}</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>#4 (#1) #6 #6 #2 #9 #9 #7 </td>\n<td></td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td> CODE</td>\n<td>#4 [#1] (#6) #6 #2 #9 #9 #7 </td>\n<td>#6 - 1,1</td>\n<td>1,1,1</td>\n</tr>\n<tr>\n<td>2</td>\n<td> CODE</td>\n<td>#4 #1 [#6] (#6) #2 #9 #9 #7 </td>\n<td>#7 - 1,1,1</td>\n<td>1,1,1,1,1</td>\n</tr>\n</tbody></table>\n<p>CODE  #2CODE - 1  #6 CODE  #2  {CODE}  {CODE}  K  K = 2 {CODE - 1} + K {112}</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>#4 (#1) #6 #6 #2 #9 #9 #7 </td>\n<td></td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td> CODE</td>\n<td>#4 [#1] (#6) #6 #2 #9 #9 #7 </td>\n<td>#6 - 1,1</td>\n<td>1,1,1</td>\n</tr>\n<tr>\n<td>2</td>\n<td> CODE</td>\n<td>#4 #1 [#6] (#6) #2 #9 #9 #7 </td>\n<td>#7 - 1,1,1</td>\n<td>1,1,1,1,1</td>\n</tr>\n<tr>\n<td>3</td>\n<td> CODE</td>\n<td>#4 #1 #6 [#6] (#2) #9 #9 #7 </td>\n<td>#8 - 1,1,2</td>\n<td>1,1,1,1,1,2</td>\n</tr>\n</tbody></table>\n<p> CODE K  {CODE}  K  {CODE - 1}   {CODE - 1}+K CODE {CODE} {CODE - 1} + K 6 </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>#4 (#1) #6 #6 #2 #9 #9 #7 </td>\n<td></td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td> CODE</td>\n<td>#4 [#1] (#6) #6 #2 #9 #9 #7 </td>\n<td>#6 - 1,1</td>\n<td>1,1,1</td>\n</tr>\n<tr>\n<td>2</td>\n<td> CODE</td>\n<td>#4 #1 [#6] (#6) #2 #9 #9 #7 </td>\n<td>#7 - 1,1,1</td>\n<td>1,1,1,1,1</td>\n</tr>\n<tr>\n<td>3</td>\n<td> CODE</td>\n<td>#4 #1 #6 [#6] (#2) #9 #9 #7 </td>\n<td>#8 - 1,1,2</td>\n<td>1,1,1,1,1,2</td>\n</tr>\n<tr>\n<td>4</td>\n<td> CODE</td>\n<td>#4 #1 #6 #6 [#2] (#9) #9 #7 </td>\n<td>#9 - 2,2</td>\n<td>1,1,1,1,1,2,2,2</td>\n</tr>\n<tr>\n<td>5</td>\n<td> CODE</td>\n<td>#4 #1 #6 #6 #2 [#9] (#9) #7 </td>\n<td>#10 - 2,2,2</td>\n<td>1,1,1,1,1,2,2,2,2,2</td>\n</tr>\n<tr>\n<td>6</td>\n<td> CODE</td>\n<td>#4 #1 #6 #6 #2 #9 [#9] (#7) </td>\n<td>#11 - 2,2,1</td>\n<td>1,1,1,1,1,2,2,2,2,2,1,1,1</td>\n</tr>\n</tbody></table>\n<p></p>\n<pre><code>1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, ...</code></pre><p></p>\n<blockquote>\n<p> #4</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> GIF  LZW </p>\n<pre><code>#4 #1 #6 #6 #2 #9 #9 #7 #8 #10 #2 #12 #1 #14 #15 #6 #0 #21 #0 #10 #7 #22 #23 #18 #26 #7 #10 #29 #13 #24 #12 #18 #16 #36 #12 #5</code></pre><p> GIF  12 (mini code size) + 1  mini code size  2#4 + #1  + #6 #6 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/3.webp\" alt=\"image\"></p>\n<p> code size  SIZESIZE  mini code size + 1 GIF  = 2^SIZE - 1  SIZE  SIZE 3 #7  SIZE  4  6  #7 #6 #6  4  12  #6  #2  2D  #2</p>\n<p> SIZE  #7  #8  #8 1000 #6 #6 #6 3</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> SIZE  3 8C  3 100 = #4#1#6#6 #2 #6  2  #7 - 1,1,1 7  2^3 - 1 = 2^SIZE - 1 SIZE  1 </p>\n<p> SIZE = 5</p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/4.webp\" alt=\"image\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"http://www.jianshu.com/p/4fabac6b15b3\">GIF </a> Image Data  Image Data </p>\n<pre><code>02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00</code></pre><p> 02  mini code size = 2 SIZE = 3  16  22 </p>\n<p> 8C = 1 0 - 0 0 1 - 1 0 0 1 0 0 #4 0 0 1  #1<code>GIF  LZW </code></p>\n<p> 2D = 0 0 1 0 - 1 1 0 - 1, 1  1 0  1 1 0  # 6 1 1 0  #6 <code>GIF  LZW </code> #6 SIZE  + 1  4 0 0 1 0  #2 </p>\n<p> 99 = 1 0 0 1 - 1 0 0 1  1 0 0 1 #9 1 0 0 1  #9 </p>\n<p> #4 #1 #6 #6 #2 #9 #9<code>GIF  LZW</code></p>\n<blockquote>\n<p> <code>GIF  LZW </code><code></code></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GIF  LZW </p>\n","excerpt":"<p> LZW  GIF  LZW </p>\n<blockquote>\n<p>LZW LZWUnisys2003</p>\n</blockquote>\n<p><code></code> LWZ </p>","more":"<p>AABCCBACBCBAABC<br></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td>A</td>\n</tr>\n<tr>\n<td>1</td>\n<td>B</td>\n</tr>\n<tr>\n<td>2</td>\n<td>C</td>\n</tr>\n<tr>\n<td>3</td>\n<td>AA</td>\n</tr>\n<tr>\n<td>4</td>\n<td>BC</td>\n</tr>\n<tr>\n<td>5</td>\n<td>CB</td>\n</tr>\n<tr>\n<td>6</td>\n<td>AC</td>\n</tr>\n<tr>\n<td>7</td>\n<td>BCB</td>\n</tr>\n<tr>\n<td>8</td>\n<td>AAB</td>\n</tr>\n</tbody></table>\n<p>345678 6  15  LZW  LZW </p>\n<h2 id=\"LZW--GIF-\"><a href=\"#LZW--GIF-\" class=\"headerlink\" title=\"LZW  GIF \"></a>LZW  GIF </h2><p>LZW  GIF  Global Color Table  Local Color Table </p>\n<p><a href=\"http://www.jianshu.com/p/4fabac6b15b3\">GIF </a> Image Data  <code>LZW Minimum Code Size</code> </p>\n<p> LZW  26  0 ~ 25 A~Z minimum code  28minmum code size 5  26  27  <code>clear code</code><code>end of information code</code></p>\n<p> GIF  2^(2~8) </p>\n<table>\n<thead>\n<tr>\n<th>LZW Mini Code Size</th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>2</td>\n<td>#0 - #3</td>\n<td>#4</td>\n<td>#5</td>\n</tr>\n<tr>\n<td>3</td>\n<td>#0 - #7</td>\n<td>#8</td>\n<td>#9</td>\n</tr>\n<tr>\n<td>4</td>\n<td>#0 - #15</td>\n<td>#16</td>\n<td>#17</td>\n</tr>\n<tr>\n<td>5</td>\n<td>#0 - #31</td>\n<td>#32</td>\n<td>#33</td>\n</tr>\n<tr>\n<td>6</td>\n<td>#0 - #63</td>\n<td>#64</td>\n<td>#65</td>\n</tr>\n<tr>\n<td>7</td>\n<td>#0 - #127</td>\n<td>#128</td>\n<td>#129</td>\n</tr>\n<tr>\n<td>8</td>\n<td>#0 - #255</td>\n<td>#256</td>\n<td>#257</td>\n</tr>\n</tbody></table>\n<p><br> LZW  LZW  GIF  12 </p>\n<h3 id=\"GIF--LZW\"><a href=\"#GIF--LZW\" class=\"headerlink\" title=\"GIF  LZW\"></a>GIF  LZW</h3><p><a href=\"http://www.jianshu.com/p/4fabac6b15b3\">GIF </a></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/1.webp\" alt=\"image\"></p>\n<p></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/2.webp\" alt=\"image\"></p>\n<p></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td>FFFFFF</td>\n<td></td>\n</tr>\n<tr>\n<td>1</td>\n<td>FF0000</td>\n<td></td>\n</tr>\n<tr>\n<td>2</td>\n<td>0000FF</td>\n<td></td>\n</tr>\n<tr>\n<td>3</td>\n<td>000000</td>\n<td></td>\n</tr>\n</tbody></table>\n<p></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>#0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>#1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>#2</td>\n<td>2</td>\n</tr>\n<tr>\n<td>#3</td>\n<td>3</td>\n</tr>\n<tr>\n<td>#4</td>\n<td></td>\n</tr>\n<tr>\n<td>#5</td>\n<td></td>\n</tr>\n</tbody></table>\n<p></p>\n<pre><code>1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, ...</code></pre><p></p>\n<ul>\n<li>Index Stream</li>\n<li>Code Stream</li>\n<li>Index Buffer</li>\n<li>K</li>\n</ul>\n<p> (index ) [index]  K</p>\n<p>K  #4</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n</tbody></table>\n<p></p>\n<p> K</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>1</td>\n<td></td>\n<td>(1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n</tbody></table>\n<p> K  + K  + K = (1,1) (1,1)  #6 - (1,1)  #6 (1) #1 K K  + K </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>1</td>\n<td></td>\n<td>(1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>2</td>\n<td> + K</td>\n<td>1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#6 - (1,1)</td>\n<td>#4 #1</td>\n</tr>\n</tbody></table>\n<p> K </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>1</td>\n<td> K</td>\n<td>(1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>2</td>\n<td> + K</td>\n<td>1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#6 - (1,1)</td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>3</td>\n<td> K</td>\n<td>1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n</tbody></table>\n<p> K  + K  + K = (1,1) #6  + K  K  + K </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>1</td>\n<td> K</td>\n<td>(1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>2</td>\n<td> + K</td>\n<td>1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#6 - (1,1)</td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>3</td>\n<td> K</td>\n<td>1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>4</td>\n<td> + K</td>\n<td>1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n</tbody></table>\n<p> K </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>1</td>\n<td> K</td>\n<td>(1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>2</td>\n<td> + K</td>\n<td>1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#6 - (1,1)</td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>3</td>\n<td> K</td>\n<td>1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>4</td>\n<td> + K</td>\n<td>1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>5</td>\n<td> K</td>\n<td>1 (1 1) [1] 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n</tbody></table>\n<p> + K  (1,1,1) + K</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>1</td>\n<td> K</td>\n<td>(1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>2</td>\n<td> + K</td>\n<td>1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#6 - (1,1)</td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>3</td>\n<td> K</td>\n<td>1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>4</td>\n<td> + K</td>\n<td>1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>5</td>\n<td> K</td>\n<td>1 (1 1) [1] 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>6</td>\n<td></td>\n<td>1 1 1 (1) 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#7 - (1,1,1)</td>\n<td>#4 #1 #6</td>\n</tr>\n</tbody></table>\n<p> + K 26 LZW </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>(1) 1 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>1</td>\n<td> K</td>\n<td>(1) [1] 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4</td>\n</tr>\n<tr>\n<td>2</td>\n<td> + K</td>\n<td>1 (1) 1 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#6 - (1,1)</td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>3</td>\n<td> K</td>\n<td>1 (1) [1] 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>4</td>\n<td> + K</td>\n<td>1 (1 1) 1 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>5</td>\n<td> K</td>\n<td>1 (1 1) [1] 1 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1</td>\n</tr>\n<tr>\n<td>6</td>\n<td></td>\n<td>1 1 1 (1) 1 2 2 2 2 2 1 1 1 1 </td>\n<td>#7 - (1,1,1)</td>\n<td>#4 #1 #6</td>\n</tr>\n<tr>\n<td>7</td>\n<td> K</td>\n<td>1 1 1 (1) [1] 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6</td>\n</tr>\n<tr>\n<td>8</td>\n<td> + K</td>\n<td>1 1 1 (1 1) 2 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6</td>\n</tr>\n<tr>\n<td>9</td>\n<td> K</td>\n<td>1 1 1 (1 1) [2] 2 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6</td>\n</tr>\n<tr>\n<td>10</td>\n<td> + K</td>\n<td>1 1 1 1 1 (2) 2 2 2 2 1 1 1 1 </td>\n<td>#8 - (1,1,2)</td>\n<td>#4 #1 #6 #6</td>\n</tr>\n<tr>\n<td>11</td>\n<td> K</td>\n<td>1 1 1 1 1 (2) [2] 2 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6</td>\n</tr>\n<tr>\n<td>12</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 (2) 2 2 2 1 1 1 1 </td>\n<td>#9 - (2,2)</td>\n<td>#4 #1 #6 #6 #2</td>\n</tr>\n<tr>\n<td>13</td>\n<td> K</td>\n<td>1 1 1 1 1 2 (2) [2] 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2</td>\n</tr>\n<tr>\n<td>14</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 (2 2) 2 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2</td>\n</tr>\n<tr>\n<td>15</td>\n<td> K</td>\n<td>1 1 1 1 1 2 (2 2) [2] 2 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2</td>\n</tr>\n<tr>\n<td>16</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 2 2 (2) 2 1 1 1 1 </td>\n<td>#10 - (2,2,2)</td>\n<td>#4 #1 #6 #6 #2 #9</td>\n</tr>\n<tr>\n<td>17</td>\n<td> K</td>\n<td>1 1 1 1 1 2 2 2 (2) [2] 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9</td>\n</tr>\n<tr>\n<td>18</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 2 2 (2 2) 1 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9</td>\n</tr>\n<tr>\n<td>19</td>\n<td> K</td>\n<td>1 1 1 1 1 2 2 2 (2 2) [1] 1 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9</td>\n</tr>\n<tr>\n<td>20</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 2 2 2 2 (1) 1 1 1 </td>\n<td>#11 - (2,2,1)</td>\n<td>#4 #1 #6 #6 #2 #9 #9</td>\n</tr>\n<tr>\n<td>21</td>\n<td> K</td>\n<td>1 1 1 1 1 2 2 2 2 2 (1) [1] 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9 #9</td>\n</tr>\n<tr>\n<td>22</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 2 2 2 2 (1 1) 1 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9 #9</td>\n</tr>\n<tr>\n<td>23</td>\n<td> K</td>\n<td>1 1 1 1 1 2 2 2 2 2 (1 1) [1] 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9 #9</td>\n</tr>\n<tr>\n<td>24</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 2 2 2 2 (1 1 1) 1 </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9 #9</td>\n</tr>\n<tr>\n<td>25</td>\n<td> K</td>\n<td>1 1 1 1 1 2 2 2 2 2 (1 1 1) [1] </td>\n<td></td>\n<td>#4 #1 #6 #6 #2 #9 #9</td>\n</tr>\n<tr>\n<td>26</td>\n<td> + K</td>\n<td>1 1 1 1 1 2 2 2 2 2 1 1 1 (1) </td>\n<td>#12 - (1,1,1,1)</td>\n<td>#4 #1 #6 #6 #2 #9 #9 #7</td>\n</tr>\n</tbody></table>\n<p> #5<br></p>\n<pre><code>#4 #1 #6 #6 #2 #9 #9 #7 #8 #10 #2 #12 #1 #14 #15 #6 #0 #21 #0 #10 #7 #22 #23 #18 #26 #7 #10 #29 #13 #24 #12 #18 #16 #36 #12 #5</code></pre><p> LZW  10*10 = 100 36</p>\n<h3 id=\"GIF--LZW-\"><a href=\"#GIF--LZW-\" class=\"headerlink\" title=\"GIF  LZW \"></a>GIF  LZW </h3><p> LZW  GIF </p>\n<pre><code>#4 #1 #6 #6 #2 #9 #9 #7 #8 #10 #2 #12 #1 #14 #15 #6 #0 #21 #0 #10 #7 #22 #23 #18 #26 #7 #10 #29 #13 #24 #12 #18 #16 #36 #12 #5</code></pre><p> LZW </p>\n<p></p>\n<ul>\n<li>Code Stream</li>\n<li>Index Stream</li>\n<li>CODE   #6</li>\n<li>CODE - 1  CODE </li>\n<li>{CODE} CODE  #6 - 1,1  {CODE} = {11}</li>\n<li>K </li>\n</ul>\n<p> #4 CODE  CODE = #1  CODE  1 </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>#4 (#1) #6 #6 #2 #9 #9 #7 </td>\n<td></td>\n<td>1</td>\n</tr>\n</tbody></table>\n<p> ()  CODE []  CODE - 1CODE  #6 CODE - 1  #1 CODE  #6  #6  K = {CODE - 1}  CODE - 1 = {1} K = 1 {CODE - 1} + K#5 # 6 </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>#4 (#1) #6 #6 #2 #9 #9 #7 </td>\n<td></td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td> CODE</td>\n<td>#4 [#1] (#6) #6 #2 #9 #9 #7 </td>\n<td>#6 - 1,1</td>\n<td>1,1,1</td>\n</tr>\n</tbody></table>\n<p>CODE  #6CODE - 1 #6 CODE  #6  {CODE}  K  K = 1 {CODE}  {CODE - 1} + K {CODE - 1}{11}{111}</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>#4 (#1) #6 #6 #2 #9 #9 #7 </td>\n<td></td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td> CODE</td>\n<td>#4 [#1] (#6) #6 #2 #9 #9 #7 </td>\n<td>#6 - 1,1</td>\n<td>1,1,1</td>\n</tr>\n<tr>\n<td>2</td>\n<td> CODE</td>\n<td>#4 #1 [#6] (#6) #2 #9 #9 #7 </td>\n<td>#7 - 1,1,1</td>\n<td>1,1,1,1,1</td>\n</tr>\n</tbody></table>\n<p>CODE  #2CODE - 1  #6 CODE  #2  {CODE}  {CODE}  K  K = 2 {CODE - 1} + K {112}</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>#4 (#1) #6 #6 #2 #9 #9 #7 </td>\n<td></td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td> CODE</td>\n<td>#4 [#1] (#6) #6 #2 #9 #9 #7 </td>\n<td>#6 - 1,1</td>\n<td>1,1,1</td>\n</tr>\n<tr>\n<td>2</td>\n<td> CODE</td>\n<td>#4 #1 [#6] (#6) #2 #9 #9 #7 </td>\n<td>#7 - 1,1,1</td>\n<td>1,1,1,1,1</td>\n</tr>\n<tr>\n<td>3</td>\n<td> CODE</td>\n<td>#4 #1 #6 [#6] (#2) #9 #9 #7 </td>\n<td>#8 - 1,1,2</td>\n<td>1,1,1,1,1,2</td>\n</tr>\n</tbody></table>\n<p> CODE K  {CODE}  K  {CODE - 1}   {CODE - 1}+K CODE {CODE} {CODE - 1} + K 6 </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td></td>\n<td>#4 (#1) #6 #6 #2 #9 #9 #7 </td>\n<td></td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td> CODE</td>\n<td>#4 [#1] (#6) #6 #2 #9 #9 #7 </td>\n<td>#6 - 1,1</td>\n<td>1,1,1</td>\n</tr>\n<tr>\n<td>2</td>\n<td> CODE</td>\n<td>#4 #1 [#6] (#6) #2 #9 #9 #7 </td>\n<td>#7 - 1,1,1</td>\n<td>1,1,1,1,1</td>\n</tr>\n<tr>\n<td>3</td>\n<td> CODE</td>\n<td>#4 #1 #6 [#6] (#2) #9 #9 #7 </td>\n<td>#8 - 1,1,2</td>\n<td>1,1,1,1,1,2</td>\n</tr>\n<tr>\n<td>4</td>\n<td> CODE</td>\n<td>#4 #1 #6 #6 [#2] (#9) #9 #7 </td>\n<td>#9 - 2,2</td>\n<td>1,1,1,1,1,2,2,2</td>\n</tr>\n<tr>\n<td>5</td>\n<td> CODE</td>\n<td>#4 #1 #6 #6 #2 [#9] (#9) #7 </td>\n<td>#10 - 2,2,2</td>\n<td>1,1,1,1,1,2,2,2,2,2</td>\n</tr>\n<tr>\n<td>6</td>\n<td> CODE</td>\n<td>#4 #1 #6 #6 #2 #9 [#9] (#7) </td>\n<td>#11 - 2,2,1</td>\n<td>1,1,1,1,1,2,2,2,2,2,1,1,1</td>\n</tr>\n</tbody></table>\n<p></p>\n<pre><code>1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, ...</code></pre><p></p>\n<blockquote>\n<p> #4</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> GIF  LZW </p>\n<pre><code>#4 #1 #6 #6 #2 #9 #9 #7 #8 #10 #2 #12 #1 #14 #15 #6 #0 #21 #0 #10 #7 #22 #23 #18 #26 #7 #10 #29 #13 #24 #12 #18 #16 #36 #12 #5</code></pre><p> GIF  12 (mini code size) + 1  mini code size  2#4 + #1  + #6 #6 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/3.webp\" alt=\"image\"></p>\n<p> code size  SIZESIZE  mini code size + 1 GIF  = 2^SIZE - 1  SIZE  SIZE 3 #7  SIZE  4  6  #7 #6 #6  4  12  #6  #2  2D  #2</p>\n<p> SIZE  #7  #8  #8 1000 #6 #6 #6 3</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> SIZE  3 8C  3 100 = #4#1#6#6 #2 #6  2  #7 - 1,1,1 7  2^3 - 1 = 2^SIZE - 1 SIZE  1 </p>\n<p> SIZE = 5</p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/gif/4.webp\" alt=\"image\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"http://www.jianshu.com/p/4fabac6b15b3\">GIF </a> Image Data  Image Data </p>\n<pre><code>02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00</code></pre><p> 02  mini code size = 2 SIZE = 3  16  22 </p>\n<p> 8C = 1 0 - 0 0 1 - 1 0 0 1 0 0 #4 0 0 1  #1<code>GIF  LZW </code></p>\n<p> 2D = 0 0 1 0 - 1 1 0 - 1, 1  1 0  1 1 0  # 6 1 1 0  #6 <code>GIF  LZW </code> #6 SIZE  + 1  4 0 0 1 0  #2 </p>\n<p> 99 = 1 0 0 1 - 1 0 0 1  1 0 0 1 #9 1 0 0 1  #9 </p>\n<p> #4 #1 #6 #6 #2 #9 #9<code>GIF  LZW</code></p>\n<blockquote>\n<p> <code>GIF  LZW </code><code></code></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GIF  LZW </p>"},{"title":"AndroidRoom[]","date":"2017-05-22T09:52:27.000Z","cover":"http://cdn.zqlxtt.cn/final-architecture.png","_content":"## Room\n\nRoomSQLiteSQLite\n\nApp\n\nAndroidFrameworkSQLSQLiteAPISQLiteAPI\n\n- SQLSQL\n- SQLJava\n\n`Room`SQL\n<!-- more -->\nRoom\n\n- **Database**`Entity`EntityDatabaseDAODatabaseAppSQLite\n`RoomDatabase``Room.databaseBuilder()``Room.inMemoryDatabaseBuilder().`GreenDao\n\n- **Entity**Entity`table`EntityDatabase`entities`Entity`@Ignore`\n\n> ****EntityDAOEntityRoom\n\n- **DAO**`Data Access Object(DAO)`DAORoom`RoomDatabase`0DAORoomDAO\n\n> ****DAODAOAPPMock\n\n<!--more-->\n\n\n\n![room architecture](http://backup.flutter-dev.cn/room_architecture.png)\n\nEntityDaoDatabase\n\nUser.java\n\n```java\n@Entity\npublic class User {\n    @PrimaryKey\n    private int uid;\n\n    @ColumnInfo(name = \"first_name\")\n    private String firstName;\n\n    @ColumnInfo(name = \"last_name\")\n    private String lastName;\n\n    // Getters and setters are ignored for brevity,\n    // but they're required for Room to work.\n}\n```\n\nUserDao.java\n\n```java\n@Dao\npublic interface UserDao {\n    @Query(\"SELECT * FROM user\")\n    List<User> getAll();\n\n    @Query(\"SELECT * FROM user WHERE uid IN (:userIds)\")\n    List<User> loadAllByIds(int[] userIds);\n\n    @Query(\"SELECT * FROM user WHERE first_name LIKE :first AND \"\n           + \"last_name LIKE :last LIMIT 1\")\n    User findByName(String first, String last);\n\n    @Insert\n    void insertAll(User... users);\n\n    @Delete\n    void delete(User user);\n}\n```\n\nAppDatabase.java\n\n```java\n@Database(entities = {User.class}, version = 1)\npublic abstract class AppDatabase extends RoomDatabase {\n    public abstract UserDao userDao();\n}\n```\n\nAppDatabase\n\n```java\nAppDatabase db = Room.databaseBuilder(getApplicationContext(),\n        AppDatabase.class, \"database-name\").build();\n```\n\n> ****AppDatabase\n\n\n## Entity\n\n`@Entity`Database`@entities`Room\n\nRoomEntity`@Ignore`\n\n```java\n@Entity\nclass User {\n    @PrimaryKey\n    public int id;\n\n    public String firstName;\n    public String lastName;\n\n    @Ignore\n    Bitmap picture;\n}\n```\n\nRoomEntity`public``setter``getter`settergetter`Java Beans`\n\n### Primary key\n\nEntityEntity`@PrimaryKey`RoomEntityID@Primary`autoGenerate`Entity@EntityprimaryKeys\n\n```java\n@Entity(primaryKeys = {\"firstName\", \"lastName\"})\nclass User {\n    public String firstName;\n    public String lastName;\n\n    @Ignore\n    Bitmap picture;\n}\n```\n\nRoomEntity@Entity`tableName`,\n\n```java\n@Entity(tableName = \"users\")\nclass User {\n    ...\n}\n```\n\n> ****SQLite\n\ntableNameRoomEntity`@ColumnInfo``name`\n\n```java\n@Entity(tableName = \"users\")\nclass User {\n    @PrimaryKey\n    public int id;\n\n    @ColumnInfo(name = \"first_name\")\n    public String firstName;\n\n    @ColumnInfo(name = \"last_name\")\n    public String lastName;\n\n    @Ignore\n    Bitmap picture;\n}\n```\n\n### \n\nEntity@Entity`indices`\n\n```java\n@Entity(indices = {@Index(\"firstName\"), @Index(\"last_name\", \"address\")})\nclass User {\n    @PrimaryKey\n    public int id;\n\n    public String firstName;\n    public String address;\n\n    @ColumnInfo(name = \"last_name\")\n    public String lastName;\n\n    @Ignore\n    Bitmap picture;\n}\n```\n@Index`unique`tureUser\n\n```java\n@Entity(indices = {@Index(value = {\"first_name\", \"last_name\"},\n        unique = true)})\nclass User {\n    @PrimaryKey\n    public int id;\n\n    @ColumnInfo(name = \"first_name\")\n    public String firstName;\n\n    @ColumnInfo(name = \"last_name\")\n    public String lastName;\n\n    @Ignore\n    Bitmap picture;\n}\n```\n\n### \n\nSQLiteRoom\n\nRoomEntityRoomEntity`Foreign Key`\n\nEntity`Book``@ForeignKey`User\n\n```java\n@Entity(foreignKeys = @ForeignKey(entity = User.class,\n                                  parentColumns = \"id\",\n                                  childColumns = \"user_id\"))\nclass Book {\n    @PrimaryKey\n    public int bookId;\n\n    public String title;\n\n    @ColumnInfo(name = \"user_id\")\n    public int userId;\n}\n```\n\nBook@ForeignKey`onDelete``CASCADE`\n\n> ****SQLite`@Insert(onConflict=REPLACE)``REMOVE``REPLACE``UPDATE`REMOVE\n\n\n### \n\nJava`@Embedded`\n\nUser`Address`Address`street,city,state``postCode`AddressUser\n\n```java\nclass Address {\n    public String street;\n    public String state;\n    public String city;\n\n    @ColumnInfo(name = \"post_code\")\n    public int postCode;\n}\n\n@Entity\nclass User {\n    @PrimaryKey\n    public int id;\n\n    public String firstName;\n\n    @Embedded\n    public Address address;\n}\n```\n\nUser`id, firstName, street, state, city``post_code`\n\n> ****\n\nUserAB@Embedded`prefix`Roomtableprefix\n\n## Data Access Objects (DAOs)\n\nRoom`Dao`DAO\n\n### Intert\n\nDAO`@Insert`Room\n\n```java\n@Dao\npublic interface MyDao {\n    @Insert(onConflict = OnConflictStrategy.REPLACE)\n    public void insertUsers(User... users);\n\n    @Insert\n    public void insertBothUsers(User user1, User user2);\n\n    @Insert\n    public void insertUsersAndFriends(User user, List<User> friends);\n}\n```\nlongid`long[]``List<Long>`\n\n### Update\n\nUpdate\n\n```java\n@Dao\npublic interface MyDao {\n    @Update\n    public void updateUsers(User... users);\n}\n```\nint\n\n### DELETE\n\nDelete\n\n```java\n@Dao\npublic interface MyDao {\n    @Delete\n    public void deleteUsers(User... users);\n}\n```\nint\n\n### QUERY\n\n`@Query`DAO@QueryqueryApp\n\nRoomqueryRoom\n\n- \n- \n\n#### \n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT * FROM user\")\n    public User[] loadAllUsers();\n}\n```\nRoomUseruserRoom\n\n#### \nUser\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT * FROM user WHERE age > :minAge\")\n    public User[] loadAllUsersOlderThan(int minAge);\n}\n```\nRoomminAge`:minAge`\n\n\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT * FROM user WHERE age BETWEEN :minAge AND :maxAge\")\n    public User[] loadAllUsersBetweenAges(int minAge, int maxAge);\n\n    @Query(\"SELECT * FROM user WHERE first_name LIKE :search \"\n           + \"OR last_name LIKE :search\")\n    public List<User> findUserWithName(String search);\n}\n```\n\n#### \n\nEntityUIUserUI\n\n\n\n```java\npublic class NameTuple {\n    @ColumnInfo(name=\"first_name\")\n    public String firstName;\n\n    @ColumnInfo(name=\"last_name\")\n    public String lastName;\n}\n```\nDAONameTuple\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT first_name, last_name FROM user\")\n    public List<NameTuple> loadFullName();\n}\n```\nRoom`first_name``last_name`NameTupleRoomNameTuple\n\n> ****NameTuple@Embedded\n\n#### \n\n\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT first_name, last_name FROM user WHERE region IN (:regions)\")\n    public List<NameTuple> loadUsersFromRegions(List<String> regions);\n}\n```\nRoomSQL\n\n#### \n\nUIUI`LiveData`\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT first_name, last_name FROM user WHERE region IN (:regions)\")\n    public LiveData<List<User>> loadUsersFromRegionsSync(List<String> regions);\n}\n```\n\nRxJavaRoomExJava2`Publisher``Flowable`\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT * from user where id = :id LIMIT 1\")\n    public Flowable<User> loadUserById(int id);\n}\n```\n\n#### Cursor\nAppCursorDAOCurso\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT * FROM user WHERE age > :minAge LIMIT 5\")\n    public Cursor loadRawUsersOlderThan(int minAge);\n}\n```\n\n> ****RoomCursorCursor\n\n#### \n\nRoomRoom\n\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT * FROM book \"\n           + \"INNER JOIN loan ON loan.book_id = book.id \"\n           + \"INNER JOIN user ON user.id = loan.user_id \"\n           + \"WHERE user.name LIKE :userName\")\n   public List<Book> findBooksBorrowedByNameSync(String userName);\n}\n```\n\njava\n\n```java\n@Dao\npublic interface MyDao {\n   @Query(\"SELECT user.name AS userName, pet.name AS petName \"\n          + \"FROM user, pet \"\n          + \"WHERE user.id = pet.user_id\")\n   public LiveData<List<UserPet>> loadUserAndPetNames();\n\n   // You can also define this class in a separate file, as long as you add the\n   // \"public\" access modifier.\n   static class UserPet {\n       public String userName;\n       public String petName;\n   }\n}\n```\n\n## \n\nRoomRoom`TypeConverter`Room\n\n`Date`\n\n```java\npublic class Converters {\n    @TypeConverter\n    public static Date fromTimestamp(Long value) {\n        return value == null ? null : new Date(value);\n    }\n\n    @TypeConverter\n    public static Long dateToTimestamp(Date date) {\n        return date == null ? null : date.getTime();\n    }\n}\n```\n\nRoomDateRoomLong\n\nAppDatabase\n\n```java\n@Database(entities = {User.java}, version = 1)\n@TypeConverters({Converter.class})\npublic abstract class AppDatabase extends RoomDatabase {\n    public abstract UserDao userDao();\n}\n```\nAppDatabase`TypeConverters`,Converter\n\nUser\n\n```java\n@Entity\npublic class User {\n    ...\n    private Date birthday;\n}\n```\n\nDAO\n\n```java\n@Dao\npublic interface UserDao {\n    ...\n    @Query(\"SELECT * FROM user WHERE birthday BETWEEN :from AND :to\")\n    List<User> findUsersBornBetweenDates(Date from, Date to);\n}\n```\n\n@TypeConverterEntityDAODAO@TypeConverter\n\n\n## \n\nAppEntityEntityApp\n\nRoom`Migration`MigrationAppRoomMigration`migrate`\n\n> ****MigrationRoom\n\n\n```java\nRoom.databaseBuilder(getApplicationContext(), MyDb.class, \"database-name\")\n        .addMigrations(MIGRATION_1_2, MIGRATION_2_3).build();\n\nstatic final Migration MIGRATION_1_2 = new Migration(1, 2) {\n    @Override\n    public void migrate(SupportSQLiteDatabase database) {\n        database.execSQL(\"CREATE TABLE `Fruit` (`id` INTEGER, \"\n                + \"`name` TEXT, PRIMARY KEY(`id`))\");\n    }\n};\n\nstatic final Migration MIGRATION_2_3 = new Migration(2, 3) {\n    @Override\n    public void migrate(SupportSQLiteDatabase database) {\n        database.execSQL(\"ALTER TABLE Book \"\n                + \" ADD COLUMN pub_year INTEGER\");\n    }\n};\n```\n\n> ****\n\nRoomschema\n\n### \nMigrationAppCrashMigrationRoom\n\n#### Schema\nRoomSchemaJsonSchema`build.gradle`\n\n```groovy\nandroid {\n    ...\n    defaultConfig {\n        ...\n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments = [\"room.schemaLocation\":\n                             \"$projectDir/schemas\".toString()]\n            }\n        }\n    }\n}\n```\nJsonRoomschema\n\n`android.arch.persistence.room:testing`\n\n```groovy\nandroid {\n    ...\n    sourceSets {\n        androidTest.assets.srcDirs += files(\"$projectDir/schemas\".toString())\n    }\n}\n```\n`MigrationTestHelper`schema`Junit4`\n\n```java\n@RunWith(AndroidJUnit4.class)\npublic class MigrationTest {\n    private static final String TEST_DB = \"migration-test\";\n\n    @Rule\n    public MigrationTestHelper helper;\n\n    public MigrationTest() {\n        helper = new MigrationTestHelper(InstrumentationRegistry.getContext(),\n                MigrationDb.class.getCanonicalName(),\n                new FrameworkSQLiteOpenHelperFactory());\n    }\n\n    @Test\n    public void migrate1To2() throws IOException {\n        SupportSQLiteDatabase db = helper.createDatabase(TEST_DB, 1);\n\n        // db has schema version 1. insert some data using SQL queries.\n        // You cannot use DAO classes because they expect the latest schema.\n        db.execSQL(...);\n\n        // Prepare for the next version.\n        db.close();\n\n        // Re-open the database with version 2 and provide\n        // MIGRATION_1_2 as the migration process.\n        db = helper.runMigrationsAndValidate(TEST_DB, 2, true, MIGRATION_1_2);\n\n        // MigrationTestHelper automatically verifies the schema changes,\n        // but you need to validate that the data was migrated properly.\n    }\n}\n\n```\n\n## \n\nRoomDAODAO\n\nAndroidJUnitUIUI\n\n\n\n```java\n@RunWith(AndroidJUnit4.class)\npublic class SimpleEntityReadWriteTest {\n    private UserDao mUserDao;\n    private TestDatabase mDb;\n\n    @Before\n    public void createDb() {\n        Context context = InstrumentationRegistry.getTargetContext();\n        //\n        mDb = Room.inMemoryDatabaseBuilder(context, TestDatabase.class).build();\n        mUserDao = mDb.getUserDao();\n    }\n\n    @After\n    public void closeDb() throws IOException {\n        mDb.close();\n    }\n\n    @Test\n    public void writeUserAndReadInList() throws Exception {\n        User user = TestUtil.createUser(3);\n        user.setName(\"george\");\n        mUserDao.insert(user);\n        List<User> byName = mUserDao.findUsersByName(\"george\");\n        assertThat(byName.get(0), equalTo(user));\n    }\n}\n```\n\n## Entity\n\n\n\nUIUIUI16msActivity5 ms\n\nORMUIUI\n\nBookUIAuthorBookgetAuthor()\n\n```java\nauthorNameTextView.setText(user.getAuthor().getName());\n```\nAuthor\n\nRoomEntity","source":"_posts/android-arch-room.md","raw":"---\ntitle: AndroidRoom[]\ndate: 2017-05-22 17:52:27\ntags: android\ncover: http://cdn.zqlxtt.cn/final-architecture.png\n---\n## Room\n\nRoomSQLiteSQLite\n\nApp\n\nAndroidFrameworkSQLSQLiteAPISQLiteAPI\n\n- SQLSQL\n- SQLJava\n\n`Room`SQL\n<!-- more -->\nRoom\n\n- **Database**`Entity`EntityDatabaseDAODatabaseAppSQLite\n`RoomDatabase``Room.databaseBuilder()``Room.inMemoryDatabaseBuilder().`GreenDao\n\n- **Entity**Entity`table`EntityDatabase`entities`Entity`@Ignore`\n\n> ****EntityDAOEntityRoom\n\n- **DAO**`Data Access Object(DAO)`DAORoom`RoomDatabase`0DAORoomDAO\n\n> ****DAODAOAPPMock\n\n<!--more-->\n\n\n\n![room architecture](http://backup.flutter-dev.cn/room_architecture.png)\n\nEntityDaoDatabase\n\nUser.java\n\n```java\n@Entity\npublic class User {\n    @PrimaryKey\n    private int uid;\n\n    @ColumnInfo(name = \"first_name\")\n    private String firstName;\n\n    @ColumnInfo(name = \"last_name\")\n    private String lastName;\n\n    // Getters and setters are ignored for brevity,\n    // but they're required for Room to work.\n}\n```\n\nUserDao.java\n\n```java\n@Dao\npublic interface UserDao {\n    @Query(\"SELECT * FROM user\")\n    List<User> getAll();\n\n    @Query(\"SELECT * FROM user WHERE uid IN (:userIds)\")\n    List<User> loadAllByIds(int[] userIds);\n\n    @Query(\"SELECT * FROM user WHERE first_name LIKE :first AND \"\n           + \"last_name LIKE :last LIMIT 1\")\n    User findByName(String first, String last);\n\n    @Insert\n    void insertAll(User... users);\n\n    @Delete\n    void delete(User user);\n}\n```\n\nAppDatabase.java\n\n```java\n@Database(entities = {User.class}, version = 1)\npublic abstract class AppDatabase extends RoomDatabase {\n    public abstract UserDao userDao();\n}\n```\n\nAppDatabase\n\n```java\nAppDatabase db = Room.databaseBuilder(getApplicationContext(),\n        AppDatabase.class, \"database-name\").build();\n```\n\n> ****AppDatabase\n\n\n## Entity\n\n`@Entity`Database`@entities`Room\n\nRoomEntity`@Ignore`\n\n```java\n@Entity\nclass User {\n    @PrimaryKey\n    public int id;\n\n    public String firstName;\n    public String lastName;\n\n    @Ignore\n    Bitmap picture;\n}\n```\n\nRoomEntity`public``setter``getter`settergetter`Java Beans`\n\n### Primary key\n\nEntityEntity`@PrimaryKey`RoomEntityID@Primary`autoGenerate`Entity@EntityprimaryKeys\n\n```java\n@Entity(primaryKeys = {\"firstName\", \"lastName\"})\nclass User {\n    public String firstName;\n    public String lastName;\n\n    @Ignore\n    Bitmap picture;\n}\n```\n\nRoomEntity@Entity`tableName`,\n\n```java\n@Entity(tableName = \"users\")\nclass User {\n    ...\n}\n```\n\n> ****SQLite\n\ntableNameRoomEntity`@ColumnInfo``name`\n\n```java\n@Entity(tableName = \"users\")\nclass User {\n    @PrimaryKey\n    public int id;\n\n    @ColumnInfo(name = \"first_name\")\n    public String firstName;\n\n    @ColumnInfo(name = \"last_name\")\n    public String lastName;\n\n    @Ignore\n    Bitmap picture;\n}\n```\n\n### \n\nEntity@Entity`indices`\n\n```java\n@Entity(indices = {@Index(\"firstName\"), @Index(\"last_name\", \"address\")})\nclass User {\n    @PrimaryKey\n    public int id;\n\n    public String firstName;\n    public String address;\n\n    @ColumnInfo(name = \"last_name\")\n    public String lastName;\n\n    @Ignore\n    Bitmap picture;\n}\n```\n@Index`unique`tureUser\n\n```java\n@Entity(indices = {@Index(value = {\"first_name\", \"last_name\"},\n        unique = true)})\nclass User {\n    @PrimaryKey\n    public int id;\n\n    @ColumnInfo(name = \"first_name\")\n    public String firstName;\n\n    @ColumnInfo(name = \"last_name\")\n    public String lastName;\n\n    @Ignore\n    Bitmap picture;\n}\n```\n\n### \n\nSQLiteRoom\n\nRoomEntityRoomEntity`Foreign Key`\n\nEntity`Book``@ForeignKey`User\n\n```java\n@Entity(foreignKeys = @ForeignKey(entity = User.class,\n                                  parentColumns = \"id\",\n                                  childColumns = \"user_id\"))\nclass Book {\n    @PrimaryKey\n    public int bookId;\n\n    public String title;\n\n    @ColumnInfo(name = \"user_id\")\n    public int userId;\n}\n```\n\nBook@ForeignKey`onDelete``CASCADE`\n\n> ****SQLite`@Insert(onConflict=REPLACE)``REMOVE``REPLACE``UPDATE`REMOVE\n\n\n### \n\nJava`@Embedded`\n\nUser`Address`Address`street,city,state``postCode`AddressUser\n\n```java\nclass Address {\n    public String street;\n    public String state;\n    public String city;\n\n    @ColumnInfo(name = \"post_code\")\n    public int postCode;\n}\n\n@Entity\nclass User {\n    @PrimaryKey\n    public int id;\n\n    public String firstName;\n\n    @Embedded\n    public Address address;\n}\n```\n\nUser`id, firstName, street, state, city``post_code`\n\n> ****\n\nUserAB@Embedded`prefix`Roomtableprefix\n\n## Data Access Objects (DAOs)\n\nRoom`Dao`DAO\n\n### Intert\n\nDAO`@Insert`Room\n\n```java\n@Dao\npublic interface MyDao {\n    @Insert(onConflict = OnConflictStrategy.REPLACE)\n    public void insertUsers(User... users);\n\n    @Insert\n    public void insertBothUsers(User user1, User user2);\n\n    @Insert\n    public void insertUsersAndFriends(User user, List<User> friends);\n}\n```\nlongid`long[]``List<Long>`\n\n### Update\n\nUpdate\n\n```java\n@Dao\npublic interface MyDao {\n    @Update\n    public void updateUsers(User... users);\n}\n```\nint\n\n### DELETE\n\nDelete\n\n```java\n@Dao\npublic interface MyDao {\n    @Delete\n    public void deleteUsers(User... users);\n}\n```\nint\n\n### QUERY\n\n`@Query`DAO@QueryqueryApp\n\nRoomqueryRoom\n\n- \n- \n\n#### \n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT * FROM user\")\n    public User[] loadAllUsers();\n}\n```\nRoomUseruserRoom\n\n#### \nUser\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT * FROM user WHERE age > :minAge\")\n    public User[] loadAllUsersOlderThan(int minAge);\n}\n```\nRoomminAge`:minAge`\n\n\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT * FROM user WHERE age BETWEEN :minAge AND :maxAge\")\n    public User[] loadAllUsersBetweenAges(int minAge, int maxAge);\n\n    @Query(\"SELECT * FROM user WHERE first_name LIKE :search \"\n           + \"OR last_name LIKE :search\")\n    public List<User> findUserWithName(String search);\n}\n```\n\n#### \n\nEntityUIUserUI\n\n\n\n```java\npublic class NameTuple {\n    @ColumnInfo(name=\"first_name\")\n    public String firstName;\n\n    @ColumnInfo(name=\"last_name\")\n    public String lastName;\n}\n```\nDAONameTuple\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT first_name, last_name FROM user\")\n    public List<NameTuple> loadFullName();\n}\n```\nRoom`first_name``last_name`NameTupleRoomNameTuple\n\n> ****NameTuple@Embedded\n\n#### \n\n\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT first_name, last_name FROM user WHERE region IN (:regions)\")\n    public List<NameTuple> loadUsersFromRegions(List<String> regions);\n}\n```\nRoomSQL\n\n#### \n\nUIUI`LiveData`\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT first_name, last_name FROM user WHERE region IN (:regions)\")\n    public LiveData<List<User>> loadUsersFromRegionsSync(List<String> regions);\n}\n```\n\nRxJavaRoomExJava2`Publisher``Flowable`\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT * from user where id = :id LIMIT 1\")\n    public Flowable<User> loadUserById(int id);\n}\n```\n\n#### Cursor\nAppCursorDAOCurso\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT * FROM user WHERE age > :minAge LIMIT 5\")\n    public Cursor loadRawUsersOlderThan(int minAge);\n}\n```\n\n> ****RoomCursorCursor\n\n#### \n\nRoomRoom\n\n\n```java\n@Dao\npublic interface MyDao {\n    @Query(\"SELECT * FROM book \"\n           + \"INNER JOIN loan ON loan.book_id = book.id \"\n           + \"INNER JOIN user ON user.id = loan.user_id \"\n           + \"WHERE user.name LIKE :userName\")\n   public List<Book> findBooksBorrowedByNameSync(String userName);\n}\n```\n\njava\n\n```java\n@Dao\npublic interface MyDao {\n   @Query(\"SELECT user.name AS userName, pet.name AS petName \"\n          + \"FROM user, pet \"\n          + \"WHERE user.id = pet.user_id\")\n   public LiveData<List<UserPet>> loadUserAndPetNames();\n\n   // You can also define this class in a separate file, as long as you add the\n   // \"public\" access modifier.\n   static class UserPet {\n       public String userName;\n       public String petName;\n   }\n}\n```\n\n## \n\nRoomRoom`TypeConverter`Room\n\n`Date`\n\n```java\npublic class Converters {\n    @TypeConverter\n    public static Date fromTimestamp(Long value) {\n        return value == null ? null : new Date(value);\n    }\n\n    @TypeConverter\n    public static Long dateToTimestamp(Date date) {\n        return date == null ? null : date.getTime();\n    }\n}\n```\n\nRoomDateRoomLong\n\nAppDatabase\n\n```java\n@Database(entities = {User.java}, version = 1)\n@TypeConverters({Converter.class})\npublic abstract class AppDatabase extends RoomDatabase {\n    public abstract UserDao userDao();\n}\n```\nAppDatabase`TypeConverters`,Converter\n\nUser\n\n```java\n@Entity\npublic class User {\n    ...\n    private Date birthday;\n}\n```\n\nDAO\n\n```java\n@Dao\npublic interface UserDao {\n    ...\n    @Query(\"SELECT * FROM user WHERE birthday BETWEEN :from AND :to\")\n    List<User> findUsersBornBetweenDates(Date from, Date to);\n}\n```\n\n@TypeConverterEntityDAODAO@TypeConverter\n\n\n## \n\nAppEntityEntityApp\n\nRoom`Migration`MigrationAppRoomMigration`migrate`\n\n> ****MigrationRoom\n\n\n```java\nRoom.databaseBuilder(getApplicationContext(), MyDb.class, \"database-name\")\n        .addMigrations(MIGRATION_1_2, MIGRATION_2_3).build();\n\nstatic final Migration MIGRATION_1_2 = new Migration(1, 2) {\n    @Override\n    public void migrate(SupportSQLiteDatabase database) {\n        database.execSQL(\"CREATE TABLE `Fruit` (`id` INTEGER, \"\n                + \"`name` TEXT, PRIMARY KEY(`id`))\");\n    }\n};\n\nstatic final Migration MIGRATION_2_3 = new Migration(2, 3) {\n    @Override\n    public void migrate(SupportSQLiteDatabase database) {\n        database.execSQL(\"ALTER TABLE Book \"\n                + \" ADD COLUMN pub_year INTEGER\");\n    }\n};\n```\n\n> ****\n\nRoomschema\n\n### \nMigrationAppCrashMigrationRoom\n\n#### Schema\nRoomSchemaJsonSchema`build.gradle`\n\n```groovy\nandroid {\n    ...\n    defaultConfig {\n        ...\n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments = [\"room.schemaLocation\":\n                             \"$projectDir/schemas\".toString()]\n            }\n        }\n    }\n}\n```\nJsonRoomschema\n\n`android.arch.persistence.room:testing`\n\n```groovy\nandroid {\n    ...\n    sourceSets {\n        androidTest.assets.srcDirs += files(\"$projectDir/schemas\".toString())\n    }\n}\n```\n`MigrationTestHelper`schema`Junit4`\n\n```java\n@RunWith(AndroidJUnit4.class)\npublic class MigrationTest {\n    private static final String TEST_DB = \"migration-test\";\n\n    @Rule\n    public MigrationTestHelper helper;\n\n    public MigrationTest() {\n        helper = new MigrationTestHelper(InstrumentationRegistry.getContext(),\n                MigrationDb.class.getCanonicalName(),\n                new FrameworkSQLiteOpenHelperFactory());\n    }\n\n    @Test\n    public void migrate1To2() throws IOException {\n        SupportSQLiteDatabase db = helper.createDatabase(TEST_DB, 1);\n\n        // db has schema version 1. insert some data using SQL queries.\n        // You cannot use DAO classes because they expect the latest schema.\n        db.execSQL(...);\n\n        // Prepare for the next version.\n        db.close();\n\n        // Re-open the database with version 2 and provide\n        // MIGRATION_1_2 as the migration process.\n        db = helper.runMigrationsAndValidate(TEST_DB, 2, true, MIGRATION_1_2);\n\n        // MigrationTestHelper automatically verifies the schema changes,\n        // but you need to validate that the data was migrated properly.\n    }\n}\n\n```\n\n## \n\nRoomDAODAO\n\nAndroidJUnitUIUI\n\n\n\n```java\n@RunWith(AndroidJUnit4.class)\npublic class SimpleEntityReadWriteTest {\n    private UserDao mUserDao;\n    private TestDatabase mDb;\n\n    @Before\n    public void createDb() {\n        Context context = InstrumentationRegistry.getTargetContext();\n        //\n        mDb = Room.inMemoryDatabaseBuilder(context, TestDatabase.class).build();\n        mUserDao = mDb.getUserDao();\n    }\n\n    @After\n    public void closeDb() throws IOException {\n        mDb.close();\n    }\n\n    @Test\n    public void writeUserAndReadInList() throws Exception {\n        User user = TestUtil.createUser(3);\n        user.setName(\"george\");\n        mUserDao.insert(user);\n        List<User> byName = mUserDao.findUsersByName(\"george\");\n        assertThat(byName.get(0), equalTo(user));\n    }\n}\n```\n\n## Entity\n\n\n\nUIUIUI16msActivity5 ms\n\nORMUIUI\n\nBookUIAuthorBookgetAuthor()\n\n```java\nauthorNameTextView.setText(user.getAuthor().getName());\n```\nAuthor\n\nRoomEntity","slug":"android-arch-room","published":1,"updated":"2024-08-21T03:16:19.780Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vo00085p6tcea01j2b","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"Room\"><a href=\"#Room\" class=\"headerlink\" title=\"Room\"></a>Room</h2><p>RoomSQLiteSQLite</p>\n<p>App</p>\n<p>AndroidFrameworkSQLSQLiteAPISQLiteAPI</p>\n<ul>\n<li>SQLSQL</li>\n<li>SQLJava</li>\n</ul>\n<p><code>Room</code>SQL</p>\n<span id=\"more\"></span>\n<p>Room</p>\n<ul>\n<li><p><strong>Database</strong><code>Entity</code>EntityDatabaseDAODatabaseAppSQLite<br><code>RoomDatabase</code><code>Room.databaseBuilder()</code><code>Room.inMemoryDatabaseBuilder().</code>GreenDao</p>\n</li>\n<li><p><strong>Entity</strong>Entity<code>table</code>EntityDatabase<code>entities</code>Entity<code>@Ignore</code></p>\n</li>\n</ul>\n<blockquote>\n<p><strong></strong>EntityDAOEntityRoom</p>\n</blockquote>\n<ul>\n<li><strong>DAO</strong><code>Data Access Object(DAO)</code>DAORoom<code>RoomDatabase</code>0DAORoomDAO</li>\n</ul>\n<blockquote>\n<p><strong></strong>DAODAOAPPMock</p>\n</blockquote>\n<!--more-->\n\n<p></p>\n<p><img src=\"http://backup.flutter-dev.cn/room_architecture.png\" alt=\"room architecture\"></p>\n<p>EntityDaoDatabase</p>\n<p>User.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">int</span> uid;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;first_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String firstName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;last_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String lastName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Getters and setters are ignored for brevity,</span></span><br><span class=\"line\">    <span class=\"comment\">// but they&#x27;re required for Room to work.</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>UserDao.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user&quot;)</span></span><br><span class=\"line\">    List&lt;User&gt; <span class=\"title function_\">getAll</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE uid IN (:userIds)&quot;)</span></span><br><span class=\"line\">    List&lt;User&gt; <span class=\"title function_\">loadAllByIds</span><span class=\"params\">(<span class=\"type\">int</span>[] userIds)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE first_name LIKE :first AND &quot;</span></span><br><span class=\"line\"><span class=\"meta\">           + &quot;last_name LIKE :last LIMIT 1&quot;)</span></span><br><span class=\"line\">    User <span class=\"title function_\">findByName</span><span class=\"params\">(String first, String last)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Insert</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">insertAll</span><span class=\"params\">(User... users)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Delete</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">delete</span><span class=\"params\">(User user)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>AppDatabase.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Database(entities = &#123;User.class&#125;, version = 1)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">AppDatabase</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">RoomDatabase</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> UserDao <span class=\"title function_\">userDao</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>AppDatabase</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">AppDatabase</span> <span class=\"variable\">db</span> <span class=\"operator\">=</span> Room.databaseBuilder(getApplicationContext(),</span><br><span class=\"line\">        AppDatabase.class, <span class=\"string\">&quot;database-name&quot;</span>).build();</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong></strong>AppDatabase</p>\n</blockquote>\n<h2 id=\"Entity\"><a href=\"#Entity\" class=\"headerlink\" title=\"Entity\"></a>Entity</h2><p><code>@Entity</code>Database<code>@entities</code>Room</p>\n<p>RoomEntity<code>@Ignore</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String firstName;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String lastName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Ignore</span></span><br><span class=\"line\">    Bitmap picture;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>RoomEntity<code>public</code><code>setter</code><code>getter</code>settergetter<code>Java Beans</code></p>\n<h3 id=\"Primary-key\"><a href=\"#Primary-key\" class=\"headerlink\" title=\"Primary key\"></a>Primary key</h3><p>EntityEntity<code>@PrimaryKey</code>RoomEntityID@Primary<code>autoGenerate</code>Entity@EntityprimaryKeys</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity(primaryKeys = &#123;&quot;firstName&quot;, &quot;lastName&quot;&#125;)</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String firstName;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String lastName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Ignore</span></span><br><span class=\"line\">    Bitmap picture;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>RoomEntity@Entity<code>tableName</code>,</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity(tableName = &quot;users&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong></strong>SQLite</p>\n</blockquote>\n<p>tableNameRoomEntity<code>@ColumnInfo</code><code>name</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity(tableName = &quot;users&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;first_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String firstName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;last_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String lastName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Ignore</span></span><br><span class=\"line\">    Bitmap picture;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Entity@Entity<code>indices</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity(indices = &#123;@Index(&quot;firstName&quot;), @Index(&quot;last_name&quot;, &quot;address&quot;)&#125;)</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String firstName;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String address;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;last_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String lastName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Ignore</span></span><br><span class=\"line\">    Bitmap picture;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>@Index<code>unique</code>tureUser</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity(indices = &#123;@Index(value = &#123;&quot;first_name&quot;, &quot;last_name&quot;&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">        unique = true)&#125;)</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;first_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String firstName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;last_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String lastName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Ignore</span></span><br><span class=\"line\">    Bitmap picture;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>SQLiteRoom</p>\n<p>RoomEntityRoomEntity<code>Foreign Key</code></p>\n<p>Entity<code>Book</code><code>@ForeignKey</code>User</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity(foreignKeys = @ForeignKey(entity = User.class,</span></span><br><span class=\"line\"><span class=\"meta\">                                  parentColumns = &quot;id&quot;,</span></span><br><span class=\"line\"><span class=\"meta\">                                  childColumns = &quot;user_id&quot;))</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Book</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> bookId;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String title;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;user_id&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> userId;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Book@ForeignKey<code>onDelete</code><code>CASCADE</code></p>\n<blockquote>\n<p><strong></strong>SQLite<code>@Insert(onConflict=REPLACE)</code><code>REMOVE</code><code>REPLACE</code><code>UPDATE</code>REMOVE</p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Java<code>@Embedded</code></p>\n<p>User<code>Address</code>Address<code>street,city,state</code><code>postCode</code>AddressUser</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Address</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String street;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String state;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String city;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;post_code&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> postCode;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String firstName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Embedded</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Address address;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>User<code>id, firstName, street, state, city</code><code>post_code</code></p>\n<blockquote>\n<p><strong></strong></p>\n</blockquote>\n<p>UserAB@Embedded<code>prefix</code>Roomtableprefix</p>\n<h2 id=\"Data-Access-Objects-DAOs\"><a href=\"#Data-Access-Objects-DAOs\" class=\"headerlink\" title=\"Data Access Objects (DAOs)\"></a>Data Access Objects (DAOs)</h2><p>Room<code>Dao</code>DAO</p>\n<h3 id=\"Intert\"><a href=\"#Intert\" class=\"headerlink\" title=\"Intert\"></a>Intert</h3><p>DAO<code>@Insert</code>Room</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Insert(onConflict = OnConflictStrategy.REPLACE)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">insertUsers</span><span class=\"params\">(User... users)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Insert</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">insertBothUsers</span><span class=\"params\">(User user1, User user2)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Insert</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">insertUsersAndFriends</span><span class=\"params\">(User user, List&lt;User&gt; friends)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>longid<code>long[]</code><code>List&lt;Long&gt;</code></p>\n<h3 id=\"Update\"><a href=\"#Update\" class=\"headerlink\" title=\"Update\"></a>Update</h3><p>Update</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Update</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">updateUsers</span><span class=\"params\">(User... users)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>int</p>\n<h3 id=\"DELETE\"><a href=\"#DELETE\" class=\"headerlink\" title=\"DELETE\"></a>DELETE</h3><p>Delete</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Delete</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deleteUsers</span><span class=\"params\">(User... users)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>int</p>\n<h3 id=\"QUERY\"><a href=\"#QUERY\" class=\"headerlink\" title=\"QUERY\"></a>QUERY</h3><p><code>@Query</code>DAO@QueryqueryApp</p>\n<p>RoomqueryRoom</p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> User[] loadAllUsers();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>RoomUseruserRoom</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>User</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE age &gt; :minAge&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> User[] loadAllUsersOlderThan(<span class=\"type\">int</span> minAge);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>RoomminAge<code>:minAge</code></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE age BETWEEN :minAge AND :maxAge&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> User[] loadAllUsersBetweenAges(<span class=\"type\">int</span> minAge, <span class=\"type\">int</span> maxAge);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE first_name LIKE :search &quot;</span></span><br><span class=\"line\"><span class=\"meta\">           + &quot;OR last_name LIKE :search&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;User&gt; <span class=\"title function_\">findUserWithName</span><span class=\"params\">(String search)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>EntityUIUserUI</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">NameTuple</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name=&quot;first_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String firstName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name=&quot;last_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String lastName;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>DAONameTuple</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT first_name, last_name FROM user&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;NameTuple&gt; <span class=\"title function_\">loadFullName</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Room<code>first_name</code><code>last_name</code>NameTupleRoomNameTuple</p>\n<blockquote>\n<p><strong></strong>NameTuple@Embedded</p>\n</blockquote>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT first_name, last_name FROM user WHERE region IN (:regions)&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;NameTuple&gt; <span class=\"title function_\">loadUsersFromRegions</span><span class=\"params\">(List&lt;String&gt; regions)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>RoomSQL</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>UIUI<code>LiveData</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT first_name, last_name FROM user WHERE region IN (:regions)&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;List&lt;User&gt;&gt; <span class=\"title function_\">loadUsersFromRegionsSync</span><span class=\"params\">(List&lt;String&gt; regions)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>RxJavaRoomExJava2<code>Publisher</code><code>Flowable</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * from user where id = :id LIMIT 1&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Flowable&lt;User&gt; <span class=\"title function_\">loadUserById</span><span class=\"params\">(<span class=\"type\">int</span> id)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Cursor\"><a href=\"#Cursor\" class=\"headerlink\" title=\"Cursor\"></a>Cursor</h4><p>AppCursorDAOCurso</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE age &gt; :minAge LIMIT 5&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Cursor <span class=\"title function_\">loadRawUsersOlderThan</span><span class=\"params\">(<span class=\"type\">int</span> minAge)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong></strong>RoomCursorCursor</p>\n</blockquote>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>RoomRoom<br></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM book &quot;</span></span><br><span class=\"line\"><span class=\"meta\">           + &quot;INNER JOIN loan ON loan.book_id = book.id &quot;</span></span><br><span class=\"line\"><span class=\"meta\">           + &quot;INNER JOIN user ON user.id = loan.user_id &quot;</span></span><br><span class=\"line\"><span class=\"meta\">           + &quot;WHERE user.name LIKE :userName&quot;)</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> List&lt;Book&gt; <span class=\"title function_\">findBooksBorrowedByNameSync</span><span class=\"params\">(String userName)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">   <span class=\"meta\">@Query(&quot;SELECT user.name AS userName, pet.name AS petName &quot;</span></span><br><span class=\"line\"><span class=\"meta\">          + &quot;FROM user, pet &quot;</span></span><br><span class=\"line\"><span class=\"meta\">          + &quot;WHERE user.id = pet.user_id&quot;)</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> LiveData&lt;List&lt;UserPet&gt;&gt; <span class=\"title function_\">loadUserAndPetNames</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">// You can also define this class in a separate file, as long as you add the</span></span><br><span class=\"line\">   <span class=\"comment\">// &quot;public&quot; access modifier.</span></span><br><span class=\"line\">   <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserPet</span> &#123;</span><br><span class=\"line\">       <span class=\"keyword\">public</span> String userName;</span><br><span class=\"line\">       <span class=\"keyword\">public</span> String petName;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>RoomRoom<code>TypeConverter</code>Room</p>\n<p><code>Date</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Converters</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@TypeConverter</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Date <span class=\"title function_\">fromTimestamp</span><span class=\"params\">(Long value)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value == <span class=\"literal\">null</span> ? <span class=\"literal\">null</span> : <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@TypeConverter</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Long <span class=\"title function_\">dateToTimestamp</span><span class=\"params\">(Date date)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> date == <span class=\"literal\">null</span> ? <span class=\"literal\">null</span> : date.getTime();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>RoomDateRoomLong</p>\n<p>AppDatabase</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Database(entities = &#123;User.java&#125;, version = 1)</span></span><br><span class=\"line\"><span class=\"meta\">@TypeConverters(&#123;Converter.class&#125;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">AppDatabase</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">RoomDatabase</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> UserDao <span class=\"title function_\">userDao</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>AppDatabase<code>TypeConverters</code>,Converter</p>\n<p>User</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date birthday;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>DAO</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserDao</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE birthday BETWEEN :from AND :to&quot;)</span></span><br><span class=\"line\">    List&lt;User&gt; <span class=\"title function_\">findUsersBornBetweenDates</span><span class=\"params\">(Date from, Date to)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>@TypeConverterEntityDAODAO@TypeConverter</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>AppEntityEntityApp</p>\n<p>Room<code>Migration</code>MigrationAppRoomMigration<code>migrate</code></p>\n<blockquote>\n<p><strong></strong>MigrationRoom</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Room.databaseBuilder(getApplicationContext(), MyDb.class, <span class=\"string\">&quot;database-name&quot;</span>)</span><br><span class=\"line\">        .addMigrations(MIGRATION_1_2, MIGRATION_2_3).build();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">Migration</span> <span class=\"variable\">MIGRATION_1_2</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Migration</span>(<span class=\"number\">1</span>, <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">migrate</span><span class=\"params\">(SupportSQLiteDatabase database)</span> &#123;</span><br><span class=\"line\">        database.execSQL(<span class=\"string\">&quot;CREATE TABLE `Fruit` (`id` INTEGER, &quot;</span></span><br><span class=\"line\">                + <span class=\"string\">&quot;`name` TEXT, PRIMARY KEY(`id`))&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">Migration</span> <span class=\"variable\">MIGRATION_2_3</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Migration</span>(<span class=\"number\">2</span>, <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">migrate</span><span class=\"params\">(SupportSQLiteDatabase database)</span> &#123;</span><br><span class=\"line\">        database.execSQL(<span class=\"string\">&quot;ALTER TABLE Book &quot;</span></span><br><span class=\"line\">                + <span class=\"string\">&quot; ADD COLUMN pub_year INTEGER&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong></strong></p>\n</blockquote>\n<p>Roomschema</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>MigrationAppCrashMigrationRoom</p>\n<h4 id=\"Schema\"><a href=\"#Schema\" class=\"headerlink\" title=\"Schema\"></a>Schema</h4><p>RoomSchemaJsonSchema<code>build.gradle</code></p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    defaultConfig &#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">        javaCompileOptions &#123;</span><br><span class=\"line\">            annotationProcessorOptions &#123;</span><br><span class=\"line\">                arguments = [<span class=\"string\">&quot;room.schemaLocation&quot;</span>:</span><br><span class=\"line\">                             <span class=\"string\">&quot;$projectDir/schemas&quot;</span>.toString()]</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>JsonRoomschema</p>\n<p><code>android.arch.persistence.room:testing</code></p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    sourceSets &#123;</span><br><span class=\"line\">        androidTest.assets.srcDirs += files(<span class=\"string\">&quot;$projectDir/schemas&quot;</span>.toString())</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>MigrationTestHelper</code>schema<code>Junit4</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RunWith(AndroidJUnit4.class)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MigrationTest</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">TEST_DB</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;migration-test&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Rule</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> MigrationTestHelper helper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MigrationTest</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        helper = <span class=\"keyword\">new</span> <span class=\"title class_\">MigrationTestHelper</span>(InstrumentationRegistry.getContext(),</span><br><span class=\"line\">                MigrationDb.class.getCanonicalName(),</span><br><span class=\"line\">                <span class=\"keyword\">new</span> <span class=\"title class_\">FrameworkSQLiteOpenHelperFactory</span>());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">migrate1To2</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException &#123;</span><br><span class=\"line\">        <span class=\"type\">SupportSQLiteDatabase</span> <span class=\"variable\">db</span> <span class=\"operator\">=</span> helper.createDatabase(TEST_DB, <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// db has schema version 1. insert some data using SQL queries.</span></span><br><span class=\"line\">        <span class=\"comment\">// You cannot use DAO classes because they expect the latest schema.</span></span><br><span class=\"line\">        db.execSQL(...);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Prepare for the next version.</span></span><br><span class=\"line\">        db.close();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Re-open the database with version 2 and provide</span></span><br><span class=\"line\">        <span class=\"comment\">// MIGRATION_1_2 as the migration process.</span></span><br><span class=\"line\">        db = helper.runMigrationsAndValidate(TEST_DB, <span class=\"number\">2</span>, <span class=\"literal\">true</span>, MIGRATION_1_2);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// MigrationTestHelper automatically verifies the schema changes,</span></span><br><span class=\"line\">        <span class=\"comment\">// but you need to validate that the data was migrated properly.</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>RoomDAODAO</p>\n<p>AndroidJUnitUIUI</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RunWith(AndroidJUnit4.class)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SimpleEntityReadWriteTest</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserDao mUserDao;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> TestDatabase mDb;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Before</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">createDb</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Context</span> <span class=\"variable\">context</span> <span class=\"operator\">=</span> InstrumentationRegistry.getTargetContext();</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        mDb = Room.inMemoryDatabaseBuilder(context, TestDatabase.class).build();</span><br><span class=\"line\">        mUserDao = mDb.getUserDao();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@After</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">closeDb</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException &#123;</span><br><span class=\"line\">        mDb.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">writeUserAndReadInList</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">        <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> TestUtil.createUser(<span class=\"number\">3</span>);</span><br><span class=\"line\">        user.setName(<span class=\"string\">&quot;george&quot;</span>);</span><br><span class=\"line\">        mUserDao.insert(user);</span><br><span class=\"line\">        List&lt;User&gt; byName = mUserDao.findUsersByName(<span class=\"string\">&quot;george&quot;</span>);</span><br><span class=\"line\">        assertThat(byName.get(<span class=\"number\">0</span>), equalTo(user));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Entity\"><a href=\"#Entity\" class=\"headerlink\" title=\"Entity\"></a>Entity</h2><p></p>\n<p>UIUIUI16msActivity5 ms</p>\n<p>ORMUIUI</p>\n<p>BookUIAuthorBookgetAuthor()</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">authorNameTextView.setText(user.getAuthor().getName());</span><br></pre></td></tr></table></figure>\n<p>Author</p>\n<p>RoomEntity</p>\n","excerpt":"<h2 id=\"Room\"><a href=\"#Room\" class=\"headerlink\" title=\"Room\"></a>Room</h2><p>RoomSQLiteSQLite</p>\n<p>App</p>\n<p>AndroidFrameworkSQLSQLiteAPISQLiteAPI</p>\n<ul>\n<li>SQLSQL</li>\n<li>SQLJava</li>\n</ul>\n<p><code>Room</code>SQL</p>","more":"<p>Room</p>\n<ul>\n<li><p><strong>Database</strong><code>Entity</code>EntityDatabaseDAODatabaseAppSQLite<br><code>RoomDatabase</code><code>Room.databaseBuilder()</code><code>Room.inMemoryDatabaseBuilder().</code>GreenDao</p>\n</li>\n<li><p><strong>Entity</strong>Entity<code>table</code>EntityDatabase<code>entities</code>Entity<code>@Ignore</code></p>\n</li>\n</ul>\n<blockquote>\n<p><strong></strong>EntityDAOEntityRoom</p>\n</blockquote>\n<ul>\n<li><strong>DAO</strong><code>Data Access Object(DAO)</code>DAORoom<code>RoomDatabase</code>0DAORoomDAO</li>\n</ul>\n<blockquote>\n<p><strong></strong>DAODAOAPPMock</p>\n</blockquote>\n<!--more-->\n\n<p></p>\n<p><img src=\"http://backup.flutter-dev.cn/room_architecture.png\" alt=\"room architecture\"></p>\n<p>EntityDaoDatabase</p>\n<p>User.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">int</span> uid;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;first_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String firstName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;last_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String lastName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Getters and setters are ignored for brevity,</span></span><br><span class=\"line\">    <span class=\"comment\">// but they&#x27;re required for Room to work.</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>UserDao.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user&quot;)</span></span><br><span class=\"line\">    List&lt;User&gt; <span class=\"title function_\">getAll</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE uid IN (:userIds)&quot;)</span></span><br><span class=\"line\">    List&lt;User&gt; <span class=\"title function_\">loadAllByIds</span><span class=\"params\">(<span class=\"type\">int</span>[] userIds)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE first_name LIKE :first AND &quot;</span></span><br><span class=\"line\"><span class=\"meta\">           + &quot;last_name LIKE :last LIMIT 1&quot;)</span></span><br><span class=\"line\">    User <span class=\"title function_\">findByName</span><span class=\"params\">(String first, String last)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Insert</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">insertAll</span><span class=\"params\">(User... users)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Delete</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">delete</span><span class=\"params\">(User user)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>AppDatabase.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Database(entities = &#123;User.class&#125;, version = 1)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">AppDatabase</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">RoomDatabase</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> UserDao <span class=\"title function_\">userDao</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>AppDatabase</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">AppDatabase</span> <span class=\"variable\">db</span> <span class=\"operator\">=</span> Room.databaseBuilder(getApplicationContext(),</span><br><span class=\"line\">        AppDatabase.class, <span class=\"string\">&quot;database-name&quot;</span>).build();</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong></strong>AppDatabase</p>\n</blockquote>\n<h2 id=\"Entity\"><a href=\"#Entity\" class=\"headerlink\" title=\"Entity\"></a>Entity</h2><p><code>@Entity</code>Database<code>@entities</code>Room</p>\n<p>RoomEntity<code>@Ignore</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String firstName;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String lastName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Ignore</span></span><br><span class=\"line\">    Bitmap picture;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>RoomEntity<code>public</code><code>setter</code><code>getter</code>settergetter<code>Java Beans</code></p>\n<h3 id=\"Primary-key\"><a href=\"#Primary-key\" class=\"headerlink\" title=\"Primary key\"></a>Primary key</h3><p>EntityEntity<code>@PrimaryKey</code>RoomEntityID@Primary<code>autoGenerate</code>Entity@EntityprimaryKeys</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity(primaryKeys = &#123;&quot;firstName&quot;, &quot;lastName&quot;&#125;)</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String firstName;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String lastName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Ignore</span></span><br><span class=\"line\">    Bitmap picture;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>RoomEntity@Entity<code>tableName</code>,</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity(tableName = &quot;users&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong></strong>SQLite</p>\n</blockquote>\n<p>tableNameRoomEntity<code>@ColumnInfo</code><code>name</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity(tableName = &quot;users&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;first_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String firstName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;last_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String lastName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Ignore</span></span><br><span class=\"line\">    Bitmap picture;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Entity@Entity<code>indices</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity(indices = &#123;@Index(&quot;firstName&quot;), @Index(&quot;last_name&quot;, &quot;address&quot;)&#125;)</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String firstName;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String address;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;last_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String lastName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Ignore</span></span><br><span class=\"line\">    Bitmap picture;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>@Index<code>unique</code>tureUser</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity(indices = &#123;@Index(value = &#123;&quot;first_name&quot;, &quot;last_name&quot;&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">        unique = true)&#125;)</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;first_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String firstName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;last_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String lastName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Ignore</span></span><br><span class=\"line\">    Bitmap picture;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>SQLiteRoom</p>\n<p>RoomEntityRoomEntity<code>Foreign Key</code></p>\n<p>Entity<code>Book</code><code>@ForeignKey</code>User</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity(foreignKeys = @ForeignKey(entity = User.class,</span></span><br><span class=\"line\"><span class=\"meta\">                                  parentColumns = &quot;id&quot;,</span></span><br><span class=\"line\"><span class=\"meta\">                                  childColumns = &quot;user_id&quot;))</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Book</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> bookId;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String title;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;user_id&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> userId;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Book@ForeignKey<code>onDelete</code><code>CASCADE</code></p>\n<blockquote>\n<p><strong></strong>SQLite<code>@Insert(onConflict=REPLACE)</code><code>REMOVE</code><code>REPLACE</code><code>UPDATE</code>REMOVE</p>\n</blockquote>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Java<code>@Embedded</code></p>\n<p>User<code>Address</code>Address<code>street,city,state</code><code>postCode</code>AddressUser</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Address</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String street;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String state;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> String city;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = &quot;post_code&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> postCode;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String firstName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Embedded</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Address address;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>User<code>id, firstName, street, state, city</code><code>post_code</code></p>\n<blockquote>\n<p><strong></strong></p>\n</blockquote>\n<p>UserAB@Embedded<code>prefix</code>Roomtableprefix</p>\n<h2 id=\"Data-Access-Objects-DAOs\"><a href=\"#Data-Access-Objects-DAOs\" class=\"headerlink\" title=\"Data Access Objects (DAOs)\"></a>Data Access Objects (DAOs)</h2><p>Room<code>Dao</code>DAO</p>\n<h3 id=\"Intert\"><a href=\"#Intert\" class=\"headerlink\" title=\"Intert\"></a>Intert</h3><p>DAO<code>@Insert</code>Room</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Insert(onConflict = OnConflictStrategy.REPLACE)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">insertUsers</span><span class=\"params\">(User... users)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Insert</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">insertBothUsers</span><span class=\"params\">(User user1, User user2)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Insert</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">insertUsersAndFriends</span><span class=\"params\">(User user, List&lt;User&gt; friends)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>longid<code>long[]</code><code>List&lt;Long&gt;</code></p>\n<h3 id=\"Update\"><a href=\"#Update\" class=\"headerlink\" title=\"Update\"></a>Update</h3><p>Update</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Update</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">updateUsers</span><span class=\"params\">(User... users)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>int</p>\n<h3 id=\"DELETE\"><a href=\"#DELETE\" class=\"headerlink\" title=\"DELETE\"></a>DELETE</h3><p>Delete</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Delete</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deleteUsers</span><span class=\"params\">(User... users)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>int</p>\n<h3 id=\"QUERY\"><a href=\"#QUERY\" class=\"headerlink\" title=\"QUERY\"></a>QUERY</h3><p><code>@Query</code>DAO@QueryqueryApp</p>\n<p>RoomqueryRoom</p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> User[] loadAllUsers();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>RoomUseruserRoom</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>User</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE age &gt; :minAge&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> User[] loadAllUsersOlderThan(<span class=\"type\">int</span> minAge);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>RoomminAge<code>:minAge</code></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE age BETWEEN :minAge AND :maxAge&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> User[] loadAllUsersBetweenAges(<span class=\"type\">int</span> minAge, <span class=\"type\">int</span> maxAge);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE first_name LIKE :search &quot;</span></span><br><span class=\"line\"><span class=\"meta\">           + &quot;OR last_name LIKE :search&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;User&gt; <span class=\"title function_\">findUserWithName</span><span class=\"params\">(String search)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>EntityUIUserUI</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">NameTuple</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name=&quot;first_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String firstName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name=&quot;last_name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String lastName;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>DAONameTuple</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT first_name, last_name FROM user&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;NameTuple&gt; <span class=\"title function_\">loadFullName</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Room<code>first_name</code><code>last_name</code>NameTupleRoomNameTuple</p>\n<blockquote>\n<p><strong></strong>NameTuple@Embedded</p>\n</blockquote>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT first_name, last_name FROM user WHERE region IN (:regions)&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;NameTuple&gt; <span class=\"title function_\">loadUsersFromRegions</span><span class=\"params\">(List&lt;String&gt; regions)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>RoomSQL</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>UIUI<code>LiveData</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT first_name, last_name FROM user WHERE region IN (:regions)&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;List&lt;User&gt;&gt; <span class=\"title function_\">loadUsersFromRegionsSync</span><span class=\"params\">(List&lt;String&gt; regions)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>RxJavaRoomExJava2<code>Publisher</code><code>Flowable</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * from user where id = :id LIMIT 1&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Flowable&lt;User&gt; <span class=\"title function_\">loadUserById</span><span class=\"params\">(<span class=\"type\">int</span> id)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Cursor\"><a href=\"#Cursor\" class=\"headerlink\" title=\"Cursor\"></a>Cursor</h4><p>AppCursorDAOCurso</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE age &gt; :minAge LIMIT 5&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Cursor <span class=\"title function_\">loadRawUsersOlderThan</span><span class=\"params\">(<span class=\"type\">int</span> minAge)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong></strong>RoomCursorCursor</p>\n</blockquote>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>RoomRoom<br></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM book &quot;</span></span><br><span class=\"line\"><span class=\"meta\">           + &quot;INNER JOIN loan ON loan.book_id = book.id &quot;</span></span><br><span class=\"line\"><span class=\"meta\">           + &quot;INNER JOIN user ON user.id = loan.user_id &quot;</span></span><br><span class=\"line\"><span class=\"meta\">           + &quot;WHERE user.name LIKE :userName&quot;)</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> List&lt;Book&gt; <span class=\"title function_\">findBooksBorrowedByNameSync</span><span class=\"params\">(String userName)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">MyDao</span> &#123;</span><br><span class=\"line\">   <span class=\"meta\">@Query(&quot;SELECT user.name AS userName, pet.name AS petName &quot;</span></span><br><span class=\"line\"><span class=\"meta\">          + &quot;FROM user, pet &quot;</span></span><br><span class=\"line\"><span class=\"meta\">          + &quot;WHERE user.id = pet.user_id&quot;)</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> LiveData&lt;List&lt;UserPet&gt;&gt; <span class=\"title function_\">loadUserAndPetNames</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">// You can also define this class in a separate file, as long as you add the</span></span><br><span class=\"line\">   <span class=\"comment\">// &quot;public&quot; access modifier.</span></span><br><span class=\"line\">   <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserPet</span> &#123;</span><br><span class=\"line\">       <span class=\"keyword\">public</span> String userName;</span><br><span class=\"line\">       <span class=\"keyword\">public</span> String petName;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>RoomRoom<code>TypeConverter</code>Room</p>\n<p><code>Date</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Converters</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@TypeConverter</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Date <span class=\"title function_\">fromTimestamp</span><span class=\"params\">(Long value)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value == <span class=\"literal\">null</span> ? <span class=\"literal\">null</span> : <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>(value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@TypeConverter</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Long <span class=\"title function_\">dateToTimestamp</span><span class=\"params\">(Date date)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> date == <span class=\"literal\">null</span> ? <span class=\"literal\">null</span> : date.getTime();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>RoomDateRoomLong</p>\n<p>AppDatabase</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Database(entities = &#123;User.java&#125;, version = 1)</span></span><br><span class=\"line\"><span class=\"meta\">@TypeConverters(&#123;Converter.class&#125;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">AppDatabase</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">RoomDatabase</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> UserDao <span class=\"title function_\">userDao</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>AppDatabase<code>TypeConverters</code>,Converter</p>\n<p>User</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date birthday;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>DAO</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserDao</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE birthday BETWEEN :from AND :to&quot;)</span></span><br><span class=\"line\">    List&lt;User&gt; <span class=\"title function_\">findUsersBornBetweenDates</span><span class=\"params\">(Date from, Date to)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>@TypeConverterEntityDAODAO@TypeConverter</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>AppEntityEntityApp</p>\n<p>Room<code>Migration</code>MigrationAppRoomMigration<code>migrate</code></p>\n<blockquote>\n<p><strong></strong>MigrationRoom</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Room.databaseBuilder(getApplicationContext(), MyDb.class, <span class=\"string\">&quot;database-name&quot;</span>)</span><br><span class=\"line\">        .addMigrations(MIGRATION_1_2, MIGRATION_2_3).build();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">Migration</span> <span class=\"variable\">MIGRATION_1_2</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Migration</span>(<span class=\"number\">1</span>, <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">migrate</span><span class=\"params\">(SupportSQLiteDatabase database)</span> &#123;</span><br><span class=\"line\">        database.execSQL(<span class=\"string\">&quot;CREATE TABLE `Fruit` (`id` INTEGER, &quot;</span></span><br><span class=\"line\">                + <span class=\"string\">&quot;`name` TEXT, PRIMARY KEY(`id`))&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">Migration</span> <span class=\"variable\">MIGRATION_2_3</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Migration</span>(<span class=\"number\">2</span>, <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">migrate</span><span class=\"params\">(SupportSQLiteDatabase database)</span> &#123;</span><br><span class=\"line\">        database.execSQL(<span class=\"string\">&quot;ALTER TABLE Book &quot;</span></span><br><span class=\"line\">                + <span class=\"string\">&quot; ADD COLUMN pub_year INTEGER&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong></strong></p>\n</blockquote>\n<p>Roomschema</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>MigrationAppCrashMigrationRoom</p>\n<h4 id=\"Schema\"><a href=\"#Schema\" class=\"headerlink\" title=\"Schema\"></a>Schema</h4><p>RoomSchemaJsonSchema<code>build.gradle</code></p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    defaultConfig &#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">        javaCompileOptions &#123;</span><br><span class=\"line\">            annotationProcessorOptions &#123;</span><br><span class=\"line\">                arguments = [<span class=\"string\">&quot;room.schemaLocation&quot;</span>:</span><br><span class=\"line\">                             <span class=\"string\">&quot;$projectDir/schemas&quot;</span>.toString()]</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>JsonRoomschema</p>\n<p><code>android.arch.persistence.room:testing</code></p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    sourceSets &#123;</span><br><span class=\"line\">        androidTest.assets.srcDirs += files(<span class=\"string\">&quot;$projectDir/schemas&quot;</span>.toString())</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>MigrationTestHelper</code>schema<code>Junit4</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RunWith(AndroidJUnit4.class)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MigrationTest</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">TEST_DB</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;migration-test&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Rule</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> MigrationTestHelper helper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MigrationTest</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        helper = <span class=\"keyword\">new</span> <span class=\"title class_\">MigrationTestHelper</span>(InstrumentationRegistry.getContext(),</span><br><span class=\"line\">                MigrationDb.class.getCanonicalName(),</span><br><span class=\"line\">                <span class=\"keyword\">new</span> <span class=\"title class_\">FrameworkSQLiteOpenHelperFactory</span>());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">migrate1To2</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException &#123;</span><br><span class=\"line\">        <span class=\"type\">SupportSQLiteDatabase</span> <span class=\"variable\">db</span> <span class=\"operator\">=</span> helper.createDatabase(TEST_DB, <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// db has schema version 1. insert some data using SQL queries.</span></span><br><span class=\"line\">        <span class=\"comment\">// You cannot use DAO classes because they expect the latest schema.</span></span><br><span class=\"line\">        db.execSQL(...);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Prepare for the next version.</span></span><br><span class=\"line\">        db.close();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Re-open the database with version 2 and provide</span></span><br><span class=\"line\">        <span class=\"comment\">// MIGRATION_1_2 as the migration process.</span></span><br><span class=\"line\">        db = helper.runMigrationsAndValidate(TEST_DB, <span class=\"number\">2</span>, <span class=\"literal\">true</span>, MIGRATION_1_2);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// MigrationTestHelper automatically verifies the schema changes,</span></span><br><span class=\"line\">        <span class=\"comment\">// but you need to validate that the data was migrated properly.</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>RoomDAODAO</p>\n<p>AndroidJUnitUIUI</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RunWith(AndroidJUnit4.class)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SimpleEntityReadWriteTest</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserDao mUserDao;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> TestDatabase mDb;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Before</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">createDb</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Context</span> <span class=\"variable\">context</span> <span class=\"operator\">=</span> InstrumentationRegistry.getTargetContext();</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        mDb = Room.inMemoryDatabaseBuilder(context, TestDatabase.class).build();</span><br><span class=\"line\">        mUserDao = mDb.getUserDao();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@After</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">closeDb</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException &#123;</span><br><span class=\"line\">        mDb.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">writeUserAndReadInList</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">        <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> TestUtil.createUser(<span class=\"number\">3</span>);</span><br><span class=\"line\">        user.setName(<span class=\"string\">&quot;george&quot;</span>);</span><br><span class=\"line\">        mUserDao.insert(user);</span><br><span class=\"line\">        List&lt;User&gt; byName = mUserDao.findUsersByName(<span class=\"string\">&quot;george&quot;</span>);</span><br><span class=\"line\">        assertThat(byName.get(<span class=\"number\">0</span>), equalTo(user));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Entity\"><a href=\"#Entity\" class=\"headerlink\" title=\"Entity\"></a>Entity</h2><p></p>\n<p>UIUIUI16msActivity5 ms</p>\n<p>ORMUIUI</p>\n<p>BookUIAuthorBookgetAuthor()</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">authorNameTextView.setText(user.getAuthor().getName());</span><br></pre></td></tr></table></figure>\n<p>Author</p>\n<p>RoomEntity</p>"},{"title":"AndroidLiveData[]","date":"2017-05-21T07:12:01.000Z","cover":"http://cdn.zqlxtt.cn/final-architecture.png","_content":"\n## LiveData\n\n`LiveData`LiveData```LifeCycle`LiveData\n\n`LifeCycle``Started``RESUMED`LiveData\n<!-- more -->\n\n\n```java\npublic class LocationLiveData extends LiveData<Location> {\n    private LocationManager locationManager;\n\n    private SimpleLocationListener listener = new SimpleLocationListener() {\n        @Override\n        public void onLocationChanged(Location location) {\n            setValue(location);\n        }\n    };\n\n    public LocationLiveData(Context context) {\n        locationManager = (LocationManager) context.getSystemService(\n                Context.LOCATION_SERVICE);\n    }\n\n    @Override\n    protected void onActive() {\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);\n    }\n\n    @Override\n    protected void onInactive() {\n        locationManager.removeUpdates(listener);\n    }\n}\n```\n\n\n\n<!--  more -->\n- onActive()\n\nLiveData01\n\n- onInactive()\n\nLiveData0\n\n- setValue()\n\nLiveData\n\nLocationLiveData\n\n```java\npublic class MyFragment extends LifecycleFragment {\n    public void onActivityCreated (Bundle savedInstanceState) {\n        LiveData<Location> myLocationListener = ...;\n        Util.checkUserStatus(result -> {\n            if (result) {\n                myLocationListener.addObserver(this, location -> {\n                    // update UI\n                });\n            }\n        });\n    }\n}\n```\n\n`addObserver``LifeCycleOwner`LocationLiveDataFragmentLifeCycle\n\n- LifeCycleStartedRESUMED\n- LifeCycleLiveData\n\nLocationLiveDataActivityFragment\n\n```java\npublic class LocationLiveData extends LiveData<Location> {\n    private static LocationLiveData sInstance;\n    private LocationManager locationManager;\n\n    @MainThread\n    public static LocationLiveData get(Context context) {\n        if (sInstance == null) {\n            sInstance = new LocationLiveData(context.getApplicationContext());\n        }\n        return sInstance;\n    }\n\n    private SimpleLocationListener listener = new SimpleLocationListener() {\n        @Override\n        public void onLocationChanged(Location location) {\n            setValue(location);\n        }\n    };\n\n    private LocationLiveData(Context context) {\n        locationManager = (LocationManager) context.getSystemService(\n                Context.LOCATION_SERVICE);\n    }\n\n    @Override\n    protected void onActive() {\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);\n    }\n\n    @Override\n    protected void onInactive() {\n        locationManager.removeUpdates(listener);\n    }\n}\n```\nActivityFragmentLocationLiveData\n\n\n```java\npublic class MyFragment extends LifecycleFragment {\n    public void onActivityCreated (Bundle savedInstanceState) {\n        Util.checkUserStatus(result -> {\n            if (result) {\n                MyLocationListener.get(getActivity()).addObserver(this, location -> {\n                   // update UI\n                });\n            }\n        });\n  }\n}\n```\n\nActivityFragmentLocationLiveData\n\nLiveData\n\n- \n\nLifeCycle\n\n- ActivityCrash\n\nActivityLiveDataLifeCyeleStartedRESUMED\n\n- \n\nActivityonCreate\n\n- \n\nLocationLivaData,\n\n- \n\nActivityFragmentLiveData\n\n## LiveData\n\nLiveDataLiveData\n\n`Transformations`,\n\n- Transformations.map()\n\nLiveData\n\n```java\nLiveData<User> userLiveData = ...;\nLiveData<String> userName = Transformations.map(userLiveData, user -> {\n    user.name + \" \" + user.lastName\n});\n```\n\nuserNameLiveDatauserLiveData\n\n- Transformations.switchMap()\n\nTransformations.map()switchMap()LiveData\n\n```java\nprivate LiveData<User> getUser(String id) {\n  ...;\n}\n\nLiveData<String> userId = ...;\nLiveData<User> user = Transformations.switchMap(userId, id -> getUser(id) );\n```\n\nViewModelLifeCycle\n\n\n```java\nclass MyViewModel extends ViewModel {\n    private final PostalCodeRepository repository;\n    public MyViewModel(PostalCodeRepository repository) {\n       this.repository = repository;\n    }\n\n    private LiveData<String> getPostalCode(String address) {\n       // DON'T DO THIS\n       return repository.getPostCode(address);\n    }\n}\n```\ngetPostalCodeUIgetPostalCodeUIgetPostalCode\n\n\n\n```java\nclass MyViewModel extends ViewModel {\n    private final PostalCodeRepository repository;\n    private final MutableLiveData<String> addressInput = new MutableLiveData();\n    public final LiveData<String> postalCode =\n            Transformations.switchMap(addressInput, (address) -> {\n                return repository.getPostCode(address);\n             });\n\n  public MyViewModel(PostalCodeRepository repository) {\n      this.repository = repository\n  }\n\n  private void setInput(String address) {\n      addressInput.setValue(address);\n  }\n}\n```\n\npostalCodepublic finalUIpostalCodesetInputpostalCoderepository.getPostCode(address)repository.getPostCode(address)\n\n","source":"_posts/andrdoi-arch-livedata.md","raw":"---\ntitle: AndroidLiveData[]\ndate: 2017-05-21 15:12:01\ntags: android\ncover: http://cdn.zqlxtt.cn/final-architecture.png\n---\n\n## LiveData\n\n`LiveData`LiveData```LifeCycle`LiveData\n\n`LifeCycle``Started``RESUMED`LiveData\n<!-- more -->\n\n\n```java\npublic class LocationLiveData extends LiveData<Location> {\n    private LocationManager locationManager;\n\n    private SimpleLocationListener listener = new SimpleLocationListener() {\n        @Override\n        public void onLocationChanged(Location location) {\n            setValue(location);\n        }\n    };\n\n    public LocationLiveData(Context context) {\n        locationManager = (LocationManager) context.getSystemService(\n                Context.LOCATION_SERVICE);\n    }\n\n    @Override\n    protected void onActive() {\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);\n    }\n\n    @Override\n    protected void onInactive() {\n        locationManager.removeUpdates(listener);\n    }\n}\n```\n\n\n\n<!--  more -->\n- onActive()\n\nLiveData01\n\n- onInactive()\n\nLiveData0\n\n- setValue()\n\nLiveData\n\nLocationLiveData\n\n```java\npublic class MyFragment extends LifecycleFragment {\n    public void onActivityCreated (Bundle savedInstanceState) {\n        LiveData<Location> myLocationListener = ...;\n        Util.checkUserStatus(result -> {\n            if (result) {\n                myLocationListener.addObserver(this, location -> {\n                    // update UI\n                });\n            }\n        });\n    }\n}\n```\n\n`addObserver``LifeCycleOwner`LocationLiveDataFragmentLifeCycle\n\n- LifeCycleStartedRESUMED\n- LifeCycleLiveData\n\nLocationLiveDataActivityFragment\n\n```java\npublic class LocationLiveData extends LiveData<Location> {\n    private static LocationLiveData sInstance;\n    private LocationManager locationManager;\n\n    @MainThread\n    public static LocationLiveData get(Context context) {\n        if (sInstance == null) {\n            sInstance = new LocationLiveData(context.getApplicationContext());\n        }\n        return sInstance;\n    }\n\n    private SimpleLocationListener listener = new SimpleLocationListener() {\n        @Override\n        public void onLocationChanged(Location location) {\n            setValue(location);\n        }\n    };\n\n    private LocationLiveData(Context context) {\n        locationManager = (LocationManager) context.getSystemService(\n                Context.LOCATION_SERVICE);\n    }\n\n    @Override\n    protected void onActive() {\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);\n    }\n\n    @Override\n    protected void onInactive() {\n        locationManager.removeUpdates(listener);\n    }\n}\n```\nActivityFragmentLocationLiveData\n\n\n```java\npublic class MyFragment extends LifecycleFragment {\n    public void onActivityCreated (Bundle savedInstanceState) {\n        Util.checkUserStatus(result -> {\n            if (result) {\n                MyLocationListener.get(getActivity()).addObserver(this, location -> {\n                   // update UI\n                });\n            }\n        });\n  }\n}\n```\n\nActivityFragmentLocationLiveData\n\nLiveData\n\n- \n\nLifeCycle\n\n- ActivityCrash\n\nActivityLiveDataLifeCyeleStartedRESUMED\n\n- \n\nActivityonCreate\n\n- \n\nLocationLivaData,\n\n- \n\nActivityFragmentLiveData\n\n## LiveData\n\nLiveDataLiveData\n\n`Transformations`,\n\n- Transformations.map()\n\nLiveData\n\n```java\nLiveData<User> userLiveData = ...;\nLiveData<String> userName = Transformations.map(userLiveData, user -> {\n    user.name + \" \" + user.lastName\n});\n```\n\nuserNameLiveDatauserLiveData\n\n- Transformations.switchMap()\n\nTransformations.map()switchMap()LiveData\n\n```java\nprivate LiveData<User> getUser(String id) {\n  ...;\n}\n\nLiveData<String> userId = ...;\nLiveData<User> user = Transformations.switchMap(userId, id -> getUser(id) );\n```\n\nViewModelLifeCycle\n\n\n```java\nclass MyViewModel extends ViewModel {\n    private final PostalCodeRepository repository;\n    public MyViewModel(PostalCodeRepository repository) {\n       this.repository = repository;\n    }\n\n    private LiveData<String> getPostalCode(String address) {\n       // DON'T DO THIS\n       return repository.getPostCode(address);\n    }\n}\n```\ngetPostalCodeUIgetPostalCodeUIgetPostalCode\n\n\n\n```java\nclass MyViewModel extends ViewModel {\n    private final PostalCodeRepository repository;\n    private final MutableLiveData<String> addressInput = new MutableLiveData();\n    public final LiveData<String> postalCode =\n            Transformations.switchMap(addressInput, (address) -> {\n                return repository.getPostCode(address);\n             });\n\n  public MyViewModel(PostalCodeRepository repository) {\n      this.repository = repository\n  }\n\n  private void setInput(String address) {\n      addressInput.setValue(address);\n  }\n}\n```\n\npostalCodepublic finalUIpostalCodesetInputpostalCoderepository.getPostCode(address)repository.getPostCode(address)\n\n","slug":"andrdoi-arch-livedata","published":1,"updated":"2024-08-21T03:16:19.779Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vp000a5p6t9jn177u6","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"LiveData\"><a href=\"#LiveData\" class=\"headerlink\" title=\"LiveData\"></a>LiveData</h2><p><code>LiveData</code>LiveData<code></code><code>LifeCycle</code>LiveData</p>\n<p><code>LifeCycle</code><code>Started</code><code>RESUMED</code>LiveData</p>\n<span id=\"more\"></span>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">LocationLiveData</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">LiveData</span>&lt;Location&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> LocationManager locationManager;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">SimpleLocationListener</span> <span class=\"variable\">listener</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SimpleLocationListener</span>() &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onLocationChanged</span><span class=\"params\">(Location location)</span> &#123;</span><br><span class=\"line\">            setValue(location);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">LocationLiveData</span><span class=\"params\">(Context context)</span> &#123;</span><br><span class=\"line\">        locationManager = (LocationManager) context.getSystemService(</span><br><span class=\"line\">                Context.LOCATION_SERVICE);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActive</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, <span class=\"number\">0</span>, <span class=\"number\">0</span>, listener);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onInactive</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        locationManager.removeUpdates(listener);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<!--  more -->\n<ul>\n<li>onActive()</li>\n</ul>\n<p>LiveData01</p>\n<ul>\n<li>onInactive()</li>\n</ul>\n<p>LiveData0</p>\n<ul>\n<li>setValue()</li>\n</ul>\n<p>LiveData</p>\n<p>LocationLiveData</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyFragment</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">LifecycleFragment</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActivityCreated</span> <span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        LiveData&lt;Location&gt; myLocationListener = ...;</span><br><span class=\"line\">        Util.checkUserStatus(result -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (result) &#123;</span><br><span class=\"line\">                myLocationListener.addObserver(<span class=\"built_in\">this</span>, location -&gt; &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// update UI</span></span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>addObserver</code><code>LifeCycleOwner</code>LocationLiveDataFragmentLifeCycle</p>\n<ul>\n<li>LifeCycleStartedRESUMED</li>\n<li>LifeCycleLiveData</li>\n</ul>\n<p>LocationLiveDataActivityFragment</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">LocationLiveData</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">LiveData</span>&lt;Location&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> LocationLiveData sInstance;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> LocationManager locationManager;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@MainThread</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> LocationLiveData <span class=\"title function_\">get</span><span class=\"params\">(Context context)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (sInstance == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            sInstance = <span class=\"keyword\">new</span> <span class=\"title class_\">LocationLiveData</span>(context.getApplicationContext());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sInstance;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">SimpleLocationListener</span> <span class=\"variable\">listener</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SimpleLocationListener</span>() &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onLocationChanged</span><span class=\"params\">(Location location)</span> &#123;</span><br><span class=\"line\">            setValue(location);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"title function_\">LocationLiveData</span><span class=\"params\">(Context context)</span> &#123;</span><br><span class=\"line\">        locationManager = (LocationManager) context.getSystemService(</span><br><span class=\"line\">                Context.LOCATION_SERVICE);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActive</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, <span class=\"number\">0</span>, <span class=\"number\">0</span>, listener);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onInactive</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        locationManager.removeUpdates(listener);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ActivityFragmentLocationLiveData<br></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyFragment</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">LifecycleFragment</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActivityCreated</span> <span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        Util.checkUserStatus(result -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (result) &#123;</span><br><span class=\"line\">                MyLocationListener.get(getActivity()).addObserver(<span class=\"built_in\">this</span>, location -&gt; &#123;</span><br><span class=\"line\">                   <span class=\"comment\">// update UI</span></span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ActivityFragmentLocationLiveData</p>\n<p>LiveData</p>\n<ul>\n<li></li>\n</ul>\n<p>LifeCycle</p>\n<ul>\n<li>ActivityCrash</li>\n</ul>\n<p>ActivityLiveDataLifeCyeleStartedRESUMED</p>\n<ul>\n<li></li>\n</ul>\n<p>ActivityonCreate</p>\n<ul>\n<li></li>\n</ul>\n<p>LocationLivaData,</p>\n<ul>\n<li></li>\n</ul>\n<p>ActivityFragmentLiveData</p>\n<h2 id=\"LiveData\"><a href=\"#LiveData\" class=\"headerlink\" title=\"LiveData\"></a>LiveData</h2><p>LiveDataLiveData</p>\n<p><code>Transformations</code>,</p>\n<ul>\n<li>Transformations.map()</li>\n</ul>\n<p>LiveData</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LiveData&lt;User&gt; userLiveData = ...;</span><br><span class=\"line\">LiveData&lt;String&gt; userName = Transformations.map(userLiveData, user -&gt; &#123;</span><br><span class=\"line\">    user.name + <span class=\"string\">&quot; &quot;</span> + user.lastName</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>userNameLiveDatauserLiveData</p>\n<ul>\n<li>Transformations.switchMap()</li>\n</ul>\n<p>Transformations.map()switchMap()LiveData</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> LiveData&lt;User&gt; <span class=\"title function_\">getUser</span><span class=\"params\">(String id)</span> &#123;</span><br><span class=\"line\">  ...;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">LiveData&lt;String&gt; userId = ...;</span><br><span class=\"line\">LiveData&lt;User&gt; user = Transformations.switchMap(userId, id -&gt; getUser(id) );</span><br></pre></td></tr></table></figure>\n\n<p>ViewModelLifeCycle<br></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ViewModel</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> PostalCodeRepository repository;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyViewModel</span><span class=\"params\">(PostalCodeRepository repository)</span> &#123;</span><br><span class=\"line\">       <span class=\"built_in\">this</span>.repository = repository;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> LiveData&lt;String&gt; <span class=\"title function_\">getPostalCode</span><span class=\"params\">(String address)</span> &#123;</span><br><span class=\"line\">       <span class=\"comment\">// DON&#x27;T DO THIS</span></span><br><span class=\"line\">       <span class=\"keyword\">return</span> repository.getPostCode(address);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getPostalCodeUIgetPostalCodeUIgetPostalCode</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ViewModel</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> PostalCodeRepository repository;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> MutableLiveData&lt;String&gt; addressInput = <span class=\"keyword\">new</span> <span class=\"title class_\">MutableLiveData</span>();</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> LiveData&lt;String&gt; postalCode =</span><br><span class=\"line\">            Transformations.switchMap(addressInput, (address) -&gt; &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> repository.getPostCode(address);</span><br><span class=\"line\">             &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">MyViewModel</span><span class=\"params\">(PostalCodeRepository repository)</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">this</span>.repository = repository</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setInput</span><span class=\"params\">(String address)</span> &#123;</span><br><span class=\"line\">      addressInput.setValue(address);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>postalCodepublic finalUIpostalCodesetInputpostalCoderepository.getPostCode(address)repository.getPostCode(address)</p>\n","excerpt":"<h2 id=\"LiveData\"><a href=\"#LiveData\" class=\"headerlink\" title=\"LiveData\"></a>LiveData</h2><p><code>LiveData</code>LiveData<code></code><code>LifeCycle</code>LiveData</p>\n<p><code>LifeCycle</code><code>Started</code><code>RESUMED</code>LiveData</p>","more":"<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">LocationLiveData</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">LiveData</span>&lt;Location&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> LocationManager locationManager;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">SimpleLocationListener</span> <span class=\"variable\">listener</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SimpleLocationListener</span>() &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onLocationChanged</span><span class=\"params\">(Location location)</span> &#123;</span><br><span class=\"line\">            setValue(location);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">LocationLiveData</span><span class=\"params\">(Context context)</span> &#123;</span><br><span class=\"line\">        locationManager = (LocationManager) context.getSystemService(</span><br><span class=\"line\">                Context.LOCATION_SERVICE);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActive</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, <span class=\"number\">0</span>, <span class=\"number\">0</span>, listener);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onInactive</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        locationManager.removeUpdates(listener);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<!--  more -->\n<ul>\n<li>onActive()</li>\n</ul>\n<p>LiveData01</p>\n<ul>\n<li>onInactive()</li>\n</ul>\n<p>LiveData0</p>\n<ul>\n<li>setValue()</li>\n</ul>\n<p>LiveData</p>\n<p>LocationLiveData</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyFragment</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">LifecycleFragment</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActivityCreated</span> <span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        LiveData&lt;Location&gt; myLocationListener = ...;</span><br><span class=\"line\">        Util.checkUserStatus(result -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (result) &#123;</span><br><span class=\"line\">                myLocationListener.addObserver(<span class=\"built_in\">this</span>, location -&gt; &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// update UI</span></span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>addObserver</code><code>LifeCycleOwner</code>LocationLiveDataFragmentLifeCycle</p>\n<ul>\n<li>LifeCycleStartedRESUMED</li>\n<li>LifeCycleLiveData</li>\n</ul>\n<p>LocationLiveDataActivityFragment</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">LocationLiveData</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">LiveData</span>&lt;Location&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> LocationLiveData sInstance;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> LocationManager locationManager;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@MainThread</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> LocationLiveData <span class=\"title function_\">get</span><span class=\"params\">(Context context)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (sInstance == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            sInstance = <span class=\"keyword\">new</span> <span class=\"title class_\">LocationLiveData</span>(context.getApplicationContext());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sInstance;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">SimpleLocationListener</span> <span class=\"variable\">listener</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SimpleLocationListener</span>() &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onLocationChanged</span><span class=\"params\">(Location location)</span> &#123;</span><br><span class=\"line\">            setValue(location);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"title function_\">LocationLiveData</span><span class=\"params\">(Context context)</span> &#123;</span><br><span class=\"line\">        locationManager = (LocationManager) context.getSystemService(</span><br><span class=\"line\">                Context.LOCATION_SERVICE);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActive</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, <span class=\"number\">0</span>, <span class=\"number\">0</span>, listener);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onInactive</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        locationManager.removeUpdates(listener);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ActivityFragmentLocationLiveData<br></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyFragment</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">LifecycleFragment</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActivityCreated</span> <span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        Util.checkUserStatus(result -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (result) &#123;</span><br><span class=\"line\">                MyLocationListener.get(getActivity()).addObserver(<span class=\"built_in\">this</span>, location -&gt; &#123;</span><br><span class=\"line\">                   <span class=\"comment\">// update UI</span></span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ActivityFragmentLocationLiveData</p>\n<p>LiveData</p>\n<ul>\n<li></li>\n</ul>\n<p>LifeCycle</p>\n<ul>\n<li>ActivityCrash</li>\n</ul>\n<p>ActivityLiveDataLifeCyeleStartedRESUMED</p>\n<ul>\n<li></li>\n</ul>\n<p>ActivityonCreate</p>\n<ul>\n<li></li>\n</ul>\n<p>LocationLivaData,</p>\n<ul>\n<li></li>\n</ul>\n<p>ActivityFragmentLiveData</p>\n<h2 id=\"LiveData\"><a href=\"#LiveData\" class=\"headerlink\" title=\"LiveData\"></a>LiveData</h2><p>LiveDataLiveData</p>\n<p><code>Transformations</code>,</p>\n<ul>\n<li>Transformations.map()</li>\n</ul>\n<p>LiveData</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LiveData&lt;User&gt; userLiveData = ...;</span><br><span class=\"line\">LiveData&lt;String&gt; userName = Transformations.map(userLiveData, user -&gt; &#123;</span><br><span class=\"line\">    user.name + <span class=\"string\">&quot; &quot;</span> + user.lastName</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>userNameLiveDatauserLiveData</p>\n<ul>\n<li>Transformations.switchMap()</li>\n</ul>\n<p>Transformations.map()switchMap()LiveData</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> LiveData&lt;User&gt; <span class=\"title function_\">getUser</span><span class=\"params\">(String id)</span> &#123;</span><br><span class=\"line\">  ...;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">LiveData&lt;String&gt; userId = ...;</span><br><span class=\"line\">LiveData&lt;User&gt; user = Transformations.switchMap(userId, id -&gt; getUser(id) );</span><br></pre></td></tr></table></figure>\n\n<p>ViewModelLifeCycle<br></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ViewModel</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> PostalCodeRepository repository;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyViewModel</span><span class=\"params\">(PostalCodeRepository repository)</span> &#123;</span><br><span class=\"line\">       <span class=\"built_in\">this</span>.repository = repository;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> LiveData&lt;String&gt; <span class=\"title function_\">getPostalCode</span><span class=\"params\">(String address)</span> &#123;</span><br><span class=\"line\">       <span class=\"comment\">// DON&#x27;T DO THIS</span></span><br><span class=\"line\">       <span class=\"keyword\">return</span> repository.getPostCode(address);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getPostalCodeUIgetPostalCodeUIgetPostalCode</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ViewModel</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> PostalCodeRepository repository;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> MutableLiveData&lt;String&gt; addressInput = <span class=\"keyword\">new</span> <span class=\"title class_\">MutableLiveData</span>();</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> LiveData&lt;String&gt; postalCode =</span><br><span class=\"line\">            Transformations.switchMap(addressInput, (address) -&gt; &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> repository.getPostCode(address);</span><br><span class=\"line\">             &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">MyViewModel</span><span class=\"params\">(PostalCodeRepository repository)</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">this</span>.repository = repository</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setInput</span><span class=\"params\">(String address)</span> &#123;</span><br><span class=\"line\">      addressInput.setValue(address);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>postalCodepublic finalUIpostalCodesetInputpostalCoderepository.getPostCode(address)repository.getPostCode(address)</p>"},{"title":"AndroidViewModel[]","date":"2017-05-22T02:54:25.000Z","cover":"http://cdn.zqlxtt.cn/final-architecture.png","_content":"\n## ViewModel\n\nActivityFragmentAndroidFrameworkFrameworkActivityFragment\n\nActivityFragmentActivityActivityActivityActivity`onSaveInstanceState()`onCreatebundleUI\n<!-- more -->\nActivityFragmentActivityFragmentdestroyedAppCrash\n\nActivityFragmentclass`god activities``god fragments`UIclass\n\n`MVC`,`MVP``ViewModel`UIActivityFragmentViewModelActivityFragmentViewModel\n\n<!--more-->\n\n```java\npublic class MyViewModel extends ViewModel {\n    private MutableLiveData<List<User>> users;\n    public LiveData<List<User>> getUsers() {\n        if (users == null) {\n            users = new MutableLiveData<List<Users>>();\n            loadUsers();\n        }\n        return users;\n    }\n\n    private void loadUsers() {\n        // do async operation to fetch users\n    }\n}\n```\n\nActivity\n\n```java\npublic class MyActivity extends AppCompatActivity {\n    public void onCreate(Bundle savedInstanceState) {\n        MyViewModel model = ViewModelProviders.of(this).get(MyViewModel.class);\n        model.getUsers().observe(this, users -> {\n            // update UI\n        });\n    }\n}\n```\n\nMyActivitymodelMyActivityFrameworkViewModel`onCleared()`,\n\n>   ViewModelActivityFragmentViewModelViewActivityContextViewModelApplicationContext`AndroidViewModel`\n\n\n## Fragment\n\nActivityFragmentFragmentActivityFragmentFragment\n\nViewModelActivityFragmentAFragmentBABB\n\nViewModel\n\n```java\npublic class SharedViewModel extends ViewModel {\n    private final MutableLiveData<Item> selected = new MutableLiveData<Item>();\n\n    public void select(Item item) {\n        selected.setValue(item);\n    }\n\n    public LiveData<Item> getSelected() {\n        return selected;\n    }\n}\n\npublic class MasterFragment extends Fragment {\n    private SharedViewModel model;\n    public void onActivityCreated() {\n        model = ViewModelProviders.of(getActivity()).get(SharedViewModel.class);\n        itemSelector.setOnClickListener(item -> {\n            model.select(item);\n        });\n    }\n}\n\npublic class DetailFragment extends LifecycleFragment {\n    public void onActivityCreated() {\n        SharedViewModel model = ViewModelProviders.of(getActivity()).get(SharedViewModel.class);\n        model.getSelected().observe(this, { item ->\n           // update UI\n        });\n    }\n}\n```\n\nFragment`getActivity`ViewModelFragmentViewModel\n\nViewModel\n\n- ActivityFragment\n- Fragment\n- FragmentFragmentCBFragmentA\n\n## ViewModel\n\nViewModel`ViewModelProvider``LifeCycle`ViewModelLifeCycleViewModelActivity\n\n![ViewModel](http://backup.flutter-dev.cn/viewmodel-lifecycle.png)\n","source":"_posts/android-arch-viewmodel.md","raw":"---\ntitle: AndroidViewModel[]\ndate: 2017-05-22 10:54:25\ntags: android\ncover: http://cdn.zqlxtt.cn/final-architecture.png\n---\n\n## ViewModel\n\nActivityFragmentAndroidFrameworkFrameworkActivityFragment\n\nActivityFragmentActivityActivityActivityActivity`onSaveInstanceState()`onCreatebundleUI\n<!-- more -->\nActivityFragmentActivityFragmentdestroyedAppCrash\n\nActivityFragmentclass`god activities``god fragments`UIclass\n\n`MVC`,`MVP``ViewModel`UIActivityFragmentViewModelActivityFragmentViewModel\n\n<!--more-->\n\n```java\npublic class MyViewModel extends ViewModel {\n    private MutableLiveData<List<User>> users;\n    public LiveData<List<User>> getUsers() {\n        if (users == null) {\n            users = new MutableLiveData<List<Users>>();\n            loadUsers();\n        }\n        return users;\n    }\n\n    private void loadUsers() {\n        // do async operation to fetch users\n    }\n}\n```\n\nActivity\n\n```java\npublic class MyActivity extends AppCompatActivity {\n    public void onCreate(Bundle savedInstanceState) {\n        MyViewModel model = ViewModelProviders.of(this).get(MyViewModel.class);\n        model.getUsers().observe(this, users -> {\n            // update UI\n        });\n    }\n}\n```\n\nMyActivitymodelMyActivityFrameworkViewModel`onCleared()`,\n\n>   ViewModelActivityFragmentViewModelViewActivityContextViewModelApplicationContext`AndroidViewModel`\n\n\n## Fragment\n\nActivityFragmentFragmentActivityFragmentFragment\n\nViewModelActivityFragmentAFragmentBABB\n\nViewModel\n\n```java\npublic class SharedViewModel extends ViewModel {\n    private final MutableLiveData<Item> selected = new MutableLiveData<Item>();\n\n    public void select(Item item) {\n        selected.setValue(item);\n    }\n\n    public LiveData<Item> getSelected() {\n        return selected;\n    }\n}\n\npublic class MasterFragment extends Fragment {\n    private SharedViewModel model;\n    public void onActivityCreated() {\n        model = ViewModelProviders.of(getActivity()).get(SharedViewModel.class);\n        itemSelector.setOnClickListener(item -> {\n            model.select(item);\n        });\n    }\n}\n\npublic class DetailFragment extends LifecycleFragment {\n    public void onActivityCreated() {\n        SharedViewModel model = ViewModelProviders.of(getActivity()).get(SharedViewModel.class);\n        model.getSelected().observe(this, { item ->\n           // update UI\n        });\n    }\n}\n```\n\nFragment`getActivity`ViewModelFragmentViewModel\n\nViewModel\n\n- ActivityFragment\n- Fragment\n- FragmentFragmentCBFragmentA\n\n## ViewModel\n\nViewModel`ViewModelProvider``LifeCycle`ViewModelLifeCycleViewModelActivity\n\n![ViewModel](http://backup.flutter-dev.cn/viewmodel-lifecycle.png)\n","slug":"android-arch-viewmodel","published":1,"updated":"2024-08-21T03:16:19.781Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vp000d5p6tcfb63h5x","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"ViewModel\"><a href=\"#ViewModel\" class=\"headerlink\" title=\"ViewModel\"></a>ViewModel</h2><p>ActivityFragmentAndroidFrameworkFrameworkActivityFragment</p>\n<p>ActivityFragmentActivityActivityActivityActivity<code>onSaveInstanceState()</code>onCreatebundleUI</p>\n<span id=\"more\"></span>\n<p>ActivityFragmentActivityFragmentdestroyedAppCrash</p>\n<p>ActivityFragmentclass<code>god activities</code><code>god fragments</code>UIclass</p>\n<p><code>MVC</code>,<code>MVP</code><code>ViewModel</code>UIActivityFragmentViewModelActivityFragmentViewModel</p>\n<!--more-->\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ViewModel</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> MutableLiveData&lt;List&lt;User&gt;&gt; users;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;List&lt;User&gt;&gt; <span class=\"title function_\">getUsers</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (users == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            users = <span class=\"keyword\">new</span> <span class=\"title class_\">MutableLiveData</span>&lt;List&lt;Users&gt;&gt;();</span><br><span class=\"line\">            loadUsers();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> users;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">loadUsers</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// do async operation to fetch users</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Activity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyActivity</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">AppCompatActivity</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">MyViewModel</span> <span class=\"variable\">model</span> <span class=\"operator\">=</span> ViewModelProviders.of(<span class=\"built_in\">this</span>).get(MyViewModel.class);</span><br><span class=\"line\">        model.getUsers().observe(<span class=\"built_in\">this</span>, users -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// update UI</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>MyActivitymodelMyActivityFrameworkViewModel<code>onCleared()</code>,</p>\n<blockquote>\n<p>  ViewModelActivityFragmentViewModelViewActivityContextViewModelApplicationContext<code>AndroidViewModel</code></p>\n</blockquote>\n<h2 id=\"Fragment\"><a href=\"#Fragment\" class=\"headerlink\" title=\"Fragment\"></a>Fragment</h2><p>ActivityFragmentFragmentActivityFragmentFragment</p>\n<p>ViewModelActivityFragmentAFragmentBABB</p>\n<p>ViewModel</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SharedViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ViewModel</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> MutableLiveData&lt;Item&gt; selected = <span class=\"keyword\">new</span> <span class=\"title class_\">MutableLiveData</span>&lt;Item&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">select</span><span class=\"params\">(Item item)</span> &#123;</span><br><span class=\"line\">        selected.setValue(item);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;Item&gt; <span class=\"title function_\">getSelected</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> selected;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MasterFragment</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Fragment</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> SharedViewModel model;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActivityCreated</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        model = ViewModelProviders.of(getActivity()).get(SharedViewModel.class);</span><br><span class=\"line\">        itemSelector.setOnClickListener(item -&gt; &#123;</span><br><span class=\"line\">            model.select(item);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DetailFragment</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">LifecycleFragment</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActivityCreated</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">SharedViewModel</span> <span class=\"variable\">model</span> <span class=\"operator\">=</span> ViewModelProviders.of(getActivity()).get(SharedViewModel.class);</span><br><span class=\"line\">        model.getSelected().observe(<span class=\"built_in\">this</span>, &#123; item -&gt;</span><br><span class=\"line\">           <span class=\"comment\">// update UI</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Fragment<code>getActivity</code>ViewModelFragmentViewModel</p>\n<p>ViewModel</p>\n<ul>\n<li>ActivityFragment</li>\n<li>Fragment</li>\n<li>FragmentFragmentCBFragmentA</li>\n</ul>\n<h2 id=\"ViewModel\"><a href=\"#ViewModel\" class=\"headerlink\" title=\"ViewModel\"></a>ViewModel</h2><p>ViewModel<code>ViewModelProvider</code><code>LifeCycle</code>ViewModelLifeCycleViewModelActivity</p>\n<p><img src=\"http://backup.flutter-dev.cn/viewmodel-lifecycle.png\" alt=\"ViewModel\"></p>\n","excerpt":"<h2 id=\"ViewModel\"><a href=\"#ViewModel\" class=\"headerlink\" title=\"ViewModel\"></a>ViewModel</h2><p>ActivityFragmentAndroidFrameworkFrameworkActivityFragment</p>\n<p>ActivityFragmentActivityActivityActivityActivity<code>onSaveInstanceState()</code>onCreatebundleUI</p>","more":"<p>ActivityFragmentActivityFragmentdestroyedAppCrash</p>\n<p>ActivityFragmentclass<code>god activities</code><code>god fragments</code>UIclass</p>\n<p><code>MVC</code>,<code>MVP</code><code>ViewModel</code>UIActivityFragmentViewModelActivityFragmentViewModel</p>\n<!--more-->\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ViewModel</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> MutableLiveData&lt;List&lt;User&gt;&gt; users;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;List&lt;User&gt;&gt; <span class=\"title function_\">getUsers</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (users == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            users = <span class=\"keyword\">new</span> <span class=\"title class_\">MutableLiveData</span>&lt;List&lt;Users&gt;&gt;();</span><br><span class=\"line\">            loadUsers();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> users;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">loadUsers</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// do async operation to fetch users</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Activity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyActivity</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">AppCompatActivity</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">MyViewModel</span> <span class=\"variable\">model</span> <span class=\"operator\">=</span> ViewModelProviders.of(<span class=\"built_in\">this</span>).get(MyViewModel.class);</span><br><span class=\"line\">        model.getUsers().observe(<span class=\"built_in\">this</span>, users -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// update UI</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>MyActivitymodelMyActivityFrameworkViewModel<code>onCleared()</code>,</p>\n<blockquote>\n<p>  ViewModelActivityFragmentViewModelViewActivityContextViewModelApplicationContext<code>AndroidViewModel</code></p>\n</blockquote>\n<h2 id=\"Fragment\"><a href=\"#Fragment\" class=\"headerlink\" title=\"Fragment\"></a>Fragment</h2><p>ActivityFragmentFragmentActivityFragmentFragment</p>\n<p>ViewModelActivityFragmentAFragmentBABB</p>\n<p>ViewModel</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SharedViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ViewModel</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> MutableLiveData&lt;Item&gt; selected = <span class=\"keyword\">new</span> <span class=\"title class_\">MutableLiveData</span>&lt;Item&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">select</span><span class=\"params\">(Item item)</span> &#123;</span><br><span class=\"line\">        selected.setValue(item);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;Item&gt; <span class=\"title function_\">getSelected</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> selected;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MasterFragment</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Fragment</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> SharedViewModel model;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActivityCreated</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        model = ViewModelProviders.of(getActivity()).get(SharedViewModel.class);</span><br><span class=\"line\">        itemSelector.setOnClickListener(item -&gt; &#123;</span><br><span class=\"line\">            model.select(item);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DetailFragment</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">LifecycleFragment</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActivityCreated</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">SharedViewModel</span> <span class=\"variable\">model</span> <span class=\"operator\">=</span> ViewModelProviders.of(getActivity()).get(SharedViewModel.class);</span><br><span class=\"line\">        model.getSelected().observe(<span class=\"built_in\">this</span>, &#123; item -&gt;</span><br><span class=\"line\">           <span class=\"comment\">// update UI</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Fragment<code>getActivity</code>ViewModelFragmentViewModel</p>\n<p>ViewModel</p>\n<ul>\n<li>ActivityFragment</li>\n<li>Fragment</li>\n<li>FragmentFragmentCBFragmentA</li>\n</ul>\n<h2 id=\"ViewModel\"><a href=\"#ViewModel\" class=\"headerlink\" title=\"ViewModel\"></a>ViewModel</h2><p>ViewModel<code>ViewModelProvider</code><code>LifeCycle</code>ViewModelLifeCycleViewModelActivity</p>\n<p><img src=\"http://backup.flutter-dev.cn/viewmodel-lifecycle.png\" alt=\"ViewModel\"></p>"},{"title":"AndroidLifeCycle[]","date":"2017-05-19T09:07:10.000Z","cover":"http://cdn.zqlxtt.cn/final-architecture.png","_content":"\n> Google 2017 I/OAndroid OAndroid\n\n[Google 2017 I/OAndroid](http://www.bilibili.com/video/av10638148/index_8.html)\n<!-- more -->\nAndroid App\n\n![googleAndroid](http://cdn.zqlxtt.cn/final-architecture.png)\n\n<!-- more -->\n`ViewModel`,`LiveData`,`Room`GoogleAndroid\n\n- LifeCycle  ActivityFragment\n- LiveData \n- ViewModel \n- Room SQLiteSQLite\n\nLifeCycle\n\n## AS\n\n`build.gradle`\n\n```groovy\nallprojects {\n    repositories {\n        jcenter()\n        maven { url 'https://maven.google.com' }  //\n    }\n}\n```\n`build.gradle`\n\n```groovy\n//For Lifecycles, LiveData, and ViewModel\ncompile \"android.arch.lifecycle:runtime:1.0.0-alpha1\"\ncompile \"android.arch.lifecycle:extensions:1.0.0-alpha1\"\nannotationProcessor \"android.arch.lifecycle:compiler:1.0.0-alpha1\"\n\n//For Room\ncompile \"android.arch.persistence.room:runtime:1.0.0-alpha1\"\nannotationProcessor \"android.arch.persistence.room:compiler:1.0.0-alpha1\"\n```\n\n## LifeCycle\n\n\nActivity\n\n```java\nclass MyLocationListener {\n    public MyLocationListener(Context context, Callback callback) {\n        // ...\n    }\n\n    void start() {\n        // connect to system location service\n    }\n\n    void stop() {\n        // disconnect from system location service\n    }\n}\n\nclass MyActivity extends AppCompatActivity {\n    private MyLocationListener myLocationListener;\n\n    public void onCreate(...) {\n        myLocationListener = new MyLocationListener(this, (location) -> {\n            // update UI\n        });\n  }\n\n    public void onStart() {\n        super.onStart();\n        myLocationListener.start();\n    }\n\n    public void onStop() {\n        super.onStop();\n        myLocationListener.stop();\n    }\n}\n```\n\nonStartonStop\nstartActivity`myLocationListener.start()``myLocationListener.stop()`\n\n```java\nclass MyActivity extends AppCompatActivity {\n    private MyLocationListener myLocationListener;\n\n    public void onCreate(...) {\n        myLocationListener = new MyLocationListener(this, location -> {\n            // update UI\n        });\n    }\n\n    public void onStart() {\n        super.onStart();\n        Util.checkUserStatus(result -> {\n            // what if this callback is invoked AFTER activity is stopped?\n            if (result) {\n                myLocationListener.start();\n            }\n        });\n    }\n\n    public void onStop() {\n        super.onStop();\n        myLocationListener.stop();\n    }\n}\n```\n\n`LifeCycle`\n\n### LifeCycle\n\n`LifeCyle`ActivityFragment\n\n`LifeCyle`\n\n**Event**\n\nFrameworkLifeCycleActivityFragment\n\n**State**\n\nLifeCycleActivityFragment\n\nLifeCycle\n\n```java\npublic class MyObserver implements LifecycleObserver {\n    @OnLifecycleEvent(Lifecycle.Event.ON_RESUME)\n    public void onResume() {\n    }\n\n    @OnLifecycleEvent(Lifecycle.Event.ON_PAUSE)\n    public void onPause() {\n    }\n}\naLifecycleOwner.getLifecycle().addObserver(new MyObserver());\n```\n\n### LifeCycleOwner\n\n`LifeCycleOwner`LifeCycle`getLifecycle()`\nAcitivityFragmentLifeCycleActivityFragmentLifeCycle\n\n> LifeCyclealphaFragmentAppCompatActivity`LifecycleActivity``LifecycleFragment`LifeCycleFragmentAppCompatActivity\n\n\n`MyLocationListener`LifecycleObserveronCreateLifeCycle`MyLocationListener`\n\n```java\nclass MyActivity extends LifecycleActivity {\n    private MyLocationListener myLocationListener;\n\n    public void onCreate(...) {\n        //getLifecycle()LifeCycle\n        myLocationListener = new MyLocationListener(this, getLifecycle(), location -> {\n            // update UI\n        });\n        //\n        Util.checkUserStatus(result -> {\n            if (result) {\n                myLocationListener.enable();\n            }\n        });\n  }\n}\n\n```\nMyLocationListener\n\n```java\nclass MyLocationListener implements LifecycleObserver {\n    private boolean enabled = false;\n    public MyLocationListener(Context context, Lifecycle lifecycle, Callback callback) {\n       ...\n    }\n\n    @OnLifecycleEvent(Lifecycle.Event.ON_START)\n    void start() {\n        if (enabled) {\n           // connect\n        }\n    }\n\n    public void enable() {\n        enabled = true;\n        //\n        if (lifecycle.getState().isAtLeast(STARTED)) {\n            // connect if not connected\n        }\n    }\n\n    @OnLifecycleEvent(Lifecycle.Event.ON_STOP)\n    void stop() {\n        // disconnect if connected\n    }\n}\n```\nLifeCycle`myLocationListener.start()``myLocationListener.stop()`\n\n`LocationListener`ActivityFragmentActivityFragment`LocationListener`\n\nLefeCycle``Android\n\n`LiveData`LiveDataViewModelAndroidUI\n\n## \n\n- UIActivityFragmentViewModelLiveDataUI\n- UIUIViewModel\n- ViewModel ViewModelUIViewModelViewModelUI\n- `Data Binding`UIUIUIJava`Butter Knife`\n- UIPresenterUIUI\n- ViewModelViewActivityViewModelActivityView\n\n## \nActivityFragmentLifeCycleOwner`LifecycleRegistryOwner`LifeCycleFragmentLifeCycleActivity\n\n```java\npublic class MyFragment extends Fragment implements LifecycleRegistryOwner {\n    LifecycleRegistry lifecycleRegistry = new LifecycleRegistry(this);\n\n    @Override\n    public LifecycleRegistry getLifecycle() {\n        return lifecycleRegistry;\n    }\n}\n```\n\nLifeCycleOwner`LifecycleRegistry`,FragmentActivityLifecycleRegistryOwner\n","source":"_posts/android-arch-lifecycle.md","raw":"---\ntitle: AndroidLifeCycle[]\ndate: 2017-05-19 17:07:10\ntags: android\ncover: http://cdn.zqlxtt.cn/final-architecture.png\n---\n\n> Google 2017 I/OAndroid OAndroid\n\n[Google 2017 I/OAndroid](http://www.bilibili.com/video/av10638148/index_8.html)\n<!-- more -->\nAndroid App\n\n![googleAndroid](http://cdn.zqlxtt.cn/final-architecture.png)\n\n<!-- more -->\n`ViewModel`,`LiveData`,`Room`GoogleAndroid\n\n- LifeCycle  ActivityFragment\n- LiveData \n- ViewModel \n- Room SQLiteSQLite\n\nLifeCycle\n\n## AS\n\n`build.gradle`\n\n```groovy\nallprojects {\n    repositories {\n        jcenter()\n        maven { url 'https://maven.google.com' }  //\n    }\n}\n```\n`build.gradle`\n\n```groovy\n//For Lifecycles, LiveData, and ViewModel\ncompile \"android.arch.lifecycle:runtime:1.0.0-alpha1\"\ncompile \"android.arch.lifecycle:extensions:1.0.0-alpha1\"\nannotationProcessor \"android.arch.lifecycle:compiler:1.0.0-alpha1\"\n\n//For Room\ncompile \"android.arch.persistence.room:runtime:1.0.0-alpha1\"\nannotationProcessor \"android.arch.persistence.room:compiler:1.0.0-alpha1\"\n```\n\n## LifeCycle\n\n\nActivity\n\n```java\nclass MyLocationListener {\n    public MyLocationListener(Context context, Callback callback) {\n        // ...\n    }\n\n    void start() {\n        // connect to system location service\n    }\n\n    void stop() {\n        // disconnect from system location service\n    }\n}\n\nclass MyActivity extends AppCompatActivity {\n    private MyLocationListener myLocationListener;\n\n    public void onCreate(...) {\n        myLocationListener = new MyLocationListener(this, (location) -> {\n            // update UI\n        });\n  }\n\n    public void onStart() {\n        super.onStart();\n        myLocationListener.start();\n    }\n\n    public void onStop() {\n        super.onStop();\n        myLocationListener.stop();\n    }\n}\n```\n\nonStartonStop\nstartActivity`myLocationListener.start()``myLocationListener.stop()`\n\n```java\nclass MyActivity extends AppCompatActivity {\n    private MyLocationListener myLocationListener;\n\n    public void onCreate(...) {\n        myLocationListener = new MyLocationListener(this, location -> {\n            // update UI\n        });\n    }\n\n    public void onStart() {\n        super.onStart();\n        Util.checkUserStatus(result -> {\n            // what if this callback is invoked AFTER activity is stopped?\n            if (result) {\n                myLocationListener.start();\n            }\n        });\n    }\n\n    public void onStop() {\n        super.onStop();\n        myLocationListener.stop();\n    }\n}\n```\n\n`LifeCycle`\n\n### LifeCycle\n\n`LifeCyle`ActivityFragment\n\n`LifeCyle`\n\n**Event**\n\nFrameworkLifeCycleActivityFragment\n\n**State**\n\nLifeCycleActivityFragment\n\nLifeCycle\n\n```java\npublic class MyObserver implements LifecycleObserver {\n    @OnLifecycleEvent(Lifecycle.Event.ON_RESUME)\n    public void onResume() {\n    }\n\n    @OnLifecycleEvent(Lifecycle.Event.ON_PAUSE)\n    public void onPause() {\n    }\n}\naLifecycleOwner.getLifecycle().addObserver(new MyObserver());\n```\n\n### LifeCycleOwner\n\n`LifeCycleOwner`LifeCycle`getLifecycle()`\nAcitivityFragmentLifeCycleActivityFragmentLifeCycle\n\n> LifeCyclealphaFragmentAppCompatActivity`LifecycleActivity``LifecycleFragment`LifeCycleFragmentAppCompatActivity\n\n\n`MyLocationListener`LifecycleObserveronCreateLifeCycle`MyLocationListener`\n\n```java\nclass MyActivity extends LifecycleActivity {\n    private MyLocationListener myLocationListener;\n\n    public void onCreate(...) {\n        //getLifecycle()LifeCycle\n        myLocationListener = new MyLocationListener(this, getLifecycle(), location -> {\n            // update UI\n        });\n        //\n        Util.checkUserStatus(result -> {\n            if (result) {\n                myLocationListener.enable();\n            }\n        });\n  }\n}\n\n```\nMyLocationListener\n\n```java\nclass MyLocationListener implements LifecycleObserver {\n    private boolean enabled = false;\n    public MyLocationListener(Context context, Lifecycle lifecycle, Callback callback) {\n       ...\n    }\n\n    @OnLifecycleEvent(Lifecycle.Event.ON_START)\n    void start() {\n        if (enabled) {\n           // connect\n        }\n    }\n\n    public void enable() {\n        enabled = true;\n        //\n        if (lifecycle.getState().isAtLeast(STARTED)) {\n            // connect if not connected\n        }\n    }\n\n    @OnLifecycleEvent(Lifecycle.Event.ON_STOP)\n    void stop() {\n        // disconnect if connected\n    }\n}\n```\nLifeCycle`myLocationListener.start()``myLocationListener.stop()`\n\n`LocationListener`ActivityFragmentActivityFragment`LocationListener`\n\nLefeCycle``Android\n\n`LiveData`LiveDataViewModelAndroidUI\n\n## \n\n- UIActivityFragmentViewModelLiveDataUI\n- UIUIViewModel\n- ViewModel ViewModelUIViewModelViewModelUI\n- `Data Binding`UIUIUIJava`Butter Knife`\n- UIPresenterUIUI\n- ViewModelViewActivityViewModelActivityView\n\n## \nActivityFragmentLifeCycleOwner`LifecycleRegistryOwner`LifeCycleFragmentLifeCycleActivity\n\n```java\npublic class MyFragment extends Fragment implements LifecycleRegistryOwner {\n    LifecycleRegistry lifecycleRegistry = new LifecycleRegistry(this);\n\n    @Override\n    public LifecycleRegistry getLifecycle() {\n        return lifecycleRegistry;\n    }\n}\n```\n\nLifeCycleOwner`LifecycleRegistry`,FragmentActivityLifecycleRegistryOwner\n","slug":"android-arch-lifecycle","published":1,"updated":"2024-08-21T03:16:19.780Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vp000e5p6t4ss151rw","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><blockquote>\n<p>Google 2017 I/OAndroid OAndroid</p>\n</blockquote>\n<p><a href=\"http://www.bilibili.com/video/av10638148/index_8.html\">Google 2017 I/OAndroid</a></p>\n<span id=\"more\"></span>\n<p>Android App</p>\n<p><img src=\"http://cdn.zqlxtt.cn/final-architecture.png\" alt=\"googleAndroid\"></p>\n<!-- more -->\n<p><code>ViewModel</code>,<code>LiveData</code>,<code>Room</code>GoogleAndroid</p>\n<ul>\n<li>LifeCycle  ActivityFragment</li>\n<li>LiveData </li>\n<li>ViewModel </li>\n<li>Room SQLiteSQLite</li>\n</ul>\n<p>LifeCycle</p>\n<h2 id=\"AS\"><a href=\"#AS\" class=\"headerlink\" title=\"AS\"></a>AS</h2><p><code>build.gradle</code></p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">allprojects &#123;</span><br><span class=\"line\">    repositories &#123;</span><br><span class=\"line\">        jcenter()</span><br><span class=\"line\">        maven &#123; url <span class=\"string\">&#x27;https://maven.google.com&#x27;</span> &#125;  <span class=\"comment\">//</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>build.gradle</code></p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//For Lifecycles, LiveData, and ViewModel</span></span><br><span class=\"line\">compile <span class=\"string\">&quot;android.arch.lifecycle:runtime:1.0.0-alpha1&quot;</span></span><br><span class=\"line\">compile <span class=\"string\">&quot;android.arch.lifecycle:extensions:1.0.0-alpha1&quot;</span></span><br><span class=\"line\">annotationProcessor <span class=\"string\">&quot;android.arch.lifecycle:compiler:1.0.0-alpha1&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//For Room</span></span><br><span class=\"line\">compile <span class=\"string\">&quot;android.arch.persistence.room:runtime:1.0.0-alpha1&quot;</span></span><br><span class=\"line\">annotationProcessor <span class=\"string\">&quot;android.arch.persistence.room:compiler:1.0.0-alpha1&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"LifeCycle\"><a href=\"#LifeCycle\" class=\"headerlink\" title=\"LifeCycle\"></a>LifeCycle</h2><p><br>Activity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyLocationListener</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyLocationListener</span><span class=\"params\">(Context context, Callback callback)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">start</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// connect to system location service</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">stop</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// disconnect from system location service</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyActivity</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">AppCompatActivity</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> MyLocationListener myLocationListener;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(...)</span> &#123;</span><br><span class=\"line\">        myLocationListener = <span class=\"keyword\">new</span> <span class=\"title class_\">MyLocationListener</span>(<span class=\"built_in\">this</span>, (location) -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// update UI</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onStart</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onStart();</span><br><span class=\"line\">        myLocationListener.start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onStop</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onStop();</span><br><span class=\"line\">        myLocationListener.stop();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>onStartonStop<br>startActivity<code>myLocationListener.start()</code><code>myLocationListener.stop()</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyActivity</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">AppCompatActivity</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> MyLocationListener myLocationListener;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(...)</span> &#123;</span><br><span class=\"line\">        myLocationListener = <span class=\"keyword\">new</span> <span class=\"title class_\">MyLocationListener</span>(<span class=\"built_in\">this</span>, location -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// update UI</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onStart</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onStart();</span><br><span class=\"line\">        Util.checkUserStatus(result -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// what if this callback is invoked AFTER activity is stopped?</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (result) &#123;</span><br><span class=\"line\">                myLocationListener.start();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onStop</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onStop();</span><br><span class=\"line\">        myLocationListener.stop();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>LifeCycle</code></p>\n<h3 id=\"LifeCycle\"><a href=\"#LifeCycle\" class=\"headerlink\" title=\"LifeCycle\"></a>LifeCycle</h3><p><code>LifeCyle</code>ActivityFragment</p>\n<p><code>LifeCyle</code></p>\n<p><strong>Event</strong></p>\n<p>FrameworkLifeCycleActivityFragment</p>\n<p><strong>State</strong></p>\n<p>LifeCycleActivityFragment</p>\n<p>LifeCycle</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyObserver</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">LifecycleObserver</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@OnLifecycleEvent(Lifecycle.Event.ON_RESUME)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onResume</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@OnLifecycleEvent(Lifecycle.Event.ON_PAUSE)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onPause</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">aLifecycleOwner.getLifecycle().addObserver(<span class=\"keyword\">new</span> <span class=\"title class_\">MyObserver</span>());</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"LifeCycleOwner\"><a href=\"#LifeCycleOwner\" class=\"headerlink\" title=\"LifeCycleOwner\"></a>LifeCycleOwner</h3><p><code>LifeCycleOwner</code>LifeCycle<code>getLifecycle()</code><br>AcitivityFragmentLifeCycleActivityFragmentLifeCycle</p>\n<blockquote>\n<p>LifeCyclealphaFragmentAppCompatActivity<code>LifecycleActivity</code><code>LifecycleFragment</code>LifeCycleFragmentAppCompatActivity</p>\n</blockquote>\n<p><code>MyLocationListener</code>LifecycleObserveronCreateLifeCycle<code>MyLocationListener</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyActivity</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">LifecycleActivity</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> MyLocationListener myLocationListener;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(...)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//getLifecycle()LifeCycle</span></span><br><span class=\"line\">        myLocationListener = <span class=\"keyword\">new</span> <span class=\"title class_\">MyLocationListener</span>(<span class=\"built_in\">this</span>, getLifecycle(), location -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// update UI</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        Util.checkUserStatus(result -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (result) &#123;</span><br><span class=\"line\">                myLocationListener.enable();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>MyLocationListener</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyLocationListener</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">LifecycleObserver</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">boolean</span> <span class=\"variable\">enabled</span> <span class=\"operator\">=</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyLocationListener</span><span class=\"params\">(Context context, Lifecycle lifecycle, Callback callback)</span> &#123;</span><br><span class=\"line\">       ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@OnLifecycleEvent(Lifecycle.Event.ON_START)</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">start</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (enabled) &#123;</span><br><span class=\"line\">           <span class=\"comment\">// connect</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">enable</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        enabled = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (lifecycle.getState().isAtLeast(STARTED)) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// connect if not connected</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@OnLifecycleEvent(Lifecycle.Event.ON_STOP)</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">stop</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// disconnect if connected</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>LifeCycle<code>myLocationListener.start()</code><code>myLocationListener.stop()</code></p>\n<p><code>LocationListener</code>ActivityFragmentActivityFragment<code>LocationListener</code></p>\n<p>LefeCycle<code></code>Android</p>\n<p><code>LiveData</code>LiveDataViewModelAndroidUI</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>UIActivityFragmentViewModelLiveDataUI</li>\n<li>UIUIViewModel</li>\n<li>ViewModel ViewModelUIViewModelViewModelUI</li>\n<li><code>Data Binding</code>UIUIUIJava<code>Butter Knife</code></li>\n<li>UIPresenterUIUI</li>\n<li>ViewModelViewActivityViewModelActivityView</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ActivityFragmentLifeCycleOwner<code>LifecycleRegistryOwner</code>LifeCycleFragmentLifeCycleActivity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyFragment</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Fragment</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">LifecycleRegistryOwner</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">LifecycleRegistry</span> <span class=\"variable\">lifecycleRegistry</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">LifecycleRegistry</span>(<span class=\"built_in\">this</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> LifecycleRegistry <span class=\"title function_\">getLifecycle</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> lifecycleRegistry;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>LifeCycleOwner<code>LifecycleRegistry</code>,FragmentActivityLifecycleRegistryOwner</p>\n","excerpt":"<blockquote>\n<p>Google 2017 I/OAndroid OAndroid</p>\n</blockquote>\n<p><a href=\"http://www.bilibili.com/video/av10638148/index_8.html\">Google 2017 I/OAndroid</a></p>","more":"<p>Android App</p>\n<p><img src=\"http://cdn.zqlxtt.cn/final-architecture.png\" alt=\"googleAndroid\"></p>\n<!-- more -->\n<p><code>ViewModel</code>,<code>LiveData</code>,<code>Room</code>GoogleAndroid</p>\n<ul>\n<li>LifeCycle  ActivityFragment</li>\n<li>LiveData </li>\n<li>ViewModel </li>\n<li>Room SQLiteSQLite</li>\n</ul>\n<p>LifeCycle</p>\n<h2 id=\"AS\"><a href=\"#AS\" class=\"headerlink\" title=\"AS\"></a>AS</h2><p><code>build.gradle</code></p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">allprojects &#123;</span><br><span class=\"line\">    repositories &#123;</span><br><span class=\"line\">        jcenter()</span><br><span class=\"line\">        maven &#123; url <span class=\"string\">&#x27;https://maven.google.com&#x27;</span> &#125;  <span class=\"comment\">//</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>build.gradle</code></p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//For Lifecycles, LiveData, and ViewModel</span></span><br><span class=\"line\">compile <span class=\"string\">&quot;android.arch.lifecycle:runtime:1.0.0-alpha1&quot;</span></span><br><span class=\"line\">compile <span class=\"string\">&quot;android.arch.lifecycle:extensions:1.0.0-alpha1&quot;</span></span><br><span class=\"line\">annotationProcessor <span class=\"string\">&quot;android.arch.lifecycle:compiler:1.0.0-alpha1&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//For Room</span></span><br><span class=\"line\">compile <span class=\"string\">&quot;android.arch.persistence.room:runtime:1.0.0-alpha1&quot;</span></span><br><span class=\"line\">annotationProcessor <span class=\"string\">&quot;android.arch.persistence.room:compiler:1.0.0-alpha1&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"LifeCycle\"><a href=\"#LifeCycle\" class=\"headerlink\" title=\"LifeCycle\"></a>LifeCycle</h2><p><br>Activity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyLocationListener</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyLocationListener</span><span class=\"params\">(Context context, Callback callback)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">start</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// connect to system location service</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">stop</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// disconnect from system location service</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyActivity</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">AppCompatActivity</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> MyLocationListener myLocationListener;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(...)</span> &#123;</span><br><span class=\"line\">        myLocationListener = <span class=\"keyword\">new</span> <span class=\"title class_\">MyLocationListener</span>(<span class=\"built_in\">this</span>, (location) -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// update UI</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onStart</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onStart();</span><br><span class=\"line\">        myLocationListener.start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onStop</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onStop();</span><br><span class=\"line\">        myLocationListener.stop();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>onStartonStop<br>startActivity<code>myLocationListener.start()</code><code>myLocationListener.stop()</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyActivity</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">AppCompatActivity</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> MyLocationListener myLocationListener;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(...)</span> &#123;</span><br><span class=\"line\">        myLocationListener = <span class=\"keyword\">new</span> <span class=\"title class_\">MyLocationListener</span>(<span class=\"built_in\">this</span>, location -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// update UI</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onStart</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onStart();</span><br><span class=\"line\">        Util.checkUserStatus(result -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// what if this callback is invoked AFTER activity is stopped?</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (result) &#123;</span><br><span class=\"line\">                myLocationListener.start();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onStop</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onStop();</span><br><span class=\"line\">        myLocationListener.stop();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>LifeCycle</code></p>\n<h3 id=\"LifeCycle\"><a href=\"#LifeCycle\" class=\"headerlink\" title=\"LifeCycle\"></a>LifeCycle</h3><p><code>LifeCyle</code>ActivityFragment</p>\n<p><code>LifeCyle</code></p>\n<p><strong>Event</strong></p>\n<p>FrameworkLifeCycleActivityFragment</p>\n<p><strong>State</strong></p>\n<p>LifeCycleActivityFragment</p>\n<p>LifeCycle</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyObserver</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">LifecycleObserver</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@OnLifecycleEvent(Lifecycle.Event.ON_RESUME)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onResume</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@OnLifecycleEvent(Lifecycle.Event.ON_PAUSE)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onPause</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">aLifecycleOwner.getLifecycle().addObserver(<span class=\"keyword\">new</span> <span class=\"title class_\">MyObserver</span>());</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"LifeCycleOwner\"><a href=\"#LifeCycleOwner\" class=\"headerlink\" title=\"LifeCycleOwner\"></a>LifeCycleOwner</h3><p><code>LifeCycleOwner</code>LifeCycle<code>getLifecycle()</code><br>AcitivityFragmentLifeCycleActivityFragmentLifeCycle</p>\n<blockquote>\n<p>LifeCyclealphaFragmentAppCompatActivity<code>LifecycleActivity</code><code>LifecycleFragment</code>LifeCycleFragmentAppCompatActivity</p>\n</blockquote>\n<p><code>MyLocationListener</code>LifecycleObserveronCreateLifeCycle<code>MyLocationListener</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyActivity</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">LifecycleActivity</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> MyLocationListener myLocationListener;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(...)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//getLifecycle()LifeCycle</span></span><br><span class=\"line\">        myLocationListener = <span class=\"keyword\">new</span> <span class=\"title class_\">MyLocationListener</span>(<span class=\"built_in\">this</span>, getLifecycle(), location -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// update UI</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        Util.checkUserStatus(result -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (result) &#123;</span><br><span class=\"line\">                myLocationListener.enable();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>MyLocationListener</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyLocationListener</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">LifecycleObserver</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">boolean</span> <span class=\"variable\">enabled</span> <span class=\"operator\">=</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyLocationListener</span><span class=\"params\">(Context context, Lifecycle lifecycle, Callback callback)</span> &#123;</span><br><span class=\"line\">       ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@OnLifecycleEvent(Lifecycle.Event.ON_START)</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">start</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (enabled) &#123;</span><br><span class=\"line\">           <span class=\"comment\">// connect</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">enable</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        enabled = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (lifecycle.getState().isAtLeast(STARTED)) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// connect if not connected</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@OnLifecycleEvent(Lifecycle.Event.ON_STOP)</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">stop</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// disconnect if connected</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>LifeCycle<code>myLocationListener.start()</code><code>myLocationListener.stop()</code></p>\n<p><code>LocationListener</code>ActivityFragmentActivityFragment<code>LocationListener</code></p>\n<p>LefeCycle<code></code>Android</p>\n<p><code>LiveData</code>LiveDataViewModelAndroidUI</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>UIActivityFragmentViewModelLiveDataUI</li>\n<li>UIUIViewModel</li>\n<li>ViewModel ViewModelUIViewModelViewModelUI</li>\n<li><code>Data Binding</code>UIUIUIJava<code>Butter Knife</code></li>\n<li>UIPresenterUIUI</li>\n<li>ViewModelViewActivityViewModelActivityView</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ActivityFragmentLifeCycleOwner<code>LifecycleRegistryOwner</code>LifeCycleFragmentLifeCycleActivity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyFragment</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Fragment</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">LifecycleRegistryOwner</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">LifecycleRegistry</span> <span class=\"variable\">lifecycleRegistry</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">LifecycleRegistry</span>(<span class=\"built_in\">this</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> LifecycleRegistry <span class=\"title function_\">getLifecycle</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> lifecycleRegistry;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>LifeCycleOwner<code>LifecycleRegistry</code>,FragmentActivityLifecycleRegistryOwner</p>"},{"title":"Android OpenGL ES  1 - GLSurfaceView ","date":"2021-01-20T15:05:41.000Z","_content":"\n Android  OpenGL  Android  GLSurfaceView  GLSurfaceView.Renderer\n GLSurfaceView  SurfaceView GLSurfaceView.Renderer  GLSurfaceView \n\n Renderer\n\n```kotlin\nclass MyRenderer : GLSurfaceView.Renderer {\n    override fun onDrawFrame(gl: GL10?) {\n        GLES32.glClear(GLES32.GL_COLOR_BUFFER_BIT)\n    }\n\n    override fun onSurfaceChanged(gl: GL10?, width: Int, height: Int) {\n        GLES32.glViewport(0, 0, width, height)\n    }\n\n    override fun onSurfaceCreated(gl: GL10?, config: EGLConfig?) {\n        GLES32.glClearColor(1.0F, 0F, 0F, 1F)\n    }\n}\n```\n\n<!--more-->\n `onSurfaceCreated`  OpenGL  `onSurfaceChanged`  OpenGL  `onDrawFrame`  OpenGL \n\n Renderer  GLSurfaceView\n\n```kotlin\nclass MyGLSurfaceView(context: Context) : GLSurfaceView(context) {\n    private val renderer: Renderer\n\n    init {\n        renderer = MyRenderer()\n        setRenderer(renderer)\n    }\n}\n```\n GLSurfaceView  MyRenderer  `setRenderer`  GLSurfaceView \n\n Activity  MyGLSurfaceView\n```kotlin\nclass GLSurfaceViewActivity : AppCompatActivity() {\n\n    private lateinit var glSurfaceView: SurfaceView\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        glSurfaceView = MyGLSurfaceView(this)\n        setContentView(glSurfaceView)\n    }\n}\n```\n\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/glsurfaceview01.jpeg)\n\n OpenGL  OpenGL \n GLSurfaceView  OpenGL  OpenGL  Android  EGL GLSurfaceView  EGL  OpenGL \n\n EGL  OpenGL ","source":"_posts/android-glsurfaceview-overview.md","raw":"---\ntitle: Android OpenGL ES  1 - GLSurfaceView \ndate: 2021-01-20 23:05:41\ntags: \n - opengl\n - android\n---\n\n Android  OpenGL  Android  GLSurfaceView  GLSurfaceView.Renderer\n GLSurfaceView  SurfaceView GLSurfaceView.Renderer  GLSurfaceView \n\n Renderer\n\n```kotlin\nclass MyRenderer : GLSurfaceView.Renderer {\n    override fun onDrawFrame(gl: GL10?) {\n        GLES32.glClear(GLES32.GL_COLOR_BUFFER_BIT)\n    }\n\n    override fun onSurfaceChanged(gl: GL10?, width: Int, height: Int) {\n        GLES32.glViewport(0, 0, width, height)\n    }\n\n    override fun onSurfaceCreated(gl: GL10?, config: EGLConfig?) {\n        GLES32.glClearColor(1.0F, 0F, 0F, 1F)\n    }\n}\n```\n\n<!--more-->\n `onSurfaceCreated`  OpenGL  `onSurfaceChanged`  OpenGL  `onDrawFrame`  OpenGL \n\n Renderer  GLSurfaceView\n\n```kotlin\nclass MyGLSurfaceView(context: Context) : GLSurfaceView(context) {\n    private val renderer: Renderer\n\n    init {\n        renderer = MyRenderer()\n        setRenderer(renderer)\n    }\n}\n```\n GLSurfaceView  MyRenderer  `setRenderer`  GLSurfaceView \n\n Activity  MyGLSurfaceView\n```kotlin\nclass GLSurfaceViewActivity : AppCompatActivity() {\n\n    private lateinit var glSurfaceView: SurfaceView\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        glSurfaceView = MyGLSurfaceView(this)\n        setContentView(glSurfaceView)\n    }\n}\n```\n\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/glsurfaceview01.jpeg)\n\n OpenGL  OpenGL \n GLSurfaceView  OpenGL  OpenGL  Android  EGL GLSurfaceView  EGL  OpenGL \n\n EGL  OpenGL ","slug":"android-glsurfaceview-overview","published":1,"updated":"2024-08-21T03:16:19.781Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vq000g5p6t46pa5jq6","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p> Android  OpenGL  Android  GLSurfaceView  GLSurfaceView.Renderer<br> GLSurfaceView  SurfaceView GLSurfaceView.Renderer  GLSurfaceView </p>\n<p> Renderer</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyRenderer</span> : <span class=\"type\">GLSurfaceView.Renderer</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onDrawFrame</span><span class=\"params\">(gl: <span class=\"type\">GL10</span>?)</span></span> &#123;</span><br><span class=\"line\">        GLES32.glClear(GLES32.GL_COLOR_BUFFER_BIT)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onSurfaceChanged</span><span class=\"params\">(gl: <span class=\"type\">GL10</span>?, width: <span class=\"type\">Int</span>, height: <span class=\"type\">Int</span>)</span></span> &#123;</span><br><span class=\"line\">        GLES32.glViewport(<span class=\"number\">0</span>, <span class=\"number\">0</span>, width, height)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onSurfaceCreated</span><span class=\"params\">(gl: <span class=\"type\">GL10</span>?, config: <span class=\"type\">EGLConfig</span>?)</span></span> &#123;</span><br><span class=\"line\">        GLES32.glClearColor(<span class=\"number\">1.0F</span>, <span class=\"number\">0F</span>, <span class=\"number\">0F</span>, <span class=\"number\">1F</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n<p> <code>onSurfaceCreated</code>  OpenGL  <code>onSurfaceChanged</code>  OpenGL  <code>onDrawFrame</code>  OpenGL </p>\n<p> Renderer  GLSurfaceView</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyGLSurfaceView</span>(context: Context) : GLSurfaceView(context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> renderer: Renderer</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">init</span> &#123;</span><br><span class=\"line\">        renderer = MyRenderer()</span><br><span class=\"line\">        setRenderer(renderer)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> GLSurfaceView  MyRenderer  <code>setRenderer</code>  GLSurfaceView </p>\n<p> Activity  MyGLSurfaceView</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">GLSurfaceViewActivity</span> : <span class=\"type\">AppCompatActivity</span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> glSurfaceView: SurfaceView</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">        glSurfaceView = MyGLSurfaceView(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">        setContentView(glSurfaceView)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/glsurfaceview01.jpeg\" alt=\"\"></p>\n<p> OpenGL  OpenGL <br> GLSurfaceView  OpenGL  OpenGL  Android  EGL GLSurfaceView  EGL  OpenGL </p>\n<p> EGL  OpenGL </p>\n","excerpt":"<p> Android  OpenGL  Android  GLSurfaceView  GLSurfaceView.Renderer<br> GLSurfaceView  SurfaceView GLSurfaceView.Renderer  GLSurfaceView </p>\n<p> Renderer</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyRenderer</span> : <span class=\"type\">GLSurfaceView.Renderer</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onDrawFrame</span><span class=\"params\">(gl: <span class=\"type\">GL10</span>?)</span></span> &#123;</span><br><span class=\"line\">        GLES32.glClear(GLES32.GL_COLOR_BUFFER_BIT)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onSurfaceChanged</span><span class=\"params\">(gl: <span class=\"type\">GL10</span>?, width: <span class=\"type\">Int</span>, height: <span class=\"type\">Int</span>)</span></span> &#123;</span><br><span class=\"line\">        GLES32.glViewport(<span class=\"number\">0</span>, <span class=\"number\">0</span>, width, height)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onSurfaceCreated</span><span class=\"params\">(gl: <span class=\"type\">GL10</span>?, config: <span class=\"type\">EGLConfig</span>?)</span></span> &#123;</span><br><span class=\"line\">        GLES32.glClearColor(<span class=\"number\">1.0F</span>, <span class=\"number\">0F</span>, <span class=\"number\">0F</span>, <span class=\"number\">1F</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","more":"<p> <code>onSurfaceCreated</code>  OpenGL  <code>onSurfaceChanged</code>  OpenGL  <code>onDrawFrame</code>  OpenGL </p>\n<p> Renderer  GLSurfaceView</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyGLSurfaceView</span>(context: Context) : GLSurfaceView(context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> renderer: Renderer</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">init</span> &#123;</span><br><span class=\"line\">        renderer = MyRenderer()</span><br><span class=\"line\">        setRenderer(renderer)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> GLSurfaceView  MyRenderer  <code>setRenderer</code>  GLSurfaceView </p>\n<p> Activity  MyGLSurfaceView</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">GLSurfaceViewActivity</span> : <span class=\"type\">AppCompatActivity</span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> glSurfaceView: SurfaceView</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">        glSurfaceView = MyGLSurfaceView(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">        setContentView(glSurfaceView)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/glsurfaceview01.jpeg\" alt=\"\"></p>\n<p> OpenGL  OpenGL <br> GLSurfaceView  OpenGL  OpenGL  Android  EGL GLSurfaceView  EGL  OpenGL </p>\n<p> EGL  OpenGL </p>"},{"title":"Android[]","date":"2017-05-23T11:38:44.000Z","cover":"http://cdn.zqlxtt.cn/final-architecture.png","_content":"AndroidAndroid\n\n> ****AndroidAndroid FrameworkAndroidAndroid\n<!-- more -->\n## Android\n\nAndroidAndroidActivityFragmentServiceContentProviderBroadcast Receiver\n\nAndroidAndroidManifestAndroid\n\nAppAndroidAppApp\n\nAndroid\n\n****\n\n## \n\n\n\nApp****ActivityFragmentUIActivityFragmentAppAndroidAndroid\n\n**UI**UI``UIUIUI\n\n## \n\nAndroid\n\n> ****Android\n\nUIREST API\n\n### \n\n`UserProfileFragment.java``user_profile_layout.xml`\n\nUI\n\n- **User ID:**FragmentFragmentAndroidFragmentID\n- **User Object:**Java\n\nViewModel`UserProfileViewModel`\n\nViewModelUIActivityFragmentViewModelViewUIActivity\n\n\n\n- user_profile.xml: \n- UserProfileViewModel.java: UI\n- UserProfileFragment.java: \n\n\n\n```java\npublic class UserProfileViewModel extends ViewModel {\n    private String userId;\n    private User user;\n\n    public void init(String userId) {\n        this.userId = userId;\n    }\n    public User getUser() {\n        return user;\n    }\n}\n```\n\n```java\npublic class UserProfileFragment extends LifecycleFragment {\n    private static final String UID_KEY = \"uid\";\n    private UserProfileViewModel viewModel;\n\n    @Override\n    public void onActivityCreated(@Nullable Bundle savedInstanceState) {\n        super.onActivityCreated(savedInstanceState);\n        String userId = getArguments().getString(UID_KEY);\n        viewModel = ViewModelProviders.of(this).get(UserProfileViewModel.class);\n        viewModel.init(userId);\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater,\n                @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        return inflater.inflate(R.layout.user_profile, container, false);\n    }\n}\n```\n\n> ****UserProfileFragmentLifeCycleFragmentFragmentLifecycleApiFragmentLifeCycleOwner\n\n\nViewModelUILiveData\n\n> LiveDataLiveDataLiveDataActivityFragmentService\n\nRxjavaAgreaLiveData\n\n`LiveData<User>`UserProfileViewModelUserFragmentLiveData\n\n```java\npublic class UserProfileViewModel extends ViewModel {\n    ...\n    private LiveData<User> user;\n    public LiveData<User> getUser() {\n        return user;\n    }\n}\n```\nUserProfileFragmentUI\n\n```java\n@Override\npublic void onActivityCreated(@Nullable Bundle savedInstanceState) {\n    super.onActivityCreated(savedInstanceState);\n    viewModel.getUser().observe(this, user -> {\n      // update UI\n    });\n}\n```\nonChangedUI\n\nFragmentonStop()LiveDataUIonDestroy\n\nViewModelViewModelViewModel\n\n### \n\nREST APIRetrofit\n\nretrofitWebservice\n\n```java\npublic interface Webservice {\n    /**\n     * @GET declares an HTTP GET request\n     * @Path(\"user\") annotation on the userId parameter marks it as a\n     * replacement for the {user} placeholder in the @GET path\n     */\n    @GET(\"/users/{user}\")\n    Call<User> getUser(@Path(\"user\") String userId);\n}\n```\nViewModelWebserviceViewModelViewModelActivityFragmentUIViewModelRepository\n\n> **Repository**APIAPIWeb\n\nUserRepository\n\n```java\npublic class UserRepository {\n    private Webservice webservice;\n    // ...\n    public LiveData<User> getUser(int userId) {\n        // This is not an optimal implementation, we'll fix it below\n        final MutableLiveData<User> data = new MutableLiveData<>();\n        webservice.getUser(userId).enqueue(new Callback<User>() {\n            @Override\n            public void onResponse(Call<User> call, Response<User> response) {\n                // error case is left out for brevity\n                data.setValue(response.body());\n            }\n        });\n        return data;\n    }\n}\n```\nrepositoryAppViewModelWebService\n\n#### \nUserRepositoryWebserviceWebserviceUserRepositoryWebserviceWebservice\n\n- ****AndroidGoogleDagger 2Dagger 2\n- ****DIDIService Locator\n\n;Dagger 2\n\n### ViewModelRepository\nUserProfileViewModel\n\n```java\npublic class UserProfileViewModel extends ViewModel {\n    private LiveData<User> user;\n    private UserRepository userRepo;\n\n    @Inject // UserRepository parameter is provided by Dagger 2\n    public UserProfileViewModel(UserRepository userRepo) {\n        this.userRepo = userRepo;\n    }\n\n    public void init(String userId) {\n        if (this.user != null) {\n            // ViewModel is created per Fragment so\n            // we know the userId won't change\n            return;\n        }\n        user = userRepo.getUser(userId);\n    }\n\n    public LiveData<User> getUser() {\n        return this.user;\n    }\n}\n```\n\n### \n\nRepository\n\nUserRepositoryUserProfileFragmentUserRepositoryUser\n\n```java\n@Singleton  // informs Dagger that this class should be constructed once\npublic class UserRepository {\n    private Webservice webservice;\n    // simple in memory cache, details omitted for brevity\n    private UserCache userCache;\n    public LiveData<User> getUser(String userId) {\n        LiveData<User> cached = userCache.get(userId);\n        if (cached != null) {\n            return cached;\n        }\n\n        final MutableLiveData<User> data = new MutableLiveData<>();\n        userCache.put(userId, data);\n        // this is still suboptimal but better than before.\n        // a complete implementation must also handle the error cases.\n        webservice.getUser(userId).enqueue(new Callback<User>() {\n            @Override\n            public void onResponse(Call<User> call, Response<User> response) {\n                data.setValue(response.body());\n            }\n        });\n        return data;\n    }\n}\n```\n\n### \nUIRepositoryAndroid\n\nWeb\n\nRoom\n\n> RoomSQLRoomSQLLiveData\n\nRoom@Entity\n\n```java\n@Entity\nclass User {\n  @PrimaryKey\n  private int id;\n  private String name;\n  private String lastName;\n  // getters and setters for fields\n}\n```\n\n\n\n```java\n@Database(entities = {User.class}, version = 1)\npublic abstract class MyDatabase extends RoomDatabase {\n}\n```\n\nMyDatabaseRoom\n\nDAO\n\n```java\n@Dao\npublic interface UserDao {\n    @Insert(onConflict = REPLACE)\n    void save(User user);\n    @Query(\"SELECT * FROM user WHERE id = :userId\")\n    LiveData<User> load(String userId);\n}\n```\n\nMyDatabaseDAO\n\n```java\n@Database(entities = {User.class}, version = 1)\npublic abstract class MyDatabase extends RoomDatabase {\n    public abstract UserDao userDao();\n}\n```\nloadLiveData<User>RoomLiveData\n\nUserRepository\n\n```java\n@Singleton\npublic class UserRepository {\n    private final Webservice webservice;\n    private final UserDao userDao;\n    private final Executor executor;\n\n    @Inject\n    public UserRepository(Webservice webservice, UserDao userDao, Executor executor) {\n        this.webservice = webservice;\n        this.userDao = userDao;\n        this.executor = executor;\n    }\n\n    public LiveData<User> getUser(String userId) {\n        refreshUser(userId);\n        // return a LiveData directly from the database.\n        return userDao.load(userId);\n    }\n\n    private void refreshUser(final String userId) {\n        executor.execute(() -> {\n            // running in a background thread\n            // check if user was fetched recently\n            boolean userExists = userDao.hasUser(FRESH_TIMEOUT);\n            if (!userExists) {\n                // refresh the data\n                Response response = webservice.getUser(userId).execute();\n                // TODO check for error etc.\n                // Update the database.The LiveData will automatically refresh so\n                // we don't need to do anything else here besides updating the database\n                userDao.save(response.body());\n            }\n        });\n    }\n}\n```\nUserRepositoryWebserviceUserProfileViewModelUserProfileFragmentUserRepositoryUserProfileViewModel\n\n\n\nUIUIUIUI\n\n\n\n- getUser\n- Repository\n\n#### \n\n\n\n### \n\n\n- ****`Android UI Instrumentation test`UIEspressoFragmentViewModelFragmentViewModelViewModel\n- **ViewModel**ViewModelJUnit testUserRepository\n- **UserRepository**UserRepositoryJUnit testWebserviceDAODAO\n- **UserDao**DAOinstrumentationUIin-memory\n- **Webservice**WebserviceMockWebServer\n\n### \n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-d76112977fe3f19d.webp)\n\n## \nAndroidActivityFragment\n\n\n\n- AndroidManifestActivityServiceBroadcast Receiver\n- \n- \n- API\n- Android\n- \n- Repository\n\n\n##  \nResource\n\nResource\n\n```java\n//a generic class that describes a data with a status\npublic class Resource<T> {\n    @NonNull public final Status status;\n    @Nullable public final T data;\n    @Nullable public final String message;\n    private Resource(@NonNull Status status, @Nullable T data, @Nullable String message) {\n        this.status = status;\n        this.data = data;\n        this.message = message;\n    }\n\n    public static <T> Resource<T> success(@NonNull T data) {\n        return new Resource<>(SUCCESS, data, null);\n    }\n\n    public static <T> Resource<T> error(String msg, @Nullable T data) {\n        return new Resource<>(ERROR, data, msg);\n    }\n\n    public static <T> Resource<T> loading(@Nullable T data) {\n        return new Resource<>(LOADING, data, null);\n    }\n}\n```\nUINetworkBoundResourceNetworkBoundResource\n\n![NetworkBoundResource](http://upload-images.jianshu.io/upload_images/2702499-f95e8769c20c53aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nNetworkBoundResourceNetworkBoundResourceUI\n\n\n\n> ****UI\n\nNetworkBoundResourceapi\n\n```java\n// ResultType: Type for the Resource data\n// RequestType: Type for the API response\npublic abstract class NetworkBoundResource<ResultType, RequestType> {\n    // Called to save the result of the API response into the database\n    @WorkerThread\n    protected abstract void saveCallResult(@NonNull RequestType item);\n\n    // Called with the data in the database to decide whether it should be\n    // fetched from the network.\n    @MainThread\n    protected abstract boolean shouldFetch(@Nullable ResultType data);\n\n    // Called to get the cached data from the database\n    @NonNull @MainThread\n    protected abstract LiveData<ResultType> loadFromDb();\n\n    // Called to create the API call.\n    @NonNull @MainThread\n    protected abstract LiveData<ApiResponse<RequestType>> createCall();\n\n    // Called when the fetch fails. The child class may want to reset components\n    // like rate limiter.\n    @MainThread\n    protected void onFetchFailed() {\n    }\n\n    // returns a LiveData that represents the resource\n    public final LiveData<Resource<ResultType>> getAsLiveData() {\n        return result;\n    }\n}\n```\nResultTypeRequestType\n\nApiResponseRetroft2.CallLiveData\n\nNetworkBoundResource\n\n```java\npublic abstract class NetworkBoundResource<ResultType, RequestType> {\n    private final MediatorLiveData<Resource<ResultType>> result = new MediatorLiveData<>();\n\n    @MainThread\n    NetworkBoundResource() {\n        //1NetworkBoundResource\n        result.setValue(Resource.loading(null));\n        //2\n        LiveData<ResultType> dbSource = loadFromDb();\n\n        result.addSource(dbSource, data -> {\n            //3\n            result.removeSource(dbSource);\n            if (shouldFetch(data)) {\n                //4\n                fetchFromNetwork(dbSource);\n            } else {\n                //\n                result.addSource(dbSource,\n                        newData -> result.setValue(Resource.success(newData)));\n            }\n        });\n    }\n\n    private void fetchFromNetwork(final LiveData<ResultType> dbSource) {\n        //5\n        LiveData<ApiResponse<RequestType>> apiResponse = createCall();\n        // we re-attach dbSource as a new source,\n        // it will dispatch its latest value quickly\n        result.addSource(dbSource,\n                newData -> result.setValue(Resource.loading(newData)));\n        result.addSource(apiResponse, response -> {\n            \n            result.removeSource(apiResponse);\n            result.removeSource(dbSource);\n            //noinspection ConstantConditions\n            if (response.isSuccessful()) {\n                //6\n                saveResultAndReInit(response);\n            } else {\n                //\n                onFetchFailed();\n                result.addSource(dbSource,\n                        newData -> result.setValue(\n                                Resource.error(response.errorMessage, newData)));\n            }\n        });\n    }\n\n    @MainThread\n    private void saveResultAndReInit(ApiResponse<RequestType> response) {\n        new AsyncTask<Void, Void, Void>() {\n\n            @Override\n            protected Void doInBackground(Void... voids) {\n                //7\n                saveCallResult(response.body);\n                return null;\n            }\n\n            @Override\n            protected void onPostExecute(Void aVoid) {\n                // we specially request a new live data,\n                // otherwise we will get immediately last cached value,\n                // which may not be updated with latest results received from network.\n                //8\n                result.addSource(loadFromDb(),\n                        newData -> result.setValue(Resource.success(newData)));\n            }\n        }.execute();\n    }\n}\n```\nUserRepositoryNetworkBoundResource\n\n```java\nclass UserRepository {\n    Webservice webservice;\n    UserDao userDao;\n\n    public LiveData<Resource<User>> loadUser(final String userId) {\n        return new NetworkBoundResource<User,User>() {\n            @Override\n            protected void saveCallResult(@NonNull User item) {\n                userDao.insert(item);\n            }\n\n            @Override\n            protected boolean shouldFetch(@Nullable User data) {\n                return rateLimiter.canFetch(userId) && (data == null || !isFresh(data));\n            }\n\n            @NonNull @Override\n            protected LiveData<User> loadFromDb() {\n                return userDao.load(userId);\n            }\n\n            @NonNull @Override\n            protected LiveData<ApiResponse<User>> createCall() {\n                return webservice.getUser(userId);\n            }\n        }.getAsLiveData();\n    }\n}\n\n```","source":"_posts/android-arch-intro.md","raw":"---\ntitle: Android[]\ndate: 2017-05-23 19:38:44\ntags: android\ncover: http://cdn.zqlxtt.cn/final-architecture.png\n---\nAndroidAndroid\n\n> ****AndroidAndroid FrameworkAndroidAndroid\n<!-- more -->\n## Android\n\nAndroidAndroidActivityFragmentServiceContentProviderBroadcast Receiver\n\nAndroidAndroidManifestAndroid\n\nAppAndroidAppApp\n\nAndroid\n\n****\n\n## \n\n\n\nApp****ActivityFragmentUIActivityFragmentAppAndroidAndroid\n\n**UI**UI``UIUIUI\n\n## \n\nAndroid\n\n> ****Android\n\nUIREST API\n\n### \n\n`UserProfileFragment.java``user_profile_layout.xml`\n\nUI\n\n- **User ID:**FragmentFragmentAndroidFragmentID\n- **User Object:**Java\n\nViewModel`UserProfileViewModel`\n\nViewModelUIActivityFragmentViewModelViewUIActivity\n\n\n\n- user_profile.xml: \n- UserProfileViewModel.java: UI\n- UserProfileFragment.java: \n\n\n\n```java\npublic class UserProfileViewModel extends ViewModel {\n    private String userId;\n    private User user;\n\n    public void init(String userId) {\n        this.userId = userId;\n    }\n    public User getUser() {\n        return user;\n    }\n}\n```\n\n```java\npublic class UserProfileFragment extends LifecycleFragment {\n    private static final String UID_KEY = \"uid\";\n    private UserProfileViewModel viewModel;\n\n    @Override\n    public void onActivityCreated(@Nullable Bundle savedInstanceState) {\n        super.onActivityCreated(savedInstanceState);\n        String userId = getArguments().getString(UID_KEY);\n        viewModel = ViewModelProviders.of(this).get(UserProfileViewModel.class);\n        viewModel.init(userId);\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater,\n                @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        return inflater.inflate(R.layout.user_profile, container, false);\n    }\n}\n```\n\n> ****UserProfileFragmentLifeCycleFragmentFragmentLifecycleApiFragmentLifeCycleOwner\n\n\nViewModelUILiveData\n\n> LiveDataLiveDataLiveDataActivityFragmentService\n\nRxjavaAgreaLiveData\n\n`LiveData<User>`UserProfileViewModelUserFragmentLiveData\n\n```java\npublic class UserProfileViewModel extends ViewModel {\n    ...\n    private LiveData<User> user;\n    public LiveData<User> getUser() {\n        return user;\n    }\n}\n```\nUserProfileFragmentUI\n\n```java\n@Override\npublic void onActivityCreated(@Nullable Bundle savedInstanceState) {\n    super.onActivityCreated(savedInstanceState);\n    viewModel.getUser().observe(this, user -> {\n      // update UI\n    });\n}\n```\nonChangedUI\n\nFragmentonStop()LiveDataUIonDestroy\n\nViewModelViewModelViewModel\n\n### \n\nREST APIRetrofit\n\nretrofitWebservice\n\n```java\npublic interface Webservice {\n    /**\n     * @GET declares an HTTP GET request\n     * @Path(\"user\") annotation on the userId parameter marks it as a\n     * replacement for the {user} placeholder in the @GET path\n     */\n    @GET(\"/users/{user}\")\n    Call<User> getUser(@Path(\"user\") String userId);\n}\n```\nViewModelWebserviceViewModelViewModelActivityFragmentUIViewModelRepository\n\n> **Repository**APIAPIWeb\n\nUserRepository\n\n```java\npublic class UserRepository {\n    private Webservice webservice;\n    // ...\n    public LiveData<User> getUser(int userId) {\n        // This is not an optimal implementation, we'll fix it below\n        final MutableLiveData<User> data = new MutableLiveData<>();\n        webservice.getUser(userId).enqueue(new Callback<User>() {\n            @Override\n            public void onResponse(Call<User> call, Response<User> response) {\n                // error case is left out for brevity\n                data.setValue(response.body());\n            }\n        });\n        return data;\n    }\n}\n```\nrepositoryAppViewModelWebService\n\n#### \nUserRepositoryWebserviceWebserviceUserRepositoryWebserviceWebservice\n\n- ****AndroidGoogleDagger 2Dagger 2\n- ****DIDIService Locator\n\n;Dagger 2\n\n### ViewModelRepository\nUserProfileViewModel\n\n```java\npublic class UserProfileViewModel extends ViewModel {\n    private LiveData<User> user;\n    private UserRepository userRepo;\n\n    @Inject // UserRepository parameter is provided by Dagger 2\n    public UserProfileViewModel(UserRepository userRepo) {\n        this.userRepo = userRepo;\n    }\n\n    public void init(String userId) {\n        if (this.user != null) {\n            // ViewModel is created per Fragment so\n            // we know the userId won't change\n            return;\n        }\n        user = userRepo.getUser(userId);\n    }\n\n    public LiveData<User> getUser() {\n        return this.user;\n    }\n}\n```\n\n### \n\nRepository\n\nUserRepositoryUserProfileFragmentUserRepositoryUser\n\n```java\n@Singleton  // informs Dagger that this class should be constructed once\npublic class UserRepository {\n    private Webservice webservice;\n    // simple in memory cache, details omitted for brevity\n    private UserCache userCache;\n    public LiveData<User> getUser(String userId) {\n        LiveData<User> cached = userCache.get(userId);\n        if (cached != null) {\n            return cached;\n        }\n\n        final MutableLiveData<User> data = new MutableLiveData<>();\n        userCache.put(userId, data);\n        // this is still suboptimal but better than before.\n        // a complete implementation must also handle the error cases.\n        webservice.getUser(userId).enqueue(new Callback<User>() {\n            @Override\n            public void onResponse(Call<User> call, Response<User> response) {\n                data.setValue(response.body());\n            }\n        });\n        return data;\n    }\n}\n```\n\n### \nUIRepositoryAndroid\n\nWeb\n\nRoom\n\n> RoomSQLRoomSQLLiveData\n\nRoom@Entity\n\n```java\n@Entity\nclass User {\n  @PrimaryKey\n  private int id;\n  private String name;\n  private String lastName;\n  // getters and setters for fields\n}\n```\n\n\n\n```java\n@Database(entities = {User.class}, version = 1)\npublic abstract class MyDatabase extends RoomDatabase {\n}\n```\n\nMyDatabaseRoom\n\nDAO\n\n```java\n@Dao\npublic interface UserDao {\n    @Insert(onConflict = REPLACE)\n    void save(User user);\n    @Query(\"SELECT * FROM user WHERE id = :userId\")\n    LiveData<User> load(String userId);\n}\n```\n\nMyDatabaseDAO\n\n```java\n@Database(entities = {User.class}, version = 1)\npublic abstract class MyDatabase extends RoomDatabase {\n    public abstract UserDao userDao();\n}\n```\nloadLiveData<User>RoomLiveData\n\nUserRepository\n\n```java\n@Singleton\npublic class UserRepository {\n    private final Webservice webservice;\n    private final UserDao userDao;\n    private final Executor executor;\n\n    @Inject\n    public UserRepository(Webservice webservice, UserDao userDao, Executor executor) {\n        this.webservice = webservice;\n        this.userDao = userDao;\n        this.executor = executor;\n    }\n\n    public LiveData<User> getUser(String userId) {\n        refreshUser(userId);\n        // return a LiveData directly from the database.\n        return userDao.load(userId);\n    }\n\n    private void refreshUser(final String userId) {\n        executor.execute(() -> {\n            // running in a background thread\n            // check if user was fetched recently\n            boolean userExists = userDao.hasUser(FRESH_TIMEOUT);\n            if (!userExists) {\n                // refresh the data\n                Response response = webservice.getUser(userId).execute();\n                // TODO check for error etc.\n                // Update the database.The LiveData will automatically refresh so\n                // we don't need to do anything else here besides updating the database\n                userDao.save(response.body());\n            }\n        });\n    }\n}\n```\nUserRepositoryWebserviceUserProfileViewModelUserProfileFragmentUserRepositoryUserProfileViewModel\n\n\n\nUIUIUIUI\n\n\n\n- getUser\n- Repository\n\n#### \n\n\n\n### \n\n\n- ****`Android UI Instrumentation test`UIEspressoFragmentViewModelFragmentViewModelViewModel\n- **ViewModel**ViewModelJUnit testUserRepository\n- **UserRepository**UserRepositoryJUnit testWebserviceDAODAO\n- **UserDao**DAOinstrumentationUIin-memory\n- **Webservice**WebserviceMockWebServer\n\n### \n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-d76112977fe3f19d.webp)\n\n## \nAndroidActivityFragment\n\n\n\n- AndroidManifestActivityServiceBroadcast Receiver\n- \n- \n- API\n- Android\n- \n- Repository\n\n\n##  \nResource\n\nResource\n\n```java\n//a generic class that describes a data with a status\npublic class Resource<T> {\n    @NonNull public final Status status;\n    @Nullable public final T data;\n    @Nullable public final String message;\n    private Resource(@NonNull Status status, @Nullable T data, @Nullable String message) {\n        this.status = status;\n        this.data = data;\n        this.message = message;\n    }\n\n    public static <T> Resource<T> success(@NonNull T data) {\n        return new Resource<>(SUCCESS, data, null);\n    }\n\n    public static <T> Resource<T> error(String msg, @Nullable T data) {\n        return new Resource<>(ERROR, data, msg);\n    }\n\n    public static <T> Resource<T> loading(@Nullable T data) {\n        return new Resource<>(LOADING, data, null);\n    }\n}\n```\nUINetworkBoundResourceNetworkBoundResource\n\n![NetworkBoundResource](http://upload-images.jianshu.io/upload_images/2702499-f95e8769c20c53aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nNetworkBoundResourceNetworkBoundResourceUI\n\n\n\n> ****UI\n\nNetworkBoundResourceapi\n\n```java\n// ResultType: Type for the Resource data\n// RequestType: Type for the API response\npublic abstract class NetworkBoundResource<ResultType, RequestType> {\n    // Called to save the result of the API response into the database\n    @WorkerThread\n    protected abstract void saveCallResult(@NonNull RequestType item);\n\n    // Called with the data in the database to decide whether it should be\n    // fetched from the network.\n    @MainThread\n    protected abstract boolean shouldFetch(@Nullable ResultType data);\n\n    // Called to get the cached data from the database\n    @NonNull @MainThread\n    protected abstract LiveData<ResultType> loadFromDb();\n\n    // Called to create the API call.\n    @NonNull @MainThread\n    protected abstract LiveData<ApiResponse<RequestType>> createCall();\n\n    // Called when the fetch fails. The child class may want to reset components\n    // like rate limiter.\n    @MainThread\n    protected void onFetchFailed() {\n    }\n\n    // returns a LiveData that represents the resource\n    public final LiveData<Resource<ResultType>> getAsLiveData() {\n        return result;\n    }\n}\n```\nResultTypeRequestType\n\nApiResponseRetroft2.CallLiveData\n\nNetworkBoundResource\n\n```java\npublic abstract class NetworkBoundResource<ResultType, RequestType> {\n    private final MediatorLiveData<Resource<ResultType>> result = new MediatorLiveData<>();\n\n    @MainThread\n    NetworkBoundResource() {\n        //1NetworkBoundResource\n        result.setValue(Resource.loading(null));\n        //2\n        LiveData<ResultType> dbSource = loadFromDb();\n\n        result.addSource(dbSource, data -> {\n            //3\n            result.removeSource(dbSource);\n            if (shouldFetch(data)) {\n                //4\n                fetchFromNetwork(dbSource);\n            } else {\n                //\n                result.addSource(dbSource,\n                        newData -> result.setValue(Resource.success(newData)));\n            }\n        });\n    }\n\n    private void fetchFromNetwork(final LiveData<ResultType> dbSource) {\n        //5\n        LiveData<ApiResponse<RequestType>> apiResponse = createCall();\n        // we re-attach dbSource as a new source,\n        // it will dispatch its latest value quickly\n        result.addSource(dbSource,\n                newData -> result.setValue(Resource.loading(newData)));\n        result.addSource(apiResponse, response -> {\n            \n            result.removeSource(apiResponse);\n            result.removeSource(dbSource);\n            //noinspection ConstantConditions\n            if (response.isSuccessful()) {\n                //6\n                saveResultAndReInit(response);\n            } else {\n                //\n                onFetchFailed();\n                result.addSource(dbSource,\n                        newData -> result.setValue(\n                                Resource.error(response.errorMessage, newData)));\n            }\n        });\n    }\n\n    @MainThread\n    private void saveResultAndReInit(ApiResponse<RequestType> response) {\n        new AsyncTask<Void, Void, Void>() {\n\n            @Override\n            protected Void doInBackground(Void... voids) {\n                //7\n                saveCallResult(response.body);\n                return null;\n            }\n\n            @Override\n            protected void onPostExecute(Void aVoid) {\n                // we specially request a new live data,\n                // otherwise we will get immediately last cached value,\n                // which may not be updated with latest results received from network.\n                //8\n                result.addSource(loadFromDb(),\n                        newData -> result.setValue(Resource.success(newData)));\n            }\n        }.execute();\n    }\n}\n```\nUserRepositoryNetworkBoundResource\n\n```java\nclass UserRepository {\n    Webservice webservice;\n    UserDao userDao;\n\n    public LiveData<Resource<User>> loadUser(final String userId) {\n        return new NetworkBoundResource<User,User>() {\n            @Override\n            protected void saveCallResult(@NonNull User item) {\n                userDao.insert(item);\n            }\n\n            @Override\n            protected boolean shouldFetch(@Nullable User data) {\n                return rateLimiter.canFetch(userId) && (data == null || !isFresh(data));\n            }\n\n            @NonNull @Override\n            protected LiveData<User> loadFromDb() {\n                return userDao.load(userId);\n            }\n\n            @NonNull @Override\n            protected LiveData<ApiResponse<User>> createCall() {\n                return webservice.getUser(userId);\n            }\n        }.getAsLiveData();\n    }\n}\n\n```","slug":"android-arch-intro","published":1,"updated":"2024-08-21T03:16:19.780Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vq000i5p6t21qo2uiq","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>AndroidAndroid</p>\n<blockquote>\n<p><strong></strong>AndroidAndroid FrameworkAndroidAndroid</p>\n</blockquote>\n<span id=\"more\"></span>\n<h2 id=\"Android\"><a href=\"#Android\" class=\"headerlink\" title=\"Android\"></a>Android</h2><p>AndroidAndroidActivityFragmentServiceContentProviderBroadcast Receiver</p>\n<p>AndroidAndroidManifestAndroid</p>\n<p>AppAndroidAppApp</p>\n<p>Android</p>\n<p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>App<strong></strong>ActivityFragmentUIActivityFragmentAppAndroidAndroid</p>\n<p><strong>UI</strong>UI<code></code>UIUIUI</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Android</p>\n<blockquote>\n<p><strong></strong>Android</p>\n</blockquote>\n<p>UIREST API</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>UserProfileFragment.java</code><code>user_profile_layout.xml</code></p>\n<p>UI</p>\n<ul>\n<li><strong>User ID:</strong>FragmentFragmentAndroidFragmentID</li>\n<li><strong>User Object:</strong>Java</li>\n</ul>\n<p>ViewModel<code>UserProfileViewModel</code></p>\n<p>ViewModelUIActivityFragmentViewModelViewUIActivity</p>\n<p></p>\n<ul>\n<li>user_profile.xml: </li>\n<li>UserProfileViewModel.java: UI</li>\n<li>UserProfileFragment.java: </li>\n</ul>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserProfileViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ViewModel</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userId;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> User user;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">init</span><span class=\"params\">(String userId)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.userId = userId;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> User <span class=\"title function_\">getUser</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserProfileFragment</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">LifecycleFragment</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">UID_KEY</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;uid&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserProfileViewModel viewModel;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActivityCreated</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onActivityCreated(savedInstanceState);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">userId</span> <span class=\"operator\">=</span> getArguments().getString(UID_KEY);</span><br><span class=\"line\">        viewModel = ViewModelProviders.of(<span class=\"built_in\">this</span>).get(UserProfileViewModel.class);</span><br><span class=\"line\">        viewModel.init(userId);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> View <span class=\"title function_\">onCreateView</span><span class=\"params\">(LayoutInflater inflater,</span></span><br><span class=\"line\"><span class=\"params\">                <span class=\"meta\">@Nullable</span> ViewGroup container, <span class=\"meta\">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> inflater.inflate(R.layout.user_profile, container, <span class=\"literal\">false</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong></strong>UserProfileFragmentLifeCycleFragmentFragmentLifecycleApiFragmentLifeCycleOwner</p>\n</blockquote>\n<p>ViewModelUILiveData</p>\n<blockquote>\n<p>LiveDataLiveDataLiveDataActivityFragmentService</p>\n</blockquote>\n<p>RxjavaAgreaLiveData</p>\n<p><code>LiveData&lt;User&gt;</code>UserProfileViewModelUserFragmentLiveData</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserProfileViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ViewModel</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"keyword\">private</span> LiveData&lt;User&gt; user;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;User&gt; <span class=\"title function_\">getUser</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>UserProfileFragmentUI</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActivityCreated</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>.onActivityCreated(savedInstanceState);</span><br><span class=\"line\">    viewModel.getUser().observe(<span class=\"built_in\">this</span>, user -&gt; &#123;</span><br><span class=\"line\">      <span class=\"comment\">// update UI</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>onChangedUI</p>\n<p>FragmentonStop()LiveDataUIonDestroy</p>\n<p>ViewModelViewModelViewModel</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>REST APIRetrofit</p>\n<p>retrofitWebservice</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">Webservice</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@GET</span> declares an HTTP GET request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@Path</span>(&quot;user&quot;) annotation on the userId parameter marks it as a</span></span><br><span class=\"line\"><span class=\"comment\">     * replacement for the &#123;user&#125; placeholder in the <span class=\"doctag\">@GET</span> path</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@GET(&quot;/users/&#123;user&#125;&quot;)</span></span><br><span class=\"line\">    Call&lt;User&gt; <span class=\"title function_\">getUser</span><span class=\"params\">(<span class=\"meta\">@Path(&quot;user&quot;)</span> String userId)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ViewModelWebserviceViewModelViewModelActivityFragmentUIViewModelRepository</p>\n<blockquote>\n<p><strong>Repository</strong>APIAPIWeb</p>\n</blockquote>\n<p>UserRepository</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserRepository</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Webservice webservice;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;User&gt; <span class=\"title function_\">getUser</span><span class=\"params\">(<span class=\"type\">int</span> userId)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// This is not an optimal implementation, we&#x27;ll fix it below</span></span><br><span class=\"line\">        <span class=\"keyword\">final</span> MutableLiveData&lt;User&gt; data = <span class=\"keyword\">new</span> <span class=\"title class_\">MutableLiveData</span>&lt;&gt;();</span><br><span class=\"line\">        webservice.getUser(userId).enqueue(<span class=\"keyword\">new</span> <span class=\"title class_\">Callback</span>&lt;User&gt;() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onResponse</span><span class=\"params\">(Call&lt;User&gt; call, Response&lt;User&gt; response)</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// error case is left out for brevity</span></span><br><span class=\"line\">                data.setValue(response.body());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>repositoryAppViewModelWebService</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>UserRepositoryWebserviceWebserviceUserRepositoryWebserviceWebservice</p>\n<ul>\n<li><strong></strong>AndroidGoogleDagger 2Dagger 2</li>\n<li><strong></strong>DIDIService Locator</li>\n</ul>\n<p>;Dagger 2</p>\n<h3 id=\"ViewModelRepository\"><a href=\"#ViewModelRepository\" class=\"headerlink\" title=\"ViewModelRepository\"></a>ViewModelRepository</h3><p>UserProfileViewModel</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserProfileViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ViewModel</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> LiveData&lt;User&gt; user;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserRepository userRepo;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Inject</span> <span class=\"comment\">// UserRepository parameter is provided by Dagger 2</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">UserProfileViewModel</span><span class=\"params\">(UserRepository userRepo)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.userRepo = userRepo;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">init</span><span class=\"params\">(String userId)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.user != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// ViewModel is created per Fragment so</span></span><br><span class=\"line\">            <span class=\"comment\">// we know the userId won&#x27;t change</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        user = userRepo.getUser(userId);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;User&gt; <span class=\"title function_\">getUser</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Repository</p>\n<p>UserRepositoryUserProfileFragmentUserRepositoryUser</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Singleton</span>  <span class=\"comment\">// informs Dagger that this class should be constructed once</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserRepository</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Webservice webservice;</span><br><span class=\"line\">    <span class=\"comment\">// simple in memory cache, details omitted for brevity</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserCache userCache;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;User&gt; <span class=\"title function_\">getUser</span><span class=\"params\">(String userId)</span> &#123;</span><br><span class=\"line\">        LiveData&lt;User&gt; cached = userCache.get(userId);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (cached != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> cached;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">final</span> MutableLiveData&lt;User&gt; data = <span class=\"keyword\">new</span> <span class=\"title class_\">MutableLiveData</span>&lt;&gt;();</span><br><span class=\"line\">        userCache.put(userId, data);</span><br><span class=\"line\">        <span class=\"comment\">// this is still suboptimal but better than before.</span></span><br><span class=\"line\">        <span class=\"comment\">// a complete implementation must also handle the error cases.</span></span><br><span class=\"line\">        webservice.getUser(userId).enqueue(<span class=\"keyword\">new</span> <span class=\"title class_\">Callback</span>&lt;User&gt;() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onResponse</span><span class=\"params\">(Call&lt;User&gt; call, Response&lt;User&gt; response)</span> &#123;</span><br><span class=\"line\">                data.setValue(response.body());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>UIRepositoryAndroid</p>\n<p>Web</p>\n<p>Room</p>\n<blockquote>\n<p>RoomSQLRoomSQLLiveData</p>\n</blockquote>\n<p>Room@Entity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String lastName;</span><br><span class=\"line\">  <span class=\"comment\">// getters and setters for fields</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Database(entities = &#123;User.class&#125;, version = 1)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyDatabase</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">RoomDatabase</span> &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>MyDatabaseRoom</p>\n<p>DAO</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Insert(onConflict = REPLACE)</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">save</span><span class=\"params\">(User user)</span>;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE id = :userId&quot;)</span></span><br><span class=\"line\">    LiveData&lt;User&gt; <span class=\"title function_\">load</span><span class=\"params\">(String userId)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>MyDatabaseDAO</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Database(entities = &#123;User.class&#125;, version = 1)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyDatabase</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">RoomDatabase</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> UserDao <span class=\"title function_\">userDao</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>loadLiveData<User>RoomLiveData</p>\n<p>UserRepository</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Singleton</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserRepository</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Webservice webservice;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> UserDao userDao;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Executor executor;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Inject</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">UserRepository</span><span class=\"params\">(Webservice webservice, UserDao userDao, Executor executor)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.webservice = webservice;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.userDao = userDao;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.executor = executor;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;User&gt; <span class=\"title function_\">getUser</span><span class=\"params\">(String userId)</span> &#123;</span><br><span class=\"line\">        refreshUser(userId);</span><br><span class=\"line\">        <span class=\"comment\">// return a LiveData directly from the database.</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> userDao.load(userId);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">refreshUser</span><span class=\"params\">(<span class=\"keyword\">final</span> String userId)</span> &#123;</span><br><span class=\"line\">        executor.execute(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// running in a background thread</span></span><br><span class=\"line\">            <span class=\"comment\">// check if user was fetched recently</span></span><br><span class=\"line\">            <span class=\"type\">boolean</span> <span class=\"variable\">userExists</span> <span class=\"operator\">=</span> userDao.hasUser(FRESH_TIMEOUT);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!userExists) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// refresh the data</span></span><br><span class=\"line\">                <span class=\"type\">Response</span> <span class=\"variable\">response</span> <span class=\"operator\">=</span> webservice.getUser(userId).execute();</span><br><span class=\"line\">                <span class=\"comment\">// TODO check for error etc.</span></span><br><span class=\"line\">                <span class=\"comment\">// Update the database.The LiveData will automatically refresh so</span></span><br><span class=\"line\">                <span class=\"comment\">// we don&#x27;t need to do anything else here besides updating the database</span></span><br><span class=\"line\">                userDao.save(response.body());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>UserRepositoryWebserviceUserProfileViewModelUserProfileFragmentUserRepositoryUserProfileViewModel</p>\n<p></p>\n<p>UIUIUIUI</p>\n<p></p>\n<ul>\n<li>getUser</li>\n<li>Repository</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<ul>\n<li><strong></strong><code>Android UI Instrumentation test</code>UIEspressoFragmentViewModelFragmentViewModelViewModel</li>\n<li><strong>ViewModel</strong>ViewModelJUnit testUserRepository</li>\n<li><strong>UserRepository</strong>UserRepositoryJUnit testWebserviceDAODAO</li>\n<li><strong>UserDao</strong>DAOinstrumentationUIin-memory</li>\n<li><strong>Webservice</strong>WebserviceMockWebServer</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-d76112977fe3f19d.webp\" alt=\"\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>AndroidActivityFragment</p>\n<p></p>\n<ul>\n<li>AndroidManifestActivityServiceBroadcast Receiver</li>\n<li></li>\n<li></li>\n<li>API</li>\n<li>Android</li>\n<li></li>\n<li>Repository</li>\n</ul>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p>Resource</p>\n<p>Resource</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//a generic class that describes a data with a status</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Resource</span>&lt;T&gt; &#123;</span><br><span class=\"line\">    <span class=\"meta\">@NonNull</span> <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> Status status;</span><br><span class=\"line\">    <span class=\"meta\">@Nullable</span> <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> T data;</span><br><span class=\"line\">    <span class=\"meta\">@Nullable</span> <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> String message;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"title function_\">Resource</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> Status status, <span class=\"meta\">@Nullable</span> T data, <span class=\"meta\">@Nullable</span> String message)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.status = status;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.data = data;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.message = message;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;T&gt; Resource&lt;T&gt; <span class=\"title function_\">success</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> T data)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Resource</span>&lt;&gt;(SUCCESS, data, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;T&gt; Resource&lt;T&gt; <span class=\"title function_\">error</span><span class=\"params\">(String msg, <span class=\"meta\">@Nullable</span> T data)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Resource</span>&lt;&gt;(ERROR, data, msg);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;T&gt; Resource&lt;T&gt; <span class=\"title function_\">loading</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> T data)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Resource</span>&lt;&gt;(LOADING, data, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>UINetworkBoundResourceNetworkBoundResource</p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-f95e8769c20c53aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"NetworkBoundResource\"></p>\n<p>NetworkBoundResourceNetworkBoundResourceUI</p>\n<p></p>\n<blockquote>\n<p><strong></strong>UI</p>\n</blockquote>\n<p>NetworkBoundResourceapi</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ResultType: Type for the Resource data</span></span><br><span class=\"line\"><span class=\"comment\">// RequestType: Type for the API response</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">NetworkBoundResource</span>&lt;ResultType, RequestType&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Called to save the result of the API response into the database</span></span><br><span class=\"line\">    <span class=\"meta\">@WorkerThread</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">saveCallResult</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> RequestType item)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Called with the data in the database to decide whether it should be</span></span><br><span class=\"line\">    <span class=\"comment\">// fetched from the network.</span></span><br><span class=\"line\">    <span class=\"meta\">@MainThread</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> <span class=\"type\">boolean</span> <span class=\"title function_\">shouldFetch</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> ResultType data)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Called to get the cached data from the database</span></span><br><span class=\"line\">    <span class=\"meta\">@NonNull</span> <span class=\"meta\">@MainThread</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> LiveData&lt;ResultType&gt; <span class=\"title function_\">loadFromDb</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Called to create the API call.</span></span><br><span class=\"line\">    <span class=\"meta\">@NonNull</span> <span class=\"meta\">@MainThread</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> LiveData&lt;ApiResponse&lt;RequestType&gt;&gt; <span class=\"title function_\">createCall</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Called when the fetch fails. The child class may want to reset components</span></span><br><span class=\"line\">    <span class=\"comment\">// like rate limiter.</span></span><br><span class=\"line\">    <span class=\"meta\">@MainThread</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onFetchFailed</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// returns a LiveData that represents the resource</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> LiveData&lt;Resource&lt;ResultType&gt;&gt; <span class=\"title function_\">getAsLiveData</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ResultTypeRequestType</p>\n<p>ApiResponseRetroft2.CallLiveData</p>\n<p>NetworkBoundResource</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">NetworkBoundResource</span>&lt;ResultType, RequestType&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> MediatorLiveData&lt;Resource&lt;ResultType&gt;&gt; result = <span class=\"keyword\">new</span> <span class=\"title class_\">MediatorLiveData</span>&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@MainThread</span></span><br><span class=\"line\">    NetworkBoundResource() &#123;</span><br><span class=\"line\">        <span class=\"comment\">//1NetworkBoundResource</span></span><br><span class=\"line\">        result.setValue(Resource.loading(<span class=\"literal\">null</span>));</span><br><span class=\"line\">        <span class=\"comment\">//2</span></span><br><span class=\"line\">        LiveData&lt;ResultType&gt; dbSource = loadFromDb();</span><br><span class=\"line\"></span><br><span class=\"line\">        result.addSource(dbSource, data -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">//3</span></span><br><span class=\"line\">            result.removeSource(dbSource);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (shouldFetch(data)) &#123;</span><br><span class=\"line\">                <span class=\"comment\">//4</span></span><br><span class=\"line\">                fetchFromNetwork(dbSource);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//</span></span><br><span class=\"line\">                result.addSource(dbSource,</span><br><span class=\"line\">                        newData -&gt; result.setValue(Resource.success(newData)));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">fetchFromNetwork</span><span class=\"params\">(<span class=\"keyword\">final</span> LiveData&lt;ResultType&gt; dbSource)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//5</span></span><br><span class=\"line\">        LiveData&lt;ApiResponse&lt;RequestType&gt;&gt; apiResponse = createCall();</span><br><span class=\"line\">        <span class=\"comment\">// we re-attach dbSource as a new source,</span></span><br><span class=\"line\">        <span class=\"comment\">// it will dispatch its latest value quickly</span></span><br><span class=\"line\">        result.addSource(dbSource,</span><br><span class=\"line\">                newData -&gt; result.setValue(Resource.loading(newData)));</span><br><span class=\"line\">        result.addSource(apiResponse, response -&gt; &#123;</span><br><span class=\"line\">            </span><br><span class=\"line\">            result.removeSource(apiResponse);</span><br><span class=\"line\">            result.removeSource(dbSource);</span><br><span class=\"line\">            <span class=\"comment\">//noinspection ConstantConditions</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (response.isSuccessful()) &#123;</span><br><span class=\"line\">                <span class=\"comment\">//6</span></span><br><span class=\"line\">                saveResultAndReInit(response);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//</span></span><br><span class=\"line\">                onFetchFailed();</span><br><span class=\"line\">                result.addSource(dbSource,</span><br><span class=\"line\">                        newData -&gt; result.setValue(</span><br><span class=\"line\">                                Resource.error(response.errorMessage, newData)));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@MainThread</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">saveResultAndReInit</span><span class=\"params\">(ApiResponse&lt;RequestType&gt; response)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">AsyncTask</span>&lt;Void, Void, Void&gt;() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">protected</span> Void <span class=\"title function_\">doInBackground</span><span class=\"params\">(Void... voids)</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//7</span></span><br><span class=\"line\">                saveCallResult(response.body);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onPostExecute</span><span class=\"params\">(Void aVoid)</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// we specially request a new live data,</span></span><br><span class=\"line\">                <span class=\"comment\">// otherwise we will get immediately last cached value,</span></span><br><span class=\"line\">                <span class=\"comment\">// which may not be updated with latest results received from network.</span></span><br><span class=\"line\">                <span class=\"comment\">//8</span></span><br><span class=\"line\">                result.addSource(loadFromDb(),</span><br><span class=\"line\">                        newData -&gt; result.setValue(Resource.success(newData)));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;.execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>UserRepositoryNetworkBoundResource</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">UserRepository</span> &#123;</span><br><span class=\"line\">    Webservice webservice;</span><br><span class=\"line\">    UserDao userDao;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;Resource&lt;User&gt;&gt; <span class=\"title function_\">loadUser</span><span class=\"params\">(<span class=\"keyword\">final</span> String userId)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NetworkBoundResource</span>&lt;User,User&gt;() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">saveCallResult</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> User item)</span> &#123;</span><br><span class=\"line\">                userDao.insert(item);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">protected</span> <span class=\"type\">boolean</span> <span class=\"title function_\">shouldFetch</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> User data)</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> rateLimiter.canFetch(userId) &amp;&amp; (data == <span class=\"literal\">null</span> || !isFresh(data));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">@NonNull</span> <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">protected</span> LiveData&lt;User&gt; <span class=\"title function_\">loadFromDb</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> userDao.load(userId);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">@NonNull</span> <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">protected</span> LiveData&lt;ApiResponse&lt;User&gt;&gt; <span class=\"title function_\">createCall</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> webservice.getUser(userId);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;.getAsLiveData();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>","excerpt":"<p>AndroidAndroid</p>\n<blockquote>\n<p><strong></strong>AndroidAndroid FrameworkAndroidAndroid</p>\n</blockquote>","more":"<h2 id=\"Android\"><a href=\"#Android\" class=\"headerlink\" title=\"Android\"></a>Android</h2><p>AndroidAndroidActivityFragmentServiceContentProviderBroadcast Receiver</p>\n<p>AndroidAndroidManifestAndroid</p>\n<p>AppAndroidAppApp</p>\n<p>Android</p>\n<p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>App<strong></strong>ActivityFragmentUIActivityFragmentAppAndroidAndroid</p>\n<p><strong>UI</strong>UI<code></code>UIUIUI</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Android</p>\n<blockquote>\n<p><strong></strong>Android</p>\n</blockquote>\n<p>UIREST API</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>UserProfileFragment.java</code><code>user_profile_layout.xml</code></p>\n<p>UI</p>\n<ul>\n<li><strong>User ID:</strong>FragmentFragmentAndroidFragmentID</li>\n<li><strong>User Object:</strong>Java</li>\n</ul>\n<p>ViewModel<code>UserProfileViewModel</code></p>\n<p>ViewModelUIActivityFragmentViewModelViewUIActivity</p>\n<p></p>\n<ul>\n<li>user_profile.xml: </li>\n<li>UserProfileViewModel.java: UI</li>\n<li>UserProfileFragment.java: </li>\n</ul>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserProfileViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ViewModel</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userId;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> User user;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">init</span><span class=\"params\">(String userId)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.userId = userId;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> User <span class=\"title function_\">getUser</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserProfileFragment</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">LifecycleFragment</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">UID_KEY</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;uid&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserProfileViewModel viewModel;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActivityCreated</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onActivityCreated(savedInstanceState);</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">userId</span> <span class=\"operator\">=</span> getArguments().getString(UID_KEY);</span><br><span class=\"line\">        viewModel = ViewModelProviders.of(<span class=\"built_in\">this</span>).get(UserProfileViewModel.class);</span><br><span class=\"line\">        viewModel.init(userId);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> View <span class=\"title function_\">onCreateView</span><span class=\"params\">(LayoutInflater inflater,</span></span><br><span class=\"line\"><span class=\"params\">                <span class=\"meta\">@Nullable</span> ViewGroup container, <span class=\"meta\">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> inflater.inflate(R.layout.user_profile, container, <span class=\"literal\">false</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong></strong>UserProfileFragmentLifeCycleFragmentFragmentLifecycleApiFragmentLifeCycleOwner</p>\n</blockquote>\n<p>ViewModelUILiveData</p>\n<blockquote>\n<p>LiveDataLiveDataLiveDataActivityFragmentService</p>\n</blockquote>\n<p>RxjavaAgreaLiveData</p>\n<p><code>LiveData&lt;User&gt;</code>UserProfileViewModelUserFragmentLiveData</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserProfileViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ViewModel</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"keyword\">private</span> LiveData&lt;User&gt; user;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;User&gt; <span class=\"title function_\">getUser</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>UserProfileFragmentUI</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onActivityCreated</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>.onActivityCreated(savedInstanceState);</span><br><span class=\"line\">    viewModel.getUser().observe(<span class=\"built_in\">this</span>, user -&gt; &#123;</span><br><span class=\"line\">      <span class=\"comment\">// update UI</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>onChangedUI</p>\n<p>FragmentonStop()LiveDataUIonDestroy</p>\n<p>ViewModelViewModelViewModel</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>REST APIRetrofit</p>\n<p>retrofitWebservice</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">Webservice</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@GET</span> declares an HTTP GET request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@Path</span>(&quot;user&quot;) annotation on the userId parameter marks it as a</span></span><br><span class=\"line\"><span class=\"comment\">     * replacement for the &#123;user&#125; placeholder in the <span class=\"doctag\">@GET</span> path</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@GET(&quot;/users/&#123;user&#125;&quot;)</span></span><br><span class=\"line\">    Call&lt;User&gt; <span class=\"title function_\">getUser</span><span class=\"params\">(<span class=\"meta\">@Path(&quot;user&quot;)</span> String userId)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ViewModelWebserviceViewModelViewModelActivityFragmentUIViewModelRepository</p>\n<blockquote>\n<p><strong>Repository</strong>APIAPIWeb</p>\n</blockquote>\n<p>UserRepository</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserRepository</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Webservice webservice;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;User&gt; <span class=\"title function_\">getUser</span><span class=\"params\">(<span class=\"type\">int</span> userId)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// This is not an optimal implementation, we&#x27;ll fix it below</span></span><br><span class=\"line\">        <span class=\"keyword\">final</span> MutableLiveData&lt;User&gt; data = <span class=\"keyword\">new</span> <span class=\"title class_\">MutableLiveData</span>&lt;&gt;();</span><br><span class=\"line\">        webservice.getUser(userId).enqueue(<span class=\"keyword\">new</span> <span class=\"title class_\">Callback</span>&lt;User&gt;() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onResponse</span><span class=\"params\">(Call&lt;User&gt; call, Response&lt;User&gt; response)</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// error case is left out for brevity</span></span><br><span class=\"line\">                data.setValue(response.body());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>repositoryAppViewModelWebService</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>UserRepositoryWebserviceWebserviceUserRepositoryWebserviceWebservice</p>\n<ul>\n<li><strong></strong>AndroidGoogleDagger 2Dagger 2</li>\n<li><strong></strong>DIDIService Locator</li>\n</ul>\n<p>;Dagger 2</p>\n<h3 id=\"ViewModelRepository\"><a href=\"#ViewModelRepository\" class=\"headerlink\" title=\"ViewModelRepository\"></a>ViewModelRepository</h3><p>UserProfileViewModel</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserProfileViewModel</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ViewModel</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> LiveData&lt;User&gt; user;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserRepository userRepo;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Inject</span> <span class=\"comment\">// UserRepository parameter is provided by Dagger 2</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">UserProfileViewModel</span><span class=\"params\">(UserRepository userRepo)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.userRepo = userRepo;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">init</span><span class=\"params\">(String userId)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.user != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// ViewModel is created per Fragment so</span></span><br><span class=\"line\">            <span class=\"comment\">// we know the userId won&#x27;t change</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        user = userRepo.getUser(userId);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;User&gt; <span class=\"title function_\">getUser</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Repository</p>\n<p>UserRepositoryUserProfileFragmentUserRepositoryUser</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Singleton</span>  <span class=\"comment\">// informs Dagger that this class should be constructed once</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserRepository</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Webservice webservice;</span><br><span class=\"line\">    <span class=\"comment\">// simple in memory cache, details omitted for brevity</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserCache userCache;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;User&gt; <span class=\"title function_\">getUser</span><span class=\"params\">(String userId)</span> &#123;</span><br><span class=\"line\">        LiveData&lt;User&gt; cached = userCache.get(userId);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (cached != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> cached;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">final</span> MutableLiveData&lt;User&gt; data = <span class=\"keyword\">new</span> <span class=\"title class_\">MutableLiveData</span>&lt;&gt;();</span><br><span class=\"line\">        userCache.put(userId, data);</span><br><span class=\"line\">        <span class=\"comment\">// this is still suboptimal but better than before.</span></span><br><span class=\"line\">        <span class=\"comment\">// a complete implementation must also handle the error cases.</span></span><br><span class=\"line\">        webservice.getUser(userId).enqueue(<span class=\"keyword\">new</span> <span class=\"title class_\">Callback</span>&lt;User&gt;() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onResponse</span><span class=\"params\">(Call&lt;User&gt; call, Response&lt;User&gt; response)</span> &#123;</span><br><span class=\"line\">                data.setValue(response.body());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>UIRepositoryAndroid</p>\n<p>Web</p>\n<p>Room</p>\n<blockquote>\n<p>RoomSQLRoomSQLLiveData</p>\n</blockquote>\n<p>Room@Entity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@PrimaryKey</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">int</span> id;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String lastName;</span><br><span class=\"line\">  <span class=\"comment\">// getters and setters for fields</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Database(entities = &#123;User.class&#125;, version = 1)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyDatabase</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">RoomDatabase</span> &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>MyDatabaseRoom</p>\n<p>DAO</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserDao</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Insert(onConflict = REPLACE)</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">save</span><span class=\"params\">(User user)</span>;</span><br><span class=\"line\">    <span class=\"meta\">@Query(&quot;SELECT * FROM user WHERE id = :userId&quot;)</span></span><br><span class=\"line\">    LiveData&lt;User&gt; <span class=\"title function_\">load</span><span class=\"params\">(String userId)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>MyDatabaseDAO</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Database(entities = &#123;User.class&#125;, version = 1)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyDatabase</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">RoomDatabase</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> UserDao <span class=\"title function_\">userDao</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>loadLiveData<User>RoomLiveData</p>\n<p>UserRepository</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Singleton</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserRepository</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Webservice webservice;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> UserDao userDao;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Executor executor;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Inject</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">UserRepository</span><span class=\"params\">(Webservice webservice, UserDao userDao, Executor executor)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.webservice = webservice;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.userDao = userDao;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.executor = executor;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;User&gt; <span class=\"title function_\">getUser</span><span class=\"params\">(String userId)</span> &#123;</span><br><span class=\"line\">        refreshUser(userId);</span><br><span class=\"line\">        <span class=\"comment\">// return a LiveData directly from the database.</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> userDao.load(userId);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">refreshUser</span><span class=\"params\">(<span class=\"keyword\">final</span> String userId)</span> &#123;</span><br><span class=\"line\">        executor.execute(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">// running in a background thread</span></span><br><span class=\"line\">            <span class=\"comment\">// check if user was fetched recently</span></span><br><span class=\"line\">            <span class=\"type\">boolean</span> <span class=\"variable\">userExists</span> <span class=\"operator\">=</span> userDao.hasUser(FRESH_TIMEOUT);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!userExists) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// refresh the data</span></span><br><span class=\"line\">                <span class=\"type\">Response</span> <span class=\"variable\">response</span> <span class=\"operator\">=</span> webservice.getUser(userId).execute();</span><br><span class=\"line\">                <span class=\"comment\">// TODO check for error etc.</span></span><br><span class=\"line\">                <span class=\"comment\">// Update the database.The LiveData will automatically refresh so</span></span><br><span class=\"line\">                <span class=\"comment\">// we don&#x27;t need to do anything else here besides updating the database</span></span><br><span class=\"line\">                userDao.save(response.body());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>UserRepositoryWebserviceUserProfileViewModelUserProfileFragmentUserRepositoryUserProfileViewModel</p>\n<p></p>\n<p>UIUIUIUI</p>\n<p></p>\n<ul>\n<li>getUser</li>\n<li>Repository</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<ul>\n<li><strong></strong><code>Android UI Instrumentation test</code>UIEspressoFragmentViewModelFragmentViewModelViewModel</li>\n<li><strong>ViewModel</strong>ViewModelJUnit testUserRepository</li>\n<li><strong>UserRepository</strong>UserRepositoryJUnit testWebserviceDAODAO</li>\n<li><strong>UserDao</strong>DAOinstrumentationUIin-memory</li>\n<li><strong>Webservice</strong>WebserviceMockWebServer</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-d76112977fe3f19d.webp\" alt=\"\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>AndroidActivityFragment</p>\n<p></p>\n<ul>\n<li>AndroidManifestActivityServiceBroadcast Receiver</li>\n<li></li>\n<li></li>\n<li>API</li>\n<li>Android</li>\n<li></li>\n<li>Repository</li>\n</ul>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p>Resource</p>\n<p>Resource</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//a generic class that describes a data with a status</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Resource</span>&lt;T&gt; &#123;</span><br><span class=\"line\">    <span class=\"meta\">@NonNull</span> <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> Status status;</span><br><span class=\"line\">    <span class=\"meta\">@Nullable</span> <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> T data;</span><br><span class=\"line\">    <span class=\"meta\">@Nullable</span> <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> String message;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"title function_\">Resource</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> Status status, <span class=\"meta\">@Nullable</span> T data, <span class=\"meta\">@Nullable</span> String message)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.status = status;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.data = data;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.message = message;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;T&gt; Resource&lt;T&gt; <span class=\"title function_\">success</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> T data)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Resource</span>&lt;&gt;(SUCCESS, data, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;T&gt; Resource&lt;T&gt; <span class=\"title function_\">error</span><span class=\"params\">(String msg, <span class=\"meta\">@Nullable</span> T data)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Resource</span>&lt;&gt;(ERROR, data, msg);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;T&gt; Resource&lt;T&gt; <span class=\"title function_\">loading</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> T data)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Resource</span>&lt;&gt;(LOADING, data, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>UINetworkBoundResourceNetworkBoundResource</p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-f95e8769c20c53aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"NetworkBoundResource\"></p>\n<p>NetworkBoundResourceNetworkBoundResourceUI</p>\n<p></p>\n<blockquote>\n<p><strong></strong>UI</p>\n</blockquote>\n<p>NetworkBoundResourceapi</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ResultType: Type for the Resource data</span></span><br><span class=\"line\"><span class=\"comment\">// RequestType: Type for the API response</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">NetworkBoundResource</span>&lt;ResultType, RequestType&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Called to save the result of the API response into the database</span></span><br><span class=\"line\">    <span class=\"meta\">@WorkerThread</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">saveCallResult</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> RequestType item)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Called with the data in the database to decide whether it should be</span></span><br><span class=\"line\">    <span class=\"comment\">// fetched from the network.</span></span><br><span class=\"line\">    <span class=\"meta\">@MainThread</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> <span class=\"type\">boolean</span> <span class=\"title function_\">shouldFetch</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> ResultType data)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Called to get the cached data from the database</span></span><br><span class=\"line\">    <span class=\"meta\">@NonNull</span> <span class=\"meta\">@MainThread</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> LiveData&lt;ResultType&gt; <span class=\"title function_\">loadFromDb</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Called to create the API call.</span></span><br><span class=\"line\">    <span class=\"meta\">@NonNull</span> <span class=\"meta\">@MainThread</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> LiveData&lt;ApiResponse&lt;RequestType&gt;&gt; <span class=\"title function_\">createCall</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Called when the fetch fails. The child class may want to reset components</span></span><br><span class=\"line\">    <span class=\"comment\">// like rate limiter.</span></span><br><span class=\"line\">    <span class=\"meta\">@MainThread</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onFetchFailed</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// returns a LiveData that represents the resource</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> LiveData&lt;Resource&lt;ResultType&gt;&gt; <span class=\"title function_\">getAsLiveData</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ResultTypeRequestType</p>\n<p>ApiResponseRetroft2.CallLiveData</p>\n<p>NetworkBoundResource</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">NetworkBoundResource</span>&lt;ResultType, RequestType&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> MediatorLiveData&lt;Resource&lt;ResultType&gt;&gt; result = <span class=\"keyword\">new</span> <span class=\"title class_\">MediatorLiveData</span>&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@MainThread</span></span><br><span class=\"line\">    NetworkBoundResource() &#123;</span><br><span class=\"line\">        <span class=\"comment\">//1NetworkBoundResource</span></span><br><span class=\"line\">        result.setValue(Resource.loading(<span class=\"literal\">null</span>));</span><br><span class=\"line\">        <span class=\"comment\">//2</span></span><br><span class=\"line\">        LiveData&lt;ResultType&gt; dbSource = loadFromDb();</span><br><span class=\"line\"></span><br><span class=\"line\">        result.addSource(dbSource, data -&gt; &#123;</span><br><span class=\"line\">            <span class=\"comment\">//3</span></span><br><span class=\"line\">            result.removeSource(dbSource);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (shouldFetch(data)) &#123;</span><br><span class=\"line\">                <span class=\"comment\">//4</span></span><br><span class=\"line\">                fetchFromNetwork(dbSource);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//</span></span><br><span class=\"line\">                result.addSource(dbSource,</span><br><span class=\"line\">                        newData -&gt; result.setValue(Resource.success(newData)));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">fetchFromNetwork</span><span class=\"params\">(<span class=\"keyword\">final</span> LiveData&lt;ResultType&gt; dbSource)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//5</span></span><br><span class=\"line\">        LiveData&lt;ApiResponse&lt;RequestType&gt;&gt; apiResponse = createCall();</span><br><span class=\"line\">        <span class=\"comment\">// we re-attach dbSource as a new source,</span></span><br><span class=\"line\">        <span class=\"comment\">// it will dispatch its latest value quickly</span></span><br><span class=\"line\">        result.addSource(dbSource,</span><br><span class=\"line\">                newData -&gt; result.setValue(Resource.loading(newData)));</span><br><span class=\"line\">        result.addSource(apiResponse, response -&gt; &#123;</span><br><span class=\"line\">            </span><br><span class=\"line\">            result.removeSource(apiResponse);</span><br><span class=\"line\">            result.removeSource(dbSource);</span><br><span class=\"line\">            <span class=\"comment\">//noinspection ConstantConditions</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (response.isSuccessful()) &#123;</span><br><span class=\"line\">                <span class=\"comment\">//6</span></span><br><span class=\"line\">                saveResultAndReInit(response);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//</span></span><br><span class=\"line\">                onFetchFailed();</span><br><span class=\"line\">                result.addSource(dbSource,</span><br><span class=\"line\">                        newData -&gt; result.setValue(</span><br><span class=\"line\">                                Resource.error(response.errorMessage, newData)));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@MainThread</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">saveResultAndReInit</span><span class=\"params\">(ApiResponse&lt;RequestType&gt; response)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">AsyncTask</span>&lt;Void, Void, Void&gt;() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">protected</span> Void <span class=\"title function_\">doInBackground</span><span class=\"params\">(Void... voids)</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//7</span></span><br><span class=\"line\">                saveCallResult(response.body);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onPostExecute</span><span class=\"params\">(Void aVoid)</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// we specially request a new live data,</span></span><br><span class=\"line\">                <span class=\"comment\">// otherwise we will get immediately last cached value,</span></span><br><span class=\"line\">                <span class=\"comment\">// which may not be updated with latest results received from network.</span></span><br><span class=\"line\">                <span class=\"comment\">//8</span></span><br><span class=\"line\">                result.addSource(loadFromDb(),</span><br><span class=\"line\">                        newData -&gt; result.setValue(Resource.success(newData)));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;.execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>UserRepositoryNetworkBoundResource</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">UserRepository</span> &#123;</span><br><span class=\"line\">    Webservice webservice;</span><br><span class=\"line\">    UserDao userDao;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> LiveData&lt;Resource&lt;User&gt;&gt; <span class=\"title function_\">loadUser</span><span class=\"params\">(<span class=\"keyword\">final</span> String userId)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NetworkBoundResource</span>&lt;User,User&gt;() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">saveCallResult</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> User item)</span> &#123;</span><br><span class=\"line\">                userDao.insert(item);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">protected</span> <span class=\"type\">boolean</span> <span class=\"title function_\">shouldFetch</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> User data)</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> rateLimiter.canFetch(userId) &amp;&amp; (data == <span class=\"literal\">null</span> || !isFresh(data));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">@NonNull</span> <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">protected</span> LiveData&lt;User&gt; <span class=\"title function_\">loadFromDb</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> userDao.load(userId);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">@NonNull</span> <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"keyword\">protected</span> LiveData&lt;ApiResponse&lt;User&gt;&gt; <span class=\"title function_\">createCall</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> webservice.getUser(userId);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;.getAsLiveData();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>"},{"title":"Android OpenGL - 02.EGLEGL","date":"2020-03-30T14:58:44.000Z","cover":"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/opengl_banner.jpg","_content":"\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/egl-init-progress.PNG)\n\nEGL\n\n `ZqlPlayerLog.h` \n<!-- more -->\n```cpp\n//\n// Created by zqlxt on 2020/3/29.\n//\n#ifndef ZQLPLAYER_ZQLPLAYERLOG_H\n#define ZQLPLAYER_ZQLPLAYERLOG_H\n\n#include \"android/log.h\"\n\n#define LOGD(FORMAT, ...) __android_log_print(ANDROID_LOG_DEBUG,\"scott\",FORMAT, ##__VA_ARGS__);\n#define LOGE(FORMAT, ...) __android_log_print(ANDROID_LOG_ERROR,\"scott\",FORMAT, ##__VA_ARGS__);\n\n#endif //ZQLPLAYER_ZQLPLAYERLOG_H\n```\n\n\n `cpp`  `egl`  EGL \n\n `EGLHelper.h` :\n\n```cpp\n//\n// Created by zqlxt on 2020/3/29.\n//\n\n#ifndef ZQLPLAYER_EGLHELPER_H\n#define ZQLPLAYER_EGLHELPER_H\n\n#include \"EGL/egl.h\"\n\nclass EGLHelper {\n\npublic:\n    EGLDisplay mEglDisplay;\n    EGLSurface mEglSurface;\n    EGLConfig mEglConfig;\n    EGLContext mEglContext;\npublic:\n    EGLHelper();\n\n    ~EGLHelper();\n\n    // EGL\n    int initEGL(EGLNativeWindowType win);\n    // surface  display \n    int swapBuffers();\n    // EGL\n    void destoryEgl();\n};\n\n\n#endif //ZQLPLAYER_EGLHELPER_H\n\n```\n\n `EGLHelper.cpp` \n\n```cpp\n//\n// Created by zqlxt on 2020/3/29.\n//\n\n#include \"EGLHelper.h\"\n#include \"../log/ZqlPlayerLog.h\"\n\nEGLHelper::EGLHelper() {\n    mEglDisplay = EGL_NO_DISPLAY;\n    mEglSurface = EGL_NO_SURFACE;\n    mEglContext = EGL_NO_CONTEXT;\n    mEglConfig = NULL;\n}\n\nEGLHelper::~EGLHelper() {\n\n}\n\nint EGLHelper::initEGL(EGLNativeWindowType win) {\n    //1. \n    mEglDisplay = eglGetDisplay(EGL_DEFAULT_DISPLAY);\n    if (mEglDisplay == EGL_NO_DISPLAY) {\n        LOGE(\"eglGetDisplay error\")\n        return -1;\n    }\n\n    //2. \n    EGLint *version = new EGLint[2];\n    if (!eglInitialize(mEglDisplay, &version[0], &version[1])) {\n        LOGE(\"eglInitialize error\");\n        return -1;\n    }\n\n    //3. \n    const EGLint attribs[] = {\n            EGL_RED_SIZE, 8,\n            EGL_GREEN_SIZE, 8,\n            EGL_BLUE_SIZE, 8,\n            EGL_ALPHA_SIZE, 8,\n            EGL_DEPTH_SIZE, 8,\n            EGL_STENCIL_SIZE, 8,\n            EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,\n            EGL_NONE\n    };\n    EGLint num_config;\n    if (!eglChooseConfig(mEglDisplay, attribs, NULL, 1, &num_config)) {\n        LOGE(\"eglChooseConfig error 1\");\n        return -1;\n    }\n\n    //4. \n    if (!eglChooseConfig(mEglDisplay, attribs, &mEglConfig, num_config, &num_config)) {\n        LOGE(\"eglChooseConfig error 2\");\n        return -1;\n    }\n\n    //5.  EGLContext\n    int attrib_list[] = {\n            EGL_CONTEXT_CLIENT_VERSION, 2,\n            EGL_NONE\n    };\n    mEglContext = eglCreateContext(mEglDisplay, mEglConfig, EGL_NO_CONTEXT, attrib_list);\n    if (mEglContext == EGL_NO_CONTEXT) {\n        LOGE(\"eglCreateContext error\");\n        return -1;\n    }\n    //6.surface\n    mEglSurface = eglCreateWindowSurface(mEglDisplay, mEglConfig, win, NULL);\n    if (mEglSurface == EGL_NO_SURFACE) {\n        LOGE(\"eglCreateWindowSurface error\");\n        return -1;\n    }\n\n    //7.  EGLContext  Surface \n    if (!eglMakeCurrent(mEglDisplay, mEglSurface, mEglSurface, mEglContext)) {\n        LOGE(\"eglMakeCurrent error\");\n        return -1;\n    }\n\n    LOGD(\"egl init success\");\n\n    return 0;\n}\n\nint EGLHelper::swapBuffers() {\n\n    if (mEglDisplay != EGL_NO_DISPLAY && mEglSurface != EGL_NO_SURFACE) {\n        if (eglSwapBuffers(mEglDisplay, mEglSurface)) {\n            return 0;\n        }\n    }\n\n    return -1;\n}\n\nvoid EGLHelper::destoryEgl() {\n\n    if (mEglDisplay != EGL_NO_DISPLAY) {\n        eglMakeCurrent(mEglDisplay, EGL_NO_SURFACE, EGL_NO_SURFACE, EGL_NO_CONTEXT);\n    }\n    if (mEglDisplay != EGL_NO_DISPLAY && mEglSurface != EGL_NO_SURFACE) {\n        eglDestroySurface(mEglDisplay, mEglSurface);\n        mEglSurface = EGL_NO_SURFACE;\n    }\n    if (mEglDisplay != EGL_NO_DISPLAY && mEglContext != EGL_NO_CONTEXT) {\n        eglDestroyContext(mEglDisplay, mEglContext);\n        mEglContext = EGL_NO_CONTEXT;\n    }\n    if (mEglDisplay != EGL_NO_DISPLAY) {\n        eglTerminate(mEglDisplay);\n    }\n}\n\n```\n> c++CMakeLists lib\n\nOK EGL  Activity  EGL \n\n `NativeOpengl`  c++ \n\n```kotlin\npackage com.zql.zqlplayer.opengl\n\nimport android.view.Surface\n\n/**\n *    @author  2020/3/29\n */\npublic class NativeOpengl {\n\n    external fun surfaceCreate(surface: Surface): Unit\n    external fun surfaceDestory()\n}\n```\n\n jni \n\n```cpp\n#include <jni.h>\n#include <string>\n#include \"log/ZqlPlayerLog.h\"\n#include \"egl/EGLHelper.h\"\n#include \"android/native_window.h\"\n#include \"android/native_window_jni.h\"\n#include \"GLES2/gl2.h\"\n\nEGLHelper *eglHelper = NULL;\nANativeWindow *nativeWindow = NULL;\nextern \"C\"\nJNIEXPORT void JNICALL\nJava_com_zql_zqlplayer_opengl_NativeOpengl_surfaceCreate(JNIEnv *env, jobject thiz,\n                                                         jobject surface) {\n\n    //java  SurfaceView  surface  NativeWindow\n    nativeWindow = ANativeWindow_fromSurface(env, surface);\n    eglHelper = new EGLHelper();\n    eglHelper->initEGL(nativeWindow);\n\n    //opengl \n    glViewport(0, 0, 720, 1280);\n    glClearColor(0.0F, 1.0F, 0.0F, 1.0F);\n    glClear(GL_COLOR_BUFFER_BIT);\n\n    eglHelper->swapBuffers();\n}\n\nextern \"C\"\nJNIEXPORT void JNICALL\nJava_com_zql_zqlplayer_opengl_NativeOpengl_surfaceDestory(JNIEnv *env, jobject thiz) {\n    //java  SurfaceView \n    eglHelper->destoryEgl();\n}\n```\n\n\n SurfaceView\n\n```kotlin\npackage com.zql.zqlplayer.test\n\nimport android.content.Context\nimport android.util.AttributeSet\nimport android.view.SurfaceHolder\nimport android.view.SurfaceView\nimport com.zql.zqlplayer.opengl.NativeOpengl\n\n/**\n *    @author  2020/3/29\n */\nclass EglTestSurfaceView : SurfaceView, SurfaceHolder.Callback {\n\n    var nativeOpengl: NativeOpengl? = null\n\n    constructor(context: Context) : super(context) {\n    }\n\n    constructor(context: Context, attributeSet: AttributeSet) : super(context, attributeSet) {\n    }\n\n    constructor(context: Context, attributeSet: AttributeSet, defStyleAttr: Int) : super(\n        context,\n        attributeSet,\n        defStyleAttr\n    ) {\n    }\n\n    init {\n        holder.addCallback(this)\n    }\n\n    override fun surfaceChanged(holder: SurfaceHolder?, format: Int, width: Int, height: Int) {\n\n    }\n\n    override fun surfaceDestroyed(holder: SurfaceHolder?) {\n        nativeOpengl?.surfaceDestory()\n    }\n\n    override fun surfaceCreated(holder: SurfaceHolder?) {\n        holder?.surface?.let {\n            nativeOpengl?.surfaceCreate(it)\n        }\n    }\n}\n```\n\n Activity\n\n```kotlin\npackage com.zql.zqlplayer.test\n\nimport android.os.Bundle\nimport android.support.v7.app.AppCompatActivity\nimport com.zql.zqlplayer.R\nimport com.zql.zqlplayer.opengl.NativeOpengl\n\nimport kotlinx.android.synthetic.main.activity_e_g_l_test.*\n\nclass EGLTestActivity : AppCompatActivity() {\n\n    private val nativeOpengl = NativeOpengl()\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_e_g_l_test)\n        surface_view.nativeOpengl = nativeOpengl\n    }\n\n}\n\n```\n\n\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/Screenshot_2020-03-30-23-18-28-597_com.zql.zqlplayer.jpg)","source":"_posts/android-opengl-02.md","raw":"---\ntitle: Android OpenGL - 02.EGLEGL\ndate: 2020-03-30 22:58:44\ntags:\n- android\n- opengl\ncover: https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/opengl_banner.jpg\n---\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/egl-init-progress.PNG)\n\nEGL\n\n `ZqlPlayerLog.h` \n<!-- more -->\n```cpp\n//\n// Created by zqlxt on 2020/3/29.\n//\n#ifndef ZQLPLAYER_ZQLPLAYERLOG_H\n#define ZQLPLAYER_ZQLPLAYERLOG_H\n\n#include \"android/log.h\"\n\n#define LOGD(FORMAT, ...) __android_log_print(ANDROID_LOG_DEBUG,\"scott\",FORMAT, ##__VA_ARGS__);\n#define LOGE(FORMAT, ...) __android_log_print(ANDROID_LOG_ERROR,\"scott\",FORMAT, ##__VA_ARGS__);\n\n#endif //ZQLPLAYER_ZQLPLAYERLOG_H\n```\n\n\n `cpp`  `egl`  EGL \n\n `EGLHelper.h` :\n\n```cpp\n//\n// Created by zqlxt on 2020/3/29.\n//\n\n#ifndef ZQLPLAYER_EGLHELPER_H\n#define ZQLPLAYER_EGLHELPER_H\n\n#include \"EGL/egl.h\"\n\nclass EGLHelper {\n\npublic:\n    EGLDisplay mEglDisplay;\n    EGLSurface mEglSurface;\n    EGLConfig mEglConfig;\n    EGLContext mEglContext;\npublic:\n    EGLHelper();\n\n    ~EGLHelper();\n\n    // EGL\n    int initEGL(EGLNativeWindowType win);\n    // surface  display \n    int swapBuffers();\n    // EGL\n    void destoryEgl();\n};\n\n\n#endif //ZQLPLAYER_EGLHELPER_H\n\n```\n\n `EGLHelper.cpp` \n\n```cpp\n//\n// Created by zqlxt on 2020/3/29.\n//\n\n#include \"EGLHelper.h\"\n#include \"../log/ZqlPlayerLog.h\"\n\nEGLHelper::EGLHelper() {\n    mEglDisplay = EGL_NO_DISPLAY;\n    mEglSurface = EGL_NO_SURFACE;\n    mEglContext = EGL_NO_CONTEXT;\n    mEglConfig = NULL;\n}\n\nEGLHelper::~EGLHelper() {\n\n}\n\nint EGLHelper::initEGL(EGLNativeWindowType win) {\n    //1. \n    mEglDisplay = eglGetDisplay(EGL_DEFAULT_DISPLAY);\n    if (mEglDisplay == EGL_NO_DISPLAY) {\n        LOGE(\"eglGetDisplay error\")\n        return -1;\n    }\n\n    //2. \n    EGLint *version = new EGLint[2];\n    if (!eglInitialize(mEglDisplay, &version[0], &version[1])) {\n        LOGE(\"eglInitialize error\");\n        return -1;\n    }\n\n    //3. \n    const EGLint attribs[] = {\n            EGL_RED_SIZE, 8,\n            EGL_GREEN_SIZE, 8,\n            EGL_BLUE_SIZE, 8,\n            EGL_ALPHA_SIZE, 8,\n            EGL_DEPTH_SIZE, 8,\n            EGL_STENCIL_SIZE, 8,\n            EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,\n            EGL_NONE\n    };\n    EGLint num_config;\n    if (!eglChooseConfig(mEglDisplay, attribs, NULL, 1, &num_config)) {\n        LOGE(\"eglChooseConfig error 1\");\n        return -1;\n    }\n\n    //4. \n    if (!eglChooseConfig(mEglDisplay, attribs, &mEglConfig, num_config, &num_config)) {\n        LOGE(\"eglChooseConfig error 2\");\n        return -1;\n    }\n\n    //5.  EGLContext\n    int attrib_list[] = {\n            EGL_CONTEXT_CLIENT_VERSION, 2,\n            EGL_NONE\n    };\n    mEglContext = eglCreateContext(mEglDisplay, mEglConfig, EGL_NO_CONTEXT, attrib_list);\n    if (mEglContext == EGL_NO_CONTEXT) {\n        LOGE(\"eglCreateContext error\");\n        return -1;\n    }\n    //6.surface\n    mEglSurface = eglCreateWindowSurface(mEglDisplay, mEglConfig, win, NULL);\n    if (mEglSurface == EGL_NO_SURFACE) {\n        LOGE(\"eglCreateWindowSurface error\");\n        return -1;\n    }\n\n    //7.  EGLContext  Surface \n    if (!eglMakeCurrent(mEglDisplay, mEglSurface, mEglSurface, mEglContext)) {\n        LOGE(\"eglMakeCurrent error\");\n        return -1;\n    }\n\n    LOGD(\"egl init success\");\n\n    return 0;\n}\n\nint EGLHelper::swapBuffers() {\n\n    if (mEglDisplay != EGL_NO_DISPLAY && mEglSurface != EGL_NO_SURFACE) {\n        if (eglSwapBuffers(mEglDisplay, mEglSurface)) {\n            return 0;\n        }\n    }\n\n    return -1;\n}\n\nvoid EGLHelper::destoryEgl() {\n\n    if (mEglDisplay != EGL_NO_DISPLAY) {\n        eglMakeCurrent(mEglDisplay, EGL_NO_SURFACE, EGL_NO_SURFACE, EGL_NO_CONTEXT);\n    }\n    if (mEglDisplay != EGL_NO_DISPLAY && mEglSurface != EGL_NO_SURFACE) {\n        eglDestroySurface(mEglDisplay, mEglSurface);\n        mEglSurface = EGL_NO_SURFACE;\n    }\n    if (mEglDisplay != EGL_NO_DISPLAY && mEglContext != EGL_NO_CONTEXT) {\n        eglDestroyContext(mEglDisplay, mEglContext);\n        mEglContext = EGL_NO_CONTEXT;\n    }\n    if (mEglDisplay != EGL_NO_DISPLAY) {\n        eglTerminate(mEglDisplay);\n    }\n}\n\n```\n> c++CMakeLists lib\n\nOK EGL  Activity  EGL \n\n `NativeOpengl`  c++ \n\n```kotlin\npackage com.zql.zqlplayer.opengl\n\nimport android.view.Surface\n\n/**\n *    @author  2020/3/29\n */\npublic class NativeOpengl {\n\n    external fun surfaceCreate(surface: Surface): Unit\n    external fun surfaceDestory()\n}\n```\n\n jni \n\n```cpp\n#include <jni.h>\n#include <string>\n#include \"log/ZqlPlayerLog.h\"\n#include \"egl/EGLHelper.h\"\n#include \"android/native_window.h\"\n#include \"android/native_window_jni.h\"\n#include \"GLES2/gl2.h\"\n\nEGLHelper *eglHelper = NULL;\nANativeWindow *nativeWindow = NULL;\nextern \"C\"\nJNIEXPORT void JNICALL\nJava_com_zql_zqlplayer_opengl_NativeOpengl_surfaceCreate(JNIEnv *env, jobject thiz,\n                                                         jobject surface) {\n\n    //java  SurfaceView  surface  NativeWindow\n    nativeWindow = ANativeWindow_fromSurface(env, surface);\n    eglHelper = new EGLHelper();\n    eglHelper->initEGL(nativeWindow);\n\n    //opengl \n    glViewport(0, 0, 720, 1280);\n    glClearColor(0.0F, 1.0F, 0.0F, 1.0F);\n    glClear(GL_COLOR_BUFFER_BIT);\n\n    eglHelper->swapBuffers();\n}\n\nextern \"C\"\nJNIEXPORT void JNICALL\nJava_com_zql_zqlplayer_opengl_NativeOpengl_surfaceDestory(JNIEnv *env, jobject thiz) {\n    //java  SurfaceView \n    eglHelper->destoryEgl();\n}\n```\n\n\n SurfaceView\n\n```kotlin\npackage com.zql.zqlplayer.test\n\nimport android.content.Context\nimport android.util.AttributeSet\nimport android.view.SurfaceHolder\nimport android.view.SurfaceView\nimport com.zql.zqlplayer.opengl.NativeOpengl\n\n/**\n *    @author  2020/3/29\n */\nclass EglTestSurfaceView : SurfaceView, SurfaceHolder.Callback {\n\n    var nativeOpengl: NativeOpengl? = null\n\n    constructor(context: Context) : super(context) {\n    }\n\n    constructor(context: Context, attributeSet: AttributeSet) : super(context, attributeSet) {\n    }\n\n    constructor(context: Context, attributeSet: AttributeSet, defStyleAttr: Int) : super(\n        context,\n        attributeSet,\n        defStyleAttr\n    ) {\n    }\n\n    init {\n        holder.addCallback(this)\n    }\n\n    override fun surfaceChanged(holder: SurfaceHolder?, format: Int, width: Int, height: Int) {\n\n    }\n\n    override fun surfaceDestroyed(holder: SurfaceHolder?) {\n        nativeOpengl?.surfaceDestory()\n    }\n\n    override fun surfaceCreated(holder: SurfaceHolder?) {\n        holder?.surface?.let {\n            nativeOpengl?.surfaceCreate(it)\n        }\n    }\n}\n```\n\n Activity\n\n```kotlin\npackage com.zql.zqlplayer.test\n\nimport android.os.Bundle\nimport android.support.v7.app.AppCompatActivity\nimport com.zql.zqlplayer.R\nimport com.zql.zqlplayer.opengl.NativeOpengl\n\nimport kotlinx.android.synthetic.main.activity_e_g_l_test.*\n\nclass EGLTestActivity : AppCompatActivity() {\n\n    private val nativeOpengl = NativeOpengl()\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_e_g_l_test)\n        surface_view.nativeOpengl = nativeOpengl\n    }\n\n}\n\n```\n\n\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/Screenshot_2020-03-30-23-18-28-597_com.zql.zqlplayer.jpg)","slug":"android-opengl-02","published":1,"updated":"2024-08-21T03:16:19.781Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vq000k5p6t7gy91ff4","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/egl-init-progress.PNG\" alt=\"\"></p>\n<p>EGL</p>\n<p> <code>ZqlPlayerLog.h</code> </p>\n<span id=\"more\"></span>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">// Created by zqlxt on 2020/3/29.</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">ifndef</span> ZQLPLAYER_ZQLPLAYERLOG_H</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> ZQLPLAYER_ZQLPLAYERLOG_H</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;android/log.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LOGD(FORMAT, ...) __android_log_print(ANDROID_LOG_DEBUG,<span class=\"string\">&quot;scott&quot;</span>,FORMAT, ##__VA_ARGS__);</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LOGE(FORMAT, ...) __android_log_print(ANDROID_LOG_ERROR,<span class=\"string\">&quot;scott&quot;</span>,FORMAT, ##__VA_ARGS__);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">endif</span> <span class=\"comment\">//ZQLPLAYER_ZQLPLAYERLOG_H</span></span></span><br></pre></td></tr></table></figure>\n\n\n<p> <code>cpp</code>  <code>egl</code>  EGL </p>\n<p> <code>EGLHelper.h</code> :</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">// Created by zqlxt on 2020/3/29.</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">ifndef</span> ZQLPLAYER_EGLHELPER_H</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> ZQLPLAYER_EGLHELPER_H</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;EGL/egl.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">EGLHelper</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    EGLDisplay mEglDisplay;</span><br><span class=\"line\">    EGLSurface mEglSurface;</span><br><span class=\"line\">    EGLConfig mEglConfig;</span><br><span class=\"line\">    EGLContext mEglContext;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">EGLHelper</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    ~<span class=\"built_in\">EGLHelper</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// EGL</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">initEGL</span><span class=\"params\">(EGLNativeWindowType win)</span></span>;</span><br><span class=\"line\">    <span class=\"comment\">// surface  display </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">swapBuffers</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"comment\">// EGL</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">destoryEgl</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">endif</span> <span class=\"comment\">//ZQLPLAYER_EGLHELPER_H</span></span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> <code>EGLHelper.cpp</code> </p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">// Created by zqlxt on 2020/3/29.</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;EGLHelper.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;../log/ZqlPlayerLog.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">EGLHelper::<span class=\"built_in\">EGLHelper</span>() &#123;</span><br><span class=\"line\">    mEglDisplay = EGL_NO_DISPLAY;</span><br><span class=\"line\">    mEglSurface = EGL_NO_SURFACE;</span><br><span class=\"line\">    mEglContext = EGL_NO_CONTEXT;</span><br><span class=\"line\">    mEglConfig = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">EGLHelper::~<span class=\"built_in\">EGLHelper</span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">EGLHelper::initEGL</span><span class=\"params\">(EGLNativeWindowType win)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//1. </span></span><br><span class=\"line\">    mEglDisplay = <span class=\"built_in\">eglGetDisplay</span>(EGL_DEFAULT_DISPLAY);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglDisplay == EGL_NO_DISPLAY) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">LOGE</span>(<span class=\"string\">&quot;eglGetDisplay error&quot;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//2. </span></span><br><span class=\"line\">    EGLint *version = <span class=\"keyword\">new</span> EGLint[<span class=\"number\">2</span>];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">eglInitialize</span>(mEglDisplay, &amp;version[<span class=\"number\">0</span>], &amp;version[<span class=\"number\">1</span>])) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">LOGE</span>(<span class=\"string\">&quot;eglInitialize error&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//3. </span></span><br><span class=\"line\">    <span class=\"type\">const</span> EGLint attribs[] = &#123;</span><br><span class=\"line\">            EGL_RED_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">            EGL_GREEN_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">            EGL_BLUE_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">            EGL_ALPHA_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">            EGL_DEPTH_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">            EGL_STENCIL_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">            EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,</span><br><span class=\"line\">            EGL_NONE</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    EGLint num_config;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">eglChooseConfig</span>(mEglDisplay, attribs, <span class=\"literal\">NULL</span>, <span class=\"number\">1</span>, &amp;num_config)) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">LOGE</span>(<span class=\"string\">&quot;eglChooseConfig error 1&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//4. </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">eglChooseConfig</span>(mEglDisplay, attribs, &amp;mEglConfig, num_config, &amp;num_config)) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">LOGE</span>(<span class=\"string\">&quot;eglChooseConfig error 2&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//5.  EGLContext</span></span><br><span class=\"line\">    <span class=\"type\">int</span> attrib_list[] = &#123;</span><br><span class=\"line\">            EGL_CONTEXT_CLIENT_VERSION, <span class=\"number\">2</span>,</span><br><span class=\"line\">            EGL_NONE</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    mEglContext = <span class=\"built_in\">eglCreateContext</span>(mEglDisplay, mEglConfig, EGL_NO_CONTEXT, attrib_list);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglContext == EGL_NO_CONTEXT) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">LOGE</span>(<span class=\"string\">&quot;eglCreateContext error&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//6.surface</span></span><br><span class=\"line\">    mEglSurface = <span class=\"built_in\">eglCreateWindowSurface</span>(mEglDisplay, mEglConfig, win, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglSurface == EGL_NO_SURFACE) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">LOGE</span>(<span class=\"string\">&quot;eglCreateWindowSurface error&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//7.  EGLContext  Surface </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">eglMakeCurrent</span>(mEglDisplay, mEglSurface, mEglSurface, mEglContext)) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">LOGE</span>(<span class=\"string\">&quot;eglMakeCurrent error&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">LOGD</span>(<span class=\"string\">&quot;egl init success&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">EGLHelper::swapBuffers</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglDisplay != EGL_NO_DISPLAY &amp;&amp; mEglSurface != EGL_NO_SURFACE) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">eglSwapBuffers</span>(mEglDisplay, mEglSurface)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">EGLHelper::destoryEgl</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglDisplay != EGL_NO_DISPLAY) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">eglMakeCurrent</span>(mEglDisplay, EGL_NO_SURFACE, EGL_NO_SURFACE, EGL_NO_CONTEXT);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglDisplay != EGL_NO_DISPLAY &amp;&amp; mEglSurface != EGL_NO_SURFACE) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">eglDestroySurface</span>(mEglDisplay, mEglSurface);</span><br><span class=\"line\">        mEglSurface = EGL_NO_SURFACE;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglDisplay != EGL_NO_DISPLAY &amp;&amp; mEglContext != EGL_NO_CONTEXT) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">eglDestroyContext</span>(mEglDisplay, mEglContext);</span><br><span class=\"line\">        mEglContext = EGL_NO_CONTEXT;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglDisplay != EGL_NO_DISPLAY) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">eglTerminate</span>(mEglDisplay);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>c++CMakeLists lib</p>\n</blockquote>\n<p>OK EGL  Activity  EGL </p>\n<p> <code>NativeOpengl</code>  c++ </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zql.zqlplayer.opengl</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.view.Surface</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *    <span class=\"doctag\">@author</span>  2020/3/29</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">NativeOpengl</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">external</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">surfaceCreate</span><span class=\"params\">(surface: <span class=\"type\">Surface</span>)</span></span>: <span class=\"built_in\">Unit</span></span><br><span class=\"line\">    <span class=\"keyword\">external</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">surfaceDestory</span><span class=\"params\">()</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> jni </p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;jni.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;string&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;log/ZqlPlayerLog.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;egl/EGLHelper.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;android/native_window.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;android/native_window_jni.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;GLES2/gl2.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">EGLHelper *eglHelper = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">ANativeWindow *nativeWindow = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"string\">&quot;C&quot;</span></span><br><span class=\"line\"><span class=\"function\">JNIEXPORT <span class=\"type\">void</span> JNICALL</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">Java_com_zql_zqlplayer_opengl_NativeOpengl_surfaceCreate</span><span class=\"params\">(JNIEnv *env, jobject thiz,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                                                         jobject surface)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//java  SurfaceView  surface  NativeWindow</span></span><br><span class=\"line\">    nativeWindow = <span class=\"built_in\">ANativeWindow_fromSurface</span>(env, surface);</span><br><span class=\"line\">    eglHelper = <span class=\"keyword\">new</span> <span class=\"built_in\">EGLHelper</span>();</span><br><span class=\"line\">    eglHelper-&gt;<span class=\"built_in\">initEGL</span>(nativeWindow);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//opengl </span></span><br><span class=\"line\">    <span class=\"built_in\">glViewport</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">720</span>, <span class=\"number\">1280</span>);</span><br><span class=\"line\">    <span class=\"built_in\">glClearColor</span>(<span class=\"number\">0.0F</span>, <span class=\"number\">1.0F</span>, <span class=\"number\">0.0F</span>, <span class=\"number\">1.0F</span>);</span><br><span class=\"line\">    <span class=\"built_in\">glClear</span>(GL_COLOR_BUFFER_BIT);</span><br><span class=\"line\"></span><br><span class=\"line\">    eglHelper-&gt;<span class=\"built_in\">swapBuffers</span>();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"string\">&quot;C&quot;</span></span><br><span class=\"line\"><span class=\"function\">JNIEXPORT <span class=\"type\">void</span> JNICALL</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">Java_com_zql_zqlplayer_opengl_NativeOpengl_surfaceDestory</span><span class=\"params\">(JNIEnv *env, jobject thiz)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//java  SurfaceView </span></span><br><span class=\"line\">    eglHelper-&gt;<span class=\"built_in\">destoryEgl</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<p> SurfaceView</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zql.zqlplayer.test</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.content.Context</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.util.AttributeSet</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.view.SurfaceHolder</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.view.SurfaceView</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.zql.zqlplayer.opengl.NativeOpengl</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *    <span class=\"doctag\">@author</span>  2020/3/29</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">EglTestSurfaceView</span> : <span class=\"type\">SurfaceView</span>, <span class=\"type\">SurfaceHolder.Callback</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> nativeOpengl: NativeOpengl? = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>(context: Context) : <span class=\"keyword\">super</span>(context) &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>(context: Context, attributeSet: AttributeSet) : <span class=\"keyword\">super</span>(context, attributeSet) &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>(context: Context, attributeSet: AttributeSet, defStyleAttr: <span class=\"built_in\">Int</span>) : <span class=\"keyword\">super</span>(</span><br><span class=\"line\">        context,</span><br><span class=\"line\">        attributeSet,</span><br><span class=\"line\">        defStyleAttr</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">init</span> &#123;</span><br><span class=\"line\">        holder.addCallback(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">surfaceChanged</span><span class=\"params\">(holder: <span class=\"type\">SurfaceHolder</span>?, format: <span class=\"type\">Int</span>, width: <span class=\"type\">Int</span>, height: <span class=\"type\">Int</span>)</span></span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">surfaceDestroyed</span><span class=\"params\">(holder: <span class=\"type\">SurfaceHolder</span>?)</span></span> &#123;</span><br><span class=\"line\">        nativeOpengl?.surfaceDestory()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">surfaceCreated</span><span class=\"params\">(holder: <span class=\"type\">SurfaceHolder</span>?)</span></span> &#123;</span><br><span class=\"line\">        holder?.surface?.let &#123;</span><br><span class=\"line\">            nativeOpengl?.surfaceCreate(it)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> Activity</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zql.zqlplayer.test</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.os.Bundle</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.support.v7.app.AppCompatActivity</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.zql.zqlplayer.R</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.zql.zqlplayer.opengl.NativeOpengl</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> kotlinx.android.synthetic.main.activity_e_g_l_test.*</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">EGLTestActivity</span> : <span class=\"type\">AppCompatActivity</span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> nativeOpengl = NativeOpengl()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">        setContentView(R.layout.activity_e_g_l_test)</span><br><span class=\"line\">        surface_view.nativeOpengl = nativeOpengl</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/Screenshot_2020-03-30-23-18-28-597_com.zql.zqlplayer.jpg\" alt=\"\"></p>\n","excerpt":"<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/egl-init-progress.PNG\" alt=\"\"></p>\n<p>EGL</p>\n<p> <code>ZqlPlayerLog.h</code> </p>","more":"<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">// Created by zqlxt on 2020/3/29.</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">ifndef</span> ZQLPLAYER_ZQLPLAYERLOG_H</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> ZQLPLAYER_ZQLPLAYERLOG_H</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;android/log.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LOGD(FORMAT, ...) __android_log_print(ANDROID_LOG_DEBUG,<span class=\"string\">&quot;scott&quot;</span>,FORMAT, ##__VA_ARGS__);</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LOGE(FORMAT, ...) __android_log_print(ANDROID_LOG_ERROR,<span class=\"string\">&quot;scott&quot;</span>,FORMAT, ##__VA_ARGS__);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">endif</span> <span class=\"comment\">//ZQLPLAYER_ZQLPLAYERLOG_H</span></span></span><br></pre></td></tr></table></figure>\n\n\n<p> <code>cpp</code>  <code>egl</code>  EGL </p>\n<p> <code>EGLHelper.h</code> :</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">// Created by zqlxt on 2020/3/29.</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">ifndef</span> ZQLPLAYER_EGLHELPER_H</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> ZQLPLAYER_EGLHELPER_H</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;EGL/egl.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">EGLHelper</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    EGLDisplay mEglDisplay;</span><br><span class=\"line\">    EGLSurface mEglSurface;</span><br><span class=\"line\">    EGLConfig mEglConfig;</span><br><span class=\"line\">    EGLContext mEglContext;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">EGLHelper</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    ~<span class=\"built_in\">EGLHelper</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// EGL</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">initEGL</span><span class=\"params\">(EGLNativeWindowType win)</span></span>;</span><br><span class=\"line\">    <span class=\"comment\">// surface  display </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">swapBuffers</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"comment\">// EGL</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">destoryEgl</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">endif</span> <span class=\"comment\">//ZQLPLAYER_EGLHELPER_H</span></span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> <code>EGLHelper.cpp</code> </p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">// Created by zqlxt on 2020/3/29.</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;EGLHelper.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;../log/ZqlPlayerLog.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">EGLHelper::<span class=\"built_in\">EGLHelper</span>() &#123;</span><br><span class=\"line\">    mEglDisplay = EGL_NO_DISPLAY;</span><br><span class=\"line\">    mEglSurface = EGL_NO_SURFACE;</span><br><span class=\"line\">    mEglContext = EGL_NO_CONTEXT;</span><br><span class=\"line\">    mEglConfig = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">EGLHelper::~<span class=\"built_in\">EGLHelper</span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">EGLHelper::initEGL</span><span class=\"params\">(EGLNativeWindowType win)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//1. </span></span><br><span class=\"line\">    mEglDisplay = <span class=\"built_in\">eglGetDisplay</span>(EGL_DEFAULT_DISPLAY);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglDisplay == EGL_NO_DISPLAY) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">LOGE</span>(<span class=\"string\">&quot;eglGetDisplay error&quot;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//2. </span></span><br><span class=\"line\">    EGLint *version = <span class=\"keyword\">new</span> EGLint[<span class=\"number\">2</span>];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">eglInitialize</span>(mEglDisplay, &amp;version[<span class=\"number\">0</span>], &amp;version[<span class=\"number\">1</span>])) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">LOGE</span>(<span class=\"string\">&quot;eglInitialize error&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//3. </span></span><br><span class=\"line\">    <span class=\"type\">const</span> EGLint attribs[] = &#123;</span><br><span class=\"line\">            EGL_RED_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">            EGL_GREEN_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">            EGL_BLUE_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">            EGL_ALPHA_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">            EGL_DEPTH_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">            EGL_STENCIL_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">            EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,</span><br><span class=\"line\">            EGL_NONE</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    EGLint num_config;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">eglChooseConfig</span>(mEglDisplay, attribs, <span class=\"literal\">NULL</span>, <span class=\"number\">1</span>, &amp;num_config)) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">LOGE</span>(<span class=\"string\">&quot;eglChooseConfig error 1&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//4. </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">eglChooseConfig</span>(mEglDisplay, attribs, &amp;mEglConfig, num_config, &amp;num_config)) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">LOGE</span>(<span class=\"string\">&quot;eglChooseConfig error 2&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//5.  EGLContext</span></span><br><span class=\"line\">    <span class=\"type\">int</span> attrib_list[] = &#123;</span><br><span class=\"line\">            EGL_CONTEXT_CLIENT_VERSION, <span class=\"number\">2</span>,</span><br><span class=\"line\">            EGL_NONE</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    mEglContext = <span class=\"built_in\">eglCreateContext</span>(mEglDisplay, mEglConfig, EGL_NO_CONTEXT, attrib_list);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglContext == EGL_NO_CONTEXT) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">LOGE</span>(<span class=\"string\">&quot;eglCreateContext error&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//6.surface</span></span><br><span class=\"line\">    mEglSurface = <span class=\"built_in\">eglCreateWindowSurface</span>(mEglDisplay, mEglConfig, win, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglSurface == EGL_NO_SURFACE) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">LOGE</span>(<span class=\"string\">&quot;eglCreateWindowSurface error&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//7.  EGLContext  Surface </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">eglMakeCurrent</span>(mEglDisplay, mEglSurface, mEglSurface, mEglContext)) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">LOGE</span>(<span class=\"string\">&quot;eglMakeCurrent error&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">LOGD</span>(<span class=\"string\">&quot;egl init success&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">EGLHelper::swapBuffers</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglDisplay != EGL_NO_DISPLAY &amp;&amp; mEglSurface != EGL_NO_SURFACE) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">eglSwapBuffers</span>(mEglDisplay, mEglSurface)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">EGLHelper::destoryEgl</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglDisplay != EGL_NO_DISPLAY) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">eglMakeCurrent</span>(mEglDisplay, EGL_NO_SURFACE, EGL_NO_SURFACE, EGL_NO_CONTEXT);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglDisplay != EGL_NO_DISPLAY &amp;&amp; mEglSurface != EGL_NO_SURFACE) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">eglDestroySurface</span>(mEglDisplay, mEglSurface);</span><br><span class=\"line\">        mEglSurface = EGL_NO_SURFACE;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglDisplay != EGL_NO_DISPLAY &amp;&amp; mEglContext != EGL_NO_CONTEXT) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">eglDestroyContext</span>(mEglDisplay, mEglContext);</span><br><span class=\"line\">        mEglContext = EGL_NO_CONTEXT;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mEglDisplay != EGL_NO_DISPLAY) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">eglTerminate</span>(mEglDisplay);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>c++CMakeLists lib</p>\n</blockquote>\n<p>OK EGL  Activity  EGL </p>\n<p> <code>NativeOpengl</code>  c++ </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zql.zqlplayer.opengl</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.view.Surface</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *    <span class=\"doctag\">@author</span>  2020/3/29</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">NativeOpengl</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">external</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">surfaceCreate</span><span class=\"params\">(surface: <span class=\"type\">Surface</span>)</span></span>: <span class=\"built_in\">Unit</span></span><br><span class=\"line\">    <span class=\"keyword\">external</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">surfaceDestory</span><span class=\"params\">()</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> jni </p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;jni.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;string&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;log/ZqlPlayerLog.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;egl/EGLHelper.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;android/native_window.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;android/native_window_jni.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;GLES2/gl2.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">EGLHelper *eglHelper = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">ANativeWindow *nativeWindow = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"string\">&quot;C&quot;</span></span><br><span class=\"line\"><span class=\"function\">JNIEXPORT <span class=\"type\">void</span> JNICALL</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">Java_com_zql_zqlplayer_opengl_NativeOpengl_surfaceCreate</span><span class=\"params\">(JNIEnv *env, jobject thiz,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                                                         jobject surface)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//java  SurfaceView  surface  NativeWindow</span></span><br><span class=\"line\">    nativeWindow = <span class=\"built_in\">ANativeWindow_fromSurface</span>(env, surface);</span><br><span class=\"line\">    eglHelper = <span class=\"keyword\">new</span> <span class=\"built_in\">EGLHelper</span>();</span><br><span class=\"line\">    eglHelper-&gt;<span class=\"built_in\">initEGL</span>(nativeWindow);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//opengl </span></span><br><span class=\"line\">    <span class=\"built_in\">glViewport</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">720</span>, <span class=\"number\">1280</span>);</span><br><span class=\"line\">    <span class=\"built_in\">glClearColor</span>(<span class=\"number\">0.0F</span>, <span class=\"number\">1.0F</span>, <span class=\"number\">0.0F</span>, <span class=\"number\">1.0F</span>);</span><br><span class=\"line\">    <span class=\"built_in\">glClear</span>(GL_COLOR_BUFFER_BIT);</span><br><span class=\"line\"></span><br><span class=\"line\">    eglHelper-&gt;<span class=\"built_in\">swapBuffers</span>();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"string\">&quot;C&quot;</span></span><br><span class=\"line\"><span class=\"function\">JNIEXPORT <span class=\"type\">void</span> JNICALL</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">Java_com_zql_zqlplayer_opengl_NativeOpengl_surfaceDestory</span><span class=\"params\">(JNIEnv *env, jobject thiz)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//java  SurfaceView </span></span><br><span class=\"line\">    eglHelper-&gt;<span class=\"built_in\">destoryEgl</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<p> SurfaceView</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zql.zqlplayer.test</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.content.Context</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.util.AttributeSet</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.view.SurfaceHolder</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.view.SurfaceView</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.zql.zqlplayer.opengl.NativeOpengl</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *    <span class=\"doctag\">@author</span>  2020/3/29</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">EglTestSurfaceView</span> : <span class=\"type\">SurfaceView</span>, <span class=\"type\">SurfaceHolder.Callback</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> nativeOpengl: NativeOpengl? = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>(context: Context) : <span class=\"keyword\">super</span>(context) &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>(context: Context, attributeSet: AttributeSet) : <span class=\"keyword\">super</span>(context, attributeSet) &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>(context: Context, attributeSet: AttributeSet, defStyleAttr: <span class=\"built_in\">Int</span>) : <span class=\"keyword\">super</span>(</span><br><span class=\"line\">        context,</span><br><span class=\"line\">        attributeSet,</span><br><span class=\"line\">        defStyleAttr</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">init</span> &#123;</span><br><span class=\"line\">        holder.addCallback(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">surfaceChanged</span><span class=\"params\">(holder: <span class=\"type\">SurfaceHolder</span>?, format: <span class=\"type\">Int</span>, width: <span class=\"type\">Int</span>, height: <span class=\"type\">Int</span>)</span></span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">surfaceDestroyed</span><span class=\"params\">(holder: <span class=\"type\">SurfaceHolder</span>?)</span></span> &#123;</span><br><span class=\"line\">        nativeOpengl?.surfaceDestory()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">surfaceCreated</span><span class=\"params\">(holder: <span class=\"type\">SurfaceHolder</span>?)</span></span> &#123;</span><br><span class=\"line\">        holder?.surface?.let &#123;</span><br><span class=\"line\">            nativeOpengl?.surfaceCreate(it)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> Activity</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zql.zqlplayer.test</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.os.Bundle</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.support.v7.app.AppCompatActivity</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.zql.zqlplayer.R</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.zql.zqlplayer.opengl.NativeOpengl</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> kotlinx.android.synthetic.main.activity_e_g_l_test.*</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">EGLTestActivity</span> : <span class=\"type\">AppCompatActivity</span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> nativeOpengl = NativeOpengl()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">        setContentView(R.layout.activity_e_g_l_test)</span><br><span class=\"line\">        surface_view.nativeOpengl = nativeOpengl</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/Screenshot_2020-03-30-23-18-28-597_com.zql.zqlplayer.jpg\" alt=\"\"></p>"},{"title":"Android OpenGL ES  2 - Android  EGL  OpenGL ES ","date":"2021-01-21T14:01:20.000Z","_content":"#  EGL\n\n [EGL](https://www.khronos.org/egl)  EGL \n\n> EGL is an interface between Khronos rendering APIs such as OpenGL ES or OpenVG and the underlying native platform window system. It handles graphics context management, surface/buffer binding, and rendering synchronization and enables high-performance, accelerated, mixed-mode 2D and 3D rendering using other Khronos APIs. EGL also provides interop capability between Khronos to enable efficient transfer of data between APIs  for example between a video subsystem running OpenMAX AL and a GPU running OpenGL ES.\n\n EGL  OpenGL ES EGL OpenGL ES  EGLEGL \n\n OpenGL ES  EGL  EGL \n\n<!-- more -->\n\n# EGL \n\n[EGL ](https://www.khronos.org/registry/EGL/sdk/docs/man/) c  EGL \n\n```c\n#include <stdlib.h>\n#include <unistd.h>\n#include <EGL/egl.h>\n#include <GLES/gl.h>\ntypedef ... NativeWindowType;\nextern NativeWindowType createNativeWindow(void);\nstatic EGLint const attribute_list[] = {\n        EGL_RED_SIZE, 1,\n        EGL_GREEN_SIZE, 1,\n        EGL_BLUE_SIZE, 1,\n        EGL_NONE\n};\nint main(int argc, char ** argv)\n{\n        EGLDisplay display;\n        EGLConfig config;\n        EGLContext context;\n        EGLSurface surface;\n        NativeWindowType native_window;\n        EGLint num_config;\n\n        /* get an EGL display connection */\n        display = eglGetDisplay(EGL_DEFAULT_DISPLAY);\n\n        /* initialize the EGL display connection */\n        eglInitialize(display, NULL, NULL);\n\n        /* get an appropriate EGL frame buffer configuration */\n        eglChooseConfig(display, attribute_list, &config, 1, &num_config);\n\n        /* create an EGL rendering context */\n        context = eglCreateContext(display, config, EGL_NO_CONTEXT, NULL);\n\n        /* create a native window */\n        native_window = createNativeWindow();\n\n        /* create an EGL window surface */\n        surface = eglCreateWindowSurface(display, config, native_window, NULL);\n\n        /* connect the context to the surface */\n        eglMakeCurrent(display, surface, surface, context);\n\n        /* clear the color buffer */\n        glClearColor(1.0, 1.0, 0.0, 1.0);\n        glClear(GL_COLOR_BUFFER_BIT);\n        glFlush();\n\n        eglSwapBuffers(display, surface);\n\n        sleep(10);\n        return EXIT_SUCCESS;\n}\n```\n\n Android  NDK  EGL  Android NDK  NDK  Android  EGL  java  C  java  EGL  EGL \n\n SurfaceView\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".opengl.OpenGLES_EGLActivity\">\n    <SurfaceView\n        android:id=\"@+id/surface_view\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"0dp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n```java\npublic class OpenGLES_EGLActivity extends AppCompatActivity implements SurfaceHolder.Callback {\n\n    private EGLDisplay mEGLDisplay;\n    private EGLContext mEGLContext;\n    private EGLSurface mEGLSurface;\n    private EGLConfig mEGLConfig;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_open_g_l_e_s__e_g_l);\n        SurfaceView sv = findViewById(R.id.surface_view);\n        sv.getHolder().addCallback(this);\n    }\n\n    @Override\n    public void surfaceCreated(SurfaceHolder holder) {}\n\n    @Override\n    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {}\n\n    @Override\n    public void surfaceDestroyed(SurfaceHolder holder) {}\n}\n\n```\n\n SurfaceView SurfaceView  SurfaceHolder \n\n EGL \n\n```java\n private void initEGL(SurfaceHolder holder) {\n        //1. get an EGL display connection\n        mEGLDisplay = EGL14.eglGetDisplay(EGL14.EGL_DEFAULT_DISPLAY);\n\n        int[] version = new int[2];\n        //2. initialize EGL display connection\n        EGL14.eglInitialize(mEGLDisplay, version, 0, version, 1);\n        \n        int[] attribList = {\n                EGL14.EGL_RED_SIZE, 8,\n                EGL14.EGL_GREEN_SIZE, 8,\n                EGL14.EGL_BLUE_SIZE, 8,\n                EGL14.EGL_ALPHA_SIZE, 8,\n                EGL14.EGL_NONE\n        };\n        EGLConfig[] configs = new EGLConfig[1];\n        int[] numConfigs = new int[1];\n        //3. get appropriate EGL frame buffer configuration\n        EGL14.eglChooseConfig(mEGLDisplay, attribList, 0, configs, 0, configs.length,\n                numConfigs, 0);\n        mEGLConfig = configs[0];\n\n        int[] attrib3_list = {\n                EGL14.EGL_CONTEXT_CLIENT_VERSION, 3,\n                EGL14.EGL_NONE\n        };\n\n        //4. create an EGL rendering context\n        mEGLContext = EGL14.eglCreateContext(mEGLDisplay, mEGLConfig, EGL14.EGL_NO_CONTEXT,\n                attrib3_list, 0);\n\n        //5. create an EGL window surface\n        int[] surfaceAttribs = {\n                EGL14.EGL_NONE\n        };\n        mEGLSurface = EGL14.eglCreateWindowSurface(mEGLDisplay, mEGLConfig, holder.getSurface(),\n                surfaceAttribs, 0);\n\n        //6. connect the context to the surface\n        EGL14.eglMakeCurrent(mEGLDisplay, mEGLSurface, mEGLSurface, mEGLContext);\n    }\n```\n\n EGL  6 \n1.  EGLDisplay  `display connection`\n2.  1  `display connection` version  `eglInitialize`  EGL  c \n3.  alpha  `eglChooseConfig` \n4.  EGLContext OpenGL ES \n5.  EGLSurface SurfaceView  EGLSurface EGL  SurfaceView EGLSurface EGLSurface  SurfaceView  Surface  SurfaceView  BufferQueue \n6.  EGL  EGLSurface  OpenGL ES \n\n 6  OpenGL ES \n\n SurfaceHolder  `surfaceCreated`  `initEGL` OpenGL ES \n\n```java\n@Override\n    public void surfaceCreated(SurfaceHolder holder) {\n        initEGL(holder);\n        GLES32.glClearColor(1.0F, 0F, 0F, 1F);\n    }\n```\n\n `surfaceChanged`  OpenGL ES  EGLSurface  `EGL14.eglSwapBuffers` \n```java\n    @Override\n    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {\n        GLES32.glViewport(0, 0, width, height);\n        GLES32.glClear(GLES32.GL_COLOR_BUFFER_BIT);\n        EGL14.eglSwapBuffers(mEGLDisplay, mEGLSurface);\n    }\n```\n\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/glsurfaceview01.jpeg)\n\n EGL  Android Java  EGL  OpenGL ES ","source":"_posts/android-opengl-es-and-EGL.md","raw":"---\ntitle: Android OpenGL ES  2 - Android  EGL  OpenGL ES \ndate: 2021-01-21 22:01:20\ntags:\n  - android\n  - OpenGL ES\n  - EGL \n---\n#  EGL\n\n [EGL](https://www.khronos.org/egl)  EGL \n\n> EGL is an interface between Khronos rendering APIs such as OpenGL ES or OpenVG and the underlying native platform window system. It handles graphics context management, surface/buffer binding, and rendering synchronization and enables high-performance, accelerated, mixed-mode 2D and 3D rendering using other Khronos APIs. EGL also provides interop capability between Khronos to enable efficient transfer of data between APIs  for example between a video subsystem running OpenMAX AL and a GPU running OpenGL ES.\n\n EGL  OpenGL ES EGL OpenGL ES  EGLEGL \n\n OpenGL ES  EGL  EGL \n\n<!-- more -->\n\n# EGL \n\n[EGL ](https://www.khronos.org/registry/EGL/sdk/docs/man/) c  EGL \n\n```c\n#include <stdlib.h>\n#include <unistd.h>\n#include <EGL/egl.h>\n#include <GLES/gl.h>\ntypedef ... NativeWindowType;\nextern NativeWindowType createNativeWindow(void);\nstatic EGLint const attribute_list[] = {\n        EGL_RED_SIZE, 1,\n        EGL_GREEN_SIZE, 1,\n        EGL_BLUE_SIZE, 1,\n        EGL_NONE\n};\nint main(int argc, char ** argv)\n{\n        EGLDisplay display;\n        EGLConfig config;\n        EGLContext context;\n        EGLSurface surface;\n        NativeWindowType native_window;\n        EGLint num_config;\n\n        /* get an EGL display connection */\n        display = eglGetDisplay(EGL_DEFAULT_DISPLAY);\n\n        /* initialize the EGL display connection */\n        eglInitialize(display, NULL, NULL);\n\n        /* get an appropriate EGL frame buffer configuration */\n        eglChooseConfig(display, attribute_list, &config, 1, &num_config);\n\n        /* create an EGL rendering context */\n        context = eglCreateContext(display, config, EGL_NO_CONTEXT, NULL);\n\n        /* create a native window */\n        native_window = createNativeWindow();\n\n        /* create an EGL window surface */\n        surface = eglCreateWindowSurface(display, config, native_window, NULL);\n\n        /* connect the context to the surface */\n        eglMakeCurrent(display, surface, surface, context);\n\n        /* clear the color buffer */\n        glClearColor(1.0, 1.0, 0.0, 1.0);\n        glClear(GL_COLOR_BUFFER_BIT);\n        glFlush();\n\n        eglSwapBuffers(display, surface);\n\n        sleep(10);\n        return EXIT_SUCCESS;\n}\n```\n\n Android  NDK  EGL  Android NDK  NDK  Android  EGL  java  C  java  EGL  EGL \n\n SurfaceView\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".opengl.OpenGLES_EGLActivity\">\n    <SurfaceView\n        android:id=\"@+id/surface_view\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"0dp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n```java\npublic class OpenGLES_EGLActivity extends AppCompatActivity implements SurfaceHolder.Callback {\n\n    private EGLDisplay mEGLDisplay;\n    private EGLContext mEGLContext;\n    private EGLSurface mEGLSurface;\n    private EGLConfig mEGLConfig;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_open_g_l_e_s__e_g_l);\n        SurfaceView sv = findViewById(R.id.surface_view);\n        sv.getHolder().addCallback(this);\n    }\n\n    @Override\n    public void surfaceCreated(SurfaceHolder holder) {}\n\n    @Override\n    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {}\n\n    @Override\n    public void surfaceDestroyed(SurfaceHolder holder) {}\n}\n\n```\n\n SurfaceView SurfaceView  SurfaceHolder \n\n EGL \n\n```java\n private void initEGL(SurfaceHolder holder) {\n        //1. get an EGL display connection\n        mEGLDisplay = EGL14.eglGetDisplay(EGL14.EGL_DEFAULT_DISPLAY);\n\n        int[] version = new int[2];\n        //2. initialize EGL display connection\n        EGL14.eglInitialize(mEGLDisplay, version, 0, version, 1);\n        \n        int[] attribList = {\n                EGL14.EGL_RED_SIZE, 8,\n                EGL14.EGL_GREEN_SIZE, 8,\n                EGL14.EGL_BLUE_SIZE, 8,\n                EGL14.EGL_ALPHA_SIZE, 8,\n                EGL14.EGL_NONE\n        };\n        EGLConfig[] configs = new EGLConfig[1];\n        int[] numConfigs = new int[1];\n        //3. get appropriate EGL frame buffer configuration\n        EGL14.eglChooseConfig(mEGLDisplay, attribList, 0, configs, 0, configs.length,\n                numConfigs, 0);\n        mEGLConfig = configs[0];\n\n        int[] attrib3_list = {\n                EGL14.EGL_CONTEXT_CLIENT_VERSION, 3,\n                EGL14.EGL_NONE\n        };\n\n        //4. create an EGL rendering context\n        mEGLContext = EGL14.eglCreateContext(mEGLDisplay, mEGLConfig, EGL14.EGL_NO_CONTEXT,\n                attrib3_list, 0);\n\n        //5. create an EGL window surface\n        int[] surfaceAttribs = {\n                EGL14.EGL_NONE\n        };\n        mEGLSurface = EGL14.eglCreateWindowSurface(mEGLDisplay, mEGLConfig, holder.getSurface(),\n                surfaceAttribs, 0);\n\n        //6. connect the context to the surface\n        EGL14.eglMakeCurrent(mEGLDisplay, mEGLSurface, mEGLSurface, mEGLContext);\n    }\n```\n\n EGL  6 \n1.  EGLDisplay  `display connection`\n2.  1  `display connection` version  `eglInitialize`  EGL  c \n3.  alpha  `eglChooseConfig` \n4.  EGLContext OpenGL ES \n5.  EGLSurface SurfaceView  EGLSurface EGL  SurfaceView EGLSurface EGLSurface  SurfaceView  Surface  SurfaceView  BufferQueue \n6.  EGL  EGLSurface  OpenGL ES \n\n 6  OpenGL ES \n\n SurfaceHolder  `surfaceCreated`  `initEGL` OpenGL ES \n\n```java\n@Override\n    public void surfaceCreated(SurfaceHolder holder) {\n        initEGL(holder);\n        GLES32.glClearColor(1.0F, 0F, 0F, 1F);\n    }\n```\n\n `surfaceChanged`  OpenGL ES  EGLSurface  `EGL14.eglSwapBuffers` \n```java\n    @Override\n    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {\n        GLES32.glViewport(0, 0, width, height);\n        GLES32.glClear(GLES32.GL_COLOR_BUFFER_BIT);\n        EGL14.eglSwapBuffers(mEGLDisplay, mEGLSurface);\n    }\n```\n\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/glsurfaceview01.jpeg)\n\n EGL  Android Java  EGL  OpenGL ES ","slug":"android-opengl-es-and-EGL","published":1,"updated":"2024-08-21T03:16:19.782Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vq000m5p6t0dgcfd9f","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"-EGL\"><a href=\"#-EGL\" class=\"headerlink\" title=\" EGL\"></a> EGL</h1><p> <a href=\"https://www.khronos.org/egl\">EGL</a>  EGL </p>\n<blockquote>\n<p>EGL is an interface between Khronos rendering APIs such as OpenGL ES or OpenVG and the underlying native platform window system. It handles graphics context management, surface/buffer binding, and rendering synchronization and enables high-performance, accelerated, mixed-mode 2D and 3D rendering using other Khronos APIs. EGL also provides interop capability between Khronos to enable efficient transfer of data between APIs  for example between a video subsystem running OpenMAX AL and a GPU running OpenGL ES.</p>\n</blockquote>\n<p> EGL  OpenGL ES EGL OpenGL ES  EGLEGL </p>\n<p> OpenGL ES  EGL  EGL </p>\n<span id=\"more\"></span>\n\n<h1 id=\"EGL-\"><a href=\"#EGL-\" class=\"headerlink\" title=\"EGL \"></a>EGL </h1><p><a href=\"https://www.khronos.org/registry/EGL/sdk/docs/man/\">EGL </a> c  EGL </p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;unistd.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;EGL/egl.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;GLES/gl.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> ... NativeWindowType;</span><br><span class=\"line\"><span class=\"keyword\">extern</span> NativeWindowType <span class=\"title function_\">createNativeWindow</span><span class=\"params\">(<span class=\"type\">void</span>)</span>;</span><br><span class=\"line\"><span class=\"type\">static</span> EGLint <span class=\"type\">const</span> attribute_list[] = &#123;</span><br><span class=\"line\">        EGL_RED_SIZE, <span class=\"number\">1</span>,</span><br><span class=\"line\">        EGL_GREEN_SIZE, <span class=\"number\">1</span>,</span><br><span class=\"line\">        EGL_BLUE_SIZE, <span class=\"number\">1</span>,</span><br><span class=\"line\">        EGL_NONE</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">(<span class=\"type\">int</span> argc, <span class=\"type\">char</span> ** argv)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        EGLDisplay display;</span><br><span class=\"line\">        EGLConfig config;</span><br><span class=\"line\">        EGLContext context;</span><br><span class=\"line\">        EGLSurface surface;</span><br><span class=\"line\">        NativeWindowType native_window;</span><br><span class=\"line\">        EGLint num_config;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* get an EGL display connection */</span></span><br><span class=\"line\">        display = eglGetDisplay(EGL_DEFAULT_DISPLAY);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* initialize the EGL display connection */</span></span><br><span class=\"line\">        eglInitialize(display, <span class=\"literal\">NULL</span>, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* get an appropriate EGL frame buffer configuration */</span></span><br><span class=\"line\">        eglChooseConfig(display, attribute_list, &amp;config, <span class=\"number\">1</span>, &amp;num_config);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* create an EGL rendering context */</span></span><br><span class=\"line\">        context = eglCreateContext(display, config, EGL_NO_CONTEXT, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* create a native window */</span></span><br><span class=\"line\">        native_window = createNativeWindow();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* create an EGL window surface */</span></span><br><span class=\"line\">        surface = eglCreateWindowSurface(display, config, native_window, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* connect the context to the surface */</span></span><br><span class=\"line\">        eglMakeCurrent(display, surface, surface, context);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* clear the color buffer */</span></span><br><span class=\"line\">        glClearColor(<span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</span><br><span class=\"line\">        glClear(GL_COLOR_BUFFER_BIT);</span><br><span class=\"line\">        glFlush();</span><br><span class=\"line\"></span><br><span class=\"line\">        eglSwapBuffers(display, surface);</span><br><span class=\"line\"></span><br><span class=\"line\">        sleep(<span class=\"number\">10</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> EXIT_SUCCESS;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> Android  NDK  EGL  Android NDK  NDK  Android  EGL  java  C  java  EGL  EGL </p>\n<p> SurfaceView</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">tools:context</span>=<span class=\"string\">&quot;.opengl.OpenGLES_EGLActivity&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">SurfaceView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/surface_view&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintBottom_toBottomOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">OpenGLES_EGLActivity</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">AppCompatActivity</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">SurfaceHolder</span>.Callback &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLDisplay mEGLDisplay;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLContext mEGLContext;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLSurface mEGLSurface;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLConfig mEGLConfig;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">        setContentView(R.layout.activity_open_g_l_e_s__e_g_l);</span><br><span class=\"line\">        <span class=\"type\">SurfaceView</span> <span class=\"variable\">sv</span> <span class=\"operator\">=</span> findViewById(R.id.surface_view);</span><br><span class=\"line\">        sv.getHolder().addCallback(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceCreated</span><span class=\"params\">(SurfaceHolder holder)</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceChanged</span><span class=\"params\">(SurfaceHolder holder, <span class=\"type\">int</span> format, <span class=\"type\">int</span> width, <span class=\"type\">int</span> height)</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceDestroyed</span><span class=\"params\">(SurfaceHolder holder)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> SurfaceView SurfaceView  SurfaceHolder </p>\n<p> EGL </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">initEGL</span><span class=\"params\">(SurfaceHolder holder)</span> &#123;</span><br><span class=\"line\">       <span class=\"comment\">//1. get an EGL display connection</span></span><br><span class=\"line\">       mEGLDisplay = EGL14.eglGetDisplay(EGL14.EGL_DEFAULT_DISPLAY);</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"type\">int</span>[] version = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">2</span>];</span><br><span class=\"line\">       <span class=\"comment\">//2. initialize EGL display connection</span></span><br><span class=\"line\">       EGL14.eglInitialize(mEGLDisplay, version, <span class=\"number\">0</span>, version, <span class=\"number\">1</span>);</span><br><span class=\"line\">       </span><br><span class=\"line\">       <span class=\"type\">int</span>[] attribList = &#123;</span><br><span class=\"line\">               EGL14.EGL_RED_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">               EGL14.EGL_GREEN_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">               EGL14.EGL_BLUE_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">               EGL14.EGL_ALPHA_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">               EGL14.EGL_NONE</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">       EGLConfig[] configs = <span class=\"keyword\">new</span> <span class=\"title class_\">EGLConfig</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">       <span class=\"type\">int</span>[] numConfigs = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">       <span class=\"comment\">//3. get appropriate EGL frame buffer configuration</span></span><br><span class=\"line\">       EGL14.eglChooseConfig(mEGLDisplay, attribList, <span class=\"number\">0</span>, configs, <span class=\"number\">0</span>, configs.length,</span><br><span class=\"line\">               numConfigs, <span class=\"number\">0</span>);</span><br><span class=\"line\">       mEGLConfig = configs[<span class=\"number\">0</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"type\">int</span>[] attrib3_list = &#123;</span><br><span class=\"line\">               EGL14.EGL_CONTEXT_CLIENT_VERSION, <span class=\"number\">3</span>,</span><br><span class=\"line\">               EGL14.EGL_NONE</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//4. create an EGL rendering context</span></span><br><span class=\"line\">       mEGLContext = EGL14.eglCreateContext(mEGLDisplay, mEGLConfig, EGL14.EGL_NO_CONTEXT,</span><br><span class=\"line\">               attrib3_list, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//5. create an EGL window surface</span></span><br><span class=\"line\">       <span class=\"type\">int</span>[] surfaceAttribs = &#123;</span><br><span class=\"line\">               EGL14.EGL_NONE</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">       mEGLSurface = EGL14.eglCreateWindowSurface(mEGLDisplay, mEGLConfig, holder.getSurface(),</span><br><span class=\"line\">               surfaceAttribs, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//6. connect the context to the surface</span></span><br><span class=\"line\">       EGL14.eglMakeCurrent(mEGLDisplay, mEGLSurface, mEGLSurface, mEGLContext);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<p> EGL  6 </p>\n<ol>\n<li> EGLDisplay  <code>display connection</code></li>\n<li> 1  <code>display connection</code> version  <code>eglInitialize</code>  EGL  c </li>\n<li> alpha  <code>eglChooseConfig</code> </li>\n<li> EGLContext OpenGL ES </li>\n<li> EGLSurface SurfaceView  EGLSurface EGL  SurfaceView EGLSurface EGLSurface  SurfaceView  Surface  SurfaceView  BufferQueue </li>\n<li> EGL  EGLSurface  OpenGL ES </li>\n</ol>\n<p> 6  OpenGL ES </p>\n<p> SurfaceHolder  <code>surfaceCreated</code>  <code>initEGL</code> OpenGL ES </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceCreated</span><span class=\"params\">(SurfaceHolder holder)</span> &#123;</span><br><span class=\"line\">        initEGL(holder);</span><br><span class=\"line\">        GLES32.glClearColor(<span class=\"number\">1.0F</span>, <span class=\"number\">0F</span>, <span class=\"number\">0F</span>, <span class=\"number\">1F</span>);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>surfaceChanged</code>  OpenGL ES  EGLSurface  <code>EGL14.eglSwapBuffers</code> </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceChanged</span><span class=\"params\">(SurfaceHolder holder, <span class=\"type\">int</span> format, <span class=\"type\">int</span> width, <span class=\"type\">int</span> height)</span> &#123;</span><br><span class=\"line\">    GLES32.glViewport(<span class=\"number\">0</span>, <span class=\"number\">0</span>, width, height);</span><br><span class=\"line\">    GLES32.glClear(GLES32.GL_COLOR_BUFFER_BIT);</span><br><span class=\"line\">    EGL14.eglSwapBuffers(mEGLDisplay, mEGLSurface);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/glsurfaceview01.jpeg\" alt=\"\"></p>\n<p> EGL  Android Java  EGL  OpenGL ES </p>\n","excerpt":"<h1 id=\"-EGL\"><a href=\"#-EGL\" class=\"headerlink\" title=\" EGL\"></a> EGL</h1><p> <a href=\"https://www.khronos.org/egl\">EGL</a>  EGL </p>\n<blockquote>\n<p>EGL is an interface between Khronos rendering APIs such as OpenGL ES or OpenVG and the underlying native platform window system. It handles graphics context management, surface/buffer binding, and rendering synchronization and enables high-performance, accelerated, mixed-mode 2D and 3D rendering using other Khronos APIs. EGL also provides interop capability between Khronos to enable efficient transfer of data between APIs  for example between a video subsystem running OpenMAX AL and a GPU running OpenGL ES.</p>\n</blockquote>\n<p> EGL  OpenGL ES EGL OpenGL ES  EGLEGL </p>\n<p> OpenGL ES  EGL  EGL </p>","more":"<h1 id=\"EGL-\"><a href=\"#EGL-\" class=\"headerlink\" title=\"EGL \"></a>EGL </h1><p><a href=\"https://www.khronos.org/registry/EGL/sdk/docs/man/\">EGL </a> c  EGL </p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;unistd.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;EGL/egl.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;GLES/gl.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> ... NativeWindowType;</span><br><span class=\"line\"><span class=\"keyword\">extern</span> NativeWindowType <span class=\"title function_\">createNativeWindow</span><span class=\"params\">(<span class=\"type\">void</span>)</span>;</span><br><span class=\"line\"><span class=\"type\">static</span> EGLint <span class=\"type\">const</span> attribute_list[] = &#123;</span><br><span class=\"line\">        EGL_RED_SIZE, <span class=\"number\">1</span>,</span><br><span class=\"line\">        EGL_GREEN_SIZE, <span class=\"number\">1</span>,</span><br><span class=\"line\">        EGL_BLUE_SIZE, <span class=\"number\">1</span>,</span><br><span class=\"line\">        EGL_NONE</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">(<span class=\"type\">int</span> argc, <span class=\"type\">char</span> ** argv)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        EGLDisplay display;</span><br><span class=\"line\">        EGLConfig config;</span><br><span class=\"line\">        EGLContext context;</span><br><span class=\"line\">        EGLSurface surface;</span><br><span class=\"line\">        NativeWindowType native_window;</span><br><span class=\"line\">        EGLint num_config;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* get an EGL display connection */</span></span><br><span class=\"line\">        display = eglGetDisplay(EGL_DEFAULT_DISPLAY);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* initialize the EGL display connection */</span></span><br><span class=\"line\">        eglInitialize(display, <span class=\"literal\">NULL</span>, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* get an appropriate EGL frame buffer configuration */</span></span><br><span class=\"line\">        eglChooseConfig(display, attribute_list, &amp;config, <span class=\"number\">1</span>, &amp;num_config);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* create an EGL rendering context */</span></span><br><span class=\"line\">        context = eglCreateContext(display, config, EGL_NO_CONTEXT, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* create a native window */</span></span><br><span class=\"line\">        native_window = createNativeWindow();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* create an EGL window surface */</span></span><br><span class=\"line\">        surface = eglCreateWindowSurface(display, config, native_window, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* connect the context to the surface */</span></span><br><span class=\"line\">        eglMakeCurrent(display, surface, surface, context);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* clear the color buffer */</span></span><br><span class=\"line\">        glClearColor(<span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">1.0</span>);</span><br><span class=\"line\">        glClear(GL_COLOR_BUFFER_BIT);</span><br><span class=\"line\">        glFlush();</span><br><span class=\"line\"></span><br><span class=\"line\">        eglSwapBuffers(display, surface);</span><br><span class=\"line\"></span><br><span class=\"line\">        sleep(<span class=\"number\">10</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> EXIT_SUCCESS;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> Android  NDK  EGL  Android NDK  NDK  Android  EGL  java  C  java  EGL  EGL </p>\n<p> SurfaceView</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">tools:context</span>=<span class=\"string\">&quot;.opengl.OpenGLES_EGLActivity&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">SurfaceView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/surface_view&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;0dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintBottom_toBottomOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">OpenGLES_EGLActivity</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">AppCompatActivity</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">SurfaceHolder</span>.Callback &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLDisplay mEGLDisplay;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLContext mEGLContext;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLSurface mEGLSurface;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLConfig mEGLConfig;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">        setContentView(R.layout.activity_open_g_l_e_s__e_g_l);</span><br><span class=\"line\">        <span class=\"type\">SurfaceView</span> <span class=\"variable\">sv</span> <span class=\"operator\">=</span> findViewById(R.id.surface_view);</span><br><span class=\"line\">        sv.getHolder().addCallback(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceCreated</span><span class=\"params\">(SurfaceHolder holder)</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceChanged</span><span class=\"params\">(SurfaceHolder holder, <span class=\"type\">int</span> format, <span class=\"type\">int</span> width, <span class=\"type\">int</span> height)</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceDestroyed</span><span class=\"params\">(SurfaceHolder holder)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> SurfaceView SurfaceView  SurfaceHolder </p>\n<p> EGL </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">initEGL</span><span class=\"params\">(SurfaceHolder holder)</span> &#123;</span><br><span class=\"line\">       <span class=\"comment\">//1. get an EGL display connection</span></span><br><span class=\"line\">       mEGLDisplay = EGL14.eglGetDisplay(EGL14.EGL_DEFAULT_DISPLAY);</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"type\">int</span>[] version = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">2</span>];</span><br><span class=\"line\">       <span class=\"comment\">//2. initialize EGL display connection</span></span><br><span class=\"line\">       EGL14.eglInitialize(mEGLDisplay, version, <span class=\"number\">0</span>, version, <span class=\"number\">1</span>);</span><br><span class=\"line\">       </span><br><span class=\"line\">       <span class=\"type\">int</span>[] attribList = &#123;</span><br><span class=\"line\">               EGL14.EGL_RED_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">               EGL14.EGL_GREEN_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">               EGL14.EGL_BLUE_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">               EGL14.EGL_ALPHA_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">               EGL14.EGL_NONE</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">       EGLConfig[] configs = <span class=\"keyword\">new</span> <span class=\"title class_\">EGLConfig</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">       <span class=\"type\">int</span>[] numConfigs = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">       <span class=\"comment\">//3. get appropriate EGL frame buffer configuration</span></span><br><span class=\"line\">       EGL14.eglChooseConfig(mEGLDisplay, attribList, <span class=\"number\">0</span>, configs, <span class=\"number\">0</span>, configs.length,</span><br><span class=\"line\">               numConfigs, <span class=\"number\">0</span>);</span><br><span class=\"line\">       mEGLConfig = configs[<span class=\"number\">0</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"type\">int</span>[] attrib3_list = &#123;</span><br><span class=\"line\">               EGL14.EGL_CONTEXT_CLIENT_VERSION, <span class=\"number\">3</span>,</span><br><span class=\"line\">               EGL14.EGL_NONE</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//4. create an EGL rendering context</span></span><br><span class=\"line\">       mEGLContext = EGL14.eglCreateContext(mEGLDisplay, mEGLConfig, EGL14.EGL_NO_CONTEXT,</span><br><span class=\"line\">               attrib3_list, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//5. create an EGL window surface</span></span><br><span class=\"line\">       <span class=\"type\">int</span>[] surfaceAttribs = &#123;</span><br><span class=\"line\">               EGL14.EGL_NONE</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">       mEGLSurface = EGL14.eglCreateWindowSurface(mEGLDisplay, mEGLConfig, holder.getSurface(),</span><br><span class=\"line\">               surfaceAttribs, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//6. connect the context to the surface</span></span><br><span class=\"line\">       EGL14.eglMakeCurrent(mEGLDisplay, mEGLSurface, mEGLSurface, mEGLContext);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<p> EGL  6 </p>\n<ol>\n<li> EGLDisplay  <code>display connection</code></li>\n<li> 1  <code>display connection</code> version  <code>eglInitialize</code>  EGL  c </li>\n<li> alpha  <code>eglChooseConfig</code> </li>\n<li> EGLContext OpenGL ES </li>\n<li> EGLSurface SurfaceView  EGLSurface EGL  SurfaceView EGLSurface EGLSurface  SurfaceView  Surface  SurfaceView  BufferQueue </li>\n<li> EGL  EGLSurface  OpenGL ES </li>\n</ol>\n<p> 6  OpenGL ES </p>\n<p> SurfaceHolder  <code>surfaceCreated</code>  <code>initEGL</code> OpenGL ES </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceCreated</span><span class=\"params\">(SurfaceHolder holder)</span> &#123;</span><br><span class=\"line\">        initEGL(holder);</span><br><span class=\"line\">        GLES32.glClearColor(<span class=\"number\">1.0F</span>, <span class=\"number\">0F</span>, <span class=\"number\">0F</span>, <span class=\"number\">1F</span>);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>surfaceChanged</code>  OpenGL ES  EGLSurface  <code>EGL14.eglSwapBuffers</code> </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceChanged</span><span class=\"params\">(SurfaceHolder holder, <span class=\"type\">int</span> format, <span class=\"type\">int</span> width, <span class=\"type\">int</span> height)</span> &#123;</span><br><span class=\"line\">    GLES32.glViewport(<span class=\"number\">0</span>, <span class=\"number\">0</span>, width, height);</span><br><span class=\"line\">    GLES32.glClear(GLES32.GL_COLOR_BUFFER_BIT);</span><br><span class=\"line\">    EGL14.eglSwapBuffers(mEGLDisplay, mEGLSurface);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/glsurfaceview01.jpeg\" alt=\"\"></p>\n<p> EGL  Android Java  EGL  OpenGL ES </p>"},{"title":"Android OpenGL ES  3 - OpenGL ES ","date":"2021-01-27T14:32:51.000Z","_content":"GLSurfaceView  EGL OpenGLESGLES\n\n\n\n GLES \n1. GLES  c `GLES32.glClearColor``GLES32.glClear`\n **GLES 1. 2. ** \n\n2. GLES  GPU  CPU  GPU\n    \n3. GLES Normalized Device Coordinates, NDCxyz-1.01.0/\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/ndc.png)\n0,0.50.5,0.5-0.5,0.5\n\n GLES \n\n<!--more-->\n# \n\n1. \n2. \n3.  GPU\n4.  GPU \n\n\n\n## \n\n```java\n    private static final float TRIANGLE_COORDS[] = {\n            0.5f, 0.5f,   // 0 top\n            -0.5f, 0.5f,   // 1 bottom left\n            0f, -0.5f    // 2 bottom right\n    };\n\n    private static final float TRIANGLE_COLOR[] = {0.1F, 0.9F, 0.4F, 1.0F};\n```\n\n\n## GPU\nGPU GLSL\nGLSLGLES\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/pipeline.png)\n\nGLESGPU Vertex Shader  Fragment Shader  Shader  GLES GLSL\nGPU\n\n Vertex Shader  Fragment Shader \n```java\n    private static final String VERTEX_SHADER =\n            \"attribute vec4 aPosition;\" +\n                    \"void main() {\" +\n                    \"    gl_Position = aPosition;\" +\n                    \"}\";\n\n    private static final String FRAGMENT_SHADER =\n            \"precision mediump float;\" +\n                    \"uniform vec4 uColor;\" +\n                    \"void main() {\" +\n                    \"   gl_FragColor = uColor;\" +\n                    \"}\";\n```\nshader Vertex Shader  aPostion Fragment Shader  uColor \n\nGLSL  c  GLE S Program \n```java\n public int createProgram(String vertexSource, String fragmentSource) {\n        int vertexShader = loadShader(GLES32.GL_VERTEX_SHADER, vertexSource);\n        if (vertexShader == 0) {\n            return 0;\n        }\n        int pixelShader = loadShader(GLES32.GL_FRAGMENT_SHADER, fragmentSource);\n        if (pixelShader == 0) {\n            return 0;\n        }\n\n        int program = GLES32.glCreateProgram();\n        GLES32.glAttachShader(program, vertexShader);\n        GLES32.glAttachShader(program, pixelShader);\n        GLES32.glLinkProgram(program);\n        int[] linkStatus = new int[1];\n        GLES32.glGetProgramiv(program, GLES32.GL_LINK_STATUS, linkStatus, 0);\n        if (linkStatus[0] != GLES32.GL_TRUE) {\n            GLES32.glDeleteProgram(program);\n            program = 0;\n        }\n        return program;\n    }\n\n\n    public int loadShader(int shaderType, String source) {\n        int shader = GLES32.glCreateShader(shaderType);\n        GLES32.glShaderSource(shader, source);\n        GLES32.glCompileShader(shader);\n        int[] compiled = new int[1];\n        GLES32.glGetShaderiv(shader, GLES32.GL_COMPILE_STATUS, compiled, 0);\n        if (compiled[0] == 0) {\n            GLES32.glDeleteShader(shader);\n            GLES32.glGetShaderInfoLog(shader);\n            shader = 0;\n        }\n        return shader;\n    }\n```\nshadershader Program\n\nProgram aPosition  uColor \n```java\n        GLES32.glUseProgram(program);                                                                                        //1\n        int triangleColorLocation = GLES32.glGetUniformLocation(program, \"uColor\");                             //2\n        GLES32.glUniform4fv(triangleColorLocation, 1, createFloatBuffer(TRIANGLE_COLOR));                     //3\n        int aPositionLocation = GLES32.glGetAttribLocation(program, \"aPosition\");                                  //4\n        GLES32.glEnableVertexAttribArray(aPositionLocation);                                                             //5\n        FloatBuffer vertexBuffer = createFloatBuffer(TRIANGLE_COORDS);                                             //6\n        GLES32.glVertexAttribPointer(aPositionLocation, 2, GLES32.GL_FLOAT, false, 2 * 4, vertexBuffer);      //7\n```\n\n1.  Program  `glUseProgram`\n2.  uColor  uniform uniform  GLSL  `glGetUniformLocation` uColor  GPU \n3.  uColor  `glUniform4fv`\n4. aPosition  `attribute`attribute vertex shader  `glGetAttribLocation`  aPostion \n5.  uniform  attribute `glEnableVertexAttribArray`\n6.  aPosition GPU`glVertexAttribPointer`\n```\nvoid glVertexAttribPointer(\n    GLuint  \tindex,\n \tGLint  \tsize,\n \tGLenum  \ttype,\n \tGLboolean  \tnormalized,\n \tGLsizei  \tstride,\n \tconst GLvoid *  \tpointer);\n```\nc index  attribute  location aPositionLocation\nsize attribute  xy 2\ntypefloat GLES32.GL_FLOAT \nnormallzed  -1~1 false \nstride  aPosition  float 4*2float  4 \npointer  aPosition  vertexBuffer \n\n GPU \n```java\n        GLES32.glDrawArrays(GLES32.GL_TRIANGLE_STRIP, 0, 3);\n        EGL14.eglSwapBuffers(mEGLDisplay, mEGLSurface);\n```\n\n![https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/gles_triangle.png](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/gles_triangle.png)\n\n\n```java\npackage com.zql.mobile.graphics.opengl;\n\nimport android.opengl.EGL14;\nimport android.opengl.EGLConfig;\nimport android.opengl.EGLContext;\nimport android.opengl.EGLDisplay;\nimport android.opengl.EGLSurface;\nimport android.opengl.GLES32;\nimport android.os.Bundle;\nimport android.view.SurfaceHolder;\nimport android.view.SurfaceView;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport com.zql.mobile.graphics.R;\n\nimport java.nio.ByteBuffer;\nimport java.nio.ByteOrder;\nimport java.nio.FloatBuffer;\n\npublic class OpenGLES_VertexAttributePointer_Activity extends AppCompatActivity implements SurfaceHolder.Callback {\n\n    private EGLDisplay mEGLDisplay;\n    private EGLContext mEGLContext;\n    private EGLSurface mEGLSurface;\n    private EGLConfig mEGLConfig;\n    private static final String VERTEX_SHADER =\n            \"attribute vec4 aPosition;\" +\n                    \"void main() {\" +\n                    \"    gl_Position = aPosition;\" +\n                    \"}\";\n\n    private static final String FRAGMENT_SHADER =\n            \"precision mediump float;\" +\n                    \"uniform vec4 uColor;\" +\n                    \"void main() {\" +\n                    \"   gl_FragColor = uColor;\" +\n                    \"}\";\n\n    private static final float TRIANGLE_COORDS[] = {\n            0.5f, 0.5f,   // 0 top\n            -0.5f, 0.5f,   // 1 bottom left\n            0f, -0.5f    // 2 bottom right\n    };\n\n    private static final float TRIANGLE_COLOR[] = {0.1F, 0.9F, 0.4F, 1.0F};\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_open_g_l_vertex_attribute_pointer);\n        SurfaceView sv = findViewById(R.id.surface_view);\n        sv.getHolder().addCallback(this);\n    }\n\n    private void initEGL(SurfaceHolder holder) {\n        // get an EGL display connection\n        mEGLDisplay = EGL14.eglGetDisplay(EGL14.EGL_DEFAULT_DISPLAY);\n\n        int[] version = new int[2];\n        // initialize EGL display connection\n        EGL14.eglInitialize(mEGLDisplay, version, 0, version, 1);\n\n        // target attribute list\n        int[] attribList = {\n                EGL14.EGL_RED_SIZE, 8,\n                EGL14.EGL_GREEN_SIZE, 8,\n                EGL14.EGL_BLUE_SIZE, 8,\n                EGL14.EGL_ALPHA_SIZE, 8,\n                EGL14.EGL_NONE\n        };\n        EGLConfig[] configs = new EGLConfig[1];\n        int[] numConfigs = new int[1];\n        //get appropriate EGL frame buffer configuration\n        EGL14.eglChooseConfig(mEGLDisplay, attribList, 0, configs, 0, configs.length,\n                numConfigs, 0);\n        mEGLConfig = configs[0];\n\n        int[] attrib3_list = {\n                EGL14.EGL_CONTEXT_CLIENT_VERSION, 3,\n                EGL14.EGL_NONE\n        };\n\n        //create an EGL rendering context\n        mEGLContext = EGL14.eglCreateContext(mEGLDisplay, mEGLConfig, EGL14.EGL_NO_CONTEXT,\n                attrib3_list, 0);\n\n        // create an EGL window surface\n        int[] surfaceAttribs = {\n                EGL14.EGL_NONE\n        };\n        mEGLSurface = EGL14.eglCreateWindowSurface(mEGLDisplay, mEGLConfig, holder.getSurface(),\n                surfaceAttribs, 0);\n\n        // connect the context to the surface\n        EGL14.eglMakeCurrent(mEGLDisplay, mEGLSurface, mEGLSurface, mEGLContext);\n    }\n\n\n    @Override\n    public void surfaceCreated(SurfaceHolder holder) {\n        initEGL(holder);\n        GLES32.glClearColor(1.0F, 0F, 0F, 1F);\n    }\n\n    @Override\n    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {\n        GLES32.glViewport(0, 0, width, height);\n        GLES32.glClear(GLES32.GL_COLOR_BUFFER_BIT);\n        int program = createProgram(VERTEX_SHADER, FRAGMENT_SHADER);\n        GLES32.glUseProgram(program);\n        int triangleColorLocation = GLES32.glGetUniformLocation(program, \"uColor\");\n        GLES32.glUniform4fv(triangleColorLocation, 1, createFloatBuffer(TRIANGLE_COLOR));\n        int aPositionLocation = GLES32.glGetAttribLocation(program, \"aPosition\");\n        GLES32.glEnableVertexAttribArray(aPositionLocation);\n        FloatBuffer vertexBuffer = createFloatBuffer(TRIANGLE_COORDS);\n        GLES32.glVertexAttribPointer(aPositionLocation, 2, GLES32.GL_FLOAT, false, 2 * 4, vertexBuffer);\n        GLES32.glDrawArrays(GLES32.GL_TRIANGLE_STRIP, 0, 3);\n        EGL14.eglSwapBuffers(mEGLDisplay, mEGLSurface);\n    }\n\n    @Override\n    public void surfaceDestroyed(SurfaceHolder holder) {\n\n    }\n\n    public int createProgram(String vertexSource, String fragmentSource) {\n        int vertexShader = loadShader(GLES32.GL_VERTEX_SHADER, vertexSource);\n        if (vertexShader == 0) {\n            return 0;\n        }\n        int pixelShader = loadShader(GLES32.GL_FRAGMENT_SHADER, fragmentSource);\n        if (pixelShader == 0) {\n            return 0;\n        }\n\n        int program = GLES32.glCreateProgram();\n        GLES32.glAttachShader(program, vertexShader);\n        GLES32.glAttachShader(program, pixelShader);\n        GLES32.glLinkProgram(program);\n        int[] linkStatus = new int[1];\n        GLES32.glGetProgramiv(program, GLES32.GL_LINK_STATUS, linkStatus, 0);\n        if (linkStatus[0] != GLES32.GL_TRUE) {\n            GLES32.glDeleteProgram(program);\n            program = 0;\n        }\n        return program;\n    }\n\n\n    public int loadShader(int shaderType, String source) {\n        int shader = GLES32.glCreateShader(shaderType);\n        GLES32.glShaderSource(shader, source);\n        GLES32.glCompileShader(shader);\n        int[] compiled = new int[1];\n        GLES32.glGetShaderiv(shader, GLES32.GL_COMPILE_STATUS, compiled, 0);\n        if (compiled[0] == 0) {\n            GLES32.glDeleteShader(shader);\n            GLES32.glGetShaderInfoLog(shader);\n            shader = 0;\n        }\n        return shader;\n    }\n\n    public FloatBuffer createFloatBuffer(float[] coords) {\n        ByteBuffer bb = ByteBuffer.allocateDirect(coords.length * 4);\n        bb.order(ByteOrder.nativeOrder());\n        FloatBuffer fb = bb.asFloatBuffer();\n        fb.put(coords);\n        fb.position(0);\n        return fb;\n    }\n}\n\n```\n\n# \n[https://learnopengl-cn.github.io/01%20Getting%20started/04%20Hello%20Triangle/#_3](https://learnopengl-cn.github.io/01%20Getting%20started/04%20Hello%20Triangle/#_3)\n[https://www.khronos.org/registry/OpenGL-Refpages/es3.0/html/glVertexAttribPointer.xhtml](https://www.khronos.org/registry/OpenGL-Refpages/es3.0/html/glVertexAttribPointer.xhtml)","source":"_posts/android-opengl-es-triangle.md","raw":"---\ntitle: Android OpenGL ES  3 - OpenGL ES \ndate: 2021-01-27 22:32:51\ntags:\n  - android\n  - opengl\n---\nGLSurfaceView  EGL OpenGLESGLES\n\n\n\n GLES \n1. GLES  c `GLES32.glClearColor``GLES32.glClear`\n **GLES 1. 2. ** \n\n2. GLES  GPU  CPU  GPU\n    \n3. GLES Normalized Device Coordinates, NDCxyz-1.01.0/\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/ndc.png)\n0,0.50.5,0.5-0.5,0.5\n\n GLES \n\n<!--more-->\n# \n\n1. \n2. \n3.  GPU\n4.  GPU \n\n\n\n## \n\n```java\n    private static final float TRIANGLE_COORDS[] = {\n            0.5f, 0.5f,   // 0 top\n            -0.5f, 0.5f,   // 1 bottom left\n            0f, -0.5f    // 2 bottom right\n    };\n\n    private static final float TRIANGLE_COLOR[] = {0.1F, 0.9F, 0.4F, 1.0F};\n```\n\n\n## GPU\nGPU GLSL\nGLSLGLES\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/pipeline.png)\n\nGLESGPU Vertex Shader  Fragment Shader  Shader  GLES GLSL\nGPU\n\n Vertex Shader  Fragment Shader \n```java\n    private static final String VERTEX_SHADER =\n            \"attribute vec4 aPosition;\" +\n                    \"void main() {\" +\n                    \"    gl_Position = aPosition;\" +\n                    \"}\";\n\n    private static final String FRAGMENT_SHADER =\n            \"precision mediump float;\" +\n                    \"uniform vec4 uColor;\" +\n                    \"void main() {\" +\n                    \"   gl_FragColor = uColor;\" +\n                    \"}\";\n```\nshader Vertex Shader  aPostion Fragment Shader  uColor \n\nGLSL  c  GLE S Program \n```java\n public int createProgram(String vertexSource, String fragmentSource) {\n        int vertexShader = loadShader(GLES32.GL_VERTEX_SHADER, vertexSource);\n        if (vertexShader == 0) {\n            return 0;\n        }\n        int pixelShader = loadShader(GLES32.GL_FRAGMENT_SHADER, fragmentSource);\n        if (pixelShader == 0) {\n            return 0;\n        }\n\n        int program = GLES32.glCreateProgram();\n        GLES32.glAttachShader(program, vertexShader);\n        GLES32.glAttachShader(program, pixelShader);\n        GLES32.glLinkProgram(program);\n        int[] linkStatus = new int[1];\n        GLES32.glGetProgramiv(program, GLES32.GL_LINK_STATUS, linkStatus, 0);\n        if (linkStatus[0] != GLES32.GL_TRUE) {\n            GLES32.glDeleteProgram(program);\n            program = 0;\n        }\n        return program;\n    }\n\n\n    public int loadShader(int shaderType, String source) {\n        int shader = GLES32.glCreateShader(shaderType);\n        GLES32.glShaderSource(shader, source);\n        GLES32.glCompileShader(shader);\n        int[] compiled = new int[1];\n        GLES32.glGetShaderiv(shader, GLES32.GL_COMPILE_STATUS, compiled, 0);\n        if (compiled[0] == 0) {\n            GLES32.glDeleteShader(shader);\n            GLES32.glGetShaderInfoLog(shader);\n            shader = 0;\n        }\n        return shader;\n    }\n```\nshadershader Program\n\nProgram aPosition  uColor \n```java\n        GLES32.glUseProgram(program);                                                                                        //1\n        int triangleColorLocation = GLES32.glGetUniformLocation(program, \"uColor\");                             //2\n        GLES32.glUniform4fv(triangleColorLocation, 1, createFloatBuffer(TRIANGLE_COLOR));                     //3\n        int aPositionLocation = GLES32.glGetAttribLocation(program, \"aPosition\");                                  //4\n        GLES32.glEnableVertexAttribArray(aPositionLocation);                                                             //5\n        FloatBuffer vertexBuffer = createFloatBuffer(TRIANGLE_COORDS);                                             //6\n        GLES32.glVertexAttribPointer(aPositionLocation, 2, GLES32.GL_FLOAT, false, 2 * 4, vertexBuffer);      //7\n```\n\n1.  Program  `glUseProgram`\n2.  uColor  uniform uniform  GLSL  `glGetUniformLocation` uColor  GPU \n3.  uColor  `glUniform4fv`\n4. aPosition  `attribute`attribute vertex shader  `glGetAttribLocation`  aPostion \n5.  uniform  attribute `glEnableVertexAttribArray`\n6.  aPosition GPU`glVertexAttribPointer`\n```\nvoid glVertexAttribPointer(\n    GLuint  \tindex,\n \tGLint  \tsize,\n \tGLenum  \ttype,\n \tGLboolean  \tnormalized,\n \tGLsizei  \tstride,\n \tconst GLvoid *  \tpointer);\n```\nc index  attribute  location aPositionLocation\nsize attribute  xy 2\ntypefloat GLES32.GL_FLOAT \nnormallzed  -1~1 false \nstride  aPosition  float 4*2float  4 \npointer  aPosition  vertexBuffer \n\n GPU \n```java\n        GLES32.glDrawArrays(GLES32.GL_TRIANGLE_STRIP, 0, 3);\n        EGL14.eglSwapBuffers(mEGLDisplay, mEGLSurface);\n```\n\n![https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/gles_triangle.png](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/gles_triangle.png)\n\n\n```java\npackage com.zql.mobile.graphics.opengl;\n\nimport android.opengl.EGL14;\nimport android.opengl.EGLConfig;\nimport android.opengl.EGLContext;\nimport android.opengl.EGLDisplay;\nimport android.opengl.EGLSurface;\nimport android.opengl.GLES32;\nimport android.os.Bundle;\nimport android.view.SurfaceHolder;\nimport android.view.SurfaceView;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport com.zql.mobile.graphics.R;\n\nimport java.nio.ByteBuffer;\nimport java.nio.ByteOrder;\nimport java.nio.FloatBuffer;\n\npublic class OpenGLES_VertexAttributePointer_Activity extends AppCompatActivity implements SurfaceHolder.Callback {\n\n    private EGLDisplay mEGLDisplay;\n    private EGLContext mEGLContext;\n    private EGLSurface mEGLSurface;\n    private EGLConfig mEGLConfig;\n    private static final String VERTEX_SHADER =\n            \"attribute vec4 aPosition;\" +\n                    \"void main() {\" +\n                    \"    gl_Position = aPosition;\" +\n                    \"}\";\n\n    private static final String FRAGMENT_SHADER =\n            \"precision mediump float;\" +\n                    \"uniform vec4 uColor;\" +\n                    \"void main() {\" +\n                    \"   gl_FragColor = uColor;\" +\n                    \"}\";\n\n    private static final float TRIANGLE_COORDS[] = {\n            0.5f, 0.5f,   // 0 top\n            -0.5f, 0.5f,   // 1 bottom left\n            0f, -0.5f    // 2 bottom right\n    };\n\n    private static final float TRIANGLE_COLOR[] = {0.1F, 0.9F, 0.4F, 1.0F};\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_open_g_l_vertex_attribute_pointer);\n        SurfaceView sv = findViewById(R.id.surface_view);\n        sv.getHolder().addCallback(this);\n    }\n\n    private void initEGL(SurfaceHolder holder) {\n        // get an EGL display connection\n        mEGLDisplay = EGL14.eglGetDisplay(EGL14.EGL_DEFAULT_DISPLAY);\n\n        int[] version = new int[2];\n        // initialize EGL display connection\n        EGL14.eglInitialize(mEGLDisplay, version, 0, version, 1);\n\n        // target attribute list\n        int[] attribList = {\n                EGL14.EGL_RED_SIZE, 8,\n                EGL14.EGL_GREEN_SIZE, 8,\n                EGL14.EGL_BLUE_SIZE, 8,\n                EGL14.EGL_ALPHA_SIZE, 8,\n                EGL14.EGL_NONE\n        };\n        EGLConfig[] configs = new EGLConfig[1];\n        int[] numConfigs = new int[1];\n        //get appropriate EGL frame buffer configuration\n        EGL14.eglChooseConfig(mEGLDisplay, attribList, 0, configs, 0, configs.length,\n                numConfigs, 0);\n        mEGLConfig = configs[0];\n\n        int[] attrib3_list = {\n                EGL14.EGL_CONTEXT_CLIENT_VERSION, 3,\n                EGL14.EGL_NONE\n        };\n\n        //create an EGL rendering context\n        mEGLContext = EGL14.eglCreateContext(mEGLDisplay, mEGLConfig, EGL14.EGL_NO_CONTEXT,\n                attrib3_list, 0);\n\n        // create an EGL window surface\n        int[] surfaceAttribs = {\n                EGL14.EGL_NONE\n        };\n        mEGLSurface = EGL14.eglCreateWindowSurface(mEGLDisplay, mEGLConfig, holder.getSurface(),\n                surfaceAttribs, 0);\n\n        // connect the context to the surface\n        EGL14.eglMakeCurrent(mEGLDisplay, mEGLSurface, mEGLSurface, mEGLContext);\n    }\n\n\n    @Override\n    public void surfaceCreated(SurfaceHolder holder) {\n        initEGL(holder);\n        GLES32.glClearColor(1.0F, 0F, 0F, 1F);\n    }\n\n    @Override\n    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {\n        GLES32.glViewport(0, 0, width, height);\n        GLES32.glClear(GLES32.GL_COLOR_BUFFER_BIT);\n        int program = createProgram(VERTEX_SHADER, FRAGMENT_SHADER);\n        GLES32.glUseProgram(program);\n        int triangleColorLocation = GLES32.glGetUniformLocation(program, \"uColor\");\n        GLES32.glUniform4fv(triangleColorLocation, 1, createFloatBuffer(TRIANGLE_COLOR));\n        int aPositionLocation = GLES32.glGetAttribLocation(program, \"aPosition\");\n        GLES32.glEnableVertexAttribArray(aPositionLocation);\n        FloatBuffer vertexBuffer = createFloatBuffer(TRIANGLE_COORDS);\n        GLES32.glVertexAttribPointer(aPositionLocation, 2, GLES32.GL_FLOAT, false, 2 * 4, vertexBuffer);\n        GLES32.glDrawArrays(GLES32.GL_TRIANGLE_STRIP, 0, 3);\n        EGL14.eglSwapBuffers(mEGLDisplay, mEGLSurface);\n    }\n\n    @Override\n    public void surfaceDestroyed(SurfaceHolder holder) {\n\n    }\n\n    public int createProgram(String vertexSource, String fragmentSource) {\n        int vertexShader = loadShader(GLES32.GL_VERTEX_SHADER, vertexSource);\n        if (vertexShader == 0) {\n            return 0;\n        }\n        int pixelShader = loadShader(GLES32.GL_FRAGMENT_SHADER, fragmentSource);\n        if (pixelShader == 0) {\n            return 0;\n        }\n\n        int program = GLES32.glCreateProgram();\n        GLES32.glAttachShader(program, vertexShader);\n        GLES32.glAttachShader(program, pixelShader);\n        GLES32.glLinkProgram(program);\n        int[] linkStatus = new int[1];\n        GLES32.glGetProgramiv(program, GLES32.GL_LINK_STATUS, linkStatus, 0);\n        if (linkStatus[0] != GLES32.GL_TRUE) {\n            GLES32.glDeleteProgram(program);\n            program = 0;\n        }\n        return program;\n    }\n\n\n    public int loadShader(int shaderType, String source) {\n        int shader = GLES32.glCreateShader(shaderType);\n        GLES32.glShaderSource(shader, source);\n        GLES32.glCompileShader(shader);\n        int[] compiled = new int[1];\n        GLES32.glGetShaderiv(shader, GLES32.GL_COMPILE_STATUS, compiled, 0);\n        if (compiled[0] == 0) {\n            GLES32.glDeleteShader(shader);\n            GLES32.glGetShaderInfoLog(shader);\n            shader = 0;\n        }\n        return shader;\n    }\n\n    public FloatBuffer createFloatBuffer(float[] coords) {\n        ByteBuffer bb = ByteBuffer.allocateDirect(coords.length * 4);\n        bb.order(ByteOrder.nativeOrder());\n        FloatBuffer fb = bb.asFloatBuffer();\n        fb.put(coords);\n        fb.position(0);\n        return fb;\n    }\n}\n\n```\n\n# \n[https://learnopengl-cn.github.io/01%20Getting%20started/04%20Hello%20Triangle/#_3](https://learnopengl-cn.github.io/01%20Getting%20started/04%20Hello%20Triangle/#_3)\n[https://www.khronos.org/registry/OpenGL-Refpages/es3.0/html/glVertexAttribPointer.xhtml](https://www.khronos.org/registry/OpenGL-Refpages/es3.0/html/glVertexAttribPointer.xhtml)","slug":"android-opengl-es-triangle","published":1,"updated":"2024-08-21T03:16:19.782Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vr000o5p6te6j87r4c","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>GLSurfaceView  EGL OpenGLESGLES</p>\n<p></p>\n<p> GLES </p>\n<ol>\n<li><p>GLES  c <code>GLES32.glClearColor</code><code>GLES32.glClear</code><br> <strong>GLES 1. 2. </strong> </p>\n</li>\n<li><p>GLES  GPU  CPU  GPU</p>\n</li>\n<li><p>GLES Normalized Device Coordinates, NDCxyz-1.01.0/<br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/ndc.png\" alt=\"\"><br>0,0.50.5,0.5-0.5,0.5</p>\n</li>\n</ol>\n<p> GLES </p>\n<span id=\"more\"></span>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n<ol>\n<li></li>\n<li></li>\n<li> GPU</li>\n<li> GPU </li>\n</ol>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">float</span> TRIANGLE_COORDS[] = &#123;</span><br><span class=\"line\">        <span class=\"number\">0.5f</span>, <span class=\"number\">0.5f</span>,   <span class=\"comment\">// 0 top</span></span><br><span class=\"line\">        -<span class=\"number\">0.5f</span>, <span class=\"number\">0.5f</span>,   <span class=\"comment\">// 1 bottom left</span></span><br><span class=\"line\">        <span class=\"number\">0f</span>, -<span class=\"number\">0.5f</span>    <span class=\"comment\">// 2 bottom right</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">float</span> TRIANGLE_COLOR[] = &#123;<span class=\"number\">0.1F</span>, <span class=\"number\">0.9F</span>, <span class=\"number\">0.4F</span>, <span class=\"number\">1.0F</span>&#125;;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"GPU\"><a href=\"#GPU\" class=\"headerlink\" title=\"GPU\"></a>GPU</h2><p>GPU GLSL<br>GLSLGLES<br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/pipeline.png\" alt=\"\"></p>\n<p>GLESGPU Vertex Shader  Fragment Shader  Shader  GLES GLSL<br>GPU</p>\n<p> Vertex Shader  Fragment Shader </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">VERTEX_SHADER</span> <span class=\"operator\">=</span></span><br><span class=\"line\">        <span class=\"string\">&quot;attribute vec4 aPosition;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;void main() &#123;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;    gl_Position = aPosition;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;&#125;&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">FRAGMENT_SHADER</span> <span class=\"operator\">=</span></span><br><span class=\"line\">        <span class=\"string\">&quot;precision mediump float;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;uniform vec4 uColor;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;void main() &#123;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;   gl_FragColor = uColor;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;&#125;&quot;</span>;</span><br></pre></td></tr></table></figure>\n<p>shader Vertex Shader  aPostion Fragment Shader  uColor </p>\n<p>GLSL  c  GLE S Program </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">createProgram</span><span class=\"params\">(String vertexSource, String fragmentSource)</span> &#123;</span><br><span class=\"line\">       <span class=\"type\">int</span> <span class=\"variable\">vertexShader</span> <span class=\"operator\">=</span> loadShader(GLES32.GL_VERTEX_SHADER, vertexSource);</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (vertexShader == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"type\">int</span> <span class=\"variable\">pixelShader</span> <span class=\"operator\">=</span> loadShader(GLES32.GL_FRAGMENT_SHADER, fragmentSource);</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (pixelShader == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"type\">int</span> <span class=\"variable\">program</span> <span class=\"operator\">=</span> GLES32.glCreateProgram();</span><br><span class=\"line\">       GLES32.glAttachShader(program, vertexShader);</span><br><span class=\"line\">       GLES32.glAttachShader(program, pixelShader);</span><br><span class=\"line\">       GLES32.glLinkProgram(program);</span><br><span class=\"line\">       <span class=\"type\">int</span>[] linkStatus = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">       GLES32.glGetProgramiv(program, GLES32.GL_LINK_STATUS, linkStatus, <span class=\"number\">0</span>);</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (linkStatus[<span class=\"number\">0</span>] != GLES32.GL_TRUE) &#123;</span><br><span class=\"line\">           GLES32.glDeleteProgram(program);</span><br><span class=\"line\">           program = <span class=\"number\">0</span>;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> program;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">loadShader</span><span class=\"params\">(<span class=\"type\">int</span> shaderType, String source)</span> &#123;</span><br><span class=\"line\">       <span class=\"type\">int</span> <span class=\"variable\">shader</span> <span class=\"operator\">=</span> GLES32.glCreateShader(shaderType);</span><br><span class=\"line\">       GLES32.glShaderSource(shader, source);</span><br><span class=\"line\">       GLES32.glCompileShader(shader);</span><br><span class=\"line\">       <span class=\"type\">int</span>[] compiled = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">       GLES32.glGetShaderiv(shader, GLES32.GL_COMPILE_STATUS, compiled, <span class=\"number\">0</span>);</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (compiled[<span class=\"number\">0</span>] == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">           GLES32.glDeleteShader(shader);</span><br><span class=\"line\">           GLES32.glGetShaderInfoLog(shader);</span><br><span class=\"line\">           shader = <span class=\"number\">0</span>;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> shader;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>shadershader Program</p>\n<p>Program aPosition  uColor </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GLES32.glUseProgram(program);                                                                                        <span class=\"comment\">//1</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"variable\">triangleColorLocation</span> <span class=\"operator\">=</span> GLES32.glGetUniformLocation(program, <span class=\"string\">&quot;uColor&quot;</span>);                             <span class=\"comment\">//2</span></span><br><span class=\"line\">GLES32.glUniform4fv(triangleColorLocation, <span class=\"number\">1</span>, createFloatBuffer(TRIANGLE_COLOR));                     <span class=\"comment\">//3</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"variable\">aPositionLocation</span> <span class=\"operator\">=</span> GLES32.glGetAttribLocation(program, <span class=\"string\">&quot;aPosition&quot;</span>);                                  <span class=\"comment\">//4</span></span><br><span class=\"line\">GLES32.glEnableVertexAttribArray(aPositionLocation);                                                             <span class=\"comment\">//5</span></span><br><span class=\"line\"><span class=\"type\">FloatBuffer</span> <span class=\"variable\">vertexBuffer</span> <span class=\"operator\">=</span> createFloatBuffer(TRIANGLE_COORDS);                                             <span class=\"comment\">//6</span></span><br><span class=\"line\">GLES32.glVertexAttribPointer(aPositionLocation, <span class=\"number\">2</span>, GLES32.GL_FLOAT, <span class=\"literal\">false</span>, <span class=\"number\">2</span> * <span class=\"number\">4</span>, vertexBuffer);      <span class=\"comment\">//7</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<ol>\n<li> Program  <code>glUseProgram</code></li>\n<li> uColor  uniform uniform  GLSL  <code>glGetUniformLocation</code> uColor  GPU </li>\n<li> uColor  <code>glUniform4fv</code></li>\n<li>aPosition  <code>attribute</code>attribute vertex shader  <code>glGetAttribLocation</code>  aPostion </li>\n<li> uniform  attribute <code>glEnableVertexAttribArray</code></li>\n<li> aPosition GPU<code>glVertexAttribPointer</code><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void glVertexAttribPointer(</span><br><span class=\"line\">    GLuint  \tindex,</span><br><span class=\"line\"> \tGLint  \tsize,</span><br><span class=\"line\"> \tGLenum  \ttype,</span><br><span class=\"line\"> \tGLboolean  \tnormalized,</span><br><span class=\"line\"> \tGLsizei  \tstride,</span><br><span class=\"line\"> \tconst GLvoid *  \tpointer);</span><br></pre></td></tr></table></figure>\nc index  attribute  location aPositionLocation<br>size attribute  xy 2<br>typefloat GLES32.GL_FLOAT <br>normallzed  -1~1 false <br>stride  aPosition  float 4*2float  4 <br>pointer  aPosition  vertexBuffer </li>\n</ol>\n<p> GPU </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GLES32.glDrawArrays(GLES32.GL_TRIANGLE_STRIP, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\">EGL14.eglSwapBuffers(mEGLDisplay, mEGLSurface);</span><br></pre></td></tr></table></figure>\n<p><br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/gles_triangle.png\" alt=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/gles_triangle.png\"></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zql.mobile.graphics.opengl;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.opengl.EGL14;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.opengl.EGLConfig;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.opengl.EGLContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.opengl.EGLDisplay;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.opengl.EGLSurface;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.opengl.GLES32;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.os.Bundle;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.view.SurfaceHolder;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.view.SurfaceView;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.zql.mobile.graphics.R;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.nio.ByteBuffer;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.nio.ByteOrder;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.nio.FloatBuffer;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">OpenGLES_VertexAttributePointer_Activity</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">AppCompatActivity</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">SurfaceHolder</span>.Callback &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLDisplay mEGLDisplay;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLContext mEGLContext;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLSurface mEGLSurface;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLConfig mEGLConfig;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">VERTEX_SHADER</span> <span class=\"operator\">=</span></span><br><span class=\"line\">            <span class=\"string\">&quot;attribute vec4 aPosition;&quot;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&quot;void main() &#123;&quot;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&quot;    gl_Position = aPosition;&quot;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&quot;&#125;&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">FRAGMENT_SHADER</span> <span class=\"operator\">=</span></span><br><span class=\"line\">            <span class=\"string\">&quot;precision mediump float;&quot;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&quot;uniform vec4 uColor;&quot;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&quot;void main() &#123;&quot;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&quot;   gl_FragColor = uColor;&quot;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&quot;&#125;&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">float</span> TRIANGLE_COORDS[] = &#123;</span><br><span class=\"line\">            <span class=\"number\">0.5f</span>, <span class=\"number\">0.5f</span>,   <span class=\"comment\">// 0 top</span></span><br><span class=\"line\">            -<span class=\"number\">0.5f</span>, <span class=\"number\">0.5f</span>,   <span class=\"comment\">// 1 bottom left</span></span><br><span class=\"line\">            <span class=\"number\">0f</span>, -<span class=\"number\">0.5f</span>    <span class=\"comment\">// 2 bottom right</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">float</span> TRIANGLE_COLOR[] = &#123;<span class=\"number\">0.1F</span>, <span class=\"number\">0.9F</span>, <span class=\"number\">0.4F</span>, <span class=\"number\">1.0F</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">        setContentView(R.layout.activity_open_g_l_vertex_attribute_pointer);</span><br><span class=\"line\">        <span class=\"type\">SurfaceView</span> <span class=\"variable\">sv</span> <span class=\"operator\">=</span> findViewById(R.id.surface_view);</span><br><span class=\"line\">        sv.getHolder().addCallback(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">initEGL</span><span class=\"params\">(SurfaceHolder holder)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// get an EGL display connection</span></span><br><span class=\"line\">        mEGLDisplay = EGL14.eglGetDisplay(EGL14.EGL_DEFAULT_DISPLAY);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span>[] version = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"comment\">// initialize EGL display connection</span></span><br><span class=\"line\">        EGL14.eglInitialize(mEGLDisplay, version, <span class=\"number\">0</span>, version, <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// target attribute list</span></span><br><span class=\"line\">        <span class=\"type\">int</span>[] attribList = &#123;</span><br><span class=\"line\">                EGL14.EGL_RED_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">                EGL14.EGL_GREEN_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">                EGL14.EGL_BLUE_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">                EGL14.EGL_ALPHA_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">                EGL14.EGL_NONE</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        EGLConfig[] configs = <span class=\"keyword\">new</span> <span class=\"title class_\">EGLConfig</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"type\">int</span>[] numConfigs = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"comment\">//get appropriate EGL frame buffer configuration</span></span><br><span class=\"line\">        EGL14.eglChooseConfig(mEGLDisplay, attribList, <span class=\"number\">0</span>, configs, <span class=\"number\">0</span>, configs.length,</span><br><span class=\"line\">                numConfigs, <span class=\"number\">0</span>);</span><br><span class=\"line\">        mEGLConfig = configs[<span class=\"number\">0</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span>[] attrib3_list = &#123;</span><br><span class=\"line\">                EGL14.EGL_CONTEXT_CLIENT_VERSION, <span class=\"number\">3</span>,</span><br><span class=\"line\">                EGL14.EGL_NONE</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//create an EGL rendering context</span></span><br><span class=\"line\">        mEGLContext = EGL14.eglCreateContext(mEGLDisplay, mEGLConfig, EGL14.EGL_NO_CONTEXT,</span><br><span class=\"line\">                attrib3_list, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// create an EGL window surface</span></span><br><span class=\"line\">        <span class=\"type\">int</span>[] surfaceAttribs = &#123;</span><br><span class=\"line\">                EGL14.EGL_NONE</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        mEGLSurface = EGL14.eglCreateWindowSurface(mEGLDisplay, mEGLConfig, holder.getSurface(),</span><br><span class=\"line\">                surfaceAttribs, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// connect the context to the surface</span></span><br><span class=\"line\">        EGL14.eglMakeCurrent(mEGLDisplay, mEGLSurface, mEGLSurface, mEGLContext);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceCreated</span><span class=\"params\">(SurfaceHolder holder)</span> &#123;</span><br><span class=\"line\">        initEGL(holder);</span><br><span class=\"line\">        GLES32.glClearColor(<span class=\"number\">1.0F</span>, <span class=\"number\">0F</span>, <span class=\"number\">0F</span>, <span class=\"number\">1F</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceChanged</span><span class=\"params\">(SurfaceHolder holder, <span class=\"type\">int</span> format, <span class=\"type\">int</span> width, <span class=\"type\">int</span> height)</span> &#123;</span><br><span class=\"line\">        GLES32.glViewport(<span class=\"number\">0</span>, <span class=\"number\">0</span>, width, height);</span><br><span class=\"line\">        GLES32.glClear(GLES32.GL_COLOR_BUFFER_BIT);</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">program</span> <span class=\"operator\">=</span> createProgram(VERTEX_SHADER, FRAGMENT_SHADER);</span><br><span class=\"line\">        GLES32.glUseProgram(program);</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">triangleColorLocation</span> <span class=\"operator\">=</span> GLES32.glGetUniformLocation(program, <span class=\"string\">&quot;uColor&quot;</span>);</span><br><span class=\"line\">        GLES32.glUniform4fv(triangleColorLocation, <span class=\"number\">1</span>, createFloatBuffer(TRIANGLE_COLOR));</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">aPositionLocation</span> <span class=\"operator\">=</span> GLES32.glGetAttribLocation(program, <span class=\"string\">&quot;aPosition&quot;</span>);</span><br><span class=\"line\">        GLES32.glEnableVertexAttribArray(aPositionLocation);</span><br><span class=\"line\">        <span class=\"type\">FloatBuffer</span> <span class=\"variable\">vertexBuffer</span> <span class=\"operator\">=</span> createFloatBuffer(TRIANGLE_COORDS);</span><br><span class=\"line\">        GLES32.glVertexAttribPointer(aPositionLocation, <span class=\"number\">2</span>, GLES32.GL_FLOAT, <span class=\"literal\">false</span>, <span class=\"number\">2</span> * <span class=\"number\">4</span>, vertexBuffer);</span><br><span class=\"line\">        GLES32.glDrawArrays(GLES32.GL_TRIANGLE_STRIP, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\">        EGL14.eglSwapBuffers(mEGLDisplay, mEGLSurface);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceDestroyed</span><span class=\"params\">(SurfaceHolder holder)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">createProgram</span><span class=\"params\">(String vertexSource, String fragmentSource)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">vertexShader</span> <span class=\"operator\">=</span> loadShader(GLES32.GL_VERTEX_SHADER, vertexSource);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (vertexShader == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">pixelShader</span> <span class=\"operator\">=</span> loadShader(GLES32.GL_FRAGMENT_SHADER, fragmentSource);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pixelShader == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">program</span> <span class=\"operator\">=</span> GLES32.glCreateProgram();</span><br><span class=\"line\">        GLES32.glAttachShader(program, vertexShader);</span><br><span class=\"line\">        GLES32.glAttachShader(program, pixelShader);</span><br><span class=\"line\">        GLES32.glLinkProgram(program);</span><br><span class=\"line\">        <span class=\"type\">int</span>[] linkStatus = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">        GLES32.glGetProgramiv(program, GLES32.GL_LINK_STATUS, linkStatus, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (linkStatus[<span class=\"number\">0</span>] != GLES32.GL_TRUE) &#123;</span><br><span class=\"line\">            GLES32.glDeleteProgram(program);</span><br><span class=\"line\">            program = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> program;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">loadShader</span><span class=\"params\">(<span class=\"type\">int</span> shaderType, String source)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">shader</span> <span class=\"operator\">=</span> GLES32.glCreateShader(shaderType);</span><br><span class=\"line\">        GLES32.glShaderSource(shader, source);</span><br><span class=\"line\">        GLES32.glCompileShader(shader);</span><br><span class=\"line\">        <span class=\"type\">int</span>[] compiled = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">        GLES32.glGetShaderiv(shader, GLES32.GL_COMPILE_STATUS, compiled, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (compiled[<span class=\"number\">0</span>] == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            GLES32.glDeleteShader(shader);</span><br><span class=\"line\">            GLES32.glGetShaderInfoLog(shader);</span><br><span class=\"line\">            shader = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> shader;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> FloatBuffer <span class=\"title function_\">createFloatBuffer</span><span class=\"params\">(<span class=\"type\">float</span>[] coords)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">ByteBuffer</span> <span class=\"variable\">bb</span> <span class=\"operator\">=</span> ByteBuffer.allocateDirect(coords.length * <span class=\"number\">4</span>);</span><br><span class=\"line\">        bb.order(ByteOrder.nativeOrder());</span><br><span class=\"line\">        <span class=\"type\">FloatBuffer</span> <span class=\"variable\">fb</span> <span class=\"operator\">=</span> bb.asFloatBuffer();</span><br><span class=\"line\">        fb.put(coords);</span><br><span class=\"line\">        fb.position(<span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fb;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><a href=\"https://learnopengl-cn.github.io/01%20Getting%20started/04%20Hello%20Triangle/#_3\">https://learnopengl-cn.github.io/01%20Getting%20started/04%20Hello%20Triangle/#_3</a><br><a href=\"https://www.khronos.org/registry/OpenGL-Refpages/es3.0/html/glVertexAttribPointer.xhtml\">https://www.khronos.org/registry/OpenGL-Refpages/es3.0/html/glVertexAttribPointer.xhtml</a></p>\n","excerpt":"<p>GLSurfaceView  EGL OpenGLESGLES</p>\n<p></p>\n<p> GLES </p>\n<ol>\n<li><p>GLES  c <code>GLES32.glClearColor</code><code>GLES32.glClear</code><br> <strong>GLES 1. 2. </strong> </p>\n</li>\n<li><p>GLES  GPU  CPU  GPU</p>\n</li>\n<li><p>GLES Normalized Device Coordinates, NDCxyz-1.01.0/<br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/ndc.png\" alt=\"\"><br>0,0.50.5,0.5-0.5,0.5</p>\n</li>\n</ol>\n<p> GLES </p>","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n<ol>\n<li></li>\n<li></li>\n<li> GPU</li>\n<li> GPU </li>\n</ol>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">float</span> TRIANGLE_COORDS[] = &#123;</span><br><span class=\"line\">        <span class=\"number\">0.5f</span>, <span class=\"number\">0.5f</span>,   <span class=\"comment\">// 0 top</span></span><br><span class=\"line\">        -<span class=\"number\">0.5f</span>, <span class=\"number\">0.5f</span>,   <span class=\"comment\">// 1 bottom left</span></span><br><span class=\"line\">        <span class=\"number\">0f</span>, -<span class=\"number\">0.5f</span>    <span class=\"comment\">// 2 bottom right</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">float</span> TRIANGLE_COLOR[] = &#123;<span class=\"number\">0.1F</span>, <span class=\"number\">0.9F</span>, <span class=\"number\">0.4F</span>, <span class=\"number\">1.0F</span>&#125;;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"GPU\"><a href=\"#GPU\" class=\"headerlink\" title=\"GPU\"></a>GPU</h2><p>GPU GLSL<br>GLSLGLES<br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/pipeline.png\" alt=\"\"></p>\n<p>GLESGPU Vertex Shader  Fragment Shader  Shader  GLES GLSL<br>GPU</p>\n<p> Vertex Shader  Fragment Shader </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">VERTEX_SHADER</span> <span class=\"operator\">=</span></span><br><span class=\"line\">        <span class=\"string\">&quot;attribute vec4 aPosition;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;void main() &#123;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;    gl_Position = aPosition;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;&#125;&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">FRAGMENT_SHADER</span> <span class=\"operator\">=</span></span><br><span class=\"line\">        <span class=\"string\">&quot;precision mediump float;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;uniform vec4 uColor;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;void main() &#123;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;   gl_FragColor = uColor;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;&#125;&quot;</span>;</span><br></pre></td></tr></table></figure>\n<p>shader Vertex Shader  aPostion Fragment Shader  uColor </p>\n<p>GLSL  c  GLE S Program </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">createProgram</span><span class=\"params\">(String vertexSource, String fragmentSource)</span> &#123;</span><br><span class=\"line\">       <span class=\"type\">int</span> <span class=\"variable\">vertexShader</span> <span class=\"operator\">=</span> loadShader(GLES32.GL_VERTEX_SHADER, vertexSource);</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (vertexShader == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"type\">int</span> <span class=\"variable\">pixelShader</span> <span class=\"operator\">=</span> loadShader(GLES32.GL_FRAGMENT_SHADER, fragmentSource);</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (pixelShader == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"type\">int</span> <span class=\"variable\">program</span> <span class=\"operator\">=</span> GLES32.glCreateProgram();</span><br><span class=\"line\">       GLES32.glAttachShader(program, vertexShader);</span><br><span class=\"line\">       GLES32.glAttachShader(program, pixelShader);</span><br><span class=\"line\">       GLES32.glLinkProgram(program);</span><br><span class=\"line\">       <span class=\"type\">int</span>[] linkStatus = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">       GLES32.glGetProgramiv(program, GLES32.GL_LINK_STATUS, linkStatus, <span class=\"number\">0</span>);</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (linkStatus[<span class=\"number\">0</span>] != GLES32.GL_TRUE) &#123;</span><br><span class=\"line\">           GLES32.glDeleteProgram(program);</span><br><span class=\"line\">           program = <span class=\"number\">0</span>;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> program;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">loadShader</span><span class=\"params\">(<span class=\"type\">int</span> shaderType, String source)</span> &#123;</span><br><span class=\"line\">       <span class=\"type\">int</span> <span class=\"variable\">shader</span> <span class=\"operator\">=</span> GLES32.glCreateShader(shaderType);</span><br><span class=\"line\">       GLES32.glShaderSource(shader, source);</span><br><span class=\"line\">       GLES32.glCompileShader(shader);</span><br><span class=\"line\">       <span class=\"type\">int</span>[] compiled = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">       GLES32.glGetShaderiv(shader, GLES32.GL_COMPILE_STATUS, compiled, <span class=\"number\">0</span>);</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (compiled[<span class=\"number\">0</span>] == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">           GLES32.glDeleteShader(shader);</span><br><span class=\"line\">           GLES32.glGetShaderInfoLog(shader);</span><br><span class=\"line\">           shader = <span class=\"number\">0</span>;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> shader;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>shadershader Program</p>\n<p>Program aPosition  uColor </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GLES32.glUseProgram(program);                                                                                        <span class=\"comment\">//1</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"variable\">triangleColorLocation</span> <span class=\"operator\">=</span> GLES32.glGetUniformLocation(program, <span class=\"string\">&quot;uColor&quot;</span>);                             <span class=\"comment\">//2</span></span><br><span class=\"line\">GLES32.glUniform4fv(triangleColorLocation, <span class=\"number\">1</span>, createFloatBuffer(TRIANGLE_COLOR));                     <span class=\"comment\">//3</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"variable\">aPositionLocation</span> <span class=\"operator\">=</span> GLES32.glGetAttribLocation(program, <span class=\"string\">&quot;aPosition&quot;</span>);                                  <span class=\"comment\">//4</span></span><br><span class=\"line\">GLES32.glEnableVertexAttribArray(aPositionLocation);                                                             <span class=\"comment\">//5</span></span><br><span class=\"line\"><span class=\"type\">FloatBuffer</span> <span class=\"variable\">vertexBuffer</span> <span class=\"operator\">=</span> createFloatBuffer(TRIANGLE_COORDS);                                             <span class=\"comment\">//6</span></span><br><span class=\"line\">GLES32.glVertexAttribPointer(aPositionLocation, <span class=\"number\">2</span>, GLES32.GL_FLOAT, <span class=\"literal\">false</span>, <span class=\"number\">2</span> * <span class=\"number\">4</span>, vertexBuffer);      <span class=\"comment\">//7</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<ol>\n<li> Program  <code>glUseProgram</code></li>\n<li> uColor  uniform uniform  GLSL  <code>glGetUniformLocation</code> uColor  GPU </li>\n<li> uColor  <code>glUniform4fv</code></li>\n<li>aPosition  <code>attribute</code>attribute vertex shader  <code>glGetAttribLocation</code>  aPostion </li>\n<li> uniform  attribute <code>glEnableVertexAttribArray</code></li>\n<li> aPosition GPU<code>glVertexAttribPointer</code><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void glVertexAttribPointer(</span><br><span class=\"line\">    GLuint  \tindex,</span><br><span class=\"line\"> \tGLint  \tsize,</span><br><span class=\"line\"> \tGLenum  \ttype,</span><br><span class=\"line\"> \tGLboolean  \tnormalized,</span><br><span class=\"line\"> \tGLsizei  \tstride,</span><br><span class=\"line\"> \tconst GLvoid *  \tpointer);</span><br></pre></td></tr></table></figure>\nc index  attribute  location aPositionLocation<br>size attribute  xy 2<br>typefloat GLES32.GL_FLOAT <br>normallzed  -1~1 false <br>stride  aPosition  float 4*2float  4 <br>pointer  aPosition  vertexBuffer </li>\n</ol>\n<p> GPU </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GLES32.glDrawArrays(GLES32.GL_TRIANGLE_STRIP, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\">EGL14.eglSwapBuffers(mEGLDisplay, mEGLSurface);</span><br></pre></td></tr></table></figure>\n<p><br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/gles_triangle.png\" alt=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/gles_triangle.png\"></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zql.mobile.graphics.opengl;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.opengl.EGL14;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.opengl.EGLConfig;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.opengl.EGLContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.opengl.EGLDisplay;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.opengl.EGLSurface;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.opengl.GLES32;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.os.Bundle;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.view.SurfaceHolder;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.view.SurfaceView;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.zql.mobile.graphics.R;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.nio.ByteBuffer;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.nio.ByteOrder;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.nio.FloatBuffer;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">OpenGLES_VertexAttributePointer_Activity</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">AppCompatActivity</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">SurfaceHolder</span>.Callback &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLDisplay mEGLDisplay;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLContext mEGLContext;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLSurface mEGLSurface;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> EGLConfig mEGLConfig;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">VERTEX_SHADER</span> <span class=\"operator\">=</span></span><br><span class=\"line\">            <span class=\"string\">&quot;attribute vec4 aPosition;&quot;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&quot;void main() &#123;&quot;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&quot;    gl_Position = aPosition;&quot;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&quot;&#125;&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">String</span> <span class=\"variable\">FRAGMENT_SHADER</span> <span class=\"operator\">=</span></span><br><span class=\"line\">            <span class=\"string\">&quot;precision mediump float;&quot;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&quot;uniform vec4 uColor;&quot;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&quot;void main() &#123;&quot;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&quot;   gl_FragColor = uColor;&quot;</span> +</span><br><span class=\"line\">                    <span class=\"string\">&quot;&#125;&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">float</span> TRIANGLE_COORDS[] = &#123;</span><br><span class=\"line\">            <span class=\"number\">0.5f</span>, <span class=\"number\">0.5f</span>,   <span class=\"comment\">// 0 top</span></span><br><span class=\"line\">            -<span class=\"number\">0.5f</span>, <span class=\"number\">0.5f</span>,   <span class=\"comment\">// 1 bottom left</span></span><br><span class=\"line\">            <span class=\"number\">0f</span>, -<span class=\"number\">0.5f</span>    <span class=\"comment\">// 2 bottom right</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">float</span> TRIANGLE_COLOR[] = &#123;<span class=\"number\">0.1F</span>, <span class=\"number\">0.9F</span>, <span class=\"number\">0.4F</span>, <span class=\"number\">1.0F</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">        setContentView(R.layout.activity_open_g_l_vertex_attribute_pointer);</span><br><span class=\"line\">        <span class=\"type\">SurfaceView</span> <span class=\"variable\">sv</span> <span class=\"operator\">=</span> findViewById(R.id.surface_view);</span><br><span class=\"line\">        sv.getHolder().addCallback(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">initEGL</span><span class=\"params\">(SurfaceHolder holder)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// get an EGL display connection</span></span><br><span class=\"line\">        mEGLDisplay = EGL14.eglGetDisplay(EGL14.EGL_DEFAULT_DISPLAY);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span>[] version = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"comment\">// initialize EGL display connection</span></span><br><span class=\"line\">        EGL14.eglInitialize(mEGLDisplay, version, <span class=\"number\">0</span>, version, <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// target attribute list</span></span><br><span class=\"line\">        <span class=\"type\">int</span>[] attribList = &#123;</span><br><span class=\"line\">                EGL14.EGL_RED_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">                EGL14.EGL_GREEN_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">                EGL14.EGL_BLUE_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">                EGL14.EGL_ALPHA_SIZE, <span class=\"number\">8</span>,</span><br><span class=\"line\">                EGL14.EGL_NONE</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        EGLConfig[] configs = <span class=\"keyword\">new</span> <span class=\"title class_\">EGLConfig</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"type\">int</span>[] numConfigs = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"comment\">//get appropriate EGL frame buffer configuration</span></span><br><span class=\"line\">        EGL14.eglChooseConfig(mEGLDisplay, attribList, <span class=\"number\">0</span>, configs, <span class=\"number\">0</span>, configs.length,</span><br><span class=\"line\">                numConfigs, <span class=\"number\">0</span>);</span><br><span class=\"line\">        mEGLConfig = configs[<span class=\"number\">0</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span>[] attrib3_list = &#123;</span><br><span class=\"line\">                EGL14.EGL_CONTEXT_CLIENT_VERSION, <span class=\"number\">3</span>,</span><br><span class=\"line\">                EGL14.EGL_NONE</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//create an EGL rendering context</span></span><br><span class=\"line\">        mEGLContext = EGL14.eglCreateContext(mEGLDisplay, mEGLConfig, EGL14.EGL_NO_CONTEXT,</span><br><span class=\"line\">                attrib3_list, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// create an EGL window surface</span></span><br><span class=\"line\">        <span class=\"type\">int</span>[] surfaceAttribs = &#123;</span><br><span class=\"line\">                EGL14.EGL_NONE</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        mEGLSurface = EGL14.eglCreateWindowSurface(mEGLDisplay, mEGLConfig, holder.getSurface(),</span><br><span class=\"line\">                surfaceAttribs, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// connect the context to the surface</span></span><br><span class=\"line\">        EGL14.eglMakeCurrent(mEGLDisplay, mEGLSurface, mEGLSurface, mEGLContext);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceCreated</span><span class=\"params\">(SurfaceHolder holder)</span> &#123;</span><br><span class=\"line\">        initEGL(holder);</span><br><span class=\"line\">        GLES32.glClearColor(<span class=\"number\">1.0F</span>, <span class=\"number\">0F</span>, <span class=\"number\">0F</span>, <span class=\"number\">1F</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceChanged</span><span class=\"params\">(SurfaceHolder holder, <span class=\"type\">int</span> format, <span class=\"type\">int</span> width, <span class=\"type\">int</span> height)</span> &#123;</span><br><span class=\"line\">        GLES32.glViewport(<span class=\"number\">0</span>, <span class=\"number\">0</span>, width, height);</span><br><span class=\"line\">        GLES32.glClear(GLES32.GL_COLOR_BUFFER_BIT);</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">program</span> <span class=\"operator\">=</span> createProgram(VERTEX_SHADER, FRAGMENT_SHADER);</span><br><span class=\"line\">        GLES32.glUseProgram(program);</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">triangleColorLocation</span> <span class=\"operator\">=</span> GLES32.glGetUniformLocation(program, <span class=\"string\">&quot;uColor&quot;</span>);</span><br><span class=\"line\">        GLES32.glUniform4fv(triangleColorLocation, <span class=\"number\">1</span>, createFloatBuffer(TRIANGLE_COLOR));</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">aPositionLocation</span> <span class=\"operator\">=</span> GLES32.glGetAttribLocation(program, <span class=\"string\">&quot;aPosition&quot;</span>);</span><br><span class=\"line\">        GLES32.glEnableVertexAttribArray(aPositionLocation);</span><br><span class=\"line\">        <span class=\"type\">FloatBuffer</span> <span class=\"variable\">vertexBuffer</span> <span class=\"operator\">=</span> createFloatBuffer(TRIANGLE_COORDS);</span><br><span class=\"line\">        GLES32.glVertexAttribPointer(aPositionLocation, <span class=\"number\">2</span>, GLES32.GL_FLOAT, <span class=\"literal\">false</span>, <span class=\"number\">2</span> * <span class=\"number\">4</span>, vertexBuffer);</span><br><span class=\"line\">        GLES32.glDrawArrays(GLES32.GL_TRIANGLE_STRIP, <span class=\"number\">0</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\">        EGL14.eglSwapBuffers(mEGLDisplay, mEGLSurface);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">surfaceDestroyed</span><span class=\"params\">(SurfaceHolder holder)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">createProgram</span><span class=\"params\">(String vertexSource, String fragmentSource)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">vertexShader</span> <span class=\"operator\">=</span> loadShader(GLES32.GL_VERTEX_SHADER, vertexSource);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (vertexShader == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">pixelShader</span> <span class=\"operator\">=</span> loadShader(GLES32.GL_FRAGMENT_SHADER, fragmentSource);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pixelShader == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">program</span> <span class=\"operator\">=</span> GLES32.glCreateProgram();</span><br><span class=\"line\">        GLES32.glAttachShader(program, vertexShader);</span><br><span class=\"line\">        GLES32.glAttachShader(program, pixelShader);</span><br><span class=\"line\">        GLES32.glLinkProgram(program);</span><br><span class=\"line\">        <span class=\"type\">int</span>[] linkStatus = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">        GLES32.glGetProgramiv(program, GLES32.GL_LINK_STATUS, linkStatus, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (linkStatus[<span class=\"number\">0</span>] != GLES32.GL_TRUE) &#123;</span><br><span class=\"line\">            GLES32.glDeleteProgram(program);</span><br><span class=\"line\">            program = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> program;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">loadShader</span><span class=\"params\">(<span class=\"type\">int</span> shaderType, String source)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">shader</span> <span class=\"operator\">=</span> GLES32.glCreateShader(shaderType);</span><br><span class=\"line\">        GLES32.glShaderSource(shader, source);</span><br><span class=\"line\">        GLES32.glCompileShader(shader);</span><br><span class=\"line\">        <span class=\"type\">int</span>[] compiled = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">        GLES32.glGetShaderiv(shader, GLES32.GL_COMPILE_STATUS, compiled, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (compiled[<span class=\"number\">0</span>] == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            GLES32.glDeleteShader(shader);</span><br><span class=\"line\">            GLES32.glGetShaderInfoLog(shader);</span><br><span class=\"line\">            shader = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> shader;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> FloatBuffer <span class=\"title function_\">createFloatBuffer</span><span class=\"params\">(<span class=\"type\">float</span>[] coords)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">ByteBuffer</span> <span class=\"variable\">bb</span> <span class=\"operator\">=</span> ByteBuffer.allocateDirect(coords.length * <span class=\"number\">4</span>);</span><br><span class=\"line\">        bb.order(ByteOrder.nativeOrder());</span><br><span class=\"line\">        <span class=\"type\">FloatBuffer</span> <span class=\"variable\">fb</span> <span class=\"operator\">=</span> bb.asFloatBuffer();</span><br><span class=\"line\">        fb.put(coords);</span><br><span class=\"line\">        fb.position(<span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fb;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><a href=\"https://learnopengl-cn.github.io/01%20Getting%20started/04%20Hello%20Triangle/#_3\">https://learnopengl-cn.github.io/01%20Getting%20started/04%20Hello%20Triangle/#_3</a><br><a href=\"https://www.khronos.org/registry/OpenGL-Refpages/es3.0/html/glVertexAttribPointer.xhtml\">https://www.khronos.org/registry/OpenGL-Refpages/es3.0/html/glVertexAttribPointer.xhtml</a></p>"},{"title":"Android OpenGL - 01.OpenGL","date":"2020-03-26T16:48:45.000Z","cover":"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/opengl_banner.jpg","_content":"\n> Android OpenGL\n\n# OpenGL\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/OpenGL%E4%BB%8B%E7%BB%8D%E5%8F%8A%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA.PNG)\n<!-- more -->\n\n## OpenGL \n\nOpenGLOpenGraphicsLibraryOpenGLESOpenGLforEmbeddedSystemsPad   OpenGLOpenGL3.0OpenGLES2.0\n\n## EGL\n\nEGL  OpenGL  Android  EGL  iOS EAGL\n\n## EGL \n\nOpenGLES OpenGLES  Surface OpenGLES  EGL \n\n## EGLEGL  Surface\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/opengl_es_surface.png)\n\n\n# c++OpenGL\n\n## \n\n c++  Android LLDBCMAKE  NDK\ncmakelocal.properties\n\n```gradle\ncmake.dir=C\\:\\\\Users\\\\zqlxt\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\cmake\\\\3.10.2.4988404\n```\n\n## OpenGL\n\n CMakeLists.txt \n\n```\nfind_library( # Sets the name of the path variable.\n              log-lib\n\n              # Specifies the name of the NDK library that\n              # you want CMake to locate.\n              log\n              EGL  # egl\n              GLESv2  # opengles \n              android)  # android ndk\n```","source":"_posts/android-opengl-01.md","raw":"---\ntitle: Android OpenGL - 01.OpenGL\ndate: 2020-03-27 00:48:45\ntags: \n- android\n- opengl\ncover: https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/opengl_banner.jpg\n---\n\n> Android OpenGL\n\n# OpenGL\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/OpenGL%E4%BB%8B%E7%BB%8D%E5%8F%8A%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA.PNG)\n<!-- more -->\n\n## OpenGL \n\nOpenGLOpenGraphicsLibraryOpenGLESOpenGLforEmbeddedSystemsPad   OpenGLOpenGL3.0OpenGLES2.0\n\n## EGL\n\nEGL  OpenGL  Android  EGL  iOS EAGL\n\n## EGL \n\nOpenGLES OpenGLES  Surface OpenGLES  EGL \n\n## EGLEGL  Surface\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/opengl_es_surface.png)\n\n\n# c++OpenGL\n\n## \n\n c++  Android LLDBCMAKE  NDK\ncmakelocal.properties\n\n```gradle\ncmake.dir=C\\:\\\\Users\\\\zqlxt\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\cmake\\\\3.10.2.4988404\n```\n\n## OpenGL\n\n CMakeLists.txt \n\n```\nfind_library( # Sets the name of the path variable.\n              log-lib\n\n              # Specifies the name of the NDK library that\n              # you want CMake to locate.\n              log\n              EGL  # egl\n              GLESv2  # opengles \n              android)  # android ndk\n```","slug":"android-opengl-01","published":1,"updated":"2024-08-21T03:16:19.781Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vr000q5p6tgcre352i","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><blockquote>\n<p>Android OpenGL</p>\n</blockquote>\n<h1 id=\"OpenGL\"><a href=\"#OpenGL\" class=\"headerlink\" title=\"OpenGL\"></a>OpenGL</h1><p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/OpenGL%E4%BB%8B%E7%BB%8D%E5%8F%8A%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA.PNG\" alt=\"\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"OpenGL-\"><a href=\"#OpenGL-\" class=\"headerlink\" title=\"OpenGL \"></a>OpenGL </h2><p>OpenGLOpenGraphicsLibraryOpenGLESOpenGLforEmbeddedSystemsPad   OpenGLOpenGL3.0OpenGLES2.0</p>\n<h2 id=\"EGL\"><a href=\"#EGL\" class=\"headerlink\" title=\"EGL\"></a>EGL</h2><p>EGL  OpenGL  Android  EGL  iOS EAGL</p>\n<h2 id=\"EGL-\"><a href=\"#EGL-\" class=\"headerlink\" title=\"EGL \"></a>EGL </h2><p>OpenGLES OpenGLES  Surface OpenGLES  EGL </p>\n<h2 id=\"EGLEGL--Surface\"><a href=\"#EGLEGL--Surface\" class=\"headerlink\" title=\"EGLEGL  Surface\"></a>EGLEGL  Surface</h2><p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/opengl_es_surface.png\" alt=\"\"></p>\n<h1 id=\"c-OpenGL\"><a href=\"#c-OpenGL\" class=\"headerlink\" title=\"c++OpenGL\"></a>c++OpenGL</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> c++  Android LLDBCMAKE  NDK<br>cmakelocal.properties</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cmake.dir=C\\:\\\\Users\\\\zqlxt\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\cmake\\\\<span class=\"number\">3.10</span>.<span class=\"number\">2.4988404</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"OpenGL\"><a href=\"#OpenGL\" class=\"headerlink\" title=\"OpenGL\"></a>OpenGL</h2><p> CMakeLists.txt </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find_library( # Sets the name of the path variable.</span><br><span class=\"line\">              log-lib</span><br><span class=\"line\"></span><br><span class=\"line\">              # Specifies the name of the NDK library that</span><br><span class=\"line\">              # you want CMake to locate.</span><br><span class=\"line\">              log</span><br><span class=\"line\">              EGL  # egl</span><br><span class=\"line\">              GLESv2  # opengles </span><br><span class=\"line\">              android)  # android ndk</span><br></pre></td></tr></table></figure>","excerpt":"<blockquote>\n<p>Android OpenGL</p>\n</blockquote>\n<h1 id=\"OpenGL\"><a href=\"#OpenGL\" class=\"headerlink\" title=\"OpenGL\"></a>OpenGL</h1><p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/OpenGL%E4%BB%8B%E7%BB%8D%E5%8F%8A%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA.PNG\" alt=\"\"></p>","more":"<h2 id=\"OpenGL-\"><a href=\"#OpenGL-\" class=\"headerlink\" title=\"OpenGL \"></a>OpenGL </h2><p>OpenGLOpenGraphicsLibraryOpenGLESOpenGLforEmbeddedSystemsPad   OpenGLOpenGL3.0OpenGLES2.0</p>\n<h2 id=\"EGL\"><a href=\"#EGL\" class=\"headerlink\" title=\"EGL\"></a>EGL</h2><p>EGL  OpenGL  Android  EGL  iOS EAGL</p>\n<h2 id=\"EGL-\"><a href=\"#EGL-\" class=\"headerlink\" title=\"EGL \"></a>EGL </h2><p>OpenGLES OpenGLES  Surface OpenGLES  EGL </p>\n<h2 id=\"EGLEGL--Surface\"><a href=\"#EGLEGL--Surface\" class=\"headerlink\" title=\"EGLEGL  Surface\"></a>EGLEGL  Surface</h2><p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/opengl_es_surface.png\" alt=\"\"></p>\n<h1 id=\"c-OpenGL\"><a href=\"#c-OpenGL\" class=\"headerlink\" title=\"c++OpenGL\"></a>c++OpenGL</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> c++  Android LLDBCMAKE  NDK<br>cmakelocal.properties</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cmake.dir=C\\:\\\\Users\\\\zqlxt\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\cmake\\\\<span class=\"number\">3.10</span>.<span class=\"number\">2.4988404</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"OpenGL\"><a href=\"#OpenGL\" class=\"headerlink\" title=\"OpenGL\"></a>OpenGL</h2><p> CMakeLists.txt </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find_library( # Sets the name of the path variable.</span><br><span class=\"line\">              log-lib</span><br><span class=\"line\"></span><br><span class=\"line\">              # Specifies the name of the NDK library that</span><br><span class=\"line\">              # you want CMake to locate.</span><br><span class=\"line\">              log</span><br><span class=\"line\">              EGL  # egl</span><br><span class=\"line\">              GLESv2  # opengles </span><br><span class=\"line\">              android)  # android ndk</span><br></pre></td></tr></table></figure>"},{"title":" Android ","date":"2022-04-16T13:49:25.000Z","_content":"\n View  naive Android  Google  [ExoPlayer](https://github.com/google/ExoPlayer)\n\n1.  java \n2. \n\n\n1.  ExoPlayer \n2.  ExoPlayer Google Play\n3. \n\n ExoPlayer ","source":"_posts/android-player.md","raw":"---\ntitle:  Android \ndate: 2022-04-16 21:49:25\ntags: \n    - player\n    - android\n---\n\n View  naive Android  Google  [ExoPlayer](https://github.com/google/ExoPlayer)\n\n1.  java \n2. \n\n\n1.  ExoPlayer \n2.  ExoPlayer Google Play\n3. \n\n ExoPlayer ","slug":"android-player","published":1,"updated":"2024-08-21T03:16:19.782Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vs000s5p6tapel2y81","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p> View  naive Android  Google  <a href=\"https://github.com/google/ExoPlayer\">ExoPlayer</a></p>\n<ol>\n<li> java </li>\n<li></li>\n</ol>\n<p></p>\n<ol>\n<li> ExoPlayer </li>\n<li> ExoPlayer Google Play</li>\n<li></li>\n</ol>\n<p> ExoPlayer </p>\n","excerpt":"","more":"<p> View  naive Android  Google  <a href=\"https://github.com/google/ExoPlayer\">ExoPlayer</a></p>\n<ol>\n<li> java </li>\n<li></li>\n</ol>\n<p></p>\n<ol>\n<li> ExoPlayer </li>\n<li> ExoPlayer Google Play</li>\n<li></li>\n</ol>\n<p> ExoPlayer </p>\n"},{"title":" C  ArrayList","date":"2022-01-20T12:56:53.000Z","_content":"\n[(C)](https://book.douban.com/subject/4710825/)List \n `IntList`\n\n<!--more-->\n\n```c\n#ifndef ARRAY_LIST_H\n#define ARRAY_LIST_H\n#include <limits.h>\n#include <stdlib.h>\n#define MaxSize 10\n\ntypedef struct\n{\n  int *elem;\n  int length;\n  int capacity;\n  void (*toString) (void *);\n  void (*add)(void*,int data);\n  void (*insertAt) (void *, int position, int data);\n  void (*deleteAt) (void *, int position);\n} IntList;\n\nvoid printArrayList (void *data);\nvoid insertAt (void *list, int i, int data);\nvoid add(void *list,int data);\nvoid deleteAt (void *list, int i);\nvoid\ninitIntList (IntList * arrayList)\n{\n  arrayList->elem = malloc (MaxSize * sizeof (int));\n  if (!arrayList->elem)\n    {\n      exit (0);\n    }\n  arrayList->length = 0;\n  arrayList->capacity = MaxSize;\n  arrayList->toString = printArrayList;\n  arrayList->insertAt = insertAt;\n  arrayList->add = add;\n  arrayList->deleteAt = deleteAt;\n}\n\nIntList *\nobtainIntList ()\n{\n  IntList *list = (IntList *) malloc (sizeof (IntList));\n  initIntList (list);\n  return list;\n}\n\nvoid add(void *out,int data){\n    IntList *list = (IntList*)out;\n    list->insertAt(out,list->length,data);\n}\n\nvoid\ninsertAt (void *out, int i, int data)\n{\n  IntList *list = (IntList *) out;\n  int *base, *insertPtr, *p;\n  if (i < 0 || i > list->length)\n    {\n      exit (0);\n    }\n  if (list->length >= list->capacity)\n    {\n      base = realloc (list->elem, (list->capacity + 10) * sizeof (int));\n      list->elem = base;\n      list->capacity = list->capacity + 10;\n    }\n  insertPtr = &(list->elem[i]);\n  for (p = &(list->elem[list->length - 1]); p >= insertPtr; p--)\n    {\n      *(p + 1) = *p;\n    }\n  *insertPtr = data;\n  list->length++;\n}\n\nvoid\ndeleteAt (void *out, int position)\n{\n  IntList *list = (IntList *) out;\n  int *deleteItem,*q;\n  if (position < 0 || position > list->length - 1)\n    {\n      exit (0);\n    }\n  deleteItem = &(list->elem[position]);\n  q = list->elem + list->length - 1;\n  for (deleteItem; deleteItem < q; ++deleteItem)\n    {\n      *(deleteItem) = *(deleteItem + 1);\n    }\n  list->length--;\n}\n\nvoid\nprintArrayList (void *data)\n{\n  IntList *list = (IntList *) data;\n  printf (\"[\");\n  for (int i = 0; i < list->length; i++)\n    {\n      if (i != list->length - 1)\n  {\n    printf (\"%d,\", list->elem[i]);\n  }\n      else\n  {\n    printf (\"%d\", list->elem[i]);\n  }\n\n    }\n  printf (\"]\\n\");\n}\n\n#endif\n\n```\n\n```c\n#include <stdio.h>\n#include \"IntList.h\"\nint\nmain ()\n{\n  IntList *list = obtainIntList ();\n  printf (\"init an empty int list\\n\");\n  list->toString (list);\n  for (int i = 0; i < 5; i++)\n    {\n      list->insertAt (list, i, i);\n    }\n  printf (\"add 5 item to list\\n\");\n  list->toString (list);\n  for (int i = 5; i < 10; i++)\n    {\n      list->add (list, i);\n    }\n  printf (\"add 5 item to list\\n\");\n  list->toString (list);\n  printf (\"delete the item at index of 2\\n\");\n  list->deleteAt (list, 2);\n  list->toString (list);\n  free (list);\n  return 0;\n}\n\n```\n\n\n```\ninit an empty int list\n[]\nadd 5 item to list\n[0,1,2,3,4]\nadd 5 item to list\n[0,1,2,3,4,5,6,7,8,9]\ndelete the item at index of 2\n[0,1,3,4,5,6,7,8,9]\n```","source":"_posts/array-list-in-c.md","raw":"---\ntitle:  C  ArrayList\ndate: 2022-01-20 20:56:53\ntags: C\n---\n\n[(C)](https://book.douban.com/subject/4710825/)List \n `IntList`\n\n<!--more-->\n\n```c\n#ifndef ARRAY_LIST_H\n#define ARRAY_LIST_H\n#include <limits.h>\n#include <stdlib.h>\n#define MaxSize 10\n\ntypedef struct\n{\n  int *elem;\n  int length;\n  int capacity;\n  void (*toString) (void *);\n  void (*add)(void*,int data);\n  void (*insertAt) (void *, int position, int data);\n  void (*deleteAt) (void *, int position);\n} IntList;\n\nvoid printArrayList (void *data);\nvoid insertAt (void *list, int i, int data);\nvoid add(void *list,int data);\nvoid deleteAt (void *list, int i);\nvoid\ninitIntList (IntList * arrayList)\n{\n  arrayList->elem = malloc (MaxSize * sizeof (int));\n  if (!arrayList->elem)\n    {\n      exit (0);\n    }\n  arrayList->length = 0;\n  arrayList->capacity = MaxSize;\n  arrayList->toString = printArrayList;\n  arrayList->insertAt = insertAt;\n  arrayList->add = add;\n  arrayList->deleteAt = deleteAt;\n}\n\nIntList *\nobtainIntList ()\n{\n  IntList *list = (IntList *) malloc (sizeof (IntList));\n  initIntList (list);\n  return list;\n}\n\nvoid add(void *out,int data){\n    IntList *list = (IntList*)out;\n    list->insertAt(out,list->length,data);\n}\n\nvoid\ninsertAt (void *out, int i, int data)\n{\n  IntList *list = (IntList *) out;\n  int *base, *insertPtr, *p;\n  if (i < 0 || i > list->length)\n    {\n      exit (0);\n    }\n  if (list->length >= list->capacity)\n    {\n      base = realloc (list->elem, (list->capacity + 10) * sizeof (int));\n      list->elem = base;\n      list->capacity = list->capacity + 10;\n    }\n  insertPtr = &(list->elem[i]);\n  for (p = &(list->elem[list->length - 1]); p >= insertPtr; p--)\n    {\n      *(p + 1) = *p;\n    }\n  *insertPtr = data;\n  list->length++;\n}\n\nvoid\ndeleteAt (void *out, int position)\n{\n  IntList *list = (IntList *) out;\n  int *deleteItem,*q;\n  if (position < 0 || position > list->length - 1)\n    {\n      exit (0);\n    }\n  deleteItem = &(list->elem[position]);\n  q = list->elem + list->length - 1;\n  for (deleteItem; deleteItem < q; ++deleteItem)\n    {\n      *(deleteItem) = *(deleteItem + 1);\n    }\n  list->length--;\n}\n\nvoid\nprintArrayList (void *data)\n{\n  IntList *list = (IntList *) data;\n  printf (\"[\");\n  for (int i = 0; i < list->length; i++)\n    {\n      if (i != list->length - 1)\n  {\n    printf (\"%d,\", list->elem[i]);\n  }\n      else\n  {\n    printf (\"%d\", list->elem[i]);\n  }\n\n    }\n  printf (\"]\\n\");\n}\n\n#endif\n\n```\n\n```c\n#include <stdio.h>\n#include \"IntList.h\"\nint\nmain ()\n{\n  IntList *list = obtainIntList ();\n  printf (\"init an empty int list\\n\");\n  list->toString (list);\n  for (int i = 0; i < 5; i++)\n    {\n      list->insertAt (list, i, i);\n    }\n  printf (\"add 5 item to list\\n\");\n  list->toString (list);\n  for (int i = 5; i < 10; i++)\n    {\n      list->add (list, i);\n    }\n  printf (\"add 5 item to list\\n\");\n  list->toString (list);\n  printf (\"delete the item at index of 2\\n\");\n  list->deleteAt (list, 2);\n  list->toString (list);\n  free (list);\n  return 0;\n}\n\n```\n\n\n```\ninit an empty int list\n[]\nadd 5 item to list\n[0,1,2,3,4]\nadd 5 item to list\n[0,1,2,3,4,5,6,7,8,9]\ndelete the item at index of 2\n[0,1,3,4,5,6,7,8,9]\n```","slug":"array-list-in-c","published":1,"updated":"2024-08-21T03:16:19.782Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vs000u5p6tdyukg30q","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><a href=\"https://book.douban.com/subject/4710825/\">(C)</a>List <br> <code>IntList</code></p>\n<span id=\"more\"></span>\n\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">ifndef</span> ARRAY_LIST_H</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> ARRAY_LIST_H</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;limits.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> MaxSize 10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">  <span class=\"type\">int</span> *elem;</span><br><span class=\"line\">  <span class=\"type\">int</span> length;</span><br><span class=\"line\">  <span class=\"type\">int</span> capacity;</span><br><span class=\"line\">  <span class=\"type\">void</span> (*toString) (<span class=\"type\">void</span> *);</span><br><span class=\"line\">  <span class=\"type\">void</span> (*add)(<span class=\"type\">void</span>*,<span class=\"type\">int</span> data);</span><br><span class=\"line\">  <span class=\"type\">void</span> (*insertAt) (<span class=\"type\">void</span> *, <span class=\"type\">int</span> position, <span class=\"type\">int</span> data);</span><br><span class=\"line\">  <span class=\"type\">void</span> (*deleteAt) (<span class=\"type\">void</span> *, <span class=\"type\">int</span> position);</span><br><span class=\"line\">&#125; IntList;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">printArrayList</span> <span class=\"params\">(<span class=\"type\">void</span> *data)</span>;</span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">insertAt</span> <span class=\"params\">(<span class=\"type\">void</span> *<span class=\"built_in\">list</span>, <span class=\"type\">int</span> i, <span class=\"type\">int</span> data)</span>;</span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">add</span><span class=\"params\">(<span class=\"type\">void</span> *<span class=\"built_in\">list</span>,<span class=\"type\">int</span> data)</span>;</span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">deleteAt</span> <span class=\"params\">(<span class=\"type\">void</span> *<span class=\"built_in\">list</span>, <span class=\"type\">int</span> i)</span>;</span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">initIntList</span> <span class=\"params\">(IntList * arrayList)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  arrayList-&gt;elem = <span class=\"built_in\">malloc</span> (MaxSize * <span class=\"keyword\">sizeof</span> (<span class=\"type\">int</span>));</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!arrayList-&gt;elem)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> (<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  arrayList-&gt;length = <span class=\"number\">0</span>;</span><br><span class=\"line\">  arrayList-&gt;capacity = MaxSize;</span><br><span class=\"line\">  arrayList-&gt;toString = printArrayList;</span><br><span class=\"line\">  arrayList-&gt;insertAt = insertAt;</span><br><span class=\"line\">  arrayList-&gt;add = add;</span><br><span class=\"line\">  arrayList-&gt;deleteAt = deleteAt;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">IntList *</span><br><span class=\"line\"><span class=\"title function_\">obtainIntList</span> <span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  IntList *<span class=\"built_in\">list</span> = (IntList *) <span class=\"built_in\">malloc</span> (<span class=\"keyword\">sizeof</span> (IntList));</span><br><span class=\"line\">  initIntList (<span class=\"built_in\">list</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">list</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">add</span><span class=\"params\">(<span class=\"type\">void</span> *out,<span class=\"type\">int</span> data)</span>&#123;</span><br><span class=\"line\">    IntList *<span class=\"built_in\">list</span> = (IntList*)out;</span><br><span class=\"line\">    <span class=\"built_in\">list</span>-&gt;insertAt(out,<span class=\"built_in\">list</span>-&gt;length,data);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">insertAt</span> <span class=\"params\">(<span class=\"type\">void</span> *out, <span class=\"type\">int</span> i, <span class=\"type\">int</span> data)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  IntList *<span class=\"built_in\">list</span> = (IntList *) out;</span><br><span class=\"line\">  <span class=\"type\">int</span> *base, *insertPtr, *p;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (i &lt; <span class=\"number\">0</span> || i &gt; <span class=\"built_in\">list</span>-&gt;length)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> (<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">list</span>-&gt;length &gt;= <span class=\"built_in\">list</span>-&gt;capacity)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      base = <span class=\"built_in\">realloc</span> (<span class=\"built_in\">list</span>-&gt;elem, (<span class=\"built_in\">list</span>-&gt;capacity + <span class=\"number\">10</span>) * <span class=\"keyword\">sizeof</span> (<span class=\"type\">int</span>));</span><br><span class=\"line\">      <span class=\"built_in\">list</span>-&gt;elem = base;</span><br><span class=\"line\">      <span class=\"built_in\">list</span>-&gt;capacity = <span class=\"built_in\">list</span>-&gt;capacity + <span class=\"number\">10</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  insertPtr = &amp;(<span class=\"built_in\">list</span>-&gt;elem[i]);</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (p = &amp;(<span class=\"built_in\">list</span>-&gt;elem[<span class=\"built_in\">list</span>-&gt;length - <span class=\"number\">1</span>]); p &gt;= insertPtr; p--)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      *(p + <span class=\"number\">1</span>) = *p;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  *insertPtr = data;</span><br><span class=\"line\">  <span class=\"built_in\">list</span>-&gt;length++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">deleteAt</span> <span class=\"params\">(<span class=\"type\">void</span> *out, <span class=\"type\">int</span> position)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  IntList *<span class=\"built_in\">list</span> = (IntList *) out;</span><br><span class=\"line\">  <span class=\"type\">int</span> *deleteItem,*q;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (position &lt; <span class=\"number\">0</span> || position &gt; <span class=\"built_in\">list</span>-&gt;length - <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> (<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  deleteItem = &amp;(<span class=\"built_in\">list</span>-&gt;elem[position]);</span><br><span class=\"line\">  q = <span class=\"built_in\">list</span>-&gt;elem + <span class=\"built_in\">list</span>-&gt;length - <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (deleteItem; deleteItem &lt; q; ++deleteItem)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      *(deleteItem) = *(deleteItem + <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"built_in\">list</span>-&gt;length--;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">printArrayList</span> <span class=\"params\">(<span class=\"type\">void</span> *data)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  IntList *<span class=\"built_in\">list</span> = (IntList *) data;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;[&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">list</span>-&gt;length; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i != <span class=\"built_in\">list</span>-&gt;length - <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;%d,&quot;</span>, <span class=\"built_in\">list</span>-&gt;elem[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;%d&quot;</span>, <span class=\"built_in\">list</span>-&gt;elem[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;]\\n&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">endif</span></span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;IntList.h&quot;</span></span></span><br><span class=\"line\"><span class=\"type\">int</span></span><br><span class=\"line\"><span class=\"title function_\">main</span> <span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  IntList *<span class=\"built_in\">list</span> = obtainIntList ();</span><br><span class=\"line\">  <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;init an empty int list\\n&quot;</span>);</span><br><span class=\"line\">  <span class=\"built_in\">list</span>-&gt;toString (<span class=\"built_in\">list</span>);</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"built_in\">list</span>-&gt;insertAt (<span class=\"built_in\">list</span>, i, i);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;add 5 item to list\\n&quot;</span>);</span><br><span class=\"line\">  <span class=\"built_in\">list</span>-&gt;toString (<span class=\"built_in\">list</span>);</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">5</span>; i &lt; <span class=\"number\">10</span>; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"built_in\">list</span>-&gt;add (<span class=\"built_in\">list</span>, i);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;add 5 item to list\\n&quot;</span>);</span><br><span class=\"line\">  <span class=\"built_in\">list</span>-&gt;toString (<span class=\"built_in\">list</span>);</span><br><span class=\"line\">  <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;delete the item at index of 2\\n&quot;</span>);</span><br><span class=\"line\">  <span class=\"built_in\">list</span>-&gt;deleteAt (<span class=\"built_in\">list</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">  <span class=\"built_in\">list</span>-&gt;toString (<span class=\"built_in\">list</span>);</span><br><span class=\"line\">  <span class=\"built_in\">free</span> (<span class=\"built_in\">list</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">init an empty int list</span><br><span class=\"line\">[]</span><br><span class=\"line\">add 5 item to list</span><br><span class=\"line\">[0,1,2,3,4]</span><br><span class=\"line\">add 5 item to list</span><br><span class=\"line\">[0,1,2,3,4,5,6,7,8,9]</span><br><span class=\"line\">delete the item at index of 2</span><br><span class=\"line\">[0,1,3,4,5,6,7,8,9]</span><br></pre></td></tr></table></figure>","excerpt":"<p><a href=\"https://book.douban.com/subject/4710825/\">(C)</a>List <br> <code>IntList</code></p>","more":"<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">ifndef</span> ARRAY_LIST_H</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> ARRAY_LIST_H</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;limits.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> MaxSize 10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">  <span class=\"type\">int</span> *elem;</span><br><span class=\"line\">  <span class=\"type\">int</span> length;</span><br><span class=\"line\">  <span class=\"type\">int</span> capacity;</span><br><span class=\"line\">  <span class=\"type\">void</span> (*toString) (<span class=\"type\">void</span> *);</span><br><span class=\"line\">  <span class=\"type\">void</span> (*add)(<span class=\"type\">void</span>*,<span class=\"type\">int</span> data);</span><br><span class=\"line\">  <span class=\"type\">void</span> (*insertAt) (<span class=\"type\">void</span> *, <span class=\"type\">int</span> position, <span class=\"type\">int</span> data);</span><br><span class=\"line\">  <span class=\"type\">void</span> (*deleteAt) (<span class=\"type\">void</span> *, <span class=\"type\">int</span> position);</span><br><span class=\"line\">&#125; IntList;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">printArrayList</span> <span class=\"params\">(<span class=\"type\">void</span> *data)</span>;</span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">insertAt</span> <span class=\"params\">(<span class=\"type\">void</span> *<span class=\"built_in\">list</span>, <span class=\"type\">int</span> i, <span class=\"type\">int</span> data)</span>;</span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">add</span><span class=\"params\">(<span class=\"type\">void</span> *<span class=\"built_in\">list</span>,<span class=\"type\">int</span> data)</span>;</span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">deleteAt</span> <span class=\"params\">(<span class=\"type\">void</span> *<span class=\"built_in\">list</span>, <span class=\"type\">int</span> i)</span>;</span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">initIntList</span> <span class=\"params\">(IntList * arrayList)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  arrayList-&gt;elem = <span class=\"built_in\">malloc</span> (MaxSize * <span class=\"keyword\">sizeof</span> (<span class=\"type\">int</span>));</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!arrayList-&gt;elem)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> (<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  arrayList-&gt;length = <span class=\"number\">0</span>;</span><br><span class=\"line\">  arrayList-&gt;capacity = MaxSize;</span><br><span class=\"line\">  arrayList-&gt;toString = printArrayList;</span><br><span class=\"line\">  arrayList-&gt;insertAt = insertAt;</span><br><span class=\"line\">  arrayList-&gt;add = add;</span><br><span class=\"line\">  arrayList-&gt;deleteAt = deleteAt;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">IntList *</span><br><span class=\"line\"><span class=\"title function_\">obtainIntList</span> <span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  IntList *<span class=\"built_in\">list</span> = (IntList *) <span class=\"built_in\">malloc</span> (<span class=\"keyword\">sizeof</span> (IntList));</span><br><span class=\"line\">  initIntList (<span class=\"built_in\">list</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">list</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">add</span><span class=\"params\">(<span class=\"type\">void</span> *out,<span class=\"type\">int</span> data)</span>&#123;</span><br><span class=\"line\">    IntList *<span class=\"built_in\">list</span> = (IntList*)out;</span><br><span class=\"line\">    <span class=\"built_in\">list</span>-&gt;insertAt(out,<span class=\"built_in\">list</span>-&gt;length,data);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">insertAt</span> <span class=\"params\">(<span class=\"type\">void</span> *out, <span class=\"type\">int</span> i, <span class=\"type\">int</span> data)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  IntList *<span class=\"built_in\">list</span> = (IntList *) out;</span><br><span class=\"line\">  <span class=\"type\">int</span> *base, *insertPtr, *p;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (i &lt; <span class=\"number\">0</span> || i &gt; <span class=\"built_in\">list</span>-&gt;length)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> (<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">list</span>-&gt;length &gt;= <span class=\"built_in\">list</span>-&gt;capacity)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      base = <span class=\"built_in\">realloc</span> (<span class=\"built_in\">list</span>-&gt;elem, (<span class=\"built_in\">list</span>-&gt;capacity + <span class=\"number\">10</span>) * <span class=\"keyword\">sizeof</span> (<span class=\"type\">int</span>));</span><br><span class=\"line\">      <span class=\"built_in\">list</span>-&gt;elem = base;</span><br><span class=\"line\">      <span class=\"built_in\">list</span>-&gt;capacity = <span class=\"built_in\">list</span>-&gt;capacity + <span class=\"number\">10</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  insertPtr = &amp;(<span class=\"built_in\">list</span>-&gt;elem[i]);</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (p = &amp;(<span class=\"built_in\">list</span>-&gt;elem[<span class=\"built_in\">list</span>-&gt;length - <span class=\"number\">1</span>]); p &gt;= insertPtr; p--)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      *(p + <span class=\"number\">1</span>) = *p;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  *insertPtr = data;</span><br><span class=\"line\">  <span class=\"built_in\">list</span>-&gt;length++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">deleteAt</span> <span class=\"params\">(<span class=\"type\">void</span> *out, <span class=\"type\">int</span> position)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  IntList *<span class=\"built_in\">list</span> = (IntList *) out;</span><br><span class=\"line\">  <span class=\"type\">int</span> *deleteItem,*q;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (position &lt; <span class=\"number\">0</span> || position &gt; <span class=\"built_in\">list</span>-&gt;length - <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"built_in\">exit</span> (<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  deleteItem = &amp;(<span class=\"built_in\">list</span>-&gt;elem[position]);</span><br><span class=\"line\">  q = <span class=\"built_in\">list</span>-&gt;elem + <span class=\"built_in\">list</span>-&gt;length - <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (deleteItem; deleteItem &lt; q; ++deleteItem)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      *(deleteItem) = *(deleteItem + <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"built_in\">list</span>-&gt;length--;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">void</span></span><br><span class=\"line\"><span class=\"title function_\">printArrayList</span> <span class=\"params\">(<span class=\"type\">void</span> *data)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  IntList *<span class=\"built_in\">list</span> = (IntList *) data;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;[&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">list</span>-&gt;length; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i != <span class=\"built_in\">list</span>-&gt;length - <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;%d,&quot;</span>, <span class=\"built_in\">list</span>-&gt;elem[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">      <span class=\"keyword\">else</span></span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;%d&quot;</span>, <span class=\"built_in\">list</span>-&gt;elem[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;]\\n&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">endif</span></span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&quot;IntList.h&quot;</span></span></span><br><span class=\"line\"><span class=\"type\">int</span></span><br><span class=\"line\"><span class=\"title function_\">main</span> <span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  IntList *<span class=\"built_in\">list</span> = obtainIntList ();</span><br><span class=\"line\">  <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;init an empty int list\\n&quot;</span>);</span><br><span class=\"line\">  <span class=\"built_in\">list</span>-&gt;toString (<span class=\"built_in\">list</span>);</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"built_in\">list</span>-&gt;insertAt (<span class=\"built_in\">list</span>, i, i);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;add 5 item to list\\n&quot;</span>);</span><br><span class=\"line\">  <span class=\"built_in\">list</span>-&gt;toString (<span class=\"built_in\">list</span>);</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">5</span>; i &lt; <span class=\"number\">10</span>; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"built_in\">list</span>-&gt;add (<span class=\"built_in\">list</span>, i);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;add 5 item to list\\n&quot;</span>);</span><br><span class=\"line\">  <span class=\"built_in\">list</span>-&gt;toString (<span class=\"built_in\">list</span>);</span><br><span class=\"line\">  <span class=\"built_in\">printf</span> (<span class=\"string\">&quot;delete the item at index of 2\\n&quot;</span>);</span><br><span class=\"line\">  <span class=\"built_in\">list</span>-&gt;deleteAt (<span class=\"built_in\">list</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">  <span class=\"built_in\">list</span>-&gt;toString (<span class=\"built_in\">list</span>);</span><br><span class=\"line\">  <span class=\"built_in\">free</span> (<span class=\"built_in\">list</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">init an empty int list</span><br><span class=\"line\">[]</span><br><span class=\"line\">add 5 item to list</span><br><span class=\"line\">[0,1,2,3,4]</span><br><span class=\"line\">add 5 item to list</span><br><span class=\"line\">[0,1,2,3,4,5,6,7,8,9]</span><br><span class=\"line\">delete the item at index of 2</span><br><span class=\"line\">[0,1,3,4,5,6,7,8,9]</span><br></pre></td></tr></table></figure>"},{"title":"Dart","date":"2016-04-26T11:02:53.000Z","cover":"http://cdn.zqlxtt.cn/both-queues.png","top":6,"_content":"# Dart\n\n_[https://www.dartlang.org/articles/event-loop/](https://www.dartlang.org/articles/event-loop/)_\n\nDartFutureHandlerI/O\n\nDartFuture\n\n[Future](https://www.dartlang.org/articles/using-future-based-apis/)\n<!-- more -->\n\n## \n\nUIUIUIUIUI\n\n\n### \n\n![](http://cdn.zqlxtt.cn/event-loop.png)\n\nI/O\n![](http://cdn.zqlxtt.cn/event-loop-example.png)\n\nDart\n\n### Dart\nDartDartDart\n\n> Note:Dartisolatesisolatesappmessageisolatesworkersmain isolatehttps://www.dartlang.org/articles/event-loop/#use-isolates-or-workers-if-necessary\n\nDartmain isolatemainmainmain isolate\n![](http://cdn.zqlxtt.cn/event-loop-and-main.png)\n\n\n\n### Dart\n\nDart-- *event**microtask*\n\n**event**I/Omouse eventsdrawing eventstimersisolatemessage\n\n**microtask **Dart\n\neventDartmicrotaskisolate\n\nmaineventFIFOmicro taskmicro taskevent \n![](http://cdn.zqlxtt.cn/both-queues.png)\n\n> ****micro taskeventappUII/O\n\n1s1s\n\n\n##  \n\n\n\n\n```dart\n// \nfuture.then(...set an important variable...);\nTimer.run(() {...use the important variable...});\n```\n\n```dart\n// \nfuture.then(...set an important variable...)\n  .then((_) {...use the important variable...});\n```\n**then()()****whenComplete()**thenthenjavafinally\n\nFuture\n```dart\nfuture.then(...set an important variable...)\n  .then((_) {new Future(() {...use the important variable...})});\n```\nFuture\n\n## \n**dart:async**\n\n    1.Futureevent\n    2.**scheduleMicrotask()**microtask\n\n### \nFutureeventeventmicrotaskmicrotaskevent\neventmainscheduleMicrotaskmicrotask\n![](http://backup.flutter-dev.cn/scheduling-tasks.png)\n\n### Event\n`new Future``new Future.delayed()`event\n\n> **:**`Timer`TimerFutureTimer\n\neventnew Future\n```dart\n//event\nnew Future(() {\n  //\n});\n```\nthenwhenCompleteFutureFuture42\n```dart\nnew Future(() => 21)\n    .then((v) => v*2)\n    .then((v) => print(v));\n```\n\nnew Future.delayed():\n```dart\n// event\nnew Future.delayed(const Duration(seconds:1), () {\n  //\n});\n```\n\nevent\n1. main\n2. microtask\n3. \n1\n\nFuture\n1. then()Future()\n2. then()Futuremicrotaskthen\n3. Future()Future.delayed()event\n 4. Future.value()microtask\n 5. Future,sync()microtask\n\n### Microtask  scheduleMicrotask()\n**dart:async**scheduleMicrotask() \n```dart\nscheduleMicrotask(() {\n  // ...code goes here...\n});\n```\n### isolateworker\nisolateworkerisolate.Dart\n\nisolatecpu\n\ncpuisolateappisolateisolate\n\n## \n\n\n### 1\n\n```dart\nimport 'dart:async';\nmain() {\n  print('main #1 of 2');\n  scheduleMicrotask(() => print('microtask #1 of 2'));\n\n  new Future.delayed(new Duration(seconds:1),\n                     () => print('future #1 (delayed)'));\n  new Future(() => print('future #2 of 3'));\n  new Future(() => print('future #3 of 3'));\n\n  scheduleMicrotask(() => print('microtask #2 of 2'));\n\n  print('main #2 of 2');\n}\n```\n\n\n\n\n\n\n\n\n\n\n```dart\nmain #1 of 2\nmain #2 of 2\nmicrotask #1 of 2\nmicrotask #2 of 2\nfuture #2 of 3\nfuture #3 of 3\nfuture #1 (delayed)\n```\n\n1. main()\n2. microtask\n3. eventnew Futurenew Future.delayed\n\nmainmainmainmicrotaskmicrotaskmicrotaskmicrotaskeventdelay\n\n### 2\n\n```dart\nimport 'dart:async';\nmain() {\n  print('main #1 of 2');\n  scheduleMicrotask(() => print('microtask #1 of 3'));\n\n  new Future.delayed(new Duration(seconds:1),\n      () => print('future #1 (delayed)'));\n\n  new Future(() => print('future #2 of 4'))\n      .then((_) => print('future #2a'))\n      .then((_) {\n        print('future #2b');\n        scheduleMicrotask(() => print('microtask #0 (from future #2b)'));\n      })\n      .then((_) => print('future #2c'));\n\n  scheduleMicrotask(() => print('microtask #2 of 3'));\n\n  new Future(() => print('future #3 of 4'))\n      .then((_) => new Future(\n                   () => print('future #3a (a new future)')))\n      .then((_) => print('future #3b'));\n\n  new Future(() => print('future #4 of 4'));\n  scheduleMicrotask(() => print('microtask #3 of 3'));\n  print('main #2 of 2');\n}\n```\n\n\n```dart\nmain #1 of 2\nmain #2 of 2\nmicrotask #1 of 3\nmicrotask #2 of 3\nmicrotask #3 of 3\nfuture #2 of 4\nfuture #2a\nfuture #2b\nfuture #2c\nmicrotask #0 (from future #2b)\nfuture #3 of 4\nfuture #4 of 4\nfuture #3a (a new future)\nfuture #3b\nfuture #1 (delayed)\n```\n\n# \ndart\n- Darteventmicrotask\n- eventdartfuturetimerisolate messageI/O\n- microtaskdart\n- microtaskevent\n- dart\n- maineventmicrotaskDartmain isolate\n\n\n- event\n - FuturethenwhenComplete\n - app\n - isolate\n","source":"_posts/dart-event-loop.md","raw":"---\ntitle: Dart\ndate: 2016-04-26 19:02:53\ntags: Dart\ncover: http://cdn.zqlxtt.cn/both-queues.png\ntop: 6\n---\n# Dart\n\n_[https://www.dartlang.org/articles/event-loop/](https://www.dartlang.org/articles/event-loop/)_\n\nDartFutureHandlerI/O\n\nDartFuture\n\n[Future](https://www.dartlang.org/articles/using-future-based-apis/)\n<!-- more -->\n\n## \n\nUIUIUIUIUI\n\n\n### \n\n![](http://cdn.zqlxtt.cn/event-loop.png)\n\nI/O\n![](http://cdn.zqlxtt.cn/event-loop-example.png)\n\nDart\n\n### Dart\nDartDartDart\n\n> Note:Dartisolatesisolatesappmessageisolatesworkersmain isolatehttps://www.dartlang.org/articles/event-loop/#use-isolates-or-workers-if-necessary\n\nDartmain isolatemainmainmain isolate\n![](http://cdn.zqlxtt.cn/event-loop-and-main.png)\n\n\n\n### Dart\n\nDart-- *event**microtask*\n\n**event**I/Omouse eventsdrawing eventstimersisolatemessage\n\n**microtask **Dart\n\neventDartmicrotaskisolate\n\nmaineventFIFOmicro taskmicro taskevent \n![](http://cdn.zqlxtt.cn/both-queues.png)\n\n> ****micro taskeventappUII/O\n\n1s1s\n\n\n##  \n\n\n\n\n```dart\n// \nfuture.then(...set an important variable...);\nTimer.run(() {...use the important variable...});\n```\n\n```dart\n// \nfuture.then(...set an important variable...)\n  .then((_) {...use the important variable...});\n```\n**then()()****whenComplete()**thenthenjavafinally\n\nFuture\n```dart\nfuture.then(...set an important variable...)\n  .then((_) {new Future(() {...use the important variable...})});\n```\nFuture\n\n## \n**dart:async**\n\n    1.Futureevent\n    2.**scheduleMicrotask()**microtask\n\n### \nFutureeventeventmicrotaskmicrotaskevent\neventmainscheduleMicrotaskmicrotask\n![](http://backup.flutter-dev.cn/scheduling-tasks.png)\n\n### Event\n`new Future``new Future.delayed()`event\n\n> **:**`Timer`TimerFutureTimer\n\neventnew Future\n```dart\n//event\nnew Future(() {\n  //\n});\n```\nthenwhenCompleteFutureFuture42\n```dart\nnew Future(() => 21)\n    .then((v) => v*2)\n    .then((v) => print(v));\n```\n\nnew Future.delayed():\n```dart\n// event\nnew Future.delayed(const Duration(seconds:1), () {\n  //\n});\n```\n\nevent\n1. main\n2. microtask\n3. \n1\n\nFuture\n1. then()Future()\n2. then()Futuremicrotaskthen\n3. Future()Future.delayed()event\n 4. Future.value()microtask\n 5. Future,sync()microtask\n\n### Microtask  scheduleMicrotask()\n**dart:async**scheduleMicrotask() \n```dart\nscheduleMicrotask(() {\n  // ...code goes here...\n});\n```\n### isolateworker\nisolateworkerisolate.Dart\n\nisolatecpu\n\ncpuisolateappisolateisolate\n\n## \n\n\n### 1\n\n```dart\nimport 'dart:async';\nmain() {\n  print('main #1 of 2');\n  scheduleMicrotask(() => print('microtask #1 of 2'));\n\n  new Future.delayed(new Duration(seconds:1),\n                     () => print('future #1 (delayed)'));\n  new Future(() => print('future #2 of 3'));\n  new Future(() => print('future #3 of 3'));\n\n  scheduleMicrotask(() => print('microtask #2 of 2'));\n\n  print('main #2 of 2');\n}\n```\n\n\n\n\n\n\n\n\n\n\n```dart\nmain #1 of 2\nmain #2 of 2\nmicrotask #1 of 2\nmicrotask #2 of 2\nfuture #2 of 3\nfuture #3 of 3\nfuture #1 (delayed)\n```\n\n1. main()\n2. microtask\n3. eventnew Futurenew Future.delayed\n\nmainmainmainmicrotaskmicrotaskmicrotaskmicrotaskeventdelay\n\n### 2\n\n```dart\nimport 'dart:async';\nmain() {\n  print('main #1 of 2');\n  scheduleMicrotask(() => print('microtask #1 of 3'));\n\n  new Future.delayed(new Duration(seconds:1),\n      () => print('future #1 (delayed)'));\n\n  new Future(() => print('future #2 of 4'))\n      .then((_) => print('future #2a'))\n      .then((_) {\n        print('future #2b');\n        scheduleMicrotask(() => print('microtask #0 (from future #2b)'));\n      })\n      .then((_) => print('future #2c'));\n\n  scheduleMicrotask(() => print('microtask #2 of 3'));\n\n  new Future(() => print('future #3 of 4'))\n      .then((_) => new Future(\n                   () => print('future #3a (a new future)')))\n      .then((_) => print('future #3b'));\n\n  new Future(() => print('future #4 of 4'));\n  scheduleMicrotask(() => print('microtask #3 of 3'));\n  print('main #2 of 2');\n}\n```\n\n\n```dart\nmain #1 of 2\nmain #2 of 2\nmicrotask #1 of 3\nmicrotask #2 of 3\nmicrotask #3 of 3\nfuture #2 of 4\nfuture #2a\nfuture #2b\nfuture #2c\nmicrotask #0 (from future #2b)\nfuture #3 of 4\nfuture #4 of 4\nfuture #3a (a new future)\nfuture #3b\nfuture #1 (delayed)\n```\n\n# \ndart\n- Darteventmicrotask\n- eventdartfuturetimerisolate messageI/O\n- microtaskdart\n- microtaskevent\n- dart\n- maineventmicrotaskDartmain isolate\n\n\n- event\n - FuturethenwhenComplete\n - app\n - isolate\n","slug":"dart-event-loop","published":1,"updated":"2024-08-21T03:16:19.783Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vs000w5p6ta4a7270n","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"Dart\"><a href=\"#Dart\" class=\"headerlink\" title=\"Dart\"></a>Dart</h1><p><em><a href=\"https://www.dartlang.org/articles/event-loop/\">https://www.dartlang.org/articles/event-loop/</a></em></p>\n<p>DartFutureHandlerI/O</p>\n<p>DartFuture</p>\n<p><a href=\"https://www.dartlang.org/articles/using-future-based-apis/\">Future</a></p>\n<span id=\"more\"></span>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>UIUIUIUIUI</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><img src=\"http://cdn.zqlxtt.cn/event-loop.png\" alt=\"\"></p>\n<p>I/O<br><img src=\"http://cdn.zqlxtt.cn/event-loop-example.png\" alt=\"\"></p>\n<p>Dart</p>\n<h3 id=\"Dart\"><a href=\"#Dart\" class=\"headerlink\" title=\"Dart\"></a>Dart</h3><p>DartDartDart</p>\n<blockquote>\n<p>Note:Dartisolatesisolatesappmessageisolatesworkersmain isolate<a href=\"https://www.dartlang.org/articles/event-loop/#use-isolates-or-workers-if-necessary\">https://www.dartlang.org/articles/event-loop/#use-isolates-or-workers-if-necessary</a></p>\n</blockquote>\n<p>Dartmain isolatemainmainmain isolate<br><img src=\"http://cdn.zqlxtt.cn/event-loop-and-main.png\" alt=\"\"></p>\n<p></p>\n<h3 id=\"Dart\"><a href=\"#Dart\" class=\"headerlink\" title=\"Dart\"></a>Dart</h3><p>Dart <em>event</em><em>microtask</em></p>\n<p><strong>event</strong>I/Omouse eventsdrawing eventstimersisolatemessage</p>\n<p><strong>microtask </strong>Dart</p>\n<p>eventDartmicrotaskisolate</p>\n<p>maineventFIFOmicro taskmicro taskevent <br><img src=\"http://cdn.zqlxtt.cn/both-queues.png\" alt=\"\"></p>\n<blockquote>\n<p><strong></strong>micro taskeventappUII/O</p>\n</blockquote>\n<p>1s1s</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">future.then(...<span class=\"keyword\">set</span> an important variable...);</span><br><span class=\"line\">Timer.run(() &#123;...use the important variable...&#125;);</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">future.then(...<span class=\"keyword\">set</span> an important variable...)</span><br><span class=\"line\">  .then((_) &#123;...use the important variable...&#125;);</span><br></pre></td></tr></table></figure>\n<p><strong>then()()</strong><strong>whenComplete()</strong>thenthenjavafinally</p>\n<p>Future</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">future.then(...<span class=\"keyword\">set</span> an important variable...)</span><br><span class=\"line\">  .then((_) &#123;<span class=\"keyword\">new</span> Future(() &#123;...use the important variable...&#125;)&#125;);</span><br></pre></td></tr></table></figure>\n<p>Future</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>dart:async</strong></p>\n<pre><code>1.Futureevent\n2.**scheduleMicrotask()**microtask</code></pre><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Futureeventeventmicrotaskmicrotaskevent<br>eventmainscheduleMicrotaskmicrotask<br><img src=\"http://backup.flutter-dev.cn/scheduling-tasks.png\" alt=\"\"></p>\n<h3 id=\"Event\"><a href=\"#Event\" class=\"headerlink\" title=\"Event\"></a>Event</h3><p><code>new Future</code><code>new Future.delayed()</code>event</p>\n<blockquote>\n<p><strong>:</strong><code>Timer</code>TimerFutureTimer</p>\n</blockquote>\n<p>eventnew Future</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//event</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> Future(() &#123;</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>thenwhenCompleteFutureFuture42</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> Future(() =&gt; <span class=\"number\">21</span>)</span><br><span class=\"line\">    .then((v) =&gt; v*<span class=\"number\">2</span>)</span><br><span class=\"line\">    .then((v) =&gt; <span class=\"built_in\">print</span>(v));</span><br></pre></td></tr></table></figure>\n\n<p>new Future.delayed():</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// event</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> Future.delayed(<span class=\"keyword\">const</span> <span class=\"built_in\">Duration</span>(seconds:<span class=\"number\">1</span>), () &#123;</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>event</p>\n<ol>\n<li>main</li>\n<li>microtask</li>\n<li><br>1</li>\n</ol>\n<p>Future</p>\n<ol>\n<li>then()Future()</li>\n<li>then()Futuremicrotaskthen</li>\n<li>Future()Future.delayed()event<ol start=\"4\">\n<li>Future.value()microtask</li>\n<li>Future,sync()microtask</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"Microtask-scheduleMicrotask\"><a href=\"#Microtask-scheduleMicrotask\" class=\"headerlink\" title=\"Microtask  scheduleMicrotask()\"></a>Microtask  scheduleMicrotask()</h3><p><strong>dart:async</strong>scheduleMicrotask() </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scheduleMicrotask(() &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...code goes here...</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"isolateworker\"><a href=\"#isolateworker\" class=\"headerlink\" title=\"isolateworker\"></a>isolateworker</h3><p>isolateworkerisolate.Dart</p>\n<p>isolatecpu</p>\n<p>cpuisolateappisolateisolate</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;dart:async&#x27;</span>;</span><br><span class=\"line\">main() &#123;</span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #1 of 2&#x27;</span>);</span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #1 of 2&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future.delayed(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(seconds:<span class=\"number\">1</span>),</span><br><span class=\"line\">                     () =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #1 (delayed)&#x27;</span>));</span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2 of 3&#x27;</span>));</span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3 of 3&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #2 of 2&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #2 of 2&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">main #<span class=\"number\">1</span> of <span class=\"number\">2</span></span><br><span class=\"line\">main #<span class=\"number\">2</span> of <span class=\"number\">2</span></span><br><span class=\"line\">microtask #<span class=\"number\">1</span> of <span class=\"number\">2</span></span><br><span class=\"line\">microtask #<span class=\"number\">2</span> of <span class=\"number\">2</span></span><br><span class=\"line\">future #<span class=\"number\">2</span> of <span class=\"number\">3</span></span><br><span class=\"line\">future #<span class=\"number\">3</span> of <span class=\"number\">3</span></span><br><span class=\"line\">future #<span class=\"number\">1</span> (delayed)</span><br></pre></td></tr></table></figure>\n<p></p>\n<ol>\n<li>main()</li>\n<li>microtask</li>\n<li>eventnew Futurenew Future.delayed</li>\n</ol>\n<p>mainmainmainmicrotaskmicrotaskmicrotaskmicrotaskeventdelay</p>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;dart:async&#x27;</span>;</span><br><span class=\"line\">main() &#123;</span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #1 of 2&#x27;</span>);</span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #1 of 3&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future.delayed(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(seconds:<span class=\"number\">1</span>),</span><br><span class=\"line\">      () =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #1 (delayed)&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2 of 4&#x27;</span>))</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2a&#x27;</span>))</span><br><span class=\"line\">      .then((_) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2b&#x27;</span>);</span><br><span class=\"line\">        scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #0 (from future #2b)&#x27;</span>));</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2c&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #2 of 3&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3 of 4&#x27;</span>))</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"keyword\">new</span> Future(</span><br><span class=\"line\">                   () =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3a (a new future)&#x27;</span>)))</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3b&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #4 of 4&#x27;</span>));</span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #3 of 3&#x27;</span>));</span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #2 of 2&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">main #<span class=\"number\">1</span> of <span class=\"number\">2</span></span><br><span class=\"line\">main #<span class=\"number\">2</span> of <span class=\"number\">2</span></span><br><span class=\"line\">microtask #<span class=\"number\">1</span> of <span class=\"number\">3</span></span><br><span class=\"line\">microtask #<span class=\"number\">2</span> of <span class=\"number\">3</span></span><br><span class=\"line\">microtask #<span class=\"number\">3</span> of <span class=\"number\">3</span></span><br><span class=\"line\">future #<span class=\"number\">2</span> of <span class=\"number\">4</span></span><br><span class=\"line\">future #<span class=\"number\">2</span>a</span><br><span class=\"line\">future #<span class=\"number\">2</span>b</span><br><span class=\"line\">future #<span class=\"number\">2</span>c</span><br><span class=\"line\">microtask #<span class=\"number\">0</span> (from future #<span class=\"number\">2</span>b)</span><br><span class=\"line\">future #<span class=\"number\">3</span> of <span class=\"number\">4</span></span><br><span class=\"line\">future #<span class=\"number\">4</span> of <span class=\"number\">4</span></span><br><span class=\"line\">future #<span class=\"number\">3</span>a (a <span class=\"keyword\">new</span> future)</span><br><span class=\"line\">future #<span class=\"number\">3</span>b</span><br><span class=\"line\">future #<span class=\"number\">1</span> (delayed)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>dart</p>\n<ul>\n<li>Darteventmicrotask</li>\n<li>eventdartfuturetimerisolate messageI/O</li>\n<li>microtaskdart</li>\n<li>microtaskevent</li>\n<li>dart</li>\n<li>maineventmicrotaskDartmain isolate</li>\n</ul>\n<p></p>\n<ul>\n<li>event<ul>\n<li>FuturethenwhenComplete</li>\n<li>app</li>\n<li>isolate</li>\n</ul>\n</li>\n</ul>\n","excerpt":"<h1 id=\"Dart\"><a href=\"#Dart\" class=\"headerlink\" title=\"Dart\"></a>Dart</h1><p><em><a href=\"https://www.dartlang.org/articles/event-loop/\">https://www.dartlang.org/articles/event-loop/</a></em></p>\n<p>DartFutureHandlerI/O</p>\n<p>DartFuture</p>\n<p><a href=\"https://www.dartlang.org/articles/using-future-based-apis/\">Future</a></p>","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>UIUIUIUIUI</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><img src=\"http://cdn.zqlxtt.cn/event-loop.png\" alt=\"\"></p>\n<p>I/O<br><img src=\"http://cdn.zqlxtt.cn/event-loop-example.png\" alt=\"\"></p>\n<p>Dart</p>\n<h3 id=\"Dart\"><a href=\"#Dart\" class=\"headerlink\" title=\"Dart\"></a>Dart</h3><p>DartDartDart</p>\n<blockquote>\n<p>Note:Dartisolatesisolatesappmessageisolatesworkersmain isolate<a href=\"https://www.dartlang.org/articles/event-loop/#use-isolates-or-workers-if-necessary\">https://www.dartlang.org/articles/event-loop/#use-isolates-or-workers-if-necessary</a></p>\n</blockquote>\n<p>Dartmain isolatemainmainmain isolate<br><img src=\"http://cdn.zqlxtt.cn/event-loop-and-main.png\" alt=\"\"></p>\n<p></p>\n<h3 id=\"Dart\"><a href=\"#Dart\" class=\"headerlink\" title=\"Dart\"></a>Dart</h3><p>Dart <em>event</em><em>microtask</em></p>\n<p><strong>event</strong>I/Omouse eventsdrawing eventstimersisolatemessage</p>\n<p><strong>microtask </strong>Dart</p>\n<p>eventDartmicrotaskisolate</p>\n<p>maineventFIFOmicro taskmicro taskevent <br><img src=\"http://cdn.zqlxtt.cn/both-queues.png\" alt=\"\"></p>\n<blockquote>\n<p><strong></strong>micro taskeventappUII/O</p>\n</blockquote>\n<p>1s1s</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">future.then(...<span class=\"keyword\">set</span> an important variable...);</span><br><span class=\"line\">Timer.run(() &#123;...use the important variable...&#125;);</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">future.then(...<span class=\"keyword\">set</span> an important variable...)</span><br><span class=\"line\">  .then((_) &#123;...use the important variable...&#125;);</span><br></pre></td></tr></table></figure>\n<p><strong>then()()</strong><strong>whenComplete()</strong>thenthenjavafinally</p>\n<p>Future</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">future.then(...<span class=\"keyword\">set</span> an important variable...)</span><br><span class=\"line\">  .then((_) &#123;<span class=\"keyword\">new</span> Future(() &#123;...use the important variable...&#125;)&#125;);</span><br></pre></td></tr></table></figure>\n<p>Future</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>dart:async</strong></p>\n<pre><code>1.Futureevent\n2.**scheduleMicrotask()**microtask</code></pre><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Futureeventeventmicrotaskmicrotaskevent<br>eventmainscheduleMicrotaskmicrotask<br><img src=\"http://backup.flutter-dev.cn/scheduling-tasks.png\" alt=\"\"></p>\n<h3 id=\"Event\"><a href=\"#Event\" class=\"headerlink\" title=\"Event\"></a>Event</h3><p><code>new Future</code><code>new Future.delayed()</code>event</p>\n<blockquote>\n<p><strong>:</strong><code>Timer</code>TimerFutureTimer</p>\n</blockquote>\n<p>eventnew Future</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//event</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> Future(() &#123;</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>thenwhenCompleteFutureFuture42</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> Future(() =&gt; <span class=\"number\">21</span>)</span><br><span class=\"line\">    .then((v) =&gt; v*<span class=\"number\">2</span>)</span><br><span class=\"line\">    .then((v) =&gt; <span class=\"built_in\">print</span>(v));</span><br></pre></td></tr></table></figure>\n\n<p>new Future.delayed():</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// event</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> Future.delayed(<span class=\"keyword\">const</span> <span class=\"built_in\">Duration</span>(seconds:<span class=\"number\">1</span>), () &#123;</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>event</p>\n<ol>\n<li>main</li>\n<li>microtask</li>\n<li><br>1</li>\n</ol>\n<p>Future</p>\n<ol>\n<li>then()Future()</li>\n<li>then()Futuremicrotaskthen</li>\n<li>Future()Future.delayed()event<ol start=\"4\">\n<li>Future.value()microtask</li>\n<li>Future,sync()microtask</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"Microtask-scheduleMicrotask\"><a href=\"#Microtask-scheduleMicrotask\" class=\"headerlink\" title=\"Microtask  scheduleMicrotask()\"></a>Microtask  scheduleMicrotask()</h3><p><strong>dart:async</strong>scheduleMicrotask() </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scheduleMicrotask(() &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...code goes here...</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"isolateworker\"><a href=\"#isolateworker\" class=\"headerlink\" title=\"isolateworker\"></a>isolateworker</h3><p>isolateworkerisolate.Dart</p>\n<p>isolatecpu</p>\n<p>cpuisolateappisolateisolate</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;dart:async&#x27;</span>;</span><br><span class=\"line\">main() &#123;</span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #1 of 2&#x27;</span>);</span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #1 of 2&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future.delayed(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(seconds:<span class=\"number\">1</span>),</span><br><span class=\"line\">                     () =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #1 (delayed)&#x27;</span>));</span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2 of 3&#x27;</span>));</span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3 of 3&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #2 of 2&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #2 of 2&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">main #<span class=\"number\">1</span> of <span class=\"number\">2</span></span><br><span class=\"line\">main #<span class=\"number\">2</span> of <span class=\"number\">2</span></span><br><span class=\"line\">microtask #<span class=\"number\">1</span> of <span class=\"number\">2</span></span><br><span class=\"line\">microtask #<span class=\"number\">2</span> of <span class=\"number\">2</span></span><br><span class=\"line\">future #<span class=\"number\">2</span> of <span class=\"number\">3</span></span><br><span class=\"line\">future #<span class=\"number\">3</span> of <span class=\"number\">3</span></span><br><span class=\"line\">future #<span class=\"number\">1</span> (delayed)</span><br></pre></td></tr></table></figure>\n<p></p>\n<ol>\n<li>main()</li>\n<li>microtask</li>\n<li>eventnew Futurenew Future.delayed</li>\n</ol>\n<p>mainmainmainmicrotaskmicrotaskmicrotaskmicrotaskeventdelay</p>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;dart:async&#x27;</span>;</span><br><span class=\"line\">main() &#123;</span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #1 of 2&#x27;</span>);</span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #1 of 3&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future.delayed(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(seconds:<span class=\"number\">1</span>),</span><br><span class=\"line\">      () =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #1 (delayed)&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2 of 4&#x27;</span>))</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2a&#x27;</span>))</span><br><span class=\"line\">      .then((_) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2b&#x27;</span>);</span><br><span class=\"line\">        scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #0 (from future #2b)&#x27;</span>));</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2c&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #2 of 3&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3 of 4&#x27;</span>))</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"keyword\">new</span> Future(</span><br><span class=\"line\">                   () =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3a (a new future)&#x27;</span>)))</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3b&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #4 of 4&#x27;</span>));</span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #3 of 3&#x27;</span>));</span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #2 of 2&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">main #<span class=\"number\">1</span> of <span class=\"number\">2</span></span><br><span class=\"line\">main #<span class=\"number\">2</span> of <span class=\"number\">2</span></span><br><span class=\"line\">microtask #<span class=\"number\">1</span> of <span class=\"number\">3</span></span><br><span class=\"line\">microtask #<span class=\"number\">2</span> of <span class=\"number\">3</span></span><br><span class=\"line\">microtask #<span class=\"number\">3</span> of <span class=\"number\">3</span></span><br><span class=\"line\">future #<span class=\"number\">2</span> of <span class=\"number\">4</span></span><br><span class=\"line\">future #<span class=\"number\">2</span>a</span><br><span class=\"line\">future #<span class=\"number\">2</span>b</span><br><span class=\"line\">future #<span class=\"number\">2</span>c</span><br><span class=\"line\">microtask #<span class=\"number\">0</span> (from future #<span class=\"number\">2</span>b)</span><br><span class=\"line\">future #<span class=\"number\">3</span> of <span class=\"number\">4</span></span><br><span class=\"line\">future #<span class=\"number\">4</span> of <span class=\"number\">4</span></span><br><span class=\"line\">future #<span class=\"number\">3</span>a (a <span class=\"keyword\">new</span> future)</span><br><span class=\"line\">future #<span class=\"number\">3</span>b</span><br><span class=\"line\">future #<span class=\"number\">1</span> (delayed)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>dart</p>\n<ul>\n<li>Darteventmicrotask</li>\n<li>eventdartfuturetimerisolate messageI/O</li>\n<li>microtaskdart</li>\n<li>microtaskevent</li>\n<li>dart</li>\n<li>maineventmicrotaskDartmain isolate</li>\n</ul>\n<p></p>\n<ul>\n<li>event<ul>\n<li>FuturethenwhenComplete</li>\n<li>app</li>\n<li>isolate</li>\n</ul>\n</li>\n</ul>"},{"title":"Dart[]","date":"2016-08-17T01:29:52.000Z","cover":"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-485a4c0b715563d5.webp","top":7,"_content":"\n![dart](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-379516c69166cc82.webp)\n\n_[https://www.dartlang.org/articles/event-loop/](https://www.dartlang.org/articles/event-loop/)_\n\nDartFutureHandlerI/O\n\nDartFuture\n\n[Future](https://www.dartlang.org/articles/using-future-based-apis/)\n<!-- more -->\n\n## \n\nUIUIUIUIUI\n\n### \n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-1c4637bccf1dd7dc.webp)\n\nI/O\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-ed3826b5b51e52dc.webp)\n\nDart\n\n### Dart\nDartDartDart\n\n> Note:Dartisolatesisolatesappmessageisolatesworkersmain isolatehttps://www.dartlang.org/articles/event-loop/#use-isolates-or-workers-if-necessary\n\nDartmain isolatemainmainmain isolate\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-485a4c0b715563d5.webp)\n\n\n\n### Dart\n\nDart-- *event**microtask*\n\n**event**I/Omouse eventsdrawing eventstimersisolatemessage\n\n**microtask **Dart\n\neventDartmicrotaskisolate\n\nmaineventFIFOmicro taskmicro taskevent \n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-8eea15e819cdf77d.webp)\n\n> ****micro taskeventappUII/O\n\n1s1s\n\n\n##  \n\n\n\n\n```dart\n// \nfuture.then(...set an important variable...);\nTimer.run(() {...use the important variable...});\n```\n\n```dart\n// \nfuture.then(...set an important variable...)\n  .then((_) {...use the important variable...});\n```\n**then()()****whenComplete()**thenthenjavafinally\n\nFuture\n```dart\nfuture.then(...set an important variable...)\n  .then((_) {new Future(() {...use the important variable...})});\n```\nFuture\n\n## \n**dart:async**\n\n    1.Futureevent\n    2.**scheduleMicrotask()**microtask\n\n### \nFutureeventeventmicrotaskmicrotaskevent\neventmainscheduleMicrotaskmicrotask\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-e62b4467a0e186d5.webp)\n\n### Event\n`new Future``new Future.delayed()`event\n\n> **:**`Timer`TimerFutureTimer\n\neventnew Future\n```dart\n//event\nnew Future(() {\n  //\n});\n```\nthenwhenCompleteFutureFuture42\n```dart\nnew Future(() => 21)\n    .then((v) => v*2)\n    .then((v) => print(v));\n```\n\nnew Future.delayed():\n```dart\n// event\nnew Future.delayed(const Duration(seconds:1), () {\n  //\n});\n```\n\nevent\n1. main\n2. microtask\n3. \n1\n\nFuture\n1. then()Future()\n2. then()Futuremicrotaskthen\n3. Future()Future.delayed()event\n 4. Future.value()microtask\n 5. Future,sync()microtask\n\n### Microtask  scheduleMicrotask()\n**dart:async**scheduleMicrotask() \n```dart\nscheduleMicrotask(() {\n  // ...code goes here...\n});\n```\n### isolateworker\nisolateworkerisolate.Dart\n\nisolatecpu\n\ncpuisolateappisolateisolate\n\n## \n\n\n### 1\n\n```dart\nimport 'dart:async';\nmain() {\n  print('main #1 of 2');\n  scheduleMicrotask(() => print('microtask #1 of 2'));\n\n  new Future.delayed(new Duration(seconds:1),\n                     () => print('future #1 (delayed)'));\n  new Future(() => print('future #2 of 3'));\n  new Future(() => print('future #3 of 3'));\n\n  scheduleMicrotask(() => print('microtask #2 of 2'));\n\n  print('main #2 of 2');\n}\n```\n\n\n\n\n\n\n\n\n\n\n```dart\nmain #1 of 2\nmain #2 of 2\nmicrotask #1 of 2\nmicrotask #2 of 2\nfuture #2 of 3\nfuture #3 of 3\nfuture #1 (delayed)\n```\n\n1. main()\n2. microtask\n3. eventnew Futurenew Future.delayed\n\nmainmainmainmicrotaskmicrotaskmicrotaskmicrotaskeventdelay\n\n### 2\n\n```dart\nimport 'dart:async';\nmain() {\n  print('main #1 of 2');\n  scheduleMicrotask(() => print('microtask #1 of 3'));\n\n  new Future.delayed(new Duration(seconds:1),\n      () => print('future #1 (delayed)'));\n\n  new Future(() => print('future #2 of 4'))\n      .then((_) => print('future #2a'))\n      .then((_) {\n        print('future #2b');\n        scheduleMicrotask(() => print('microtask #0 (from future #2b)'));\n      })\n      .then((_) => print('future #2c'));\n\n  scheduleMicrotask(() => print('microtask #2 of 3'));\n\n  new Future(() => print('future #3 of 4'))\n      .then((_) => new Future(\n                   () => print('future #3a (a new future)')))\n      .then((_) => print('future #3b'));\n\n  new Future(() => print('future #4 of 4'));\n  scheduleMicrotask(() => print('microtask #3 of 3'));\n  print('main #2 of 2');\n}\n```\n\n\n```dart\nmain #1 of 2\nmain #2 of 2\nmicrotask #1 of 3\nmicrotask #2 of 3\nmicrotask #3 of 3\nfuture #2 of 4\nfuture #2a\nfuture #2b\nfuture #2c\nmicrotask #0 (from future #2b)\nfuture #3 of 4\nfuture #4 of 4\nfuture #3a (a new future)\nfuture #3b\nfuture #1 (delayed)\n```\n\n# \ndart\n- Darteventmicrotask\n- eventdartfuturetimerisolate messageI/O\n- microtaskdart\n- microtaskevent\n- dart\n- maineventmicrotaskDartmain isolate\n\n\n- event\n - FuturethenwhenComplete\n - app\n - isolate\n","source":"_posts/dart-thread-model.md","raw":"---\ntitle: Dart[]\ndate: 2016-08-17 09:29:52\ntags: dart\ncover: https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-485a4c0b715563d5.webp\ntop: 7\n---\n\n![dart](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-379516c69166cc82.webp)\n\n_[https://www.dartlang.org/articles/event-loop/](https://www.dartlang.org/articles/event-loop/)_\n\nDartFutureHandlerI/O\n\nDartFuture\n\n[Future](https://www.dartlang.org/articles/using-future-based-apis/)\n<!-- more -->\n\n## \n\nUIUIUIUIUI\n\n### \n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-1c4637bccf1dd7dc.webp)\n\nI/O\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-ed3826b5b51e52dc.webp)\n\nDart\n\n### Dart\nDartDartDart\n\n> Note:Dartisolatesisolatesappmessageisolatesworkersmain isolatehttps://www.dartlang.org/articles/event-loop/#use-isolates-or-workers-if-necessary\n\nDartmain isolatemainmainmain isolate\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-485a4c0b715563d5.webp)\n\n\n\n### Dart\n\nDart-- *event**microtask*\n\n**event**I/Omouse eventsdrawing eventstimersisolatemessage\n\n**microtask **Dart\n\neventDartmicrotaskisolate\n\nmaineventFIFOmicro taskmicro taskevent \n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-8eea15e819cdf77d.webp)\n\n> ****micro taskeventappUII/O\n\n1s1s\n\n\n##  \n\n\n\n\n```dart\n// \nfuture.then(...set an important variable...);\nTimer.run(() {...use the important variable...});\n```\n\n```dart\n// \nfuture.then(...set an important variable...)\n  .then((_) {...use the important variable...});\n```\n**then()()****whenComplete()**thenthenjavafinally\n\nFuture\n```dart\nfuture.then(...set an important variable...)\n  .then((_) {new Future(() {...use the important variable...})});\n```\nFuture\n\n## \n**dart:async**\n\n    1.Futureevent\n    2.**scheduleMicrotask()**microtask\n\n### \nFutureeventeventmicrotaskmicrotaskevent\neventmainscheduleMicrotaskmicrotask\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-e62b4467a0e186d5.webp)\n\n### Event\n`new Future``new Future.delayed()`event\n\n> **:**`Timer`TimerFutureTimer\n\neventnew Future\n```dart\n//event\nnew Future(() {\n  //\n});\n```\nthenwhenCompleteFutureFuture42\n```dart\nnew Future(() => 21)\n    .then((v) => v*2)\n    .then((v) => print(v));\n```\n\nnew Future.delayed():\n```dart\n// event\nnew Future.delayed(const Duration(seconds:1), () {\n  //\n});\n```\n\nevent\n1. main\n2. microtask\n3. \n1\n\nFuture\n1. then()Future()\n2. then()Futuremicrotaskthen\n3. Future()Future.delayed()event\n 4. Future.value()microtask\n 5. Future,sync()microtask\n\n### Microtask  scheduleMicrotask()\n**dart:async**scheduleMicrotask() \n```dart\nscheduleMicrotask(() {\n  // ...code goes here...\n});\n```\n### isolateworker\nisolateworkerisolate.Dart\n\nisolatecpu\n\ncpuisolateappisolateisolate\n\n## \n\n\n### 1\n\n```dart\nimport 'dart:async';\nmain() {\n  print('main #1 of 2');\n  scheduleMicrotask(() => print('microtask #1 of 2'));\n\n  new Future.delayed(new Duration(seconds:1),\n                     () => print('future #1 (delayed)'));\n  new Future(() => print('future #2 of 3'));\n  new Future(() => print('future #3 of 3'));\n\n  scheduleMicrotask(() => print('microtask #2 of 2'));\n\n  print('main #2 of 2');\n}\n```\n\n\n\n\n\n\n\n\n\n\n```dart\nmain #1 of 2\nmain #2 of 2\nmicrotask #1 of 2\nmicrotask #2 of 2\nfuture #2 of 3\nfuture #3 of 3\nfuture #1 (delayed)\n```\n\n1. main()\n2. microtask\n3. eventnew Futurenew Future.delayed\n\nmainmainmainmicrotaskmicrotaskmicrotaskmicrotaskeventdelay\n\n### 2\n\n```dart\nimport 'dart:async';\nmain() {\n  print('main #1 of 2');\n  scheduleMicrotask(() => print('microtask #1 of 3'));\n\n  new Future.delayed(new Duration(seconds:1),\n      () => print('future #1 (delayed)'));\n\n  new Future(() => print('future #2 of 4'))\n      .then((_) => print('future #2a'))\n      .then((_) {\n        print('future #2b');\n        scheduleMicrotask(() => print('microtask #0 (from future #2b)'));\n      })\n      .then((_) => print('future #2c'));\n\n  scheduleMicrotask(() => print('microtask #2 of 3'));\n\n  new Future(() => print('future #3 of 4'))\n      .then((_) => new Future(\n                   () => print('future #3a (a new future)')))\n      .then((_) => print('future #3b'));\n\n  new Future(() => print('future #4 of 4'));\n  scheduleMicrotask(() => print('microtask #3 of 3'));\n  print('main #2 of 2');\n}\n```\n\n\n```dart\nmain #1 of 2\nmain #2 of 2\nmicrotask #1 of 3\nmicrotask #2 of 3\nmicrotask #3 of 3\nfuture #2 of 4\nfuture #2a\nfuture #2b\nfuture #2c\nmicrotask #0 (from future #2b)\nfuture #3 of 4\nfuture #4 of 4\nfuture #3a (a new future)\nfuture #3b\nfuture #1 (delayed)\n```\n\n# \ndart\n- Darteventmicrotask\n- eventdartfuturetimerisolate messageI/O\n- microtaskdart\n- microtaskevent\n- dart\n- maineventmicrotaskDartmain isolate\n\n\n- event\n - FuturethenwhenComplete\n - app\n - isolate\n","slug":"dart-thread-model","published":1,"updated":"2024-08-21T03:16:19.783Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vs000y5p6tgnci8img","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-379516c69166cc82.webp\" alt=\"dart\"></p>\n<p><em><a href=\"https://www.dartlang.org/articles/event-loop/\">https://www.dartlang.org/articles/event-loop/</a></em></p>\n<p>DartFutureHandlerI/O</p>\n<p>DartFuture</p>\n<p><a href=\"https://www.dartlang.org/articles/using-future-based-apis/\">Future</a></p>\n<span id=\"more\"></span>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>UIUIUIUIUI</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-1c4637bccf1dd7dc.webp\" alt=\"\"></p>\n<p>I/O<br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-ed3826b5b51e52dc.webp\" alt=\"\"></p>\n<p>Dart</p>\n<h3 id=\"Dart\"><a href=\"#Dart\" class=\"headerlink\" title=\"Dart\"></a>Dart</h3><p>DartDartDart</p>\n<blockquote>\n<p>Note:Dartisolatesisolatesappmessageisolatesworkersmain isolate<a href=\"https://www.dartlang.org/articles/event-loop/#use-isolates-or-workers-if-necessary\">https://www.dartlang.org/articles/event-loop/#use-isolates-or-workers-if-necessary</a></p>\n</blockquote>\n<p>Dartmain isolatemainmainmain isolate<br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-485a4c0b715563d5.webp\" alt=\"\"></p>\n<p></p>\n<h3 id=\"Dart\"><a href=\"#Dart\" class=\"headerlink\" title=\"Dart\"></a>Dart</h3><p>Dart <em>event</em><em>microtask</em></p>\n<p><strong>event</strong>I/Omouse eventsdrawing eventstimersisolatemessage</p>\n<p><strong>microtask </strong>Dart</p>\n<p>eventDartmicrotaskisolate</p>\n<p>maineventFIFOmicro taskmicro taskevent <br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-8eea15e819cdf77d.webp\" alt=\"\"></p>\n<blockquote>\n<p><strong></strong>micro taskeventappUII/O</p>\n</blockquote>\n<p>1s1s</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">future.then(...<span class=\"keyword\">set</span> an important variable...);</span><br><span class=\"line\">Timer.run(() &#123;...use the important variable...&#125;);</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">future.then(...<span class=\"keyword\">set</span> an important variable...)</span><br><span class=\"line\">  .then((_) &#123;...use the important variable...&#125;);</span><br></pre></td></tr></table></figure>\n<p><strong>then()()</strong><strong>whenComplete()</strong>thenthenjavafinally</p>\n<p>Future</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">future.then(...<span class=\"keyword\">set</span> an important variable...)</span><br><span class=\"line\">  .then((_) &#123;<span class=\"keyword\">new</span> Future(() &#123;...use the important variable...&#125;)&#125;);</span><br></pre></td></tr></table></figure>\n<p>Future</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>dart:async</strong></p>\n<pre><code>1.Futureevent\n2.**scheduleMicrotask()**microtask</code></pre><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Futureeventeventmicrotaskmicrotaskevent<br>eventmainscheduleMicrotaskmicrotask<br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-e62b4467a0e186d5.webp\" alt=\"\"></p>\n<h3 id=\"Event\"><a href=\"#Event\" class=\"headerlink\" title=\"Event\"></a>Event</h3><p><code>new Future</code><code>new Future.delayed()</code>event</p>\n<blockquote>\n<p><strong>:</strong><code>Timer</code>TimerFutureTimer</p>\n</blockquote>\n<p>eventnew Future</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//event</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> Future(() &#123;</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>thenwhenCompleteFutureFuture42</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> Future(() =&gt; <span class=\"number\">21</span>)</span><br><span class=\"line\">    .then((v) =&gt; v*<span class=\"number\">2</span>)</span><br><span class=\"line\">    .then((v) =&gt; <span class=\"built_in\">print</span>(v));</span><br></pre></td></tr></table></figure>\n\n<p>new Future.delayed():</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// event</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> Future.delayed(<span class=\"keyword\">const</span> <span class=\"built_in\">Duration</span>(seconds:<span class=\"number\">1</span>), () &#123;</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>event</p>\n<ol>\n<li>main</li>\n<li>microtask</li>\n<li><br>1</li>\n</ol>\n<p>Future</p>\n<ol>\n<li>then()Future()</li>\n<li>then()Futuremicrotaskthen</li>\n<li>Future()Future.delayed()event<ol start=\"4\">\n<li>Future.value()microtask</li>\n<li>Future,sync()microtask</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"Microtask-scheduleMicrotask\"><a href=\"#Microtask-scheduleMicrotask\" class=\"headerlink\" title=\"Microtask  scheduleMicrotask()\"></a>Microtask  scheduleMicrotask()</h3><p><strong>dart:async</strong>scheduleMicrotask() </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scheduleMicrotask(() &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...code goes here...</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"isolateworker\"><a href=\"#isolateworker\" class=\"headerlink\" title=\"isolateworker\"></a>isolateworker</h3><p>isolateworkerisolate.Dart</p>\n<p>isolatecpu</p>\n<p>cpuisolateappisolateisolate</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;dart:async&#x27;</span>;</span><br><span class=\"line\">main() &#123;</span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #1 of 2&#x27;</span>);</span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #1 of 2&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future.delayed(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(seconds:<span class=\"number\">1</span>),</span><br><span class=\"line\">                     () =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #1 (delayed)&#x27;</span>));</span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2 of 3&#x27;</span>));</span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3 of 3&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #2 of 2&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #2 of 2&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">main #<span class=\"number\">1</span> of <span class=\"number\">2</span></span><br><span class=\"line\">main #<span class=\"number\">2</span> of <span class=\"number\">2</span></span><br><span class=\"line\">microtask #<span class=\"number\">1</span> of <span class=\"number\">2</span></span><br><span class=\"line\">microtask #<span class=\"number\">2</span> of <span class=\"number\">2</span></span><br><span class=\"line\">future #<span class=\"number\">2</span> of <span class=\"number\">3</span></span><br><span class=\"line\">future #<span class=\"number\">3</span> of <span class=\"number\">3</span></span><br><span class=\"line\">future #<span class=\"number\">1</span> (delayed)</span><br></pre></td></tr></table></figure>\n<p></p>\n<ol>\n<li>main()</li>\n<li>microtask</li>\n<li>eventnew Futurenew Future.delayed</li>\n</ol>\n<p>mainmainmainmicrotaskmicrotaskmicrotaskmicrotaskeventdelay</p>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;dart:async&#x27;</span>;</span><br><span class=\"line\">main() &#123;</span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #1 of 2&#x27;</span>);</span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #1 of 3&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future.delayed(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(seconds:<span class=\"number\">1</span>),</span><br><span class=\"line\">      () =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #1 (delayed)&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2 of 4&#x27;</span>))</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2a&#x27;</span>))</span><br><span class=\"line\">      .then((_) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2b&#x27;</span>);</span><br><span class=\"line\">        scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #0 (from future #2b)&#x27;</span>));</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2c&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #2 of 3&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3 of 4&#x27;</span>))</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"keyword\">new</span> Future(</span><br><span class=\"line\">                   () =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3a (a new future)&#x27;</span>)))</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3b&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #4 of 4&#x27;</span>));</span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #3 of 3&#x27;</span>));</span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #2 of 2&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">main #<span class=\"number\">1</span> of <span class=\"number\">2</span></span><br><span class=\"line\">main #<span class=\"number\">2</span> of <span class=\"number\">2</span></span><br><span class=\"line\">microtask #<span class=\"number\">1</span> of <span class=\"number\">3</span></span><br><span class=\"line\">microtask #<span class=\"number\">2</span> of <span class=\"number\">3</span></span><br><span class=\"line\">microtask #<span class=\"number\">3</span> of <span class=\"number\">3</span></span><br><span class=\"line\">future #<span class=\"number\">2</span> of <span class=\"number\">4</span></span><br><span class=\"line\">future #<span class=\"number\">2</span>a</span><br><span class=\"line\">future #<span class=\"number\">2</span>b</span><br><span class=\"line\">future #<span class=\"number\">2</span>c</span><br><span class=\"line\">microtask #<span class=\"number\">0</span> (from future #<span class=\"number\">2</span>b)</span><br><span class=\"line\">future #<span class=\"number\">3</span> of <span class=\"number\">4</span></span><br><span class=\"line\">future #<span class=\"number\">4</span> of <span class=\"number\">4</span></span><br><span class=\"line\">future #<span class=\"number\">3</span>a (a <span class=\"keyword\">new</span> future)</span><br><span class=\"line\">future #<span class=\"number\">3</span>b</span><br><span class=\"line\">future #<span class=\"number\">1</span> (delayed)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>dart</p>\n<ul>\n<li>Darteventmicrotask</li>\n<li>eventdartfuturetimerisolate messageI/O</li>\n<li>microtaskdart</li>\n<li>microtaskevent</li>\n<li>dart</li>\n<li>maineventmicrotaskDartmain isolate</li>\n</ul>\n<p></p>\n<ul>\n<li>event<ul>\n<li>FuturethenwhenComplete</li>\n<li>app</li>\n<li>isolate</li>\n</ul>\n</li>\n</ul>\n","excerpt":"<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-379516c69166cc82.webp\" alt=\"dart\"></p>\n<p><em><a href=\"https://www.dartlang.org/articles/event-loop/\">https://www.dartlang.org/articles/event-loop/</a></em></p>\n<p>DartFutureHandlerI/O</p>\n<p>DartFuture</p>\n<p><a href=\"https://www.dartlang.org/articles/using-future-based-apis/\">Future</a></p>","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>UIUIUIUIUI</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-1c4637bccf1dd7dc.webp\" alt=\"\"></p>\n<p>I/O<br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-ed3826b5b51e52dc.webp\" alt=\"\"></p>\n<p>Dart</p>\n<h3 id=\"Dart\"><a href=\"#Dart\" class=\"headerlink\" title=\"Dart\"></a>Dart</h3><p>DartDartDart</p>\n<blockquote>\n<p>Note:Dartisolatesisolatesappmessageisolatesworkersmain isolate<a href=\"https://www.dartlang.org/articles/event-loop/#use-isolates-or-workers-if-necessary\">https://www.dartlang.org/articles/event-loop/#use-isolates-or-workers-if-necessary</a></p>\n</blockquote>\n<p>Dartmain isolatemainmainmain isolate<br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-485a4c0b715563d5.webp\" alt=\"\"></p>\n<p></p>\n<h3 id=\"Dart\"><a href=\"#Dart\" class=\"headerlink\" title=\"Dart\"></a>Dart</h3><p>Dart <em>event</em><em>microtask</em></p>\n<p><strong>event</strong>I/Omouse eventsdrawing eventstimersisolatemessage</p>\n<p><strong>microtask </strong>Dart</p>\n<p>eventDartmicrotaskisolate</p>\n<p>maineventFIFOmicro taskmicro taskevent <br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-8eea15e819cdf77d.webp\" alt=\"\"></p>\n<blockquote>\n<p><strong></strong>micro taskeventappUII/O</p>\n</blockquote>\n<p>1s1s</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">future.then(...<span class=\"keyword\">set</span> an important variable...);</span><br><span class=\"line\">Timer.run(() &#123;...use the important variable...&#125;);</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">future.then(...<span class=\"keyword\">set</span> an important variable...)</span><br><span class=\"line\">  .then((_) &#123;...use the important variable...&#125;);</span><br></pre></td></tr></table></figure>\n<p><strong>then()()</strong><strong>whenComplete()</strong>thenthenjavafinally</p>\n<p>Future</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">future.then(...<span class=\"keyword\">set</span> an important variable...)</span><br><span class=\"line\">  .then((_) &#123;<span class=\"keyword\">new</span> Future(() &#123;...use the important variable...&#125;)&#125;);</span><br></pre></td></tr></table></figure>\n<p>Future</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>dart:async</strong></p>\n<pre><code>1.Futureevent\n2.**scheduleMicrotask()**microtask</code></pre><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Futureeventeventmicrotaskmicrotaskevent<br>eventmainscheduleMicrotaskmicrotask<br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-e62b4467a0e186d5.webp\" alt=\"\"></p>\n<h3 id=\"Event\"><a href=\"#Event\" class=\"headerlink\" title=\"Event\"></a>Event</h3><p><code>new Future</code><code>new Future.delayed()</code>event</p>\n<blockquote>\n<p><strong>:</strong><code>Timer</code>TimerFutureTimer</p>\n</blockquote>\n<p>eventnew Future</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//event</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> Future(() &#123;</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>thenwhenCompleteFutureFuture42</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> Future(() =&gt; <span class=\"number\">21</span>)</span><br><span class=\"line\">    .then((v) =&gt; v*<span class=\"number\">2</span>)</span><br><span class=\"line\">    .then((v) =&gt; <span class=\"built_in\">print</span>(v));</span><br></pre></td></tr></table></figure>\n\n<p>new Future.delayed():</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// event</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> Future.delayed(<span class=\"keyword\">const</span> <span class=\"built_in\">Duration</span>(seconds:<span class=\"number\">1</span>), () &#123;</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>event</p>\n<ol>\n<li>main</li>\n<li>microtask</li>\n<li><br>1</li>\n</ol>\n<p>Future</p>\n<ol>\n<li>then()Future()</li>\n<li>then()Futuremicrotaskthen</li>\n<li>Future()Future.delayed()event<ol start=\"4\">\n<li>Future.value()microtask</li>\n<li>Future,sync()microtask</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"Microtask-scheduleMicrotask\"><a href=\"#Microtask-scheduleMicrotask\" class=\"headerlink\" title=\"Microtask  scheduleMicrotask()\"></a>Microtask  scheduleMicrotask()</h3><p><strong>dart:async</strong>scheduleMicrotask() </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scheduleMicrotask(() &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...code goes here...</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"isolateworker\"><a href=\"#isolateworker\" class=\"headerlink\" title=\"isolateworker\"></a>isolateworker</h3><p>isolateworkerisolate.Dart</p>\n<p>isolatecpu</p>\n<p>cpuisolateappisolateisolate</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;dart:async&#x27;</span>;</span><br><span class=\"line\">main() &#123;</span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #1 of 2&#x27;</span>);</span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #1 of 2&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future.delayed(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(seconds:<span class=\"number\">1</span>),</span><br><span class=\"line\">                     () =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #1 (delayed)&#x27;</span>));</span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2 of 3&#x27;</span>));</span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3 of 3&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #2 of 2&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #2 of 2&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">main #<span class=\"number\">1</span> of <span class=\"number\">2</span></span><br><span class=\"line\">main #<span class=\"number\">2</span> of <span class=\"number\">2</span></span><br><span class=\"line\">microtask #<span class=\"number\">1</span> of <span class=\"number\">2</span></span><br><span class=\"line\">microtask #<span class=\"number\">2</span> of <span class=\"number\">2</span></span><br><span class=\"line\">future #<span class=\"number\">2</span> of <span class=\"number\">3</span></span><br><span class=\"line\">future #<span class=\"number\">3</span> of <span class=\"number\">3</span></span><br><span class=\"line\">future #<span class=\"number\">1</span> (delayed)</span><br></pre></td></tr></table></figure>\n<p></p>\n<ol>\n<li>main()</li>\n<li>microtask</li>\n<li>eventnew Futurenew Future.delayed</li>\n</ol>\n<p>mainmainmainmicrotaskmicrotaskmicrotaskmicrotaskeventdelay</p>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;dart:async&#x27;</span>;</span><br><span class=\"line\">main() &#123;</span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #1 of 2&#x27;</span>);</span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #1 of 3&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future.delayed(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(seconds:<span class=\"number\">1</span>),</span><br><span class=\"line\">      () =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #1 (delayed)&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2 of 4&#x27;</span>))</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2a&#x27;</span>))</span><br><span class=\"line\">      .then((_) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2b&#x27;</span>);</span><br><span class=\"line\">        scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #0 (from future #2b)&#x27;</span>));</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #2c&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #2 of 3&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3 of 4&#x27;</span>))</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"keyword\">new</span> Future(</span><br><span class=\"line\">                   () =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3a (a new future)&#x27;</span>)))</span><br><span class=\"line\">      .then((_) =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #3b&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> Future(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;future #4 of 4&#x27;</span>));</span><br><span class=\"line\">  scheduleMicrotask(() =&gt; <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;microtask #3 of 3&#x27;</span>));</span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;main #2 of 2&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">main #<span class=\"number\">1</span> of <span class=\"number\">2</span></span><br><span class=\"line\">main #<span class=\"number\">2</span> of <span class=\"number\">2</span></span><br><span class=\"line\">microtask #<span class=\"number\">1</span> of <span class=\"number\">3</span></span><br><span class=\"line\">microtask #<span class=\"number\">2</span> of <span class=\"number\">3</span></span><br><span class=\"line\">microtask #<span class=\"number\">3</span> of <span class=\"number\">3</span></span><br><span class=\"line\">future #<span class=\"number\">2</span> of <span class=\"number\">4</span></span><br><span class=\"line\">future #<span class=\"number\">2</span>a</span><br><span class=\"line\">future #<span class=\"number\">2</span>b</span><br><span class=\"line\">future #<span class=\"number\">2</span>c</span><br><span class=\"line\">microtask #<span class=\"number\">0</span> (from future #<span class=\"number\">2</span>b)</span><br><span class=\"line\">future #<span class=\"number\">3</span> of <span class=\"number\">4</span></span><br><span class=\"line\">future #<span class=\"number\">4</span> of <span class=\"number\">4</span></span><br><span class=\"line\">future #<span class=\"number\">3</span>a (a <span class=\"keyword\">new</span> future)</span><br><span class=\"line\">future #<span class=\"number\">3</span>b</span><br><span class=\"line\">future #<span class=\"number\">1</span> (delayed)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>dart</p>\n<ul>\n<li>Darteventmicrotask</li>\n<li>eventdartfuturetimerisolate messageI/O</li>\n<li>microtaskdart</li>\n<li>microtaskevent</li>\n<li>dart</li>\n<li>maineventmicrotaskDartmain isolate</li>\n</ul>\n<p></p>\n<ul>\n<li>event<ul>\n<li>FuturethenwhenComplete</li>\n<li>app</li>\n<li>isolate</li>\n</ul>\n</li>\n</ul>"},{"title":"DiyCodeApp","date":"2017-06-12T11:11:44.000Z","cover":"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-6b41628dadbf72b1.webp","_content":"\n`DiyCode`[https://www.diycode.cc/](https://www.diycode.cc/)**** API  Kotlin  App \n<!-- more -->\n## \n\nLeader  DiyCode  App  App  Google \n\n## \n\n API API  [https://www.diycode.cc/api](https://www.diycode.cc/api)\n\n- \n- \n- \n- \n- News\n\n API  App \n\n## \n\n API  APP \n\n- \n- \n- \n- \n- \n\n## \n\n### \n\n client\\_id  client\\_secrettoken local.properties .gitignore  build.gradle  defaultConfig \n\n``` groovy\nbuildConfigField \"String\",\"CLIENT_ID\",\"\\\"\" + properties.get(\"client_id\",\"null\") + \"\\\"\"\nbuildConfigField \"String\",\"CLIENT_SECRET\",\"\\\"\" + properties.get(\"client_secret\",\"null\") + \"\\\"\"\n```\n\n BuildConfig  Github \n\n### UI \n\n Android  UI  UI 80% Google  Android 5.0  Material Design  Android  App  UI\n\n Bilibili  App Material Design UI \n\n### App \n\n App  MVP\n\n### \n\n App \n\n- [CircleImageView](https://github.com/hdodenhof/CircleImageView) :  ImageView\n- [Picasso](https://github.com/square/picasso) : \n- [OkHttp](https://github.com/square/okhttp) : Http Client\n- [MarkdownView](https://github.com/tiagohm/MarkdownView) :  MarkDown \n- [MaterialTextField](https://github.com/florent37/MaterialTextField) : \n- [PhotoView](https://github.com/chrisbanes/PhotoView) : \n- [Dexter](https://github.com/Karumi/Dexter) : Runtime Permission \n- [Retrofit](https://github.com/square/retrofit) : Http Client\n\n\n\n### \n\n App  Kotlin  Databinding \n\n### \n\n#### 1.\n Kotlin Databinding  build.gradle \n\n```groovy\nkapt \"com.android.databinding:compiler:2.3.3\"\n```\n\n\n\n```groovy\napply plugin: 'kotlin-kapt'\n```\n\n Databinding \n\n#### 2.\n Retrofit  converter-gson \n\n```kotlin\ndata class Token\n(\n        @SerializedName(\"access_token\") val accessToken: String,\n        @SerializedName(\"token_type\") val tokenType: String,\n        @SerializedName(\"expires_in\") val expiresIn: String,\n        @SerializedName(\"refresh_token\") val refreshToken: String,\n        @SerializedName(\"created_at\") val createdAt: String\n)\n```\n\n kotlin  toString \n\n#### 3.\n App  token  Retrofit  Okhttp OkHttp  Interceptor\n\n```kotlin\nvar interceptor: Interceptor = object : Interceptor {\n    override fun intercept(chain: Interceptor.Chain?): Response {\n        var originRequest = chain!!.request()\n        if (originRequest.url().toString().contains(DiyCodeContract.kOAuthUrl)) {\n              return chain.proceed(originRequest)\n        }\n\n        if (originRequest.headers()[\"Authorization\"] != null) {\n            return chain.proceed(originRequest)\n        }\n\n        if (mCallback!!.getToken() == null || mCallback!!.getToken()?.length == 0) {\n            return chain.proceed(originRequest)\n        }\n\n        var newRequest = originRequest.\n                newBuilder().\n                addHeader(\"Authorization\", \"Bearer \" + mCallback!!.getToken()).\n                build()\n        return chain.proceed(newRequest)\n    }\n\n}\n\nvar okHttpClient: OkHttpClient = OkHttpClient.Builder().addInterceptor(interceptor).build()\n\nval retrofit = Retrofit.Builder()\n        .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n        .addConverterFactory(GsonConverterFactory.create())\n        .baseUrl(DiyCodeContract.kDiyCodeApi)\n        .client(okHttpClient)\n        .build()\n```\n\n#### 4.\nMarkdown  MarkdownView \n\n```kotlin\n    public interface OnElementListener {\n        void onButtonTap(String var1);\n\n        void onCodeTap(String var1, String var2);\n\n        void onHeadingTap(int var1, String var2);\n\n        void onImageTap(String var1, int var2, int var3);\n\n        void onLinkTap(String var1, String var2);\n\n        void onKeystrokeTap(String var1);\n\n        void onMarkTap(String var1);\n    }\n```\n\n\n\n#### 5.\nmarkdown  html markdown  MarkdownView  MarkdownView  WebView WebView \n TextView  html\n\n```kotlin\nbinding.markdownView.text = Html.fromHtml(topicReply.bodyHtml)\n```\n@@@\n\n ClickableSpan  TextView  Html.fromHtml \n\n```kotlin\n public static Spanned fromHtml(String source, int flags, Html.ImageGetter imageGetter, Html.TagHandler tagHandler) \n```\n\n ImageGetter html  <img> \n\n```kotlin\n   public interface ImageGetter {\n        Drawable getDrawable(String var1);\n    }\n```\n\n\n\n```kotlin\nclass URLDrawable : BitmapDrawable() {\n    var drawable: Drawable? = null\n\n    override fun draw(canvas: Canvas) {\n        if (drawable != null) {\n            drawable!!.draw(canvas)\n        }\n    }\n}\n\nclass URLImageParser(internal var container: View, internal var c: Context) : ImageGetter {\n\n    override fun getDrawable(source: String): Drawable {\n        val urlDrawable = URLDrawable()\n\n        val asyncTask = ImageGetterAsyncTask(urlDrawable)\n\n        asyncTask.execute(source)\n\n        return urlDrawable\n    }\n\n    inner class ImageGetterAsyncTask(internal var urlDrawable: URLDrawable) : AsyncTask<String, Void, Drawable>() {\n\n        override fun doInBackground(vararg params: String): Drawable? {\n            val source = params[0]\n            return fetchDrawable(source)\n        }\n\n        override fun onPostExecute(result: Drawable?) {\n            if(result == null) return\n            urlDrawable.setBounds(0, 0, 0 + result.intrinsicWidth, 0 + result.intrinsicHeight)\n\n            urlDrawable.drawable = result\n\n            val textview = this@URLImageParser.container as TextView\n            textview.text = textview.text\n        }\n\n        fun fetchDrawable(urlString: String): Drawable? {\n            try {\n                val `is` = fetch(urlString)\n                val drawable = Drawable.createFromStream(`is`, \"src\")\n                drawable.setBounds(0, 0, 0 + drawable.intrinsicWidth, 0 + drawable.intrinsicHeight)\n                return drawable\n            } catch (e: Exception) {\n                return null\n            }\n\n        }\n\n        @Throws(MalformedURLException::class, IOException::class)\n        private fun fetch(urlString: String): InputStream {\n            val url = URL(urlString)\n            val connection = url.openConnection()\n            val inputStream = BufferedInputStream(connection.getInputStream())\n            return inputStream\n        }\n    }\n}\n```\n ImageGetter  URLDrawable  AsyncTask  URLDrawable  TextView \n\n#### 6.\n Kotlin  Java  Java  Kotlin\n\n lambda  Button java \n\n```java\nbutton.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n        // ...\n    }\n});\n```\n\n Kotlin \n\n```kotlin\n button.setOnClickListener { \n        // ...\n}\n```\n\n Kotlin  Extensions  SharedPreference  commit  apply \n\n```java\nSharedPreferences sharedPreferences = getContext().getSharedPreferences(\"text\",Context.MODE_PRIVATE);\nsharedPreferences.edit().putBoolean(\"b1\",true).putString(\"str\",\"foo\").putLong(\"l1\",1L).apply();\n```\n\n Kotlin  Extensions \n\n```kotlin\nval sharedPreference  = context.getSharedPreferences(\"test\",Context.MODE_PRIVATE)\nsharedPreference.save {\n    putBoolean(\"b1\",true)\n    putString(\"str1\",\"foo\")\n    putLong(\"l1\",1L)\n}\n```\napply putBoolean  save SharedPreferences  Extensions \n\n```kotlin\n    fun SharedPreferences.save(func: SharedPreferences.Editor.()->Unit){\n        val edit = edit()\n        edit.func()\n        edit.apply()\n    }\n```\n\n SharedPreferences  save  Editor  apply \n\n## \n\n App \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-6b41628dadbf72b1.webp)\n\ngithub dclib  dcapp github [https://github.com/ZhangQinglian](https://github.com/ZhangQinglian)","source":"_posts/diy-code.md","raw":"---\ntitle: DiyCodeApp\ndate: 2017-6-12 19:11:44\ntags: android\ncover: https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-6b41628dadbf72b1.webp\n---\n\n`DiyCode`[https://www.diycode.cc/](https://www.diycode.cc/)**** API  Kotlin  App \n<!-- more -->\n## \n\nLeader  DiyCode  App  App  Google \n\n## \n\n API API  [https://www.diycode.cc/api](https://www.diycode.cc/api)\n\n- \n- \n- \n- \n- News\n\n API  App \n\n## \n\n API  APP \n\n- \n- \n- \n- \n- \n\n## \n\n### \n\n client\\_id  client\\_secrettoken local.properties .gitignore  build.gradle  defaultConfig \n\n``` groovy\nbuildConfigField \"String\",\"CLIENT_ID\",\"\\\"\" + properties.get(\"client_id\",\"null\") + \"\\\"\"\nbuildConfigField \"String\",\"CLIENT_SECRET\",\"\\\"\" + properties.get(\"client_secret\",\"null\") + \"\\\"\"\n```\n\n BuildConfig  Github \n\n### UI \n\n Android  UI  UI 80% Google  Android 5.0  Material Design  Android  App  UI\n\n Bilibili  App Material Design UI \n\n### App \n\n App  MVP\n\n### \n\n App \n\n- [CircleImageView](https://github.com/hdodenhof/CircleImageView) :  ImageView\n- [Picasso](https://github.com/square/picasso) : \n- [OkHttp](https://github.com/square/okhttp) : Http Client\n- [MarkdownView](https://github.com/tiagohm/MarkdownView) :  MarkDown \n- [MaterialTextField](https://github.com/florent37/MaterialTextField) : \n- [PhotoView](https://github.com/chrisbanes/PhotoView) : \n- [Dexter](https://github.com/Karumi/Dexter) : Runtime Permission \n- [Retrofit](https://github.com/square/retrofit) : Http Client\n\n\n\n### \n\n App  Kotlin  Databinding \n\n### \n\n#### 1.\n Kotlin Databinding  build.gradle \n\n```groovy\nkapt \"com.android.databinding:compiler:2.3.3\"\n```\n\n\n\n```groovy\napply plugin: 'kotlin-kapt'\n```\n\n Databinding \n\n#### 2.\n Retrofit  converter-gson \n\n```kotlin\ndata class Token\n(\n        @SerializedName(\"access_token\") val accessToken: String,\n        @SerializedName(\"token_type\") val tokenType: String,\n        @SerializedName(\"expires_in\") val expiresIn: String,\n        @SerializedName(\"refresh_token\") val refreshToken: String,\n        @SerializedName(\"created_at\") val createdAt: String\n)\n```\n\n kotlin  toString \n\n#### 3.\n App  token  Retrofit  Okhttp OkHttp  Interceptor\n\n```kotlin\nvar interceptor: Interceptor = object : Interceptor {\n    override fun intercept(chain: Interceptor.Chain?): Response {\n        var originRequest = chain!!.request()\n        if (originRequest.url().toString().contains(DiyCodeContract.kOAuthUrl)) {\n              return chain.proceed(originRequest)\n        }\n\n        if (originRequest.headers()[\"Authorization\"] != null) {\n            return chain.proceed(originRequest)\n        }\n\n        if (mCallback!!.getToken() == null || mCallback!!.getToken()?.length == 0) {\n            return chain.proceed(originRequest)\n        }\n\n        var newRequest = originRequest.\n                newBuilder().\n                addHeader(\"Authorization\", \"Bearer \" + mCallback!!.getToken()).\n                build()\n        return chain.proceed(newRequest)\n    }\n\n}\n\nvar okHttpClient: OkHttpClient = OkHttpClient.Builder().addInterceptor(interceptor).build()\n\nval retrofit = Retrofit.Builder()\n        .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n        .addConverterFactory(GsonConverterFactory.create())\n        .baseUrl(DiyCodeContract.kDiyCodeApi)\n        .client(okHttpClient)\n        .build()\n```\n\n#### 4.\nMarkdown  MarkdownView \n\n```kotlin\n    public interface OnElementListener {\n        void onButtonTap(String var1);\n\n        void onCodeTap(String var1, String var2);\n\n        void onHeadingTap(int var1, String var2);\n\n        void onImageTap(String var1, int var2, int var3);\n\n        void onLinkTap(String var1, String var2);\n\n        void onKeystrokeTap(String var1);\n\n        void onMarkTap(String var1);\n    }\n```\n\n\n\n#### 5.\nmarkdown  html markdown  MarkdownView  MarkdownView  WebView WebView \n TextView  html\n\n```kotlin\nbinding.markdownView.text = Html.fromHtml(topicReply.bodyHtml)\n```\n@@@\n\n ClickableSpan  TextView  Html.fromHtml \n\n```kotlin\n public static Spanned fromHtml(String source, int flags, Html.ImageGetter imageGetter, Html.TagHandler tagHandler) \n```\n\n ImageGetter html  <img> \n\n```kotlin\n   public interface ImageGetter {\n        Drawable getDrawable(String var1);\n    }\n```\n\n\n\n```kotlin\nclass URLDrawable : BitmapDrawable() {\n    var drawable: Drawable? = null\n\n    override fun draw(canvas: Canvas) {\n        if (drawable != null) {\n            drawable!!.draw(canvas)\n        }\n    }\n}\n\nclass URLImageParser(internal var container: View, internal var c: Context) : ImageGetter {\n\n    override fun getDrawable(source: String): Drawable {\n        val urlDrawable = URLDrawable()\n\n        val asyncTask = ImageGetterAsyncTask(urlDrawable)\n\n        asyncTask.execute(source)\n\n        return urlDrawable\n    }\n\n    inner class ImageGetterAsyncTask(internal var urlDrawable: URLDrawable) : AsyncTask<String, Void, Drawable>() {\n\n        override fun doInBackground(vararg params: String): Drawable? {\n            val source = params[0]\n            return fetchDrawable(source)\n        }\n\n        override fun onPostExecute(result: Drawable?) {\n            if(result == null) return\n            urlDrawable.setBounds(0, 0, 0 + result.intrinsicWidth, 0 + result.intrinsicHeight)\n\n            urlDrawable.drawable = result\n\n            val textview = this@URLImageParser.container as TextView\n            textview.text = textview.text\n        }\n\n        fun fetchDrawable(urlString: String): Drawable? {\n            try {\n                val `is` = fetch(urlString)\n                val drawable = Drawable.createFromStream(`is`, \"src\")\n                drawable.setBounds(0, 0, 0 + drawable.intrinsicWidth, 0 + drawable.intrinsicHeight)\n                return drawable\n            } catch (e: Exception) {\n                return null\n            }\n\n        }\n\n        @Throws(MalformedURLException::class, IOException::class)\n        private fun fetch(urlString: String): InputStream {\n            val url = URL(urlString)\n            val connection = url.openConnection()\n            val inputStream = BufferedInputStream(connection.getInputStream())\n            return inputStream\n        }\n    }\n}\n```\n ImageGetter  URLDrawable  AsyncTask  URLDrawable  TextView \n\n#### 6.\n Kotlin  Java  Java  Kotlin\n\n lambda  Button java \n\n```java\nbutton.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n        // ...\n    }\n});\n```\n\n Kotlin \n\n```kotlin\n button.setOnClickListener { \n        // ...\n}\n```\n\n Kotlin  Extensions  SharedPreference  commit  apply \n\n```java\nSharedPreferences sharedPreferences = getContext().getSharedPreferences(\"text\",Context.MODE_PRIVATE);\nsharedPreferences.edit().putBoolean(\"b1\",true).putString(\"str\",\"foo\").putLong(\"l1\",1L).apply();\n```\n\n Kotlin  Extensions \n\n```kotlin\nval sharedPreference  = context.getSharedPreferences(\"test\",Context.MODE_PRIVATE)\nsharedPreference.save {\n    putBoolean(\"b1\",true)\n    putString(\"str1\",\"foo\")\n    putLong(\"l1\",1L)\n}\n```\napply putBoolean  save SharedPreferences  Extensions \n\n```kotlin\n    fun SharedPreferences.save(func: SharedPreferences.Editor.()->Unit){\n        val edit = edit()\n        edit.func()\n        edit.apply()\n    }\n```\n\n SharedPreferences  save  Editor  apply \n\n## \n\n App \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-6b41628dadbf72b1.webp)\n\ngithub dclib  dcapp github [https://github.com/ZhangQinglian](https://github.com/ZhangQinglian)","slug":"diy-code","published":1,"updated":"2024-08-21T03:16:19.783Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vt00105p6td87k4i7a","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><code>DiyCode</code><a href=\"https://www.diycode.cc/\">https://www.diycode.cc/</a><strong></strong> API  Kotlin  App </p>\n<span id=\"more\"></span>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Leader  DiyCode  App  App  Google </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> API API  <a href=\"https://www.diycode.cc/api\">https://www.diycode.cc/api</a></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>News</li>\n</ul>\n<p> API  App </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> API  APP </p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> client_id  client_secrettoken local.properties .gitignore  build.gradle  defaultConfig </p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">buildConfigField <span class=\"string\">&quot;String&quot;</span>,<span class=\"string\">&quot;CLIENT_ID&quot;</span>,<span class=\"string\">&quot;\\&quot;&quot;</span> + properties.get(<span class=\"string\">&quot;client_id&quot;</span>,<span class=\"string\">&quot;null&quot;</span>) + <span class=\"string\">&quot;\\&quot;&quot;</span></span><br><span class=\"line\">buildConfigField <span class=\"string\">&quot;String&quot;</span>,<span class=\"string\">&quot;CLIENT_SECRET&quot;</span>,<span class=\"string\">&quot;\\&quot;&quot;</span> + properties.get(<span class=\"string\">&quot;client_secret&quot;</span>,<span class=\"string\">&quot;null&quot;</span>) + <span class=\"string\">&quot;\\&quot;&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p> BuildConfig  Github </p>\n<h3 id=\"UI-\"><a href=\"#UI-\" class=\"headerlink\" title=\"UI \"></a>UI </h3><p> Android  UI  UI 80% Google  Android 5.0  Material Design  Android  App  UI</p>\n<p> Bilibili  App Material Design UI </p>\n<h3 id=\"App-\"><a href=\"#App-\" class=\"headerlink\" title=\"App \"></a>App </h3><p> App  MVP</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> App </p>\n<ul>\n<li><a href=\"https://github.com/hdodenhof/CircleImageView\">CircleImageView</a> :  ImageView</li>\n<li><a href=\"https://github.com/square/picasso\">Picasso</a> : </li>\n<li><a href=\"https://github.com/square/okhttp\">OkHttp</a> : Http Client</li>\n<li><a href=\"https://github.com/tiagohm/MarkdownView\">MarkdownView</a> :  MarkDown </li>\n<li><a href=\"https://github.com/florent37/MaterialTextField\">MaterialTextField</a> : </li>\n<li><a href=\"https://github.com/chrisbanes/PhotoView\">PhotoView</a> : </li>\n<li><a href=\"https://github.com/Karumi/Dexter\">Dexter</a> : Runtime Permission </li>\n<li><a href=\"https://github.com/square/retrofit\">Retrofit</a> : Http Client</li>\n</ul>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> App  Kotlin  Databinding </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1.\"></a>1.</h4><p> Kotlin Databinding  build.gradle </p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kapt <span class=\"string\">&quot;com.android.databinding:compiler:2.3.3&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apply <span class=\"attr\">plugin:</span> <span class=\"string\">&#x27;kotlin-kapt&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p> Databinding </p>\n<h4 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2.\"></a>2.</h4><p> Retrofit  converter-gson </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">data</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Token</span></span><br><span class=\"line\">(</span><br><span class=\"line\">        <span class=\"meta\">@SerializedName(<span class=\"string\">&quot;access_token&quot;</span>)</span> <span class=\"keyword\">val</span> accessToken: String,</span><br><span class=\"line\">        <span class=\"meta\">@SerializedName(<span class=\"string\">&quot;token_type&quot;</span>)</span> <span class=\"keyword\">val</span> tokenType: String,</span><br><span class=\"line\">        <span class=\"meta\">@SerializedName(<span class=\"string\">&quot;expires_in&quot;</span>)</span> <span class=\"keyword\">val</span> expiresIn: String,</span><br><span class=\"line\">        <span class=\"meta\">@SerializedName(<span class=\"string\">&quot;refresh_token&quot;</span>)</span> <span class=\"keyword\">val</span> refreshToken: String,</span><br><span class=\"line\">        <span class=\"meta\">@SerializedName(<span class=\"string\">&quot;created_at&quot;</span>)</span> <span class=\"keyword\">val</span> createdAt: String</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<p> kotlin  toString </p>\n<h4 id=\"3\"><a href=\"#3\" class=\"headerlink\" title=\"3.\"></a>3.</h4><p> App  token  Retrofit  Okhttp OkHttp  Interceptor</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> interceptor: Interceptor = <span class=\"keyword\">object</span> : Interceptor &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">intercept</span><span class=\"params\">(chain: <span class=\"type\">Interceptor</span>.<span class=\"type\">Chain</span>?)</span></span>: Response &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> originRequest = chain!!.request()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (originRequest.url().toString().contains(DiyCodeContract.kOAuthUrl)) &#123;</span><br><span class=\"line\">              <span class=\"keyword\">return</span> chain.proceed(originRequest)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (originRequest.headers()[<span class=\"string\">&quot;Authorization&quot;</span>] != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> chain.proceed(originRequest)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mCallback!!.getToken() == <span class=\"literal\">null</span> || mCallback!!.getToken()?.length == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> chain.proceed(originRequest)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> newRequest = originRequest.</span><br><span class=\"line\">                newBuilder().</span><br><span class=\"line\">                addHeader(<span class=\"string\">&quot;Authorization&quot;</span>, <span class=\"string\">&quot;Bearer &quot;</span> + mCallback!!.getToken()).</span><br><span class=\"line\">                build()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> chain.proceed(newRequest)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> okHttpClient: OkHttpClient = OkHttpClient.Builder().addInterceptor(interceptor).build()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">val</span> retrofit = Retrofit.Builder()</span><br><span class=\"line\">        .addCallAdapterFactory(RxJava2CallAdapterFactory.create())</span><br><span class=\"line\">        .addConverterFactory(GsonConverterFactory.create())</span><br><span class=\"line\">        .baseUrl(DiyCodeContract.kDiyCodeApi)</span><br><span class=\"line\">        .client(okHttpClient)</span><br><span class=\"line\">        .build()</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4\"><a href=\"#4\" class=\"headerlink\" title=\"4.\"></a>4.</h4><p>Markdown  MarkdownView </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">OnElementListener</span> &#123;</span><br><span class=\"line\">    void onButtonTap(String var1);</span><br><span class=\"line\"></span><br><span class=\"line\">    void onCodeTap(String var1, String var2);</span><br><span class=\"line\"></span><br><span class=\"line\">    void onHeadingTap(int var1, String var2);</span><br><span class=\"line\"></span><br><span class=\"line\">    void onImageTap(String var1, int var2, int var3);</span><br><span class=\"line\"></span><br><span class=\"line\">    void onLinkTap(String var1, String var2);</span><br><span class=\"line\"></span><br><span class=\"line\">    void onKeystrokeTap(String var1);</span><br><span class=\"line\"></span><br><span class=\"line\">    void onMarkTap(String var1);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h4 id=\"5\"><a href=\"#5\" class=\"headerlink\" title=\"5.\"></a>5.</h4><p>markdown  html markdown  MarkdownView  MarkdownView  WebView WebView <br> TextView  html</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">binding.markdownView.text = Html.fromHtml(topicReply.bodyHtml)</span><br></pre></td></tr></table></figure>\n<p>@@@</p>\n<p> ClickableSpan  TextView  Html.fromHtml </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> static Spanned fromHtml(String source, int flags, Html.ImageGetter imageGetter, Html.TagHandler tagHandler) </span><br></pre></td></tr></table></figure>\n\n<p> ImageGetter html  <img> </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">ImageGetter</span> &#123;</span><br><span class=\"line\">     Drawable getDrawable(String var1);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">URLDrawable</span> : <span class=\"type\">BitmapDrawable</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> drawable: Drawable? = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">draw</span><span class=\"params\">(canvas: <span class=\"type\">Canvas</span>)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (drawable != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            drawable!!.draw(canvas)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">URLImageParser</span>(<span class=\"keyword\">internal</span> <span class=\"keyword\">var</span> container: View, <span class=\"keyword\">internal</span> <span class=\"keyword\">var</span> c: Context) : ImageGetter &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getDrawable</span><span class=\"params\">(source: <span class=\"type\">String</span>)</span></span>: Drawable &#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> urlDrawable = URLDrawable()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">val</span> asyncTask = ImageGetterAsyncTask(urlDrawable)</span><br><span class=\"line\"></span><br><span class=\"line\">        asyncTask.execute(source)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> urlDrawable</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">inner</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ImageGetterAsyncTask</span>(<span class=\"keyword\">internal</span> <span class=\"keyword\">var</span> urlDrawable: URLDrawable) : AsyncTask&lt;String, <span class=\"built_in\">Void</span>, Drawable&gt;() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">doInBackground</span><span class=\"params\">(<span class=\"keyword\">vararg</span> params: <span class=\"type\">String</span>)</span></span>: Drawable? &#123;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> source = params[<span class=\"number\">0</span>]</span><br><span class=\"line\">            <span class=\"keyword\">return</span> fetchDrawable(source)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onPostExecute</span><span class=\"params\">(result: <span class=\"type\">Drawable</span>?)</span></span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(result == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span></span><br><span class=\"line\">            urlDrawable.setBounds(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span> + result.intrinsicWidth, <span class=\"number\">0</span> + result.intrinsicHeight)</span><br><span class=\"line\"></span><br><span class=\"line\">            urlDrawable.drawable = result</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">val</span> textview = <span class=\"keyword\">this</span><span class=\"symbol\">@URLImageParser</span>.container <span class=\"keyword\">as</span> TextView</span><br><span class=\"line\">            textview.text = textview.text</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">fetchDrawable</span><span class=\"params\">(urlString: <span class=\"type\">String</span>)</span></span>: Drawable? &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> `<span class=\"keyword\">is</span>` = fetch(urlString)</span><br><span class=\"line\">                <span class=\"keyword\">val</span> drawable = Drawable.createFromStream(`<span class=\"keyword\">is</span>`, <span class=\"string\">&quot;src&quot;</span>)</span><br><span class=\"line\">                drawable.setBounds(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span> + drawable.intrinsicWidth, <span class=\"number\">0</span> + drawable.intrinsicHeight)</span><br><span class=\"line\">                <span class=\"keyword\">return</span> drawable</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (e: Exception) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">null</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Throws(MalformedURLException::class, IOException::class)</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">fetch</span><span class=\"params\">(urlString: <span class=\"type\">String</span>)</span></span>: InputStream &#123;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> url = URL(urlString)</span><br><span class=\"line\">            <span class=\"keyword\">val</span> connection = url.openConnection()</span><br><span class=\"line\">            <span class=\"keyword\">val</span> inputStream = BufferedInputStream(connection.getInputStream())</span><br><span class=\"line\">            <span class=\"keyword\">return</span> inputStream</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> ImageGetter  URLDrawable  AsyncTask  URLDrawable  TextView </p>\n<h4 id=\"6\"><a href=\"#6\" class=\"headerlink\" title=\"6.\"></a>6.</h4><p> Kotlin  Java  Java  Kotlin</p>\n<p> lambda  Button java </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">button.setOnClickListener(<span class=\"keyword\">new</span> <span class=\"title class_\">View</span>.OnClickListener() &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onClick</span><span class=\"params\">(View v)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p> Kotlin </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> button.setOnClickListener &#123; </span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> Kotlin  Extensions  SharedPreference  commit  apply </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">SharedPreferences</span> <span class=\"variable\">sharedPreferences</span> <span class=\"operator\">=</span> getContext().getSharedPreferences(<span class=\"string\">&quot;text&quot;</span>,Context.MODE_PRIVATE);</span><br><span class=\"line\">sharedPreferences.edit().putBoolean(<span class=\"string\">&quot;b1&quot;</span>,<span class=\"literal\">true</span>).putString(<span class=\"string\">&quot;str&quot;</span>,<span class=\"string\">&quot;foo&quot;</span>).putLong(<span class=\"string\">&quot;l1&quot;</span>,<span class=\"number\">1L</span>).apply();</span><br></pre></td></tr></table></figure>\n\n<p> Kotlin  Extensions </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> sharedPreference  = context.getSharedPreferences(<span class=\"string\">&quot;test&quot;</span>,Context.MODE_PRIVATE)</span><br><span class=\"line\">sharedPreference.save &#123;</span><br><span class=\"line\">    putBoolean(<span class=\"string\">&quot;b1&quot;</span>,<span class=\"literal\">true</span>)</span><br><span class=\"line\">    putString(<span class=\"string\">&quot;str1&quot;</span>,<span class=\"string\">&quot;foo&quot;</span>)</span><br><span class=\"line\">    putLong(<span class=\"string\">&quot;l1&quot;</span>,<span class=\"number\">1L</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>apply putBoolean  save SharedPreferences  Extensions </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> SharedPreferences.<span class=\"title\">save</span><span class=\"params\">(func: <span class=\"type\">SharedPreferences</span>.<span class=\"type\">Editor</span>.()-&gt;<span class=\"type\">Unit</span>)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> edit = edit()</span><br><span class=\"line\">    edit.func()</span><br><span class=\"line\">    edit.apply()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> SharedPreferences  save  Editor  apply </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> App </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-6b41628dadbf72b1.webp\" alt=\"image\"></p>\n<p>github dclib  dcapp github <a href=\"https://github.com/ZhangQinglian\">https://github.com/ZhangQinglian</a></p>\n","excerpt":"<p><code>DiyCode</code><a href=\"https://www.diycode.cc/\">https://www.diycode.cc/</a><strong></strong> API  Kotlin  App </p>","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Leader  DiyCode  App  App  Google </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> API API  <a href=\"https://www.diycode.cc/api\">https://www.diycode.cc/api</a></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>News</li>\n</ul>\n<p> API  App </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> API  APP </p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> client_id  client_secrettoken local.properties .gitignore  build.gradle  defaultConfig </p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">buildConfigField <span class=\"string\">&quot;String&quot;</span>,<span class=\"string\">&quot;CLIENT_ID&quot;</span>,<span class=\"string\">&quot;\\&quot;&quot;</span> + properties.get(<span class=\"string\">&quot;client_id&quot;</span>,<span class=\"string\">&quot;null&quot;</span>) + <span class=\"string\">&quot;\\&quot;&quot;</span></span><br><span class=\"line\">buildConfigField <span class=\"string\">&quot;String&quot;</span>,<span class=\"string\">&quot;CLIENT_SECRET&quot;</span>,<span class=\"string\">&quot;\\&quot;&quot;</span> + properties.get(<span class=\"string\">&quot;client_secret&quot;</span>,<span class=\"string\">&quot;null&quot;</span>) + <span class=\"string\">&quot;\\&quot;&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p> BuildConfig  Github </p>\n<h3 id=\"UI-\"><a href=\"#UI-\" class=\"headerlink\" title=\"UI \"></a>UI </h3><p> Android  UI  UI 80% Google  Android 5.0  Material Design  Android  App  UI</p>\n<p> Bilibili  App Material Design UI </p>\n<h3 id=\"App-\"><a href=\"#App-\" class=\"headerlink\" title=\"App \"></a>App </h3><p> App  MVP</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> App </p>\n<ul>\n<li><a href=\"https://github.com/hdodenhof/CircleImageView\">CircleImageView</a> :  ImageView</li>\n<li><a href=\"https://github.com/square/picasso\">Picasso</a> : </li>\n<li><a href=\"https://github.com/square/okhttp\">OkHttp</a> : Http Client</li>\n<li><a href=\"https://github.com/tiagohm/MarkdownView\">MarkdownView</a> :  MarkDown </li>\n<li><a href=\"https://github.com/florent37/MaterialTextField\">MaterialTextField</a> : </li>\n<li><a href=\"https://github.com/chrisbanes/PhotoView\">PhotoView</a> : </li>\n<li><a href=\"https://github.com/Karumi/Dexter\">Dexter</a> : Runtime Permission </li>\n<li><a href=\"https://github.com/square/retrofit\">Retrofit</a> : Http Client</li>\n</ul>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> App  Kotlin  Databinding </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1.\"></a>1.</h4><p> Kotlin Databinding  build.gradle </p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kapt <span class=\"string\">&quot;com.android.databinding:compiler:2.3.3&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apply <span class=\"attr\">plugin:</span> <span class=\"string\">&#x27;kotlin-kapt&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p> Databinding </p>\n<h4 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2.\"></a>2.</h4><p> Retrofit  converter-gson </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">data</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Token</span></span><br><span class=\"line\">(</span><br><span class=\"line\">        <span class=\"meta\">@SerializedName(<span class=\"string\">&quot;access_token&quot;</span>)</span> <span class=\"keyword\">val</span> accessToken: String,</span><br><span class=\"line\">        <span class=\"meta\">@SerializedName(<span class=\"string\">&quot;token_type&quot;</span>)</span> <span class=\"keyword\">val</span> tokenType: String,</span><br><span class=\"line\">        <span class=\"meta\">@SerializedName(<span class=\"string\">&quot;expires_in&quot;</span>)</span> <span class=\"keyword\">val</span> expiresIn: String,</span><br><span class=\"line\">        <span class=\"meta\">@SerializedName(<span class=\"string\">&quot;refresh_token&quot;</span>)</span> <span class=\"keyword\">val</span> refreshToken: String,</span><br><span class=\"line\">        <span class=\"meta\">@SerializedName(<span class=\"string\">&quot;created_at&quot;</span>)</span> <span class=\"keyword\">val</span> createdAt: String</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<p> kotlin  toString </p>\n<h4 id=\"3\"><a href=\"#3\" class=\"headerlink\" title=\"3.\"></a>3.</h4><p> App  token  Retrofit  Okhttp OkHttp  Interceptor</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> interceptor: Interceptor = <span class=\"keyword\">object</span> : Interceptor &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">intercept</span><span class=\"params\">(chain: <span class=\"type\">Interceptor</span>.<span class=\"type\">Chain</span>?)</span></span>: Response &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> originRequest = chain!!.request()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (originRequest.url().toString().contains(DiyCodeContract.kOAuthUrl)) &#123;</span><br><span class=\"line\">              <span class=\"keyword\">return</span> chain.proceed(originRequest)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (originRequest.headers()[<span class=\"string\">&quot;Authorization&quot;</span>] != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> chain.proceed(originRequest)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mCallback!!.getToken() == <span class=\"literal\">null</span> || mCallback!!.getToken()?.length == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> chain.proceed(originRequest)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> newRequest = originRequest.</span><br><span class=\"line\">                newBuilder().</span><br><span class=\"line\">                addHeader(<span class=\"string\">&quot;Authorization&quot;</span>, <span class=\"string\">&quot;Bearer &quot;</span> + mCallback!!.getToken()).</span><br><span class=\"line\">                build()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> chain.proceed(newRequest)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> okHttpClient: OkHttpClient = OkHttpClient.Builder().addInterceptor(interceptor).build()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">val</span> retrofit = Retrofit.Builder()</span><br><span class=\"line\">        .addCallAdapterFactory(RxJava2CallAdapterFactory.create())</span><br><span class=\"line\">        .addConverterFactory(GsonConverterFactory.create())</span><br><span class=\"line\">        .baseUrl(DiyCodeContract.kDiyCodeApi)</span><br><span class=\"line\">        .client(okHttpClient)</span><br><span class=\"line\">        .build()</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4\"><a href=\"#4\" class=\"headerlink\" title=\"4.\"></a>4.</h4><p>Markdown  MarkdownView </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">OnElementListener</span> &#123;</span><br><span class=\"line\">    void onButtonTap(String var1);</span><br><span class=\"line\"></span><br><span class=\"line\">    void onCodeTap(String var1, String var2);</span><br><span class=\"line\"></span><br><span class=\"line\">    void onHeadingTap(int var1, String var2);</span><br><span class=\"line\"></span><br><span class=\"line\">    void onImageTap(String var1, int var2, int var3);</span><br><span class=\"line\"></span><br><span class=\"line\">    void onLinkTap(String var1, String var2);</span><br><span class=\"line\"></span><br><span class=\"line\">    void onKeystrokeTap(String var1);</span><br><span class=\"line\"></span><br><span class=\"line\">    void onMarkTap(String var1);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<h4 id=\"5\"><a href=\"#5\" class=\"headerlink\" title=\"5.\"></a>5.</h4><p>markdown  html markdown  MarkdownView  MarkdownView  WebView WebView <br> TextView  html</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">binding.markdownView.text = Html.fromHtml(topicReply.bodyHtml)</span><br></pre></td></tr></table></figure>\n<p>@@@</p>\n<p> ClickableSpan  TextView  Html.fromHtml </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> static Spanned fromHtml(String source, int flags, Html.ImageGetter imageGetter, Html.TagHandler tagHandler) </span><br></pre></td></tr></table></figure>\n\n<p> ImageGetter html  <img> </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">ImageGetter</span> &#123;</span><br><span class=\"line\">     Drawable getDrawable(String var1);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">URLDrawable</span> : <span class=\"type\">BitmapDrawable</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> drawable: Drawable? = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">draw</span><span class=\"params\">(canvas: <span class=\"type\">Canvas</span>)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (drawable != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            drawable!!.draw(canvas)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">URLImageParser</span>(<span class=\"keyword\">internal</span> <span class=\"keyword\">var</span> container: View, <span class=\"keyword\">internal</span> <span class=\"keyword\">var</span> c: Context) : ImageGetter &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getDrawable</span><span class=\"params\">(source: <span class=\"type\">String</span>)</span></span>: Drawable &#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> urlDrawable = URLDrawable()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">val</span> asyncTask = ImageGetterAsyncTask(urlDrawable)</span><br><span class=\"line\"></span><br><span class=\"line\">        asyncTask.execute(source)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> urlDrawable</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">inner</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ImageGetterAsyncTask</span>(<span class=\"keyword\">internal</span> <span class=\"keyword\">var</span> urlDrawable: URLDrawable) : AsyncTask&lt;String, <span class=\"built_in\">Void</span>, Drawable&gt;() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">doInBackground</span><span class=\"params\">(<span class=\"keyword\">vararg</span> params: <span class=\"type\">String</span>)</span></span>: Drawable? &#123;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> source = params[<span class=\"number\">0</span>]</span><br><span class=\"line\">            <span class=\"keyword\">return</span> fetchDrawable(source)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onPostExecute</span><span class=\"params\">(result: <span class=\"type\">Drawable</span>?)</span></span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(result == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span></span><br><span class=\"line\">            urlDrawable.setBounds(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span> + result.intrinsicWidth, <span class=\"number\">0</span> + result.intrinsicHeight)</span><br><span class=\"line\"></span><br><span class=\"line\">            urlDrawable.drawable = result</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">val</span> textview = <span class=\"keyword\">this</span><span class=\"symbol\">@URLImageParser</span>.container <span class=\"keyword\">as</span> TextView</span><br><span class=\"line\">            textview.text = textview.text</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">fetchDrawable</span><span class=\"params\">(urlString: <span class=\"type\">String</span>)</span></span>: Drawable? &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> `<span class=\"keyword\">is</span>` = fetch(urlString)</span><br><span class=\"line\">                <span class=\"keyword\">val</span> drawable = Drawable.createFromStream(`<span class=\"keyword\">is</span>`, <span class=\"string\">&quot;src&quot;</span>)</span><br><span class=\"line\">                drawable.setBounds(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span> + drawable.intrinsicWidth, <span class=\"number\">0</span> + drawable.intrinsicHeight)</span><br><span class=\"line\">                <span class=\"keyword\">return</span> drawable</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (e: Exception) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">null</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Throws(MalformedURLException::class, IOException::class)</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">fetch</span><span class=\"params\">(urlString: <span class=\"type\">String</span>)</span></span>: InputStream &#123;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> url = URL(urlString)</span><br><span class=\"line\">            <span class=\"keyword\">val</span> connection = url.openConnection()</span><br><span class=\"line\">            <span class=\"keyword\">val</span> inputStream = BufferedInputStream(connection.getInputStream())</span><br><span class=\"line\">            <span class=\"keyword\">return</span> inputStream</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> ImageGetter  URLDrawable  AsyncTask  URLDrawable  TextView </p>\n<h4 id=\"6\"><a href=\"#6\" class=\"headerlink\" title=\"6.\"></a>6.</h4><p> Kotlin  Java  Java  Kotlin</p>\n<p> lambda  Button java </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">button.setOnClickListener(<span class=\"keyword\">new</span> <span class=\"title class_\">View</span>.OnClickListener() &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onClick</span><span class=\"params\">(View v)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p> Kotlin </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> button.setOnClickListener &#123; </span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> Kotlin  Extensions  SharedPreference  commit  apply </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">SharedPreferences</span> <span class=\"variable\">sharedPreferences</span> <span class=\"operator\">=</span> getContext().getSharedPreferences(<span class=\"string\">&quot;text&quot;</span>,Context.MODE_PRIVATE);</span><br><span class=\"line\">sharedPreferences.edit().putBoolean(<span class=\"string\">&quot;b1&quot;</span>,<span class=\"literal\">true</span>).putString(<span class=\"string\">&quot;str&quot;</span>,<span class=\"string\">&quot;foo&quot;</span>).putLong(<span class=\"string\">&quot;l1&quot;</span>,<span class=\"number\">1L</span>).apply();</span><br></pre></td></tr></table></figure>\n\n<p> Kotlin  Extensions </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> sharedPreference  = context.getSharedPreferences(<span class=\"string\">&quot;test&quot;</span>,Context.MODE_PRIVATE)</span><br><span class=\"line\">sharedPreference.save &#123;</span><br><span class=\"line\">    putBoolean(<span class=\"string\">&quot;b1&quot;</span>,<span class=\"literal\">true</span>)</span><br><span class=\"line\">    putString(<span class=\"string\">&quot;str1&quot;</span>,<span class=\"string\">&quot;foo&quot;</span>)</span><br><span class=\"line\">    putLong(<span class=\"string\">&quot;l1&quot;</span>,<span class=\"number\">1L</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>apply putBoolean  save SharedPreferences  Extensions </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> SharedPreferences.<span class=\"title\">save</span><span class=\"params\">(func: <span class=\"type\">SharedPreferences</span>.<span class=\"type\">Editor</span>.()-&gt;<span class=\"type\">Unit</span>)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> edit = edit()</span><br><span class=\"line\">    edit.func()</span><br><span class=\"line\">    edit.apply()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> SharedPreferences  save  Editor  apply </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> App </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-6b41628dadbf72b1.webp\" alt=\"image\"></p>\n<p>github dclib  dcapp github <a href=\"https://github.com/ZhangQinglian\">https://github.com/ZhangQinglian</a></p>"},{"title":"egl-1-4-quick-reference-card","date":"2021-01-21T14:29:58.000Z","_content":"\n![egl-1-4-quick-reference-card](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/egl-1-4-quick-reference-card.png)","source":"_posts/egl-1-4-quick-reference-card.md","raw":"---\ntitle: egl-1-4-quick-reference-card\ndate: 2021-01-21 22:29:58\ntags: EGL\n---\n\n![egl-1-4-quick-reference-card](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/egl-1-4-quick-reference-card.png)","slug":"egl-1-4-quick-reference-card","published":1,"updated":"2024-08-21T03:16:19.784Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vt00125p6tajzd4i0t","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/egl-1-4-quick-reference-card.png\" alt=\"egl-1-4-quick-reference-card\"></p>\n","excerpt":"","more":"<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/opengl/egl-1-4-quick-reference-card.png\" alt=\"egl-1-4-quick-reference-card\"></p>\n"},{"title":" Flutter  LiveData","date":"2019-09-11T08:09:25.000Z","cover":"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/flutter_livedata.png","top":9,"_content":"\n#  Flutter  LiveData\n\n\n\n Android [LiveData](https://developer.android.com/topic/libraries/architecture/livedata)   [ViewModel](https://developer.android.com/topic/libraries/architecture/viewmodel)  MVVM \n\n Flutter  LiveData  API API  API \n\n LiveData  ViewModel \n\n1. LiveData \n2. LiveData  Activity  Fragment observeForeve\n3. ViewModel  UI \n\n<!-- more -->\n\n## LiveData \n\n```dart\nimport 'package:flutter/material.dart';\n\nclass LiveData<T> with ChangeNotifier {\n  T _data;\n\n  T get value => _data;\n\n  set value(T data) {\n    _data = data;\n    notifyListeners();\n  }\n}\n```\n\n Flutter  LiveData \n\n### LiveDataWidget \n\n LiveData  `setState`  Widget  LiveDataWidget  LiveData  Widget\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\n\nclass LiveDataWidget<T extends LiveData> extends StatelessWidget {\n  LiveDataWidget({Key key, @required this.data, @required this.builder})\n      : super(key: key);\n\n  final T data;\n\n  final Widget Function(BuildContext context, T value, Widget child) builder;\n\n  @override\n  Widget build(BuildContext context) {\n    return ChangeNotifierProvider<T>(\n      builder: (_) {\n        return data;\n      },\n      child: Consumer(builder: builder),\n    );\n  }\n}\n```\n\n `provider`  `ChangeNotifierProvider`  `Consumer` `data`Consumer  Widget\n\n## ViewModel \n\n`ViewModel` \n\n\n\n## Demo\n\n```dart\nimport 'package:bili_livedata/bili_livedata.dart';\nimport 'package:flutter/material.dart';\n\nvoid main() => runApp(MyApp());\n\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      title: 'Flutter Demo',\n      theme: ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: MyHomePage(title: 'Flutter Demo Home Page'),\n    );\n  }\n}\n\n/// mixin ViewModel\nmixin HomePageViewModel {\n  ///  LiveData\n  final LiveData<int> counterLiveData = LiveData();\n\n  ///  [counterLiveData]  [add] \n  void counterAdd(int add) {\n    if (counterLiveData.value == null) {\n      counterLiveData.value = 0;\n    } else {\n      counterLiveData.value = counterLiveData.value + add;\n    }\n  }\n}\n\n//  with  HomePageViewModel\nclass MyHomePage extends StatelessWidget with HomePageViewModel {\n  MyHomePage({Key key, this.title}) : super(key: key);\n\n  final String title;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text(title),\n      ),\n      body: Center(\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.center,\n          children: <Widget>[\n            Text(\n              'You have pushed the button this many times:',\n            ),\n            /// LiveDataWidget \n            LiveDataWidget<LiveData<int>>(\n                data: counterLiveData, // HomePageViewModel  counterLiveData\n                builder: (context, value, _) {\n                  return Text(value.value.toString()); //  Text  counterLiveData \n                }),\n          ],\n        ),\n      ),\n      floatingActionButton: FloatingActionButton(\n        onPressed: () {\n          counterAdd(2); //  HomePageViewModel  counterAdd \n        },\n        tooltip: 'Increment',\n        child: Icon(Icons.add),\n      ),\n    );\n  }\n}\n\n```\n\n\n\n1. LiveData \n\n   ****  ChangeNotifier  ChangeNotifierProvider \n\n2. LiveData  Activity  Fragment observeForeve\n\n   ****ChangeNotifierProvider  dispose  ChangeNotifier  dispose    ChangeNotifier LiveData\n\n3. ViewModel  UI \n\n   **** HomePageViewModelMyHomePage  HomePageViewModel  counterLiveData  HomePageViewModel  mixinflutter  with  mixin\n\n Flutter  LiveData \n\n\n\n## \n\n LiveData\n\n1. \n2. \n3. UI \n\n","source":"_posts/flutter-livedata.md","raw":"---\ntitle:  Flutter  LiveData\ndate: 2019-9-11 16:09:25\ntags: flutter\ncover: https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/flutter_livedata.png\ntop: 9\n---\n\n#  Flutter  LiveData\n\n\n\n Android [LiveData](https://developer.android.com/topic/libraries/architecture/livedata)   [ViewModel](https://developer.android.com/topic/libraries/architecture/viewmodel)  MVVM \n\n Flutter  LiveData  API API  API \n\n LiveData  ViewModel \n\n1. LiveData \n2. LiveData  Activity  Fragment observeForeve\n3. ViewModel  UI \n\n<!-- more -->\n\n## LiveData \n\n```dart\nimport 'package:flutter/material.dart';\n\nclass LiveData<T> with ChangeNotifier {\n  T _data;\n\n  T get value => _data;\n\n  set value(T data) {\n    _data = data;\n    notifyListeners();\n  }\n}\n```\n\n Flutter  LiveData \n\n### LiveDataWidget \n\n LiveData  `setState`  Widget  LiveDataWidget  LiveData  Widget\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'package:provider/provider.dart';\n\nclass LiveDataWidget<T extends LiveData> extends StatelessWidget {\n  LiveDataWidget({Key key, @required this.data, @required this.builder})\n      : super(key: key);\n\n  final T data;\n\n  final Widget Function(BuildContext context, T value, Widget child) builder;\n\n  @override\n  Widget build(BuildContext context) {\n    return ChangeNotifierProvider<T>(\n      builder: (_) {\n        return data;\n      },\n      child: Consumer(builder: builder),\n    );\n  }\n}\n```\n\n `provider`  `ChangeNotifierProvider`  `Consumer` `data`Consumer  Widget\n\n## ViewModel \n\n`ViewModel` \n\n\n\n## Demo\n\n```dart\nimport 'package:bili_livedata/bili_livedata.dart';\nimport 'package:flutter/material.dart';\n\nvoid main() => runApp(MyApp());\n\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      title: 'Flutter Demo',\n      theme: ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: MyHomePage(title: 'Flutter Demo Home Page'),\n    );\n  }\n}\n\n/// mixin ViewModel\nmixin HomePageViewModel {\n  ///  LiveData\n  final LiveData<int> counterLiveData = LiveData();\n\n  ///  [counterLiveData]  [add] \n  void counterAdd(int add) {\n    if (counterLiveData.value == null) {\n      counterLiveData.value = 0;\n    } else {\n      counterLiveData.value = counterLiveData.value + add;\n    }\n  }\n}\n\n//  with  HomePageViewModel\nclass MyHomePage extends StatelessWidget with HomePageViewModel {\n  MyHomePage({Key key, this.title}) : super(key: key);\n\n  final String title;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text(title),\n      ),\n      body: Center(\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.center,\n          children: <Widget>[\n            Text(\n              'You have pushed the button this many times:',\n            ),\n            /// LiveDataWidget \n            LiveDataWidget<LiveData<int>>(\n                data: counterLiveData, // HomePageViewModel  counterLiveData\n                builder: (context, value, _) {\n                  return Text(value.value.toString()); //  Text  counterLiveData \n                }),\n          ],\n        ),\n      ),\n      floatingActionButton: FloatingActionButton(\n        onPressed: () {\n          counterAdd(2); //  HomePageViewModel  counterAdd \n        },\n        tooltip: 'Increment',\n        child: Icon(Icons.add),\n      ),\n    );\n  }\n}\n\n```\n\n\n\n1. LiveData \n\n   ****  ChangeNotifier  ChangeNotifierProvider \n\n2. LiveData  Activity  Fragment observeForeve\n\n   ****ChangeNotifierProvider  dispose  ChangeNotifier  dispose    ChangeNotifier LiveData\n\n3. ViewModel  UI \n\n   **** HomePageViewModelMyHomePage  HomePageViewModel  counterLiveData  HomePageViewModel  mixinflutter  with  mixin\n\n Flutter  LiveData \n\n\n\n## \n\n LiveData\n\n1. \n2. \n3. UI \n\n","slug":"flutter-livedata","published":1,"updated":"2024-08-21T03:16:19.784Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vt00145p6tenfj3xvl","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"-Flutter--LiveData\"><a href=\"#-Flutter--LiveData\" class=\"headerlink\" title=\" Flutter  LiveData\"></a> Flutter  LiveData</h1><p> Android <a href=\"https://developer.android.com/topic/libraries/architecture/livedata\">LiveData</a>   <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel\">ViewModel</a>  MVVM </p>\n<p> Flutter  LiveData  API API  API </p>\n<p> LiveData  ViewModel </p>\n<ol>\n<li>LiveData </li>\n<li>LiveData  Activity  Fragment observeForeve</li>\n<li>ViewModel  UI </li>\n</ol>\n<span id=\"more\"></span>\n\n<h2 id=\"LiveData-\"><a href=\"#LiveData-\" class=\"headerlink\" title=\"LiveData \"></a>LiveData </h2><figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LiveData</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"title\">with</span> <span class=\"title\">ChangeNotifier</span> </span>&#123;</span><br><span class=\"line\">  T _data;</span><br><span class=\"line\"></span><br><span class=\"line\">  T <span class=\"keyword\">get</span> value =&gt; _data;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">set</span> value(T data) &#123;</span><br><span class=\"line\">    _data = data;</span><br><span class=\"line\">    notifyListeners();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> Flutter  LiveData </p>\n<h3 id=\"LiveDataWidget-\"><a href=\"#LiveDataWidget-\" class=\"headerlink\" title=\"LiveDataWidget \"></a>LiveDataWidget </h3><p> LiveData  <code>setState</code>  Widget  LiveDataWidget  LiveData  Widget</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:provider/provider.dart&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LiveDataWidget</span>&lt;<span class=\"title\">T</span> <span class=\"keyword\">extends</span> <span class=\"title\">LiveData</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  LiveDataWidget(&#123;Key key, <span class=\"meta\">@required</span> <span class=\"keyword\">this</span>.data, <span class=\"meta\">@required</span> <span class=\"keyword\">this</span>.builder&#125;)</span><br><span class=\"line\">      : <span class=\"keyword\">super</span>(key: key);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> T data;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Widget <span class=\"built_in\">Function</span>(BuildContext context, T value, Widget child) builder;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ChangeNotifierProvider&lt;T&gt;(</span><br><span class=\"line\">      builder: (_) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      child: Consumer(builder: builder),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>provider</code>  <code>ChangeNotifierProvider</code>  <code>Consumer</code> <code>data</code>Consumer  Widget</p>\n<h2 id=\"ViewModel-\"><a href=\"#ViewModel-\" class=\"headerlink\" title=\"ViewModel \"></a>ViewModel </h2><p><code>ViewModel</code> </p>\n<h2 id=\"Demo\"><a href=\"#Demo\" class=\"headerlink\" title=\"Demo\"></a>Demo</h2><figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:bili_livedata/bili_livedata.dart&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">void</span> main() =&gt; runApp(MyApp());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyApp</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> MaterialApp(</span><br><span class=\"line\">      title: <span class=\"string\">&#x27;Flutter Demo&#x27;</span>,</span><br><span class=\"line\">      theme: ThemeData(</span><br><span class=\"line\">        primarySwatch: Colors.blue,</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      home: MyHomePage(title: <span class=\"string\">&#x27;Flutter Demo Home Page&#x27;</span>),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">///<span class=\"language-markdown\"> mixin ViewModel</span></span></span><br><span class=\"line\"><span class=\"keyword\">mixin</span> HomePageViewModel &#123;</span><br><span class=\"line\">  <span class=\"comment\">/// <span class=\"language-markdown\"> LiveData</span></span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> LiveData&lt;<span class=\"built_in\">int</span>&gt; counterLiveData = LiveData();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/// <span class=\"language-markdown\"> [counterLiveData]  [add] </span></span></span><br><span class=\"line\">  <span class=\"keyword\">void</span> counterAdd(<span class=\"built_in\">int</span> add) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (counterLiveData.value == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      counterLiveData.value = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      counterLiveData.value = counterLiveData.value + add;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  with  HomePageViewModel</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHomePage</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> <span class=\"title\">with</span> <span class=\"title\">HomePageViewModel</span> </span>&#123;</span><br><span class=\"line\">  MyHomePage(&#123;Key key, <span class=\"keyword\">this</span>.title&#125;) : <span class=\"keyword\">super</span>(key: key);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"built_in\">String</span> title;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Scaffold(</span><br><span class=\"line\">      appBar: AppBar(</span><br><span class=\"line\">        title: Text(title),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      body: Center(</span><br><span class=\"line\">        child: Column(</span><br><span class=\"line\">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class=\"line\">          children: &lt;Widget&gt;[</span><br><span class=\"line\">            Text(</span><br><span class=\"line\">              <span class=\"string\">&#x27;You have pushed the button this many times:&#x27;</span>,</span><br><span class=\"line\">            ),</span><br><span class=\"line\">            <span class=\"comment\">/// <span class=\"language-markdown\">LiveDataWidget </span></span></span><br><span class=\"line\">            LiveDataWidget&lt;LiveData&lt;<span class=\"built_in\">int</span>&gt;&gt;(</span><br><span class=\"line\">                data: counterLiveData, <span class=\"comment\">// HomePageViewModel  counterLiveData</span></span><br><span class=\"line\">                builder: (context, value, _) &#123;</span><br><span class=\"line\">                  <span class=\"keyword\">return</span> Text(value.value.toString()); <span class=\"comment\">//  Text  counterLiveData </span></span><br><span class=\"line\">                &#125;),</span><br><span class=\"line\">          ],</span><br><span class=\"line\">        ),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      floatingActionButton: FloatingActionButton(</span><br><span class=\"line\">        onPressed: () &#123;</span><br><span class=\"line\">          counterAdd(<span class=\"number\">2</span>); <span class=\"comment\">//  HomePageViewModel  counterAdd </span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        tooltip: <span class=\"string\">&#x27;Increment&#x27;</span>,</span><br><span class=\"line\">        child: Icon(Icons.add),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ol>\n<li><p>LiveData </p>\n<p><strong></strong>  ChangeNotifier  ChangeNotifierProvider </p>\n</li>\n<li><p>LiveData  Activity  Fragment observeForeve</p>\n<p><strong></strong>ChangeNotifierProvider  dispose  ChangeNotifier  dispose    ChangeNotifier LiveData</p>\n</li>\n<li><p>ViewModel  UI </p>\n<p><strong></strong> HomePageViewModelMyHomePage  HomePageViewModel  counterLiveData  HomePageViewModel  mixinflutter  with  mixin</p>\n</li>\n</ol>\n<p> Flutter  LiveData </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> LiveData</p>\n<ol>\n<li></li>\n<li></li>\n<li>UI </li>\n</ol>\n<p></p>\n","excerpt":"<h1 id=\"-Flutter--LiveData\"><a href=\"#-Flutter--LiveData\" class=\"headerlink\" title=\" Flutter  LiveData\"></a> Flutter  LiveData</h1><p> Android <a href=\"https://developer.android.com/topic/libraries/architecture/livedata\">LiveData</a>   <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel\">ViewModel</a>  MVVM </p>\n<p> Flutter  LiveData  API API  API </p>\n<p> LiveData  ViewModel </p>\n<ol>\n<li>LiveData </li>\n<li>LiveData  Activity  Fragment observeForeve</li>\n<li>ViewModel  UI </li>\n</ol>","more":"<h2 id=\"LiveData-\"><a href=\"#LiveData-\" class=\"headerlink\" title=\"LiveData \"></a>LiveData </h2><figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LiveData</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"title\">with</span> <span class=\"title\">ChangeNotifier</span> </span>&#123;</span><br><span class=\"line\">  T _data;</span><br><span class=\"line\"></span><br><span class=\"line\">  T <span class=\"keyword\">get</span> value =&gt; _data;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">set</span> value(T data) &#123;</span><br><span class=\"line\">    _data = data;</span><br><span class=\"line\">    notifyListeners();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> Flutter  LiveData </p>\n<h3 id=\"LiveDataWidget-\"><a href=\"#LiveDataWidget-\" class=\"headerlink\" title=\"LiveDataWidget \"></a>LiveDataWidget </h3><p> LiveData  <code>setState</code>  Widget  LiveDataWidget  LiveData  Widget</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:provider/provider.dart&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LiveDataWidget</span>&lt;<span class=\"title\">T</span> <span class=\"keyword\">extends</span> <span class=\"title\">LiveData</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  LiveDataWidget(&#123;Key key, <span class=\"meta\">@required</span> <span class=\"keyword\">this</span>.data, <span class=\"meta\">@required</span> <span class=\"keyword\">this</span>.builder&#125;)</span><br><span class=\"line\">      : <span class=\"keyword\">super</span>(key: key);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> T data;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Widget <span class=\"built_in\">Function</span>(BuildContext context, T value, Widget child) builder;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ChangeNotifierProvider&lt;T&gt;(</span><br><span class=\"line\">      builder: (_) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      child: Consumer(builder: builder),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>provider</code>  <code>ChangeNotifierProvider</code>  <code>Consumer</code> <code>data</code>Consumer  Widget</p>\n<h2 id=\"ViewModel-\"><a href=\"#ViewModel-\" class=\"headerlink\" title=\"ViewModel \"></a>ViewModel </h2><p><code>ViewModel</code> </p>\n<h2 id=\"Demo\"><a href=\"#Demo\" class=\"headerlink\" title=\"Demo\"></a>Demo</h2><figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:bili_livedata/bili_livedata.dart&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">void</span> main() =&gt; runApp(MyApp());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyApp</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> MaterialApp(</span><br><span class=\"line\">      title: <span class=\"string\">&#x27;Flutter Demo&#x27;</span>,</span><br><span class=\"line\">      theme: ThemeData(</span><br><span class=\"line\">        primarySwatch: Colors.blue,</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      home: MyHomePage(title: <span class=\"string\">&#x27;Flutter Demo Home Page&#x27;</span>),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">///<span class=\"language-markdown\"> mixin ViewModel</span></span></span><br><span class=\"line\"><span class=\"keyword\">mixin</span> HomePageViewModel &#123;</span><br><span class=\"line\">  <span class=\"comment\">/// <span class=\"language-markdown\"> LiveData</span></span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> LiveData&lt;<span class=\"built_in\">int</span>&gt; counterLiveData = LiveData();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/// <span class=\"language-markdown\"> [counterLiveData]  [add] </span></span></span><br><span class=\"line\">  <span class=\"keyword\">void</span> counterAdd(<span class=\"built_in\">int</span> add) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (counterLiveData.value == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      counterLiveData.value = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      counterLiveData.value = counterLiveData.value + add;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  with  HomePageViewModel</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHomePage</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> <span class=\"title\">with</span> <span class=\"title\">HomePageViewModel</span> </span>&#123;</span><br><span class=\"line\">  MyHomePage(&#123;Key key, <span class=\"keyword\">this</span>.title&#125;) : <span class=\"keyword\">super</span>(key: key);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"built_in\">String</span> title;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Scaffold(</span><br><span class=\"line\">      appBar: AppBar(</span><br><span class=\"line\">        title: Text(title),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      body: Center(</span><br><span class=\"line\">        child: Column(</span><br><span class=\"line\">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class=\"line\">          children: &lt;Widget&gt;[</span><br><span class=\"line\">            Text(</span><br><span class=\"line\">              <span class=\"string\">&#x27;You have pushed the button this many times:&#x27;</span>,</span><br><span class=\"line\">            ),</span><br><span class=\"line\">            <span class=\"comment\">/// <span class=\"language-markdown\">LiveDataWidget </span></span></span><br><span class=\"line\">            LiveDataWidget&lt;LiveData&lt;<span class=\"built_in\">int</span>&gt;&gt;(</span><br><span class=\"line\">                data: counterLiveData, <span class=\"comment\">// HomePageViewModel  counterLiveData</span></span><br><span class=\"line\">                builder: (context, value, _) &#123;</span><br><span class=\"line\">                  <span class=\"keyword\">return</span> Text(value.value.toString()); <span class=\"comment\">//  Text  counterLiveData </span></span><br><span class=\"line\">                &#125;),</span><br><span class=\"line\">          ],</span><br><span class=\"line\">        ),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      floatingActionButton: FloatingActionButton(</span><br><span class=\"line\">        onPressed: () &#123;</span><br><span class=\"line\">          counterAdd(<span class=\"number\">2</span>); <span class=\"comment\">//  HomePageViewModel  counterAdd </span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        tooltip: <span class=\"string\">&#x27;Increment&#x27;</span>,</span><br><span class=\"line\">        child: Icon(Icons.add),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ol>\n<li><p>LiveData </p>\n<p><strong></strong>  ChangeNotifier  ChangeNotifierProvider </p>\n</li>\n<li><p>LiveData  Activity  Fragment observeForeve</p>\n<p><strong></strong>ChangeNotifierProvider  dispose  ChangeNotifier  dispose    ChangeNotifier LiveData</p>\n</li>\n<li><p>ViewModel  UI </p>\n<p><strong></strong> HomePageViewModelMyHomePage  HomePageViewModel  counterLiveData  HomePageViewModel  mixinflutter  with  mixin</p>\n</li>\n</ol>\n<p> Flutter  LiveData </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> LiveData</p>\n<ol>\n<li></li>\n<li></li>\n<li>UI </li>\n</ol>\n<p></p>"},{"title":"Flutter ","date":"2018-03-06T04:06:08.000Z","cover":"http://cdn.zqlxtt.cn/device-2017-12-21-214051.png","top":8,"_content":"\n## \n\n 2015  Flutter  master  flutter_gallery  GDD Flutter  Google  Flutter \n\n UI \n\n Android  iOS  Flutter  Android  xml \n\n<!-- more -->\n##  MaterialApp \n\nFlutter  Flutter  MaterialApp  MaterialApp  Material Design AnimatedThemenGridPager  MaterialApp  MaterialApp \n\n Flutter \n\n![](http://cdn.zqlxtt.cn/device-2017-12-21-214051.png)\n\n pubspec.yaml \n\n```yaml\n  flutter_localizations:\n    sdk: flutter\n```\n\n\n\n```shell\nflutter packages get\n```\n\n \n\n main.dart  import \n\n```dart\nimport 'package:flutter_localizations/flutter_localizations.dart';\n```\n\n\n\n MaterialApp  `localizationsDelegates`  `supportedLocales` \n\n```dart\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return new MaterialApp(\n      title: 'Flutter Demo',\n      theme: new ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: new MyHomePage(title: 'Flutter Demo Home Page'),\n      localizationsDelegates: [                             //\n        GlobalMaterialLocalizations.delegate,\n        GlobalWidgetsLocalizations.delegate,\n      ],\n      supportedLocales: [                                   //\n        const Locale('zh','CH'),\n        const Locale('en','US'),\n      ],\n    );\n  }\n}\n```\n\n\n\n\n\n![](http://backup.flutter-dev.cn/device-2017-12-21-215330.png)\n\n\n\n Dialog  titlebar \n\n titlebar \n\n```dart\nhome: new MyHomePage(title: 'Flutter Demo Home Page')\n```\n\nFlutter \n\n `GlobalMaterialLocalizations`\n\n Flutter \n\n- Flutter Demo\n- Flutter Demo Home Page\n- You have pushed the button this many times:\n- Increment\n\n\n\n- Flutter \n- Flutter \n- \n- \n\n Localizations  Localizations  DemoLocalizations ,\n\n```dart\nclass DemoLocalizations {\n\n  final Locale locale;\n\n  DemoLocalizations(this.locale);\n\n  static Map<String, Map<String, String>> _localizedValues = {\n    'en': {\n      'task title': 'Flutter Demo',\n      'titlebar title': 'Flutter Demo Home Page',\n      'click tip': 'You have pushed the button this many times:',\n      'inc':'Increment'\n    },\n    'zh': {\n      'task title': 'Flutter ',\n      'titlebar title': 'Flutter ',\n      'click tip': '',\n      'inc':''\n    }\n  };\n\n  get taskTitle{\n    return _localizedValues[locale.languageCode]['task title'];\n  }\n\n  get titleBarTitle{\n    return _localizedValues[locale.languageCode]['titlebar title'];\n  }\n\n  get clickTop{\n    return _localizedValues[locale.languageCode]['click tip'];\n  }\n  \n  get inc{\n    return _localizedValues[locale.languageCode]['inc'];\n  }\n}\n```\n\n DemoLocalizations `taskTitle``titleBarTitle``clickTop`\n\n DemoLocalizations  `LocalizationsDelegate`LocalizationsDelegate \n\n```dart\nclass DemoLocalizationsDelegate extends LocalizationsDelegate<DemoLocalizations>{\n\n  const DemoLocalizationsDelegate();\n\n  @override\n  bool isSupported(Locale locale) {\n    return ['en','zh'].contains(locale.languageCode);\n  }\n\n  @override\n  Future<DemoLocalizations> load(Locale locale) {\n    return new SynchronousFuture<DemoLocalizations>(new DemoLocalizations(locale));\n  }\n\n  @override\n  bool shouldReload(LocalizationsDelegate<DemoLocalizations> old) {\n    return false;\n  }\n\n  static DemoLocalizationsDelegate delegate = const DemoLocalizationsDelegate();\n}\n```\n\n `load` DemoLocalizations\n\n DemoLocalizationsDelegate  MaterialApp\n\n```dart\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return new MaterialApp(\n      title: 'Flutter Demo',\n      theme: new ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: new MyHomePage(title: 'Flutter Demo Home Page'),\n      localizationsDelegates: [\n        GlobalMaterialLocalizations.delegate,\n        GlobalWidgetsLocalizations.delegate,\n        DemoLocalizationsDelegate.delegate,                 //\n      ],\n      supportedLocales: [\n        const Locale('zh', 'CH'),\n        const Locale('en', 'US'),\n      ],\n    );\n  }\n}\n```\n\nDemoLocalizationsDelegate  MaterialApp DemoLocalizations  Weidget  `Localizations` Localizations  WidgetDemoLocalizationsDelegate  MaterialApp MaterialApp  Localizations  Widget LocalizationsDelegate \n\n```dart\n  Localizations({\n    Key key,\n    @required this.locale,\n    @required this.delegates,                              //\n    this.child,\n  }) : assert(locale != null),\n       assert(delegates != null),\n       assert(delegates.any(\n               (LocalizationsDelegate<dynamic> delegate)\n                 => delegate is LocalizationsDelegate<WidgetsLocalizations>)\n             ),\n       super(key: key);\n```\n\n DemoLocalizations  Localizations  DemoLocalizationsDelegate  DemoLocalizations  Localizations  Widget \n\n```dart\nLocalizations.of(context, DemoLocalizations);\n```\n\n`of` DemoLocalizations  DemoLocalizations \n\n```dart\nclass DemoLocalizations {\n\n  final Locale locale;\n\n  DemoLocalizations(this.locale);\n\n  static Map<String, Map<String, String>> _localizedValues = {\n    'en': {\n      'task title': 'Flutter Demo',\n      'titlebar title': 'Flutter Demo Home Page',\n      'click tip': 'You have pushed the button this many times:',\n      'inc':'Increment'\n    },\n    'zh': {\n      'task title': 'Flutter ',\n      'titlebar title': 'Flutter ',\n      'click tip': '',\n      'inc':''\n    }\n  };\n\n  get taskTitle{\n    return _localizedValues[locale.languageCode]['task title'];\n  }\n\n  get titleBarTitle{\n    return _localizedValues[locale.languageCode]['titlebar title'];\n  }\n\n  get clickTop{\n    return _localizedValues[locale.languageCode]['click tip'];\n  }\n\n  get inc{\n    return _localizedValues[locale.languageCode]['inc'];\n  }\n\n  //\n  static DemoLocalizations of(BuildContext context){\n    return Localizations.of(context, DemoLocalizations);\n  }\n}\n```\n\n DemoLocalizations \n\n```dart\nimport 'dart:async';\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter_localizations/flutter_localizations.dart';\nimport 'package:flutter/foundation.dart' show SynchronousFuture;\n\nvoid main() {\n  runApp(new MyApp());\n}\n\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return new MaterialApp(\n      title: DemoLocalizations.of(context).taskTitle,                           // 1\n      theme: new ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: new MyHomePage(title: DemoLocalizations.of(context).titleBarTitle), // 2\n      localizationsDelegates: [\n        GlobalMaterialLocalizations.delegate,\n        GlobalWidgetsLocalizations.delegate,\n        DemoLocalizationsDelegate.delegate,\n      ],\n      supportedLocales: [\n        const Locale('zh', 'CH'),\n        const Locale('en', 'US'),\n      ],\n    );\n  }\n}\n\nclass MyHomePage extends StatefulWidget {\n  MyHomePage({Key key, this.title}) : super(key: key);\n\n  final String title;\n\n  @override\n  _MyHomePageState createState() => new _MyHomePageState();\n}\n\nclass _MyHomePageState extends State<MyHomePage> {\n  int _counter = 0;\n\n  void _incrementCounter() {\n    showDatePicker(context: context,\n        initialDate: new DateTime.now(),\n        firstDate: new DateTime.now().subtract(new Duration(days: 30)),\n        lastDate: new DateTime.now().add(new Duration(days: 30))).then((v) {});\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return new Scaffold(\n      appBar: new AppBar(\n        title: new Text(widget.title),\n      ),\n      body: new Center(\n        child: new Column(\n          mainAxisAlignment: MainAxisAlignment.center,\n          children: <Widget>[\n            new Text(\n              DemoLocalizations.of(context).clickTop,                          // 3\n            ),\n            new Text(\n              '$_counter',\n              style: Theme\n                  .of(context)\n                  .textTheme\n                  .display1,\n            ),\n          ],\n        ),\n      ),\n      floatingActionButton: new FloatingActionButton(\n        onPressed: _incrementCounter,\n        tooltip: DemoLocalizations.of(context).inc,                           // 4\n        child: new Icon(Icons.add),\n      ),\n    );\n  }\n}\n```\n\n\n\n![](http://backup.flutter-dev.cn/device-2017-12-21-231417.png)\n\n \n\n\n\nThe getter 'taskTitle' was called on null. 1  DemoLocalizations  Localizations.of \n\n```dart\n  static T of<T>(BuildContext context, Type type) {\n    assert(context != null);\n    assert(type != null);\n    final _LocalizationsScope scope =       \n             context.inheritFromWidgetOfExactType(_LocalizationsScope); // \n    return scope?.localizationsState?.resourcesFor<T>(type);\n  }\n```\n\n `context.inheritFromWidgetOfExactType`\n\n```dart\nInheritedWidget inheritFromWidgetOfExactType(Type targetType);\n```\n\n BuildContext  targetType  context  targetType  InheriteWidget  `_LocalizationsScope` InheriteWidget context  _LocalizationsScope taskTitle \n\n```dart\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return new MaterialApp(\n      title: DemoLocalizations.of(context).taskTitle,                           // \n      theme: new ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: new MyHomePage(title: DemoLocalizations.of(context).titleBarTitle),\n      localizationsDelegates: [\n        GlobalMaterialLocalizations.delegate,\n        GlobalWidgetsLocalizations.delegate,\n        DemoLocalizationsDelegate.delegate,\n      ],\n      supportedLocales: [\n        const Locale('zh', 'CH'),\n        const Locale('en', 'US'),\n      ],\n    );\n  }\n}\n```\n\n\n\n taskTitle  context  build  Localizations  MaterialApp  DemoLocalizations  context  MaterialApp  context  DemoLocalizations  DemoLocalizations  MaterialApp  title  context  MaterialApp \n\n title \n\n\n\n title \n\n```dart\n  /// A one-line description used by the device to identify the app for the user.\n  ///\n  /// On Android the titles appear above the task manager's app snapshots which are\n  /// displayed when the user presses the \"recent apps\" button. Similarly, on\n  /// iOS the titles appear in the App Switcher when the user double presses the\n  /// home button.\n  ///\n  /// To provide a localized title instead, use [onGenerateTitle].\n  ///\n  /// This value is passed unmodified to [WidgetsApp.title].\n  final String title;\n```\n\nTo provide a localized title instead, use [onGenerateTitle].\n\n title  `onGenerateTitle`\n\n```dart\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return new MaterialApp(\n      onGenerateTitle: (context){                                              // \n        return DemoLocalizations.of(context).taskTitle;\n      },\n      theme: new ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: new MyHomePage(title: DemoLocalizations.of(context).titleBarTitle),\n      localizationsDelegates: [\n        GlobalMaterialLocalizations.delegate,\n        GlobalWidgetsLocalizations.delegate,\n        DemoLocalizationsDelegate.delegate,\n      ],\n      supportedLocales: [\n        const Locale('zh', 'CH'),\n        const Locale('en', 'US'),\n      ],\n    );\n  }\n}\n```\n\n\n\n taskTitle  titleBarTitle  context  MaterialApp  context title  MyHomePage  MyHomePage  title  AppBar \n\n```dart\nclass MyHomePage extends StatefulWidget {\n  MyHomePage({Key key}) : super(key: key);\n\n  @override\n  _MyHomePageState createState() => new _MyHomePageState();\n}\n\nclass _MyHomePageState extends State<MyHomePage> {\n  int _counter = 0;\n\n  void _incrementCounter() {\n    showDatePicker(context: context,\n        initialDate: new DateTime.now(),\n        firstDate: new DateTime.now().subtract(new Duration(days: 30)),\n        lastDate: new DateTime.now().add(new Duration(days: 30))).then((v) {});\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return new Scaffold(\n      appBar: new AppBar(\n        title: new Text(DemoLocalizations.of(context).titleBarTitle),            // \n      ),\n      body: new Center(\n        child: new Column(\n          mainAxisAlignment: MainAxisAlignment.center,\n          children: <Widget>[\n            new Text(\n              DemoLocalizations.of(context).clickTop,\n            ),\n            new Text(\n              '$_counter',\n              style: Theme\n                  .of(context)\n                  .textTheme\n                  .display1,\n            ),\n          ],\n        ),\n      ),\n      floatingActionButton: new FloatingActionButton(\n        onPressed: _incrementCounter,\n        tooltip: DemoLocalizations.of(context).inc,\n        child: new Icon(Icons.add),\n      ),\n    );\n  }\n}\n```\n\n\n\n\n\n![](http://backup.flutter-dev.cn/device-2017-12-22-001905.png)\n\n![](http://backup.flutter-dev.cn/device-2017-12-22-002133.png)\n\n\n\n## \n\n MaterialApp  DemoLocalizations Map  DemoLocalizatins \n\n MaterialApp  MaterialApp  MaterialApp \n\n```dart\n  MaterialApp({ // can't be const because the asserts use methods on Map :-(\n    Key key,\n    this.title: '',\n    this.onGenerateTitle,\n    this.color,\n    this.theme,\n    this.home,\n    this.routes: const <String, WidgetBuilder>{},\n    this.initialRoute,\n    this.onGenerateRoute,\n    this.onUnknownRoute,\n    this.locale,\n    this.localizationsDelegates,\n    this.localeResolutionCallback,\n    this.supportedLocales: const <Locale>[const Locale('en', 'US')],\n    this.navigatorObservers: const <NavigatorObserver>[],\n    this.debugShowMaterialGrid: false,\n    this.showPerformanceOverlay: false,\n    this.checkerboardRasterCacheImages: false,\n    this.checkerboardOffscreenLayers: false,\n    this.showSemanticsDebugger: false,\n    this.debugShowCheckedModeBanner: true\n  })\n```\n\n `localizationsDelegates` MaterialApp  StatefulWidget State  `_MaterialAppState` build \n\n```dart\nWidget build(BuildContext context) {\n    final ThemeData theme = widget.theme ?? new ThemeData.fallback();\n    Widget result = new AnimatedTheme(                                // 1\n      data: theme,\n      isMaterialAppTheme: true,\n      child: new WidgetsApp(                                          //2\n        key: new GlobalObjectKey(this),\n        title: widget.title,\n        onGenerateTitle: widget.onGenerateTitle,\n        textStyle: _errorTextStyle,\n        // blue is the primary color of the default theme\n        color: widget.color ?? theme?.primaryColor ?? Colors.blue,\n        navigatorObservers:\n            new List<NavigatorObserver>.from(widget.navigatorObservers)\n              ..add(_heroController),\n        initialRoute: widget.initialRoute,\n        onGenerateRoute: _onGenerateRoute,\n        onUnknownRoute: _onUnknownRoute,\n        locale: widget.locale,\n        localizationsDelegates: _localizationsDelegates,                  //3\n        localeResolutionCallback: widget.localeResolutionCallback,\n        supportedLocales: widget.supportedLocales,\n        showPerformanceOverlay: widget.showPerformanceOverlay,\n        checkerboardRasterCacheImages: widget.checkerboardRasterCacheImages,\n        checkerboardOffscreenLayers: widget.checkerboardOffscreenLayers,\n        showSemanticsDebugger: widget.showSemanticsDebugger,\n        debugShowCheckedModeBanner: widget.debugShowCheckedModeBanner,\n        inspectorSelectButtonBuilder: (BuildContext context, VoidCallback onPressed) {\n          return new FloatingActionButton(\n            child: const Icon(Icons.search),\n            onPressed: onPressed,\n            mini: true,\n          );\n        },\n      )\n    );\n\n    assert(() {\n      if (widget.debugShowMaterialGrid) {    //\n        result = new GridPaper(\n          color: const Color(0xE0F9BBE0),\n          interval: 8.0,\n          divisions: 2,\n          subdivisions: 1,\n          child: result,\n        );\n      }\n      return true;\n    }());\n\n    return new ScrollConfiguration(                                // 4\n      behavior: new _MaterialScrollBehavior(),\n      child: result,\n    );\n  }\n```\n\n 3  _localizationsDelegates  WidgetsApp  localizationsDelegates  124  Widget  widget \n\n![](http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8A%E5%8D%8810.45.47.png)\n\n WidgetApp  StatefulWidget State  `_WidgetsAppState` build \n\n```dart\n Widget build(BuildContext context) {\n    Widget result = new Navigator(                                    // 1\n      key: _navigator,\n      initialRoute: widget.initialRoute ?? ui.window.defaultRouteName,\n      onGenerateRoute: widget.onGenerateRoute,\n      onUnknownRoute: widget.onUnknownRoute,\n      observers: widget.navigatorObservers,\n    );\n\n    if (widget.textStyle != null) {\n      result = new DefaultTextStyle(                                    //2\n        style: widget.textStyle,\n        child: result,\n      );\n    }\n\n    ... //\n\n    return new MediaQuery(                                              //3\n      data: new MediaQueryData.fromWindow(ui.window),\n      child: new Localizations(                                         //4\n        locale: widget.locale ?? _locale,\n        delegates: _localizationsDelegates.toList(),\n        // This Builder exists to provide a context below the Localizations widget.\n        // The onGenerateCallback() can refer to Localizations via its context\n        // parameter.\n        child: new Builder(                                             //5\n          builder: (BuildContext context) {\n            String title = widget.title;\n            if (widget.onGenerateTitle != null) {\n              title = widget.onGenerateTitle(context);\n              assert(title != null, 'onGenerateTitle must return a non-null String');\n            }\n            return new Title(                                            //6\n              title: title,\n              color: widget.color,\n              child: result,\n            );\n          },\n        ),\n      ),\n    );\n  }\n```\n\n 4  `Localizatins`_localizationsDelegates  Localizations widget \n\n\n\n![](http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8A%E5%8D%8810.55.52.png)\n\n Localizations Localizations \n\n Localizations  StatefulWidget build  `initState` \n\ninitState \n\n```dart\n  @override\n  void initState() {\n    super.initState();\n    load(widget.locale);\n  }\n```\n\n load \n\n```dart\n  void load(Locale locale) {\n    final Iterable<LocalizationsDelegate<dynamic>> delegates = widget.delegates; // 1\n    if (delegates == null || delegates.isEmpty) {\n      _locale = locale;\n      return;\n    }\n\n    Map<Type, dynamic> typeToResources;\n    final Future<Map<Type, dynamic>> typeToResourcesFuture = _loadAll(locale, delegates) //2\n      .then((Map<Type, dynamic> value) {\n        return typeToResources = value;\n      });\n    \n    ...\n  \n  }\n```\n\n 1  delegates  MaterialApp  delegate  2  `_loadAll`  typeToResourcesFuture  `Map<Type, dynamic>` Type  Localizations dynamic  _loadAll \n\n```dart\nFuture<Map<Type, dynamic>> _loadAll(Locale locale, Iterable<LocalizationsDelegate<dynamic>> allDelegates) {\n  final Map<Type, dynamic> output = <Type, dynamic>{};\n  List<_Pending> pendingList;\n\n  // Only load the first delegate for each delegate type that supports\n  // locale.languageCode.\n  final Set<Type> types = new Set<Type>();\n  final List<LocalizationsDelegate<dynamic>> delegates = <LocalizationsDelegate<dynamic>>[];\n  for (LocalizationsDelegate<dynamic> delegate in allDelegates) {\n    if (!types.contains(delegate.type) && delegate.isSupported(locale)) {\n      types.add(delegate.type);\n      delegates.add(delegate);          \n    }\n  }\n\n  for (LocalizationsDelegate<dynamic> delegate in delegates) {\n    final Future<dynamic> inputValue = delegate.load(locale);    // 1\n    dynamic completedValue;\n    final Future<dynamic> futureValue = inputValue.then<dynamic>((dynamic value) {\n      return completedValue = value;                             // 2\n    });\n    if (completedValue != null) { // inputValue was a SynchronousFuture\n      final Type type = delegate.type;\n      assert(!output.containsKey(type));\n      output[type] = completedValue;\n    } else {\n      pendingList ??= <_Pending>[];\n      pendingList.add(new _Pending(delegate, futureValue));\n    }\n  }\n\n  // All of the delegate.load() values were synchronous futures, we're done.\n  if (pendingList == null)\n    return new SynchronousFuture<Map<Type, dynamic>>(output);\n\n  // Some of delegate.load() values were asynchronous futures. Wait for them.\n  return Future.wait<dynamic>(pendingList.map((_Pending p) => p.futureValue))\n    .then<Map<Type, dynamic>>((List<dynamic> values) {\n      assert(values.length == pendingList.length);\n      for (int i = 0; i < values.length; i += 1) {\n        final Type type = pendingList[i].delegate.type;\n        assert(!output.containsKey(type));\n        output[type] = values[i];\n      }\n      return output;\n    });\n}\n```\n\n 1  deletegate  load  Future DemoLocalizations  Future Future\n\n```dart\n  @override\n  Future<DemoLocalizations> load(Locale locale) {\n    return new SynchronousFuture<DemoLocalizations>(new DemoLocalizations(locale));\n  }\n```\n\n SynchronousFuture  2  completedValue  DemoLocalizations  completedValue  output  \\_LocalizationsState  \\_typeToResources \n\n\n\n```dart\nDemoLocalizations.of(context).taskTitle\n```\n DemoLocalizations \n\n```dart\nreturn Localizations.of(context, DemoLocalizations);\n```\n Localizations  of \n\n```dart\nstatic T of<T>(BuildContext context, Type type) {\n  assert(context != null);\n  assert(type != null);\n  final _LocalizationsScope scope = context.inheritFromWidgetOfExactType(_LocalizationsScope);\n  return scope?.localizationsState?.resourcesFor<T>(type);\n}\n```\n context.inheritFromWidgetOfExactType  scope  context  \\_LocalizationsScope  widget  \\_LocalizationsScope  widget,\n\n \\_LocalizationsState  build \n\n```dart\n  @override\n  Widget build(BuildContext context) {\n    if (_locale == null)\n      return new Container();\n    return new _LocalizationsScope(\n      key: _localizedResourcesScopeKey,\n      locale: _locale,\n      localizationsState: this,\n      typeToResources: _typeToResources,\n      child: new Directionality(\n        textDirection: _textDirection,\n        child: widget.child,\n      ),\n    );\n  }\n```\n\n() Localizations  Directionality\\_LocalizationsScopeContainer  \\_LocalizationsScope \n\n\n\n```dart\n  return scope?.localizationsState?.resourcesFor<T>(type);\n```\n \\_LocalizationsState  resourcesFor \n\n```dart\n  T resourcesFor<T>(Type type) {\n    assert(type != null);\n    final T resources = _typeToResources[type];\n    return resources;\n  }\n```\n type  \\_typeToResources  DemoLocalizations \n widget \n\n![](http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8B%E5%8D%882.29.45.png)\n\n\n##  App \n\n Flutter  Localizations  override  StatefulWidget  FreeLocalizations  State  _FreeLocalizations\n\n```dart\nclass FreeLocalizations extends StatefulWidget{\n\n  final Widget child;\n\n  FreeLocalizations({Key key,this.child}):super(key:key);\n\n  @override\n  State<FreeLocalizations> createState() {\n    return new _FreeLocalizations();\n  }\n}\n\nclass _FreeLocalizations extends State<FreeLocalizations>{\n\n  Locale _locale = const Locale('zh','CH');\n\n  changeLocale(Locale locale){\n    setState((){\n      _locale = locale;\n    });\n  }\n  \n  @override\n  Widget build(BuildContext context) {\n    return new Localizations.override(\n      context: context,\n      locale: _locale,\n      child: widget.child,\n    );\n  }\n}\n```\n changeLocale  widget \n\n\n```dart\nvoid main() {\n  runApp(new MyApp());\n}\n\nGlobalKey<_FreeLocalizations> freeLocalizationStateKey = new GlobalKey<_FreeLocalizations>();   // 1\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return new MaterialApp(\n      onGenerateTitle: (context){\n        return DemoLocalizations.of(context).taskTitle;\n      },\n      theme: new ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: new Builder(builder: (context){\n        return new FreeLocalizations(\n          key: freeLocalizationStateKey,\n          child: new MyHomePage(),\n        );\n      }),\n      localizationsDelegates: [\n        GlobalMaterialLocalizations.delegate,\n        GlobalWidgetsLocalizations.delegate,\n        DemoLocalizationsDelegate.delegate,\n      ],\n      supportedLocales: [\n        const Locale('zh', 'CH'),\n        const Locale('en', 'US'),\n      ],\n    );\n  }\n}\n\n```\n\n FreeLocalizations  GlobalKey  1  MyHomePage  FreeLocalizations \n\n\n\n```dart\n  void changeLocale(){\n    if(flag){\n      freeLocalizationStateKey.currentState.changeLocale(const Locale('zh',\"CH\"));\n    }else{\n      freeLocalizationStateKey.currentState.changeLocale(const Locale('en',\"US\"));\n    }\n    flag = !flag;\n  }\n```\n\n\n\n![](http://backup.flutter-dev.cn/localizatiion_free.gif)\n\n\n\n## \n\n![](http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8B%E5%8D%883.34.41.png)\n\n[https://my.mindnode.com/7u6RudyGs5bqzX1WrxY5XtZZqUDBzqvL2NioVbrr](https://my.mindnode.com/7u6RudyGs5bqzX1WrxY5XtZZqUDBzqvL2NioVbrr)\n[https://github.com/flutter-dev/internationalizing](https://github.com/flutter-dev/internationalizing)","source":"_posts/flutter-localizations.md","raw":"---\ntitle: Flutter \ndate: 2018-03-06 12:06:08\ntags: flutter\ncover: http://cdn.zqlxtt.cn/device-2017-12-21-214051.png\ntop: 8\n---\n\n## \n\n 2015  Flutter  master  flutter_gallery  GDD Flutter  Google  Flutter \n\n UI \n\n Android  iOS  Flutter  Android  xml \n\n<!-- more -->\n##  MaterialApp \n\nFlutter  Flutter  MaterialApp  MaterialApp  Material Design AnimatedThemenGridPager  MaterialApp  MaterialApp \n\n Flutter \n\n![](http://cdn.zqlxtt.cn/device-2017-12-21-214051.png)\n\n pubspec.yaml \n\n```yaml\n  flutter_localizations:\n    sdk: flutter\n```\n\n\n\n```shell\nflutter packages get\n```\n\n \n\n main.dart  import \n\n```dart\nimport 'package:flutter_localizations/flutter_localizations.dart';\n```\n\n\n\n MaterialApp  `localizationsDelegates`  `supportedLocales` \n\n```dart\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return new MaterialApp(\n      title: 'Flutter Demo',\n      theme: new ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: new MyHomePage(title: 'Flutter Demo Home Page'),\n      localizationsDelegates: [                             //\n        GlobalMaterialLocalizations.delegate,\n        GlobalWidgetsLocalizations.delegate,\n      ],\n      supportedLocales: [                                   //\n        const Locale('zh','CH'),\n        const Locale('en','US'),\n      ],\n    );\n  }\n}\n```\n\n\n\n\n\n![](http://backup.flutter-dev.cn/device-2017-12-21-215330.png)\n\n\n\n Dialog  titlebar \n\n titlebar \n\n```dart\nhome: new MyHomePage(title: 'Flutter Demo Home Page')\n```\n\nFlutter \n\n `GlobalMaterialLocalizations`\n\n Flutter \n\n- Flutter Demo\n- Flutter Demo Home Page\n- You have pushed the button this many times:\n- Increment\n\n\n\n- Flutter \n- Flutter \n- \n- \n\n Localizations  Localizations  DemoLocalizations ,\n\n```dart\nclass DemoLocalizations {\n\n  final Locale locale;\n\n  DemoLocalizations(this.locale);\n\n  static Map<String, Map<String, String>> _localizedValues = {\n    'en': {\n      'task title': 'Flutter Demo',\n      'titlebar title': 'Flutter Demo Home Page',\n      'click tip': 'You have pushed the button this many times:',\n      'inc':'Increment'\n    },\n    'zh': {\n      'task title': 'Flutter ',\n      'titlebar title': 'Flutter ',\n      'click tip': '',\n      'inc':''\n    }\n  };\n\n  get taskTitle{\n    return _localizedValues[locale.languageCode]['task title'];\n  }\n\n  get titleBarTitle{\n    return _localizedValues[locale.languageCode]['titlebar title'];\n  }\n\n  get clickTop{\n    return _localizedValues[locale.languageCode]['click tip'];\n  }\n  \n  get inc{\n    return _localizedValues[locale.languageCode]['inc'];\n  }\n}\n```\n\n DemoLocalizations `taskTitle``titleBarTitle``clickTop`\n\n DemoLocalizations  `LocalizationsDelegate`LocalizationsDelegate \n\n```dart\nclass DemoLocalizationsDelegate extends LocalizationsDelegate<DemoLocalizations>{\n\n  const DemoLocalizationsDelegate();\n\n  @override\n  bool isSupported(Locale locale) {\n    return ['en','zh'].contains(locale.languageCode);\n  }\n\n  @override\n  Future<DemoLocalizations> load(Locale locale) {\n    return new SynchronousFuture<DemoLocalizations>(new DemoLocalizations(locale));\n  }\n\n  @override\n  bool shouldReload(LocalizationsDelegate<DemoLocalizations> old) {\n    return false;\n  }\n\n  static DemoLocalizationsDelegate delegate = const DemoLocalizationsDelegate();\n}\n```\n\n `load` DemoLocalizations\n\n DemoLocalizationsDelegate  MaterialApp\n\n```dart\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return new MaterialApp(\n      title: 'Flutter Demo',\n      theme: new ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: new MyHomePage(title: 'Flutter Demo Home Page'),\n      localizationsDelegates: [\n        GlobalMaterialLocalizations.delegate,\n        GlobalWidgetsLocalizations.delegate,\n        DemoLocalizationsDelegate.delegate,                 //\n      ],\n      supportedLocales: [\n        const Locale('zh', 'CH'),\n        const Locale('en', 'US'),\n      ],\n    );\n  }\n}\n```\n\nDemoLocalizationsDelegate  MaterialApp DemoLocalizations  Weidget  `Localizations` Localizations  WidgetDemoLocalizationsDelegate  MaterialApp MaterialApp  Localizations  Widget LocalizationsDelegate \n\n```dart\n  Localizations({\n    Key key,\n    @required this.locale,\n    @required this.delegates,                              //\n    this.child,\n  }) : assert(locale != null),\n       assert(delegates != null),\n       assert(delegates.any(\n               (LocalizationsDelegate<dynamic> delegate)\n                 => delegate is LocalizationsDelegate<WidgetsLocalizations>)\n             ),\n       super(key: key);\n```\n\n DemoLocalizations  Localizations  DemoLocalizationsDelegate  DemoLocalizations  Localizations  Widget \n\n```dart\nLocalizations.of(context, DemoLocalizations);\n```\n\n`of` DemoLocalizations  DemoLocalizations \n\n```dart\nclass DemoLocalizations {\n\n  final Locale locale;\n\n  DemoLocalizations(this.locale);\n\n  static Map<String, Map<String, String>> _localizedValues = {\n    'en': {\n      'task title': 'Flutter Demo',\n      'titlebar title': 'Flutter Demo Home Page',\n      'click tip': 'You have pushed the button this many times:',\n      'inc':'Increment'\n    },\n    'zh': {\n      'task title': 'Flutter ',\n      'titlebar title': 'Flutter ',\n      'click tip': '',\n      'inc':''\n    }\n  };\n\n  get taskTitle{\n    return _localizedValues[locale.languageCode]['task title'];\n  }\n\n  get titleBarTitle{\n    return _localizedValues[locale.languageCode]['titlebar title'];\n  }\n\n  get clickTop{\n    return _localizedValues[locale.languageCode]['click tip'];\n  }\n\n  get inc{\n    return _localizedValues[locale.languageCode]['inc'];\n  }\n\n  //\n  static DemoLocalizations of(BuildContext context){\n    return Localizations.of(context, DemoLocalizations);\n  }\n}\n```\n\n DemoLocalizations \n\n```dart\nimport 'dart:async';\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter_localizations/flutter_localizations.dart';\nimport 'package:flutter/foundation.dart' show SynchronousFuture;\n\nvoid main() {\n  runApp(new MyApp());\n}\n\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return new MaterialApp(\n      title: DemoLocalizations.of(context).taskTitle,                           // 1\n      theme: new ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: new MyHomePage(title: DemoLocalizations.of(context).titleBarTitle), // 2\n      localizationsDelegates: [\n        GlobalMaterialLocalizations.delegate,\n        GlobalWidgetsLocalizations.delegate,\n        DemoLocalizationsDelegate.delegate,\n      ],\n      supportedLocales: [\n        const Locale('zh', 'CH'),\n        const Locale('en', 'US'),\n      ],\n    );\n  }\n}\n\nclass MyHomePage extends StatefulWidget {\n  MyHomePage({Key key, this.title}) : super(key: key);\n\n  final String title;\n\n  @override\n  _MyHomePageState createState() => new _MyHomePageState();\n}\n\nclass _MyHomePageState extends State<MyHomePage> {\n  int _counter = 0;\n\n  void _incrementCounter() {\n    showDatePicker(context: context,\n        initialDate: new DateTime.now(),\n        firstDate: new DateTime.now().subtract(new Duration(days: 30)),\n        lastDate: new DateTime.now().add(new Duration(days: 30))).then((v) {});\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return new Scaffold(\n      appBar: new AppBar(\n        title: new Text(widget.title),\n      ),\n      body: new Center(\n        child: new Column(\n          mainAxisAlignment: MainAxisAlignment.center,\n          children: <Widget>[\n            new Text(\n              DemoLocalizations.of(context).clickTop,                          // 3\n            ),\n            new Text(\n              '$_counter',\n              style: Theme\n                  .of(context)\n                  .textTheme\n                  .display1,\n            ),\n          ],\n        ),\n      ),\n      floatingActionButton: new FloatingActionButton(\n        onPressed: _incrementCounter,\n        tooltip: DemoLocalizations.of(context).inc,                           // 4\n        child: new Icon(Icons.add),\n      ),\n    );\n  }\n}\n```\n\n\n\n![](http://backup.flutter-dev.cn/device-2017-12-21-231417.png)\n\n \n\n\n\nThe getter 'taskTitle' was called on null. 1  DemoLocalizations  Localizations.of \n\n```dart\n  static T of<T>(BuildContext context, Type type) {\n    assert(context != null);\n    assert(type != null);\n    final _LocalizationsScope scope =       \n             context.inheritFromWidgetOfExactType(_LocalizationsScope); // \n    return scope?.localizationsState?.resourcesFor<T>(type);\n  }\n```\n\n `context.inheritFromWidgetOfExactType`\n\n```dart\nInheritedWidget inheritFromWidgetOfExactType(Type targetType);\n```\n\n BuildContext  targetType  context  targetType  InheriteWidget  `_LocalizationsScope` InheriteWidget context  _LocalizationsScope taskTitle \n\n```dart\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return new MaterialApp(\n      title: DemoLocalizations.of(context).taskTitle,                           // \n      theme: new ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: new MyHomePage(title: DemoLocalizations.of(context).titleBarTitle),\n      localizationsDelegates: [\n        GlobalMaterialLocalizations.delegate,\n        GlobalWidgetsLocalizations.delegate,\n        DemoLocalizationsDelegate.delegate,\n      ],\n      supportedLocales: [\n        const Locale('zh', 'CH'),\n        const Locale('en', 'US'),\n      ],\n    );\n  }\n}\n```\n\n\n\n taskTitle  context  build  Localizations  MaterialApp  DemoLocalizations  context  MaterialApp  context  DemoLocalizations  DemoLocalizations  MaterialApp  title  context  MaterialApp \n\n title \n\n\n\n title \n\n```dart\n  /// A one-line description used by the device to identify the app for the user.\n  ///\n  /// On Android the titles appear above the task manager's app snapshots which are\n  /// displayed when the user presses the \"recent apps\" button. Similarly, on\n  /// iOS the titles appear in the App Switcher when the user double presses the\n  /// home button.\n  ///\n  /// To provide a localized title instead, use [onGenerateTitle].\n  ///\n  /// This value is passed unmodified to [WidgetsApp.title].\n  final String title;\n```\n\nTo provide a localized title instead, use [onGenerateTitle].\n\n title  `onGenerateTitle`\n\n```dart\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return new MaterialApp(\n      onGenerateTitle: (context){                                              // \n        return DemoLocalizations.of(context).taskTitle;\n      },\n      theme: new ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: new MyHomePage(title: DemoLocalizations.of(context).titleBarTitle),\n      localizationsDelegates: [\n        GlobalMaterialLocalizations.delegate,\n        GlobalWidgetsLocalizations.delegate,\n        DemoLocalizationsDelegate.delegate,\n      ],\n      supportedLocales: [\n        const Locale('zh', 'CH'),\n        const Locale('en', 'US'),\n      ],\n    );\n  }\n}\n```\n\n\n\n taskTitle  titleBarTitle  context  MaterialApp  context title  MyHomePage  MyHomePage  title  AppBar \n\n```dart\nclass MyHomePage extends StatefulWidget {\n  MyHomePage({Key key}) : super(key: key);\n\n  @override\n  _MyHomePageState createState() => new _MyHomePageState();\n}\n\nclass _MyHomePageState extends State<MyHomePage> {\n  int _counter = 0;\n\n  void _incrementCounter() {\n    showDatePicker(context: context,\n        initialDate: new DateTime.now(),\n        firstDate: new DateTime.now().subtract(new Duration(days: 30)),\n        lastDate: new DateTime.now().add(new Duration(days: 30))).then((v) {});\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return new Scaffold(\n      appBar: new AppBar(\n        title: new Text(DemoLocalizations.of(context).titleBarTitle),            // \n      ),\n      body: new Center(\n        child: new Column(\n          mainAxisAlignment: MainAxisAlignment.center,\n          children: <Widget>[\n            new Text(\n              DemoLocalizations.of(context).clickTop,\n            ),\n            new Text(\n              '$_counter',\n              style: Theme\n                  .of(context)\n                  .textTheme\n                  .display1,\n            ),\n          ],\n        ),\n      ),\n      floatingActionButton: new FloatingActionButton(\n        onPressed: _incrementCounter,\n        tooltip: DemoLocalizations.of(context).inc,\n        child: new Icon(Icons.add),\n      ),\n    );\n  }\n}\n```\n\n\n\n\n\n![](http://backup.flutter-dev.cn/device-2017-12-22-001905.png)\n\n![](http://backup.flutter-dev.cn/device-2017-12-22-002133.png)\n\n\n\n## \n\n MaterialApp  DemoLocalizations Map  DemoLocalizatins \n\n MaterialApp  MaterialApp  MaterialApp \n\n```dart\n  MaterialApp({ // can't be const because the asserts use methods on Map :-(\n    Key key,\n    this.title: '',\n    this.onGenerateTitle,\n    this.color,\n    this.theme,\n    this.home,\n    this.routes: const <String, WidgetBuilder>{},\n    this.initialRoute,\n    this.onGenerateRoute,\n    this.onUnknownRoute,\n    this.locale,\n    this.localizationsDelegates,\n    this.localeResolutionCallback,\n    this.supportedLocales: const <Locale>[const Locale('en', 'US')],\n    this.navigatorObservers: const <NavigatorObserver>[],\n    this.debugShowMaterialGrid: false,\n    this.showPerformanceOverlay: false,\n    this.checkerboardRasterCacheImages: false,\n    this.checkerboardOffscreenLayers: false,\n    this.showSemanticsDebugger: false,\n    this.debugShowCheckedModeBanner: true\n  })\n```\n\n `localizationsDelegates` MaterialApp  StatefulWidget State  `_MaterialAppState` build \n\n```dart\nWidget build(BuildContext context) {\n    final ThemeData theme = widget.theme ?? new ThemeData.fallback();\n    Widget result = new AnimatedTheme(                                // 1\n      data: theme,\n      isMaterialAppTheme: true,\n      child: new WidgetsApp(                                          //2\n        key: new GlobalObjectKey(this),\n        title: widget.title,\n        onGenerateTitle: widget.onGenerateTitle,\n        textStyle: _errorTextStyle,\n        // blue is the primary color of the default theme\n        color: widget.color ?? theme?.primaryColor ?? Colors.blue,\n        navigatorObservers:\n            new List<NavigatorObserver>.from(widget.navigatorObservers)\n              ..add(_heroController),\n        initialRoute: widget.initialRoute,\n        onGenerateRoute: _onGenerateRoute,\n        onUnknownRoute: _onUnknownRoute,\n        locale: widget.locale,\n        localizationsDelegates: _localizationsDelegates,                  //3\n        localeResolutionCallback: widget.localeResolutionCallback,\n        supportedLocales: widget.supportedLocales,\n        showPerformanceOverlay: widget.showPerformanceOverlay,\n        checkerboardRasterCacheImages: widget.checkerboardRasterCacheImages,\n        checkerboardOffscreenLayers: widget.checkerboardOffscreenLayers,\n        showSemanticsDebugger: widget.showSemanticsDebugger,\n        debugShowCheckedModeBanner: widget.debugShowCheckedModeBanner,\n        inspectorSelectButtonBuilder: (BuildContext context, VoidCallback onPressed) {\n          return new FloatingActionButton(\n            child: const Icon(Icons.search),\n            onPressed: onPressed,\n            mini: true,\n          );\n        },\n      )\n    );\n\n    assert(() {\n      if (widget.debugShowMaterialGrid) {    //\n        result = new GridPaper(\n          color: const Color(0xE0F9BBE0),\n          interval: 8.0,\n          divisions: 2,\n          subdivisions: 1,\n          child: result,\n        );\n      }\n      return true;\n    }());\n\n    return new ScrollConfiguration(                                // 4\n      behavior: new _MaterialScrollBehavior(),\n      child: result,\n    );\n  }\n```\n\n 3  _localizationsDelegates  WidgetsApp  localizationsDelegates  124  Widget  widget \n\n![](http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8A%E5%8D%8810.45.47.png)\n\n WidgetApp  StatefulWidget State  `_WidgetsAppState` build \n\n```dart\n Widget build(BuildContext context) {\n    Widget result = new Navigator(                                    // 1\n      key: _navigator,\n      initialRoute: widget.initialRoute ?? ui.window.defaultRouteName,\n      onGenerateRoute: widget.onGenerateRoute,\n      onUnknownRoute: widget.onUnknownRoute,\n      observers: widget.navigatorObservers,\n    );\n\n    if (widget.textStyle != null) {\n      result = new DefaultTextStyle(                                    //2\n        style: widget.textStyle,\n        child: result,\n      );\n    }\n\n    ... //\n\n    return new MediaQuery(                                              //3\n      data: new MediaQueryData.fromWindow(ui.window),\n      child: new Localizations(                                         //4\n        locale: widget.locale ?? _locale,\n        delegates: _localizationsDelegates.toList(),\n        // This Builder exists to provide a context below the Localizations widget.\n        // The onGenerateCallback() can refer to Localizations via its context\n        // parameter.\n        child: new Builder(                                             //5\n          builder: (BuildContext context) {\n            String title = widget.title;\n            if (widget.onGenerateTitle != null) {\n              title = widget.onGenerateTitle(context);\n              assert(title != null, 'onGenerateTitle must return a non-null String');\n            }\n            return new Title(                                            //6\n              title: title,\n              color: widget.color,\n              child: result,\n            );\n          },\n        ),\n      ),\n    );\n  }\n```\n\n 4  `Localizatins`_localizationsDelegates  Localizations widget \n\n\n\n![](http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8A%E5%8D%8810.55.52.png)\n\n Localizations Localizations \n\n Localizations  StatefulWidget build  `initState` \n\ninitState \n\n```dart\n  @override\n  void initState() {\n    super.initState();\n    load(widget.locale);\n  }\n```\n\n load \n\n```dart\n  void load(Locale locale) {\n    final Iterable<LocalizationsDelegate<dynamic>> delegates = widget.delegates; // 1\n    if (delegates == null || delegates.isEmpty) {\n      _locale = locale;\n      return;\n    }\n\n    Map<Type, dynamic> typeToResources;\n    final Future<Map<Type, dynamic>> typeToResourcesFuture = _loadAll(locale, delegates) //2\n      .then((Map<Type, dynamic> value) {\n        return typeToResources = value;\n      });\n    \n    ...\n  \n  }\n```\n\n 1  delegates  MaterialApp  delegate  2  `_loadAll`  typeToResourcesFuture  `Map<Type, dynamic>` Type  Localizations dynamic  _loadAll \n\n```dart\nFuture<Map<Type, dynamic>> _loadAll(Locale locale, Iterable<LocalizationsDelegate<dynamic>> allDelegates) {\n  final Map<Type, dynamic> output = <Type, dynamic>{};\n  List<_Pending> pendingList;\n\n  // Only load the first delegate for each delegate type that supports\n  // locale.languageCode.\n  final Set<Type> types = new Set<Type>();\n  final List<LocalizationsDelegate<dynamic>> delegates = <LocalizationsDelegate<dynamic>>[];\n  for (LocalizationsDelegate<dynamic> delegate in allDelegates) {\n    if (!types.contains(delegate.type) && delegate.isSupported(locale)) {\n      types.add(delegate.type);\n      delegates.add(delegate);          \n    }\n  }\n\n  for (LocalizationsDelegate<dynamic> delegate in delegates) {\n    final Future<dynamic> inputValue = delegate.load(locale);    // 1\n    dynamic completedValue;\n    final Future<dynamic> futureValue = inputValue.then<dynamic>((dynamic value) {\n      return completedValue = value;                             // 2\n    });\n    if (completedValue != null) { // inputValue was a SynchronousFuture\n      final Type type = delegate.type;\n      assert(!output.containsKey(type));\n      output[type] = completedValue;\n    } else {\n      pendingList ??= <_Pending>[];\n      pendingList.add(new _Pending(delegate, futureValue));\n    }\n  }\n\n  // All of the delegate.load() values were synchronous futures, we're done.\n  if (pendingList == null)\n    return new SynchronousFuture<Map<Type, dynamic>>(output);\n\n  // Some of delegate.load() values were asynchronous futures. Wait for them.\n  return Future.wait<dynamic>(pendingList.map((_Pending p) => p.futureValue))\n    .then<Map<Type, dynamic>>((List<dynamic> values) {\n      assert(values.length == pendingList.length);\n      for (int i = 0; i < values.length; i += 1) {\n        final Type type = pendingList[i].delegate.type;\n        assert(!output.containsKey(type));\n        output[type] = values[i];\n      }\n      return output;\n    });\n}\n```\n\n 1  deletegate  load  Future DemoLocalizations  Future Future\n\n```dart\n  @override\n  Future<DemoLocalizations> load(Locale locale) {\n    return new SynchronousFuture<DemoLocalizations>(new DemoLocalizations(locale));\n  }\n```\n\n SynchronousFuture  2  completedValue  DemoLocalizations  completedValue  output  \\_LocalizationsState  \\_typeToResources \n\n\n\n```dart\nDemoLocalizations.of(context).taskTitle\n```\n DemoLocalizations \n\n```dart\nreturn Localizations.of(context, DemoLocalizations);\n```\n Localizations  of \n\n```dart\nstatic T of<T>(BuildContext context, Type type) {\n  assert(context != null);\n  assert(type != null);\n  final _LocalizationsScope scope = context.inheritFromWidgetOfExactType(_LocalizationsScope);\n  return scope?.localizationsState?.resourcesFor<T>(type);\n}\n```\n context.inheritFromWidgetOfExactType  scope  context  \\_LocalizationsScope  widget  \\_LocalizationsScope  widget,\n\n \\_LocalizationsState  build \n\n```dart\n  @override\n  Widget build(BuildContext context) {\n    if (_locale == null)\n      return new Container();\n    return new _LocalizationsScope(\n      key: _localizedResourcesScopeKey,\n      locale: _locale,\n      localizationsState: this,\n      typeToResources: _typeToResources,\n      child: new Directionality(\n        textDirection: _textDirection,\n        child: widget.child,\n      ),\n    );\n  }\n```\n\n() Localizations  Directionality\\_LocalizationsScopeContainer  \\_LocalizationsScope \n\n\n\n```dart\n  return scope?.localizationsState?.resourcesFor<T>(type);\n```\n \\_LocalizationsState  resourcesFor \n\n```dart\n  T resourcesFor<T>(Type type) {\n    assert(type != null);\n    final T resources = _typeToResources[type];\n    return resources;\n  }\n```\n type  \\_typeToResources  DemoLocalizations \n widget \n\n![](http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8B%E5%8D%882.29.45.png)\n\n\n##  App \n\n Flutter  Localizations  override  StatefulWidget  FreeLocalizations  State  _FreeLocalizations\n\n```dart\nclass FreeLocalizations extends StatefulWidget{\n\n  final Widget child;\n\n  FreeLocalizations({Key key,this.child}):super(key:key);\n\n  @override\n  State<FreeLocalizations> createState() {\n    return new _FreeLocalizations();\n  }\n}\n\nclass _FreeLocalizations extends State<FreeLocalizations>{\n\n  Locale _locale = const Locale('zh','CH');\n\n  changeLocale(Locale locale){\n    setState((){\n      _locale = locale;\n    });\n  }\n  \n  @override\n  Widget build(BuildContext context) {\n    return new Localizations.override(\n      context: context,\n      locale: _locale,\n      child: widget.child,\n    );\n  }\n}\n```\n changeLocale  widget \n\n\n```dart\nvoid main() {\n  runApp(new MyApp());\n}\n\nGlobalKey<_FreeLocalizations> freeLocalizationStateKey = new GlobalKey<_FreeLocalizations>();   // 1\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return new MaterialApp(\n      onGenerateTitle: (context){\n        return DemoLocalizations.of(context).taskTitle;\n      },\n      theme: new ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      home: new Builder(builder: (context){\n        return new FreeLocalizations(\n          key: freeLocalizationStateKey,\n          child: new MyHomePage(),\n        );\n      }),\n      localizationsDelegates: [\n        GlobalMaterialLocalizations.delegate,\n        GlobalWidgetsLocalizations.delegate,\n        DemoLocalizationsDelegate.delegate,\n      ],\n      supportedLocales: [\n        const Locale('zh', 'CH'),\n        const Locale('en', 'US'),\n      ],\n    );\n  }\n}\n\n```\n\n FreeLocalizations  GlobalKey  1  MyHomePage  FreeLocalizations \n\n\n\n```dart\n  void changeLocale(){\n    if(flag){\n      freeLocalizationStateKey.currentState.changeLocale(const Locale('zh',\"CH\"));\n    }else{\n      freeLocalizationStateKey.currentState.changeLocale(const Locale('en',\"US\"));\n    }\n    flag = !flag;\n  }\n```\n\n\n\n![](http://backup.flutter-dev.cn/localizatiion_free.gif)\n\n\n\n## \n\n![](http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8B%E5%8D%883.34.41.png)\n\n[https://my.mindnode.com/7u6RudyGs5bqzX1WrxY5XtZZqUDBzqvL2NioVbrr](https://my.mindnode.com/7u6RudyGs5bqzX1WrxY5XtZZqUDBzqvL2NioVbrr)\n[https://github.com/flutter-dev/internationalizing](https://github.com/flutter-dev/internationalizing)","slug":"flutter-localizations","published":1,"updated":"2024-08-21T03:16:19.784Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vt00165p6ta3v9607c","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> 2015  Flutter  master  flutter_gallery  GDD Flutter  Google  Flutter </p>\n<p> UI </p>\n<p> Android  iOS  Flutter  Android  xml </p>\n<span id=\"more\"></span>\n<h2 id=\"-MaterialApp-\"><a href=\"#-MaterialApp-\" class=\"headerlink\" title=\" MaterialApp \"></a> MaterialApp </h2><p>Flutter  Flutter  MaterialApp  MaterialApp  Material Design AnimatedThemenGridPager  MaterialApp  MaterialApp </p>\n<p> Flutter </p>\n<p><img src=\"http://cdn.zqlxtt.cn/device-2017-12-21-214051.png\" alt=\"\"></p>\n<p> pubspec.yaml </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">flutter_localizations:</span></span><br><span class=\"line\">  <span class=\"attr\">sdk:</span> <span class=\"string\">flutter</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flutter packages get</span><br></pre></td></tr></table></figure>\n\n<p> </p>\n<p> main.dart  import </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:flutter_localizations/flutter_localizations.dart&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n\n\n<p> MaterialApp  <code>localizationsDelegates</code>  <code>supportedLocales</code> </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyApp</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MaterialApp(</span><br><span class=\"line\">      title: <span class=\"string\">&#x27;Flutter Demo&#x27;</span>,</span><br><span class=\"line\">      theme: <span class=\"keyword\">new</span> ThemeData(</span><br><span class=\"line\">        primarySwatch: Colors.blue,</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      home: <span class=\"keyword\">new</span> MyHomePage(title: <span class=\"string\">&#x27;Flutter Demo Home Page&#x27;</span>),</span><br><span class=\"line\">      localizationsDelegates: [                             <span class=\"comment\">//</span></span><br><span class=\"line\">        GlobalMaterialLocalizations.delegate,</span><br><span class=\"line\">        GlobalWidgetsLocalizations.delegate,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      supportedLocales: [                                   <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>,<span class=\"string\">&#x27;CH&#x27;</span>),</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>,<span class=\"string\">&#x27;US&#x27;</span>),</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p></p>\n<p><img src=\"http://backup.flutter-dev.cn/device-2017-12-21-215330.png\" alt=\"\"></p>\n<p> Dialog  titlebar </p>\n<p> titlebar </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">home: <span class=\"keyword\">new</span> MyHomePage(title: <span class=\"string\">&#x27;Flutter Demo Home Page&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Flutter </p>\n<p> <code>GlobalMaterialLocalizations</code></p>\n<p> Flutter </p>\n<ul>\n<li>Flutter Demo</li>\n<li>Flutter Demo Home Page</li>\n<li>You have pushed the button this many times:</li>\n<li>Increment</li>\n</ul>\n<p></p>\n<ul>\n<li>Flutter </li>\n<li>Flutter </li>\n<li></li>\n<li></li>\n</ul>\n<p> Localizations  Localizations  DemoLocalizations ,</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DemoLocalizations</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Locale locale;</span><br><span class=\"line\"></span><br><span class=\"line\">  DemoLocalizations(<span class=\"keyword\">this</span>.locale);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">String</span>, <span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">String</span>, <span class=\"built_in\">String</span>&gt;&gt; _localizedValues = &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;en&#x27;</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&#x27;task title&#x27;</span>: <span class=\"string\">&#x27;Flutter Demo&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;titlebar title&#x27;</span>: <span class=\"string\">&#x27;Flutter Demo Home Page&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;click tip&#x27;</span>: <span class=\"string\">&#x27;You have pushed the button this many times:&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;inc&#x27;</span>:<span class=\"string\">&#x27;Increment&#x27;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&#x27;zh&#x27;</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&#x27;task title&#x27;</span>: <span class=\"string\">&#x27;Flutter &#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;titlebar title&#x27;</span>: <span class=\"string\">&#x27;Flutter &#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;click tip&#x27;</span>: <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;inc&#x27;</span>:<span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> taskTitle&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;task title&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> titleBarTitle&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;titlebar title&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> clickTop&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;click tip&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">get</span> inc&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;inc&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> DemoLocalizations <code>taskTitle</code><code>titleBarTitle</code><code>clickTop</code></p>\n<p> DemoLocalizations  <code>LocalizationsDelegate</code>LocalizationsDelegate </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DemoLocalizationsDelegate</span> <span class=\"keyword\">extends</span> <span class=\"title\">LocalizationsDelegate</span>&lt;<span class=\"title\">DemoLocalizations</span>&gt;</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> DemoLocalizationsDelegate();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  <span class=\"built_in\">bool</span> isSupported(Locale locale) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> [<span class=\"string\">&#x27;en&#x27;</span>,<span class=\"string\">&#x27;zh&#x27;</span>].contains(locale.languageCode);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Future&lt;DemoLocalizations&gt; load(Locale locale) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> SynchronousFuture&lt;DemoLocalizations&gt;(<span class=\"keyword\">new</span> DemoLocalizations(locale));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  <span class=\"built_in\">bool</span> shouldReload(LocalizationsDelegate&lt;DemoLocalizations&gt; old) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">static</span> DemoLocalizationsDelegate delegate = <span class=\"keyword\">const</span> DemoLocalizationsDelegate();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>load</code> DemoLocalizations</p>\n<p> DemoLocalizationsDelegate  MaterialApp</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyApp</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MaterialApp(</span><br><span class=\"line\">      title: <span class=\"string\">&#x27;Flutter Demo&#x27;</span>,</span><br><span class=\"line\">      theme: <span class=\"keyword\">new</span> ThemeData(</span><br><span class=\"line\">        primarySwatch: Colors.blue,</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      home: <span class=\"keyword\">new</span> MyHomePage(title: <span class=\"string\">&#x27;Flutter Demo Home Page&#x27;</span>),</span><br><span class=\"line\">      localizationsDelegates: [</span><br><span class=\"line\">        GlobalMaterialLocalizations.delegate,</span><br><span class=\"line\">        GlobalWidgetsLocalizations.delegate,</span><br><span class=\"line\">        DemoLocalizationsDelegate.delegate,                 <span class=\"comment\">//</span></span><br><span class=\"line\">      ],</span><br><span class=\"line\">      supportedLocales: [</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>, <span class=\"string\">&#x27;CH&#x27;</span>),</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>, <span class=\"string\">&#x27;US&#x27;</span>),</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>DemoLocalizationsDelegate  MaterialApp DemoLocalizations  Weidget  <code>Localizations</code> Localizations  WidgetDemoLocalizationsDelegate  MaterialApp MaterialApp  Localizations  Widget LocalizationsDelegate </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Localizations(&#123;</span><br><span class=\"line\">  Key key,</span><br><span class=\"line\">  <span class=\"meta\">@required</span> <span class=\"keyword\">this</span>.locale,</span><br><span class=\"line\">  <span class=\"meta\">@required</span> <span class=\"keyword\">this</span>.delegates,                              <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.child,</span><br><span class=\"line\">&#125;) : <span class=\"keyword\">assert</span>(locale != <span class=\"keyword\">null</span>),</span><br><span class=\"line\">     <span class=\"keyword\">assert</span>(delegates != <span class=\"keyword\">null</span>),</span><br><span class=\"line\">     <span class=\"keyword\">assert</span>(delegates.any(</span><br><span class=\"line\">             (LocalizationsDelegate&lt;<span class=\"built_in\">dynamic</span>&gt; delegate)</span><br><span class=\"line\">               =&gt; delegate <span class=\"keyword\">is</span> LocalizationsDelegate&lt;WidgetsLocalizations&gt;)</span><br><span class=\"line\">           ),</span><br><span class=\"line\">     <span class=\"keyword\">super</span>(key: key);</span><br></pre></td></tr></table></figure>\n\n<p> DemoLocalizations  Localizations  DemoLocalizationsDelegate  DemoLocalizations  Localizations  Widget </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Localizations.of(context, DemoLocalizations);</span><br></pre></td></tr></table></figure>\n\n<p><code>of</code> DemoLocalizations  DemoLocalizations </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DemoLocalizations</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Locale locale;</span><br><span class=\"line\"></span><br><span class=\"line\">  DemoLocalizations(<span class=\"keyword\">this</span>.locale);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">String</span>, <span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">String</span>, <span class=\"built_in\">String</span>&gt;&gt; _localizedValues = &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;en&#x27;</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&#x27;task title&#x27;</span>: <span class=\"string\">&#x27;Flutter Demo&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;titlebar title&#x27;</span>: <span class=\"string\">&#x27;Flutter Demo Home Page&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;click tip&#x27;</span>: <span class=\"string\">&#x27;You have pushed the button this many times:&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;inc&#x27;</span>:<span class=\"string\">&#x27;Increment&#x27;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&#x27;zh&#x27;</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&#x27;task title&#x27;</span>: <span class=\"string\">&#x27;Flutter &#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;titlebar title&#x27;</span>: <span class=\"string\">&#x27;Flutter &#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;click tip&#x27;</span>: <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;inc&#x27;</span>:<span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> taskTitle&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;task title&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> titleBarTitle&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;titlebar title&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> clickTop&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;click tip&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> inc&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;inc&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> DemoLocalizations of(BuildContext context)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Localizations.of(context, DemoLocalizations);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> DemoLocalizations </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;dart:async&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:flutter_localizations/flutter_localizations.dart&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:flutter/foundation.dart&#x27;</span> <span class=\"keyword\">show</span> SynchronousFuture;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">void</span> main() &#123;</span><br><span class=\"line\">  runApp(<span class=\"keyword\">new</span> MyApp());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyApp</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MaterialApp(</span><br><span class=\"line\">      title: DemoLocalizations.of(context).taskTitle,                           <span class=\"comment\">// 1</span></span><br><span class=\"line\">      theme: <span class=\"keyword\">new</span> ThemeData(</span><br><span class=\"line\">        primarySwatch: Colors.blue,</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      home: <span class=\"keyword\">new</span> MyHomePage(title: DemoLocalizations.of(context).titleBarTitle), <span class=\"comment\">// 2</span></span><br><span class=\"line\">      localizationsDelegates: [</span><br><span class=\"line\">        GlobalMaterialLocalizations.delegate,</span><br><span class=\"line\">        GlobalWidgetsLocalizations.delegate,</span><br><span class=\"line\">        DemoLocalizationsDelegate.delegate,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      supportedLocales: [</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>, <span class=\"string\">&#x27;CH&#x27;</span>),</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>, <span class=\"string\">&#x27;US&#x27;</span>),</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHomePage</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatefulWidget</span> </span>&#123;</span><br><span class=\"line\">  MyHomePage(&#123;Key key, <span class=\"keyword\">this</span>.title&#125;) : <span class=\"keyword\">super</span>(key: key);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"built_in\">String</span> title;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  _MyHomePageState createState() =&gt; <span class=\"keyword\">new</span> _MyHomePageState();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_MyHomePageState</span> <span class=\"keyword\">extends</span> <span class=\"title\">State</span>&lt;<span class=\"title\">MyHomePage</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">int</span> _counter = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">void</span> _incrementCounter() &#123;</span><br><span class=\"line\">    showDatePicker(context: context,</span><br><span class=\"line\">        initialDate: <span class=\"keyword\">new</span> <span class=\"built_in\">DateTime</span>.now(),</span><br><span class=\"line\">        firstDate: <span class=\"keyword\">new</span> <span class=\"built_in\">DateTime</span>.now().subtract(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(days: <span class=\"number\">30</span>)),</span><br><span class=\"line\">        lastDate: <span class=\"keyword\">new</span> <span class=\"built_in\">DateTime</span>.now().add(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(days: <span class=\"number\">30</span>))).then((v) &#123;&#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Scaffold(</span><br><span class=\"line\">      appBar: <span class=\"keyword\">new</span> AppBar(</span><br><span class=\"line\">        title: <span class=\"keyword\">new</span> Text(widget.title),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      body: <span class=\"keyword\">new</span> Center(</span><br><span class=\"line\">        child: <span class=\"keyword\">new</span> Column(</span><br><span class=\"line\">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class=\"line\">          children: &lt;Widget&gt;[</span><br><span class=\"line\">            <span class=\"keyword\">new</span> Text(</span><br><span class=\"line\">              DemoLocalizations.of(context).clickTop,                          <span class=\"comment\">// 3</span></span><br><span class=\"line\">            ),</span><br><span class=\"line\">            <span class=\"keyword\">new</span> Text(</span><br><span class=\"line\">              <span class=\"string\">&#x27;<span class=\"subst\">$_counter</span>&#x27;</span>,</span><br><span class=\"line\">              style: Theme</span><br><span class=\"line\">                  .of(context)</span><br><span class=\"line\">                  .textTheme</span><br><span class=\"line\">                  .display1,</span><br><span class=\"line\">            ),</span><br><span class=\"line\">          ],</span><br><span class=\"line\">        ),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      floatingActionButton: <span class=\"keyword\">new</span> FloatingActionButton(</span><br><span class=\"line\">        onPressed: _incrementCounter,</span><br><span class=\"line\">        tooltip: DemoLocalizations.of(context).inc,                           <span class=\"comment\">// 4</span></span><br><span class=\"line\">        child: <span class=\"keyword\">new</span> Icon(Icons.add),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"http://backup.flutter-dev.cn/device-2017-12-21-231417.png\" alt=\"\"></p>\n<p> </p>\n<p></p>\n<p>The getter taskTitle was called on null. 1  DemoLocalizations  Localizations.of </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> T of&lt;T&gt;(BuildContext context, <span class=\"built_in\">Type</span> type) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">assert</span>(context != <span class=\"keyword\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">assert</span>(type != <span class=\"keyword\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">final</span> _LocalizationsScope scope =       </span><br><span class=\"line\">           context.inheritFromWidgetOfExactType(_LocalizationsScope); <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> scope?.localizationsState?.resourcesFor&lt;T&gt;(type);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>context.inheritFromWidgetOfExactType</code></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">InheritedWidget inheritFromWidgetOfExactType(<span class=\"built_in\">Type</span> targetType);</span><br></pre></td></tr></table></figure>\n\n<p> BuildContext  targetType  context  targetType  InheriteWidget  <code>_LocalizationsScope</code> InheriteWidget context  _LocalizationsScope taskTitle </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyApp</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MaterialApp(</span><br><span class=\"line\">      title: DemoLocalizations.of(context).taskTitle,                           <span class=\"comment\">// </span></span><br><span class=\"line\">      theme: <span class=\"keyword\">new</span> ThemeData(</span><br><span class=\"line\">        primarySwatch: Colors.blue,</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      home: <span class=\"keyword\">new</span> MyHomePage(title: DemoLocalizations.of(context).titleBarTitle),</span><br><span class=\"line\">      localizationsDelegates: [</span><br><span class=\"line\">        GlobalMaterialLocalizations.delegate,</span><br><span class=\"line\">        GlobalWidgetsLocalizations.delegate,</span><br><span class=\"line\">        DemoLocalizationsDelegate.delegate,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      supportedLocales: [</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>, <span class=\"string\">&#x27;CH&#x27;</span>),</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>, <span class=\"string\">&#x27;US&#x27;</span>),</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p> taskTitle  context  build  Localizations  MaterialApp  DemoLocalizations  context  MaterialApp  context  DemoLocalizations  DemoLocalizations  MaterialApp  title  context  MaterialApp </p>\n<p> title </p>\n<p></p>\n<p> title </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// <span class=\"language-markdown\">A one-line description used by the device to identify the app for the user.</span></span></span><br><span class=\"line\"><span class=\"comment\">///</span></span><br><span class=\"line\"><span class=\"comment\">/// <span class=\"language-markdown\">On Android the titles appear above the task manager&#x27;s app snapshots which are</span></span></span><br><span class=\"line\"><span class=\"comment\">/// <span class=\"language-markdown\">displayed when the user presses the &quot;recent apps&quot; button. Similarly, on</span></span></span><br><span class=\"line\"><span class=\"comment\">/// <span class=\"language-markdown\">iOS the titles appear in the App Switcher when the user double presses the</span></span></span><br><span class=\"line\"><span class=\"comment\">/// <span class=\"language-markdown\">home button.</span></span></span><br><span class=\"line\"><span class=\"comment\">///</span></span><br><span class=\"line\"><span class=\"comment\">/// <span class=\"language-markdown\">To provide a localized title instead, use [onGenerateTitle].</span></span></span><br><span class=\"line\"><span class=\"comment\">///</span></span><br><span class=\"line\"><span class=\"comment\">/// <span class=\"language-markdown\">This value is passed unmodified to [WidgetsApp.title].</span></span></span><br><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"built_in\">String</span> title;</span><br></pre></td></tr></table></figure>\n\n<p>To provide a localized title instead, use [onGenerateTitle].</p>\n<p> title  <code>onGenerateTitle</code></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyApp</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MaterialApp(</span><br><span class=\"line\">      onGenerateTitle: (context)&#123;                                              <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> DemoLocalizations.of(context).taskTitle;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      theme: <span class=\"keyword\">new</span> ThemeData(</span><br><span class=\"line\">        primarySwatch: Colors.blue,</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      home: <span class=\"keyword\">new</span> MyHomePage(title: DemoLocalizations.of(context).titleBarTitle),</span><br><span class=\"line\">      localizationsDelegates: [</span><br><span class=\"line\">        GlobalMaterialLocalizations.delegate,</span><br><span class=\"line\">        GlobalWidgetsLocalizations.delegate,</span><br><span class=\"line\">        DemoLocalizationsDelegate.delegate,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      supportedLocales: [</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>, <span class=\"string\">&#x27;CH&#x27;</span>),</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>, <span class=\"string\">&#x27;US&#x27;</span>),</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p> taskTitle  titleBarTitle  context  MaterialApp  context title  MyHomePage  MyHomePage  title  AppBar </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHomePage</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatefulWidget</span> </span>&#123;</span><br><span class=\"line\">  MyHomePage(&#123;Key key&#125;) : <span class=\"keyword\">super</span>(key: key);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  _MyHomePageState createState() =&gt; <span class=\"keyword\">new</span> _MyHomePageState();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_MyHomePageState</span> <span class=\"keyword\">extends</span> <span class=\"title\">State</span>&lt;<span class=\"title\">MyHomePage</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">int</span> _counter = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">void</span> _incrementCounter() &#123;</span><br><span class=\"line\">    showDatePicker(context: context,</span><br><span class=\"line\">        initialDate: <span class=\"keyword\">new</span> <span class=\"built_in\">DateTime</span>.now(),</span><br><span class=\"line\">        firstDate: <span class=\"keyword\">new</span> <span class=\"built_in\">DateTime</span>.now().subtract(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(days: <span class=\"number\">30</span>)),</span><br><span class=\"line\">        lastDate: <span class=\"keyword\">new</span> <span class=\"built_in\">DateTime</span>.now().add(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(days: <span class=\"number\">30</span>))).then((v) &#123;&#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Scaffold(</span><br><span class=\"line\">      appBar: <span class=\"keyword\">new</span> AppBar(</span><br><span class=\"line\">        title: <span class=\"keyword\">new</span> Text(DemoLocalizations.of(context).titleBarTitle),            <span class=\"comment\">// </span></span><br><span class=\"line\">      ),</span><br><span class=\"line\">      body: <span class=\"keyword\">new</span> Center(</span><br><span class=\"line\">        child: <span class=\"keyword\">new</span> Column(</span><br><span class=\"line\">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class=\"line\">          children: &lt;Widget&gt;[</span><br><span class=\"line\">            <span class=\"keyword\">new</span> Text(</span><br><span class=\"line\">              DemoLocalizations.of(context).clickTop,</span><br><span class=\"line\">            ),</span><br><span class=\"line\">            <span class=\"keyword\">new</span> Text(</span><br><span class=\"line\">              <span class=\"string\">&#x27;<span class=\"subst\">$_counter</span>&#x27;</span>,</span><br><span class=\"line\">              style: Theme</span><br><span class=\"line\">                  .of(context)</span><br><span class=\"line\">                  .textTheme</span><br><span class=\"line\">                  .display1,</span><br><span class=\"line\">            ),</span><br><span class=\"line\">          ],</span><br><span class=\"line\">        ),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      floatingActionButton: <span class=\"keyword\">new</span> FloatingActionButton(</span><br><span class=\"line\">        onPressed: _incrementCounter,</span><br><span class=\"line\">        tooltip: DemoLocalizations.of(context).inc,</span><br><span class=\"line\">        child: <span class=\"keyword\">new</span> Icon(Icons.add),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p></p>\n<p><img src=\"http://backup.flutter-dev.cn/device-2017-12-22-001905.png\" alt=\"\"></p>\n<p><img src=\"http://backup.flutter-dev.cn/device-2017-12-22-002133.png\" alt=\"\"></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> MaterialApp  DemoLocalizations Map  DemoLocalizatins </p>\n<p> MaterialApp  MaterialApp  MaterialApp </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MaterialApp(&#123; <span class=\"comment\">// can&#x27;t be const because the asserts use methods on Map :-(</span></span><br><span class=\"line\">  Key key,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.title: <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.onGenerateTitle,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.color,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.theme,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.home,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.routes: <span class=\"keyword\">const</span> &lt;<span class=\"built_in\">String</span>, WidgetBuilder&gt;&#123;&#125;,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.initialRoute,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.onGenerateRoute,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.onUnknownRoute,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.locale,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.localizationsDelegates,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.localeResolutionCallback,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.supportedLocales: <span class=\"keyword\">const</span> &lt;Locale&gt;[<span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>, <span class=\"string\">&#x27;US&#x27;</span>)],</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.navigatorObservers: <span class=\"keyword\">const</span> &lt;NavigatorObserver&gt;[],</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.debugShowMaterialGrid: <span class=\"keyword\">false</span>,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.showPerformanceOverlay: <span class=\"keyword\">false</span>,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.checkerboardRasterCacheImages: <span class=\"keyword\">false</span>,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.checkerboardOffscreenLayers: <span class=\"keyword\">false</span>,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.showSemanticsDebugger: <span class=\"keyword\">false</span>,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.debugShowCheckedModeBanner: <span class=\"keyword\">true</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p> <code>localizationsDelegates</code> MaterialApp  StatefulWidget State  <code>_MaterialAppState</code> build </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> ThemeData theme = widget.theme ?? <span class=\"keyword\">new</span> ThemeData.fallback();</span><br><span class=\"line\">    Widget result = <span class=\"keyword\">new</span> AnimatedTheme(                                <span class=\"comment\">// 1</span></span><br><span class=\"line\">      data: theme,</span><br><span class=\"line\">      isMaterialAppTheme: <span class=\"keyword\">true</span>,</span><br><span class=\"line\">      child: <span class=\"keyword\">new</span> WidgetsApp(                                          <span class=\"comment\">//2</span></span><br><span class=\"line\">        key: <span class=\"keyword\">new</span> GlobalObjectKey(<span class=\"keyword\">this</span>),</span><br><span class=\"line\">        title: widget.title,</span><br><span class=\"line\">        onGenerateTitle: widget.onGenerateTitle,</span><br><span class=\"line\">        textStyle: _errorTextStyle,</span><br><span class=\"line\">        <span class=\"comment\">// blue is the primary color of the default theme</span></span><br><span class=\"line\">        color: widget.color ?? theme?.primaryColor ?? Colors.blue,</span><br><span class=\"line\">        navigatorObservers:</span><br><span class=\"line\">            <span class=\"keyword\">new</span> <span class=\"built_in\">List</span>&lt;NavigatorObserver&gt;.from(widget.navigatorObservers)</span><br><span class=\"line\">              ..add(_heroController),</span><br><span class=\"line\">        initialRoute: widget.initialRoute,</span><br><span class=\"line\">        onGenerateRoute: _onGenerateRoute,</span><br><span class=\"line\">        onUnknownRoute: _onUnknownRoute,</span><br><span class=\"line\">        locale: widget.locale,</span><br><span class=\"line\">        localizationsDelegates: _localizationsDelegates,                  <span class=\"comment\">//3</span></span><br><span class=\"line\">        localeResolutionCallback: widget.localeResolutionCallback,</span><br><span class=\"line\">        supportedLocales: widget.supportedLocales,</span><br><span class=\"line\">        showPerformanceOverlay: widget.showPerformanceOverlay,</span><br><span class=\"line\">        checkerboardRasterCacheImages: widget.checkerboardRasterCacheImages,</span><br><span class=\"line\">        checkerboardOffscreenLayers: widget.checkerboardOffscreenLayers,</span><br><span class=\"line\">        showSemanticsDebugger: widget.showSemanticsDebugger,</span><br><span class=\"line\">        debugShowCheckedModeBanner: widget.debugShowCheckedModeBanner,</span><br><span class=\"line\">        inspectorSelectButtonBuilder: (BuildContext context, VoidCallback onPressed) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> FloatingActionButton(</span><br><span class=\"line\">            child: <span class=\"keyword\">const</span> Icon(Icons.search),</span><br><span class=\"line\">            onPressed: onPressed,</span><br><span class=\"line\">            mini: <span class=\"keyword\">true</span>,</span><br><span class=\"line\">          );</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      )</span><br><span class=\"line\">    );</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">assert</span>(() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (widget.debugShowMaterialGrid) &#123;    <span class=\"comment\">//</span></span><br><span class=\"line\">        result = <span class=\"keyword\">new</span> GridPaper(</span><br><span class=\"line\">          color: <span class=\"keyword\">const</span> Color(<span class=\"number\">0xE0F9BBE0</span>),</span><br><span class=\"line\">          interval: <span class=\"number\">8.0</span>,</span><br><span class=\"line\">          divisions: <span class=\"number\">2</span>,</span><br><span class=\"line\">          subdivisions: <span class=\"number\">1</span>,</span><br><span class=\"line\">          child: result,</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ScrollConfiguration(                                <span class=\"comment\">// 4</span></span><br><span class=\"line\">      behavior: <span class=\"keyword\">new</span> _MaterialScrollBehavior(),</span><br><span class=\"line\">      child: result,</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<p> 3  _localizationsDelegates  WidgetsApp  localizationsDelegates  124  Widget  widget </p>\n<p><img src=\"http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8A%E5%8D%8810.45.47.png\" alt=\"\"></p>\n<p> WidgetApp  StatefulWidget State  <code>_WidgetsAppState</code> build </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Widget build(BuildContext context) &#123;</span><br><span class=\"line\">   Widget result = <span class=\"keyword\">new</span> Navigator(                                    <span class=\"comment\">// 1</span></span><br><span class=\"line\">     key: _navigator,</span><br><span class=\"line\">     initialRoute: widget.initialRoute ?? ui.<span class=\"built_in\">window</span>.defaultRouteName,</span><br><span class=\"line\">     onGenerateRoute: widget.onGenerateRoute,</span><br><span class=\"line\">     onUnknownRoute: widget.onUnknownRoute,</span><br><span class=\"line\">     observers: widget.navigatorObservers,</span><br><span class=\"line\">   );</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (widget.textStyle != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">     result = <span class=\"keyword\">new</span> DefaultTextStyle(                                    <span class=\"comment\">//2</span></span><br><span class=\"line\">       style: widget.textStyle,</span><br><span class=\"line\">       child: result,</span><br><span class=\"line\">     );</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   ... <span class=\"comment\">//</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MediaQuery(                                              <span class=\"comment\">//3</span></span><br><span class=\"line\">     data: <span class=\"keyword\">new</span> MediaQueryData.fromWindow(ui.<span class=\"built_in\">window</span>),</span><br><span class=\"line\">     child: <span class=\"keyword\">new</span> Localizations(                                         <span class=\"comment\">//4</span></span><br><span class=\"line\">       locale: widget.locale ?? _locale,</span><br><span class=\"line\">       delegates: _localizationsDelegates.toList(),</span><br><span class=\"line\">       <span class=\"comment\">// This Builder exists to provide a context below the Localizations widget.</span></span><br><span class=\"line\">       <span class=\"comment\">// The onGenerateCallback() can refer to Localizations via its context</span></span><br><span class=\"line\">       <span class=\"comment\">// parameter.</span></span><br><span class=\"line\">       child: <span class=\"keyword\">new</span> Builder(                                             <span class=\"comment\">//5</span></span><br><span class=\"line\">         builder: (BuildContext context) &#123;</span><br><span class=\"line\">           <span class=\"built_in\">String</span> title = widget.title;</span><br><span class=\"line\">           <span class=\"keyword\">if</span> (widget.onGenerateTitle != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">             title = widget.onGenerateTitle(context);</span><br><span class=\"line\">             <span class=\"keyword\">assert</span>(title != <span class=\"keyword\">null</span>, <span class=\"string\">&#x27;onGenerateTitle must return a non-null String&#x27;</span>);</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Title(                                            <span class=\"comment\">//6</span></span><br><span class=\"line\">             title: title,</span><br><span class=\"line\">             color: widget.color,</span><br><span class=\"line\">             child: result,</span><br><span class=\"line\">           );</span><br><span class=\"line\">         &#125;,</span><br><span class=\"line\">       ),</span><br><span class=\"line\">     ),</span><br><span class=\"line\">   );</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p> 4  <code>Localizatins</code>_localizationsDelegates  Localizations widget </p>\n<p><img src=\"http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8A%E5%8D%8810.55.52.png\" alt=\"\"></p>\n<p> Localizations Localizations </p>\n<p> Localizations  StatefulWidget build  <code>initState</code> </p>\n<p>initState </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@override</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> initState() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">super</span>.initState();</span><br><span class=\"line\">  load(widget.locale);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> load </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> load(Locale locale) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"built_in\">Iterable</span>&lt;LocalizationsDelegate&lt;<span class=\"built_in\">dynamic</span>&gt;&gt; delegates = widget.delegates; <span class=\"comment\">// 1</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (delegates == <span class=\"keyword\">null</span> || delegates.isEmpty) &#123;</span><br><span class=\"line\">    _locale = locale;</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt; typeToResources;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> Future&lt;<span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt;&gt; typeToResourcesFuture = _loadAll(locale, delegates) <span class=\"comment\">//2</span></span><br><span class=\"line\">    .then((<span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt; value) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> typeToResources = value;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  </span><br><span class=\"line\">  ...</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> 1  delegates  MaterialApp  delegate  2  <code>_loadAll</code>  typeToResourcesFuture  <code>Map&lt;Type, dynamic&gt;</code> Type  Localizations dynamic  _loadAll </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Future&lt;<span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt;&gt; _loadAll(Locale locale, <span class=\"built_in\">Iterable</span>&lt;LocalizationsDelegate&lt;<span class=\"built_in\">dynamic</span>&gt;&gt; allDelegates) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt; output = &lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt;&#123;&#125;;</span><br><span class=\"line\">  <span class=\"built_in\">List</span>&lt;_Pending&gt; pendingList;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Only load the first delegate for each delegate type that supports</span></span><br><span class=\"line\">  <span class=\"comment\">// locale.languageCode.</span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"built_in\">Set</span>&lt;<span class=\"built_in\">Type</span>&gt; types = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>&lt;<span class=\"built_in\">Type</span>&gt;();</span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"built_in\">List</span>&lt;LocalizationsDelegate&lt;<span class=\"built_in\">dynamic</span>&gt;&gt; delegates = &lt;LocalizationsDelegate&lt;<span class=\"built_in\">dynamic</span>&gt;&gt;[];</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (LocalizationsDelegate&lt;<span class=\"built_in\">dynamic</span>&gt; delegate <span class=\"keyword\">in</span> allDelegates) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!types.contains(delegate.type) &amp;&amp; delegate.isSupported(locale)) &#123;</span><br><span class=\"line\">      types.add(delegate.type);</span><br><span class=\"line\">      delegates.add(delegate);          </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (LocalizationsDelegate&lt;<span class=\"built_in\">dynamic</span>&gt; delegate <span class=\"keyword\">in</span> delegates) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> Future&lt;<span class=\"built_in\">dynamic</span>&gt; inputValue = delegate.load(locale);    <span class=\"comment\">// 1</span></span><br><span class=\"line\">    <span class=\"built_in\">dynamic</span> completedValue;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> Future&lt;<span class=\"built_in\">dynamic</span>&gt; futureValue = inputValue.then&lt;<span class=\"built_in\">dynamic</span>&gt;((<span class=\"built_in\">dynamic</span> value) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> completedValue = value;                             <span class=\"comment\">// 2</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (completedValue != <span class=\"keyword\">null</span>) &#123; <span class=\"comment\">// inputValue was a SynchronousFuture</span></span><br><span class=\"line\">      <span class=\"keyword\">final</span> <span class=\"built_in\">Type</span> type = delegate.type;</span><br><span class=\"line\">      <span class=\"keyword\">assert</span>(!output.containsKey(type));</span><br><span class=\"line\">      output[type] = completedValue;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      pendingList ??= &lt;_Pending&gt;[];</span><br><span class=\"line\">      pendingList.add(<span class=\"keyword\">new</span> _Pending(delegate, futureValue));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// All of the delegate.load() values were synchronous futures, we&#x27;re done.</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (pendingList == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> SynchronousFuture&lt;<span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt;&gt;(output);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Some of delegate.load() values were asynchronous futures. Wait for them.</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> Future.wait&lt;<span class=\"built_in\">dynamic</span>&gt;(pendingList.map((_Pending p) =&gt; p.futureValue))</span><br><span class=\"line\">    .then&lt;<span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt;&gt;((<span class=\"built_in\">List</span>&lt;<span class=\"built_in\">dynamic</span>&gt; values) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">assert</span>(values.length == pendingList.length);</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; i &lt; values.length; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> <span class=\"built_in\">Type</span> type = pendingList[i].delegate.type;</span><br><span class=\"line\">        <span class=\"keyword\">assert</span>(!output.containsKey(type));</span><br><span class=\"line\">        output[type] = values[i];</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> output;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> 1  deletegate  load  Future DemoLocalizations  Future Future</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@override</span></span><br><span class=\"line\">Future&lt;DemoLocalizations&gt; load(Locale locale) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> SynchronousFuture&lt;DemoLocalizations&gt;(<span class=\"keyword\">new</span> DemoLocalizations(locale));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> SynchronousFuture  2  completedValue  DemoLocalizations  completedValue  output  _LocalizationsState  _typeToResources </p>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DemoLocalizations.of(context).taskTitle</span><br></pre></td></tr></table></figure>\n<p> DemoLocalizations </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> Localizations.of(context, DemoLocalizations);</span><br></pre></td></tr></table></figure>\n<p> Localizations  of </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> T of&lt;T&gt;(BuildContext context, <span class=\"built_in\">Type</span> type) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">assert</span>(context != <span class=\"keyword\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">assert</span>(type != <span class=\"keyword\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">final</span> _LocalizationsScope scope = context.inheritFromWidgetOfExactType(_LocalizationsScope);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> scope?.localizationsState?.resourcesFor&lt;T&gt;(type);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> context.inheritFromWidgetOfExactType  scope  context  _LocalizationsScope  widget  _LocalizationsScope  widget,</p>\n<p> _LocalizationsState  build </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@override</span></span><br><span class=\"line\">Widget build(BuildContext context) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (_locale == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Container();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> _LocalizationsScope(</span><br><span class=\"line\">    key: _localizedResourcesScopeKey,</span><br><span class=\"line\">    locale: _locale,</span><br><span class=\"line\">    localizationsState: <span class=\"keyword\">this</span>,</span><br><span class=\"line\">    typeToResources: _typeToResources,</span><br><span class=\"line\">    child: <span class=\"keyword\">new</span> Directionality(</span><br><span class=\"line\">      textDirection: _textDirection,</span><br><span class=\"line\">      child: widget.child,</span><br><span class=\"line\">    ),</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>() Localizations  Directionality_LocalizationsScopeContainer  _LocalizationsScope </p>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> scope?.localizationsState?.resourcesFor&lt;T&gt;(type);</span><br></pre></td></tr></table></figure>\n<p> _LocalizationsState  resourcesFor </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">T resourcesFor&lt;T&gt;(<span class=\"built_in\">Type</span> type) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">assert</span>(type != <span class=\"keyword\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">final</span> T resources = _typeToResources[type];</span><br><span class=\"line\">  <span class=\"keyword\">return</span> resources;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> type  _typeToResources  DemoLocalizations <br> widget </p>\n<p><img src=\"http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8B%E5%8D%882.29.45.png\" alt=\"\"></p>\n<h2 id=\"-App-\"><a href=\"#-App-\" class=\"headerlink\" title=\" App \"></a> App </h2><p> Flutter  Localizations  override  StatefulWidget  FreeLocalizations  State  _FreeLocalizations</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FreeLocalizations</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatefulWidget</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Widget child;</span><br><span class=\"line\"></span><br><span class=\"line\">  FreeLocalizations(&#123;Key key,<span class=\"keyword\">this</span>.child&#125;):<span class=\"keyword\">super</span>(key:key);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  State&lt;FreeLocalizations&gt; createState() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> _FreeLocalizations();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_FreeLocalizations</span> <span class=\"keyword\">extends</span> <span class=\"title\">State</span>&lt;<span class=\"title\">FreeLocalizations</span>&gt;</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  Locale _locale = <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>,<span class=\"string\">&#x27;CH&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  changeLocale(Locale locale)&#123;</span><br><span class=\"line\">    setState(()&#123;</span><br><span class=\"line\">      _locale = locale;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Localizations.override(</span><br><span class=\"line\">      context: context,</span><br><span class=\"line\">      locale: _locale,</span><br><span class=\"line\">      child: widget.child,</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> changeLocale  widget <br></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> main() &#123;</span><br><span class=\"line\">  runApp(<span class=\"keyword\">new</span> MyApp());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">GlobalKey&lt;_FreeLocalizations&gt; freeLocalizationStateKey = <span class=\"keyword\">new</span> GlobalKey&lt;_FreeLocalizations&gt;();   <span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyApp</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MaterialApp(</span><br><span class=\"line\">      onGenerateTitle: (context)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> DemoLocalizations.of(context).taskTitle;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      theme: <span class=\"keyword\">new</span> ThemeData(</span><br><span class=\"line\">        primarySwatch: Colors.blue,</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      home: <span class=\"keyword\">new</span> Builder(builder: (context)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> FreeLocalizations(</span><br><span class=\"line\">          key: freeLocalizationStateKey,</span><br><span class=\"line\">          child: <span class=\"keyword\">new</span> MyHomePage(),</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;),</span><br><span class=\"line\">      localizationsDelegates: [</span><br><span class=\"line\">        GlobalMaterialLocalizations.delegate,</span><br><span class=\"line\">        GlobalWidgetsLocalizations.delegate,</span><br><span class=\"line\">        DemoLocalizationsDelegate.delegate,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      supportedLocales: [</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>, <span class=\"string\">&#x27;CH&#x27;</span>),</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>, <span class=\"string\">&#x27;US&#x27;</span>),</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> FreeLocalizations  GlobalKey  1  MyHomePage  FreeLocalizations </p>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> changeLocale()&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(flag)&#123;</span><br><span class=\"line\">    freeLocalizationStateKey.currentState.changeLocale(<span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>,<span class=\"string\">&quot;CH&quot;</span>));</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    freeLocalizationStateKey.currentState.changeLocale(<span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>,<span class=\"string\">&quot;US&quot;</span>));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  flag = !flag;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"http://backup.flutter-dev.cn/localizatiion_free.gif\" alt=\"\"></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8B%E5%8D%883.34.41.png\" alt=\"\"></p>\n<p><a href=\"https://my.mindnode.com/7u6RudyGs5bqzX1WrxY5XtZZqUDBzqvL2NioVbrr\">https://my.mindnode.com/7u6RudyGs5bqzX1WrxY5XtZZqUDBzqvL2NioVbrr</a><br><a href=\"https://github.com/flutter-dev/internationalizing\">https://github.com/flutter-dev/internationalizing</a></p>\n","excerpt":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> 2015  Flutter  master  flutter_gallery  GDD Flutter  Google  Flutter </p>\n<p> UI </p>\n<p> Android  iOS  Flutter  Android  xml </p>","more":"<h2 id=\"-MaterialApp-\"><a href=\"#-MaterialApp-\" class=\"headerlink\" title=\" MaterialApp \"></a> MaterialApp </h2><p>Flutter  Flutter  MaterialApp  MaterialApp  Material Design AnimatedThemenGridPager  MaterialApp  MaterialApp </p>\n<p> Flutter </p>\n<p><img src=\"http://cdn.zqlxtt.cn/device-2017-12-21-214051.png\" alt=\"\"></p>\n<p> pubspec.yaml </p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">flutter_localizations:</span></span><br><span class=\"line\">  <span class=\"attr\">sdk:</span> <span class=\"string\">flutter</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flutter packages get</span><br></pre></td></tr></table></figure>\n\n<p> </p>\n<p> main.dart  import </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:flutter_localizations/flutter_localizations.dart&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n\n\n<p> MaterialApp  <code>localizationsDelegates</code>  <code>supportedLocales</code> </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyApp</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MaterialApp(</span><br><span class=\"line\">      title: <span class=\"string\">&#x27;Flutter Demo&#x27;</span>,</span><br><span class=\"line\">      theme: <span class=\"keyword\">new</span> ThemeData(</span><br><span class=\"line\">        primarySwatch: Colors.blue,</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      home: <span class=\"keyword\">new</span> MyHomePage(title: <span class=\"string\">&#x27;Flutter Demo Home Page&#x27;</span>),</span><br><span class=\"line\">      localizationsDelegates: [                             <span class=\"comment\">//</span></span><br><span class=\"line\">        GlobalMaterialLocalizations.delegate,</span><br><span class=\"line\">        GlobalWidgetsLocalizations.delegate,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      supportedLocales: [                                   <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>,<span class=\"string\">&#x27;CH&#x27;</span>),</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>,<span class=\"string\">&#x27;US&#x27;</span>),</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p></p>\n<p><img src=\"http://backup.flutter-dev.cn/device-2017-12-21-215330.png\" alt=\"\"></p>\n<p> Dialog  titlebar </p>\n<p> titlebar </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">home: <span class=\"keyword\">new</span> MyHomePage(title: <span class=\"string\">&#x27;Flutter Demo Home Page&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>Flutter </p>\n<p> <code>GlobalMaterialLocalizations</code></p>\n<p> Flutter </p>\n<ul>\n<li>Flutter Demo</li>\n<li>Flutter Demo Home Page</li>\n<li>You have pushed the button this many times:</li>\n<li>Increment</li>\n</ul>\n<p></p>\n<ul>\n<li>Flutter </li>\n<li>Flutter </li>\n<li></li>\n<li></li>\n</ul>\n<p> Localizations  Localizations  DemoLocalizations ,</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DemoLocalizations</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Locale locale;</span><br><span class=\"line\"></span><br><span class=\"line\">  DemoLocalizations(<span class=\"keyword\">this</span>.locale);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">String</span>, <span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">String</span>, <span class=\"built_in\">String</span>&gt;&gt; _localizedValues = &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;en&#x27;</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&#x27;task title&#x27;</span>: <span class=\"string\">&#x27;Flutter Demo&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;titlebar title&#x27;</span>: <span class=\"string\">&#x27;Flutter Demo Home Page&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;click tip&#x27;</span>: <span class=\"string\">&#x27;You have pushed the button this many times:&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;inc&#x27;</span>:<span class=\"string\">&#x27;Increment&#x27;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&#x27;zh&#x27;</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&#x27;task title&#x27;</span>: <span class=\"string\">&#x27;Flutter &#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;titlebar title&#x27;</span>: <span class=\"string\">&#x27;Flutter &#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;click tip&#x27;</span>: <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;inc&#x27;</span>:<span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> taskTitle&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;task title&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> titleBarTitle&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;titlebar title&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> clickTop&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;click tip&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">get</span> inc&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;inc&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> DemoLocalizations <code>taskTitle</code><code>titleBarTitle</code><code>clickTop</code></p>\n<p> DemoLocalizations  <code>LocalizationsDelegate</code>LocalizationsDelegate </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DemoLocalizationsDelegate</span> <span class=\"keyword\">extends</span> <span class=\"title\">LocalizationsDelegate</span>&lt;<span class=\"title\">DemoLocalizations</span>&gt;</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> DemoLocalizationsDelegate();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  <span class=\"built_in\">bool</span> isSupported(Locale locale) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> [<span class=\"string\">&#x27;en&#x27;</span>,<span class=\"string\">&#x27;zh&#x27;</span>].contains(locale.languageCode);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Future&lt;DemoLocalizations&gt; load(Locale locale) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> SynchronousFuture&lt;DemoLocalizations&gt;(<span class=\"keyword\">new</span> DemoLocalizations(locale));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  <span class=\"built_in\">bool</span> shouldReload(LocalizationsDelegate&lt;DemoLocalizations&gt; old) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">static</span> DemoLocalizationsDelegate delegate = <span class=\"keyword\">const</span> DemoLocalizationsDelegate();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>load</code> DemoLocalizations</p>\n<p> DemoLocalizationsDelegate  MaterialApp</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyApp</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MaterialApp(</span><br><span class=\"line\">      title: <span class=\"string\">&#x27;Flutter Demo&#x27;</span>,</span><br><span class=\"line\">      theme: <span class=\"keyword\">new</span> ThemeData(</span><br><span class=\"line\">        primarySwatch: Colors.blue,</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      home: <span class=\"keyword\">new</span> MyHomePage(title: <span class=\"string\">&#x27;Flutter Demo Home Page&#x27;</span>),</span><br><span class=\"line\">      localizationsDelegates: [</span><br><span class=\"line\">        GlobalMaterialLocalizations.delegate,</span><br><span class=\"line\">        GlobalWidgetsLocalizations.delegate,</span><br><span class=\"line\">        DemoLocalizationsDelegate.delegate,                 <span class=\"comment\">//</span></span><br><span class=\"line\">      ],</span><br><span class=\"line\">      supportedLocales: [</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>, <span class=\"string\">&#x27;CH&#x27;</span>),</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>, <span class=\"string\">&#x27;US&#x27;</span>),</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>DemoLocalizationsDelegate  MaterialApp DemoLocalizations  Weidget  <code>Localizations</code> Localizations  WidgetDemoLocalizationsDelegate  MaterialApp MaterialApp  Localizations  Widget LocalizationsDelegate </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Localizations(&#123;</span><br><span class=\"line\">  Key key,</span><br><span class=\"line\">  <span class=\"meta\">@required</span> <span class=\"keyword\">this</span>.locale,</span><br><span class=\"line\">  <span class=\"meta\">@required</span> <span class=\"keyword\">this</span>.delegates,                              <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.child,</span><br><span class=\"line\">&#125;) : <span class=\"keyword\">assert</span>(locale != <span class=\"keyword\">null</span>),</span><br><span class=\"line\">     <span class=\"keyword\">assert</span>(delegates != <span class=\"keyword\">null</span>),</span><br><span class=\"line\">     <span class=\"keyword\">assert</span>(delegates.any(</span><br><span class=\"line\">             (LocalizationsDelegate&lt;<span class=\"built_in\">dynamic</span>&gt; delegate)</span><br><span class=\"line\">               =&gt; delegate <span class=\"keyword\">is</span> LocalizationsDelegate&lt;WidgetsLocalizations&gt;)</span><br><span class=\"line\">           ),</span><br><span class=\"line\">     <span class=\"keyword\">super</span>(key: key);</span><br></pre></td></tr></table></figure>\n\n<p> DemoLocalizations  Localizations  DemoLocalizationsDelegate  DemoLocalizations  Localizations  Widget </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Localizations.of(context, DemoLocalizations);</span><br></pre></td></tr></table></figure>\n\n<p><code>of</code> DemoLocalizations  DemoLocalizations </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DemoLocalizations</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Locale locale;</span><br><span class=\"line\"></span><br><span class=\"line\">  DemoLocalizations(<span class=\"keyword\">this</span>.locale);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">String</span>, <span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">String</span>, <span class=\"built_in\">String</span>&gt;&gt; _localizedValues = &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;en&#x27;</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&#x27;task title&#x27;</span>: <span class=\"string\">&#x27;Flutter Demo&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;titlebar title&#x27;</span>: <span class=\"string\">&#x27;Flutter Demo Home Page&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;click tip&#x27;</span>: <span class=\"string\">&#x27;You have pushed the button this many times:&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;inc&#x27;</span>:<span class=\"string\">&#x27;Increment&#x27;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&#x27;zh&#x27;</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&#x27;task title&#x27;</span>: <span class=\"string\">&#x27;Flutter &#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;titlebar title&#x27;</span>: <span class=\"string\">&#x27;Flutter &#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;click tip&#x27;</span>: <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;inc&#x27;</span>:<span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> taskTitle&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;task title&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> titleBarTitle&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;titlebar title&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> clickTop&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;click tip&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> inc&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _localizedValues[locale.languageCode][<span class=\"string\">&#x27;inc&#x27;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> DemoLocalizations of(BuildContext context)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Localizations.of(context, DemoLocalizations);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> DemoLocalizations </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;dart:async&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:flutter_localizations/flutter_localizations.dart&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;package:flutter/foundation.dart&#x27;</span> <span class=\"keyword\">show</span> SynchronousFuture;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">void</span> main() &#123;</span><br><span class=\"line\">  runApp(<span class=\"keyword\">new</span> MyApp());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyApp</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MaterialApp(</span><br><span class=\"line\">      title: DemoLocalizations.of(context).taskTitle,                           <span class=\"comment\">// 1</span></span><br><span class=\"line\">      theme: <span class=\"keyword\">new</span> ThemeData(</span><br><span class=\"line\">        primarySwatch: Colors.blue,</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      home: <span class=\"keyword\">new</span> MyHomePage(title: DemoLocalizations.of(context).titleBarTitle), <span class=\"comment\">// 2</span></span><br><span class=\"line\">      localizationsDelegates: [</span><br><span class=\"line\">        GlobalMaterialLocalizations.delegate,</span><br><span class=\"line\">        GlobalWidgetsLocalizations.delegate,</span><br><span class=\"line\">        DemoLocalizationsDelegate.delegate,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      supportedLocales: [</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>, <span class=\"string\">&#x27;CH&#x27;</span>),</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>, <span class=\"string\">&#x27;US&#x27;</span>),</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHomePage</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatefulWidget</span> </span>&#123;</span><br><span class=\"line\">  MyHomePage(&#123;Key key, <span class=\"keyword\">this</span>.title&#125;) : <span class=\"keyword\">super</span>(key: key);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"built_in\">String</span> title;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  _MyHomePageState createState() =&gt; <span class=\"keyword\">new</span> _MyHomePageState();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_MyHomePageState</span> <span class=\"keyword\">extends</span> <span class=\"title\">State</span>&lt;<span class=\"title\">MyHomePage</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">int</span> _counter = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">void</span> _incrementCounter() &#123;</span><br><span class=\"line\">    showDatePicker(context: context,</span><br><span class=\"line\">        initialDate: <span class=\"keyword\">new</span> <span class=\"built_in\">DateTime</span>.now(),</span><br><span class=\"line\">        firstDate: <span class=\"keyword\">new</span> <span class=\"built_in\">DateTime</span>.now().subtract(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(days: <span class=\"number\">30</span>)),</span><br><span class=\"line\">        lastDate: <span class=\"keyword\">new</span> <span class=\"built_in\">DateTime</span>.now().add(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(days: <span class=\"number\">30</span>))).then((v) &#123;&#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Scaffold(</span><br><span class=\"line\">      appBar: <span class=\"keyword\">new</span> AppBar(</span><br><span class=\"line\">        title: <span class=\"keyword\">new</span> Text(widget.title),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      body: <span class=\"keyword\">new</span> Center(</span><br><span class=\"line\">        child: <span class=\"keyword\">new</span> Column(</span><br><span class=\"line\">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class=\"line\">          children: &lt;Widget&gt;[</span><br><span class=\"line\">            <span class=\"keyword\">new</span> Text(</span><br><span class=\"line\">              DemoLocalizations.of(context).clickTop,                          <span class=\"comment\">// 3</span></span><br><span class=\"line\">            ),</span><br><span class=\"line\">            <span class=\"keyword\">new</span> Text(</span><br><span class=\"line\">              <span class=\"string\">&#x27;<span class=\"subst\">$_counter</span>&#x27;</span>,</span><br><span class=\"line\">              style: Theme</span><br><span class=\"line\">                  .of(context)</span><br><span class=\"line\">                  .textTheme</span><br><span class=\"line\">                  .display1,</span><br><span class=\"line\">            ),</span><br><span class=\"line\">          ],</span><br><span class=\"line\">        ),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      floatingActionButton: <span class=\"keyword\">new</span> FloatingActionButton(</span><br><span class=\"line\">        onPressed: _incrementCounter,</span><br><span class=\"line\">        tooltip: DemoLocalizations.of(context).inc,                           <span class=\"comment\">// 4</span></span><br><span class=\"line\">        child: <span class=\"keyword\">new</span> Icon(Icons.add),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"http://backup.flutter-dev.cn/device-2017-12-21-231417.png\" alt=\"\"></p>\n<p> </p>\n<p></p>\n<p>The getter taskTitle was called on null. 1  DemoLocalizations  Localizations.of </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> T of&lt;T&gt;(BuildContext context, <span class=\"built_in\">Type</span> type) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">assert</span>(context != <span class=\"keyword\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">assert</span>(type != <span class=\"keyword\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">final</span> _LocalizationsScope scope =       </span><br><span class=\"line\">           context.inheritFromWidgetOfExactType(_LocalizationsScope); <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> scope?.localizationsState?.resourcesFor&lt;T&gt;(type);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>context.inheritFromWidgetOfExactType</code></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">InheritedWidget inheritFromWidgetOfExactType(<span class=\"built_in\">Type</span> targetType);</span><br></pre></td></tr></table></figure>\n\n<p> BuildContext  targetType  context  targetType  InheriteWidget  <code>_LocalizationsScope</code> InheriteWidget context  _LocalizationsScope taskTitle </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyApp</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MaterialApp(</span><br><span class=\"line\">      title: DemoLocalizations.of(context).taskTitle,                           <span class=\"comment\">// </span></span><br><span class=\"line\">      theme: <span class=\"keyword\">new</span> ThemeData(</span><br><span class=\"line\">        primarySwatch: Colors.blue,</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      home: <span class=\"keyword\">new</span> MyHomePage(title: DemoLocalizations.of(context).titleBarTitle),</span><br><span class=\"line\">      localizationsDelegates: [</span><br><span class=\"line\">        GlobalMaterialLocalizations.delegate,</span><br><span class=\"line\">        GlobalWidgetsLocalizations.delegate,</span><br><span class=\"line\">        DemoLocalizationsDelegate.delegate,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      supportedLocales: [</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>, <span class=\"string\">&#x27;CH&#x27;</span>),</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>, <span class=\"string\">&#x27;US&#x27;</span>),</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p> taskTitle  context  build  Localizations  MaterialApp  DemoLocalizations  context  MaterialApp  context  DemoLocalizations  DemoLocalizations  MaterialApp  title  context  MaterialApp </p>\n<p> title </p>\n<p></p>\n<p> title </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// <span class=\"language-markdown\">A one-line description used by the device to identify the app for the user.</span></span></span><br><span class=\"line\"><span class=\"comment\">///</span></span><br><span class=\"line\"><span class=\"comment\">/// <span class=\"language-markdown\">On Android the titles appear above the task manager&#x27;s app snapshots which are</span></span></span><br><span class=\"line\"><span class=\"comment\">/// <span class=\"language-markdown\">displayed when the user presses the &quot;recent apps&quot; button. Similarly, on</span></span></span><br><span class=\"line\"><span class=\"comment\">/// <span class=\"language-markdown\">iOS the titles appear in the App Switcher when the user double presses the</span></span></span><br><span class=\"line\"><span class=\"comment\">/// <span class=\"language-markdown\">home button.</span></span></span><br><span class=\"line\"><span class=\"comment\">///</span></span><br><span class=\"line\"><span class=\"comment\">/// <span class=\"language-markdown\">To provide a localized title instead, use [onGenerateTitle].</span></span></span><br><span class=\"line\"><span class=\"comment\">///</span></span><br><span class=\"line\"><span class=\"comment\">/// <span class=\"language-markdown\">This value is passed unmodified to [WidgetsApp.title].</span></span></span><br><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"built_in\">String</span> title;</span><br></pre></td></tr></table></figure>\n\n<p>To provide a localized title instead, use [onGenerateTitle].</p>\n<p> title  <code>onGenerateTitle</code></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyApp</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MaterialApp(</span><br><span class=\"line\">      onGenerateTitle: (context)&#123;                                              <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> DemoLocalizations.of(context).taskTitle;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      theme: <span class=\"keyword\">new</span> ThemeData(</span><br><span class=\"line\">        primarySwatch: Colors.blue,</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      home: <span class=\"keyword\">new</span> MyHomePage(title: DemoLocalizations.of(context).titleBarTitle),</span><br><span class=\"line\">      localizationsDelegates: [</span><br><span class=\"line\">        GlobalMaterialLocalizations.delegate,</span><br><span class=\"line\">        GlobalWidgetsLocalizations.delegate,</span><br><span class=\"line\">        DemoLocalizationsDelegate.delegate,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      supportedLocales: [</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>, <span class=\"string\">&#x27;CH&#x27;</span>),</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>, <span class=\"string\">&#x27;US&#x27;</span>),</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p> taskTitle  titleBarTitle  context  MaterialApp  context title  MyHomePage  MyHomePage  title  AppBar </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHomePage</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatefulWidget</span> </span>&#123;</span><br><span class=\"line\">  MyHomePage(&#123;Key key&#125;) : <span class=\"keyword\">super</span>(key: key);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  _MyHomePageState createState() =&gt; <span class=\"keyword\">new</span> _MyHomePageState();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_MyHomePageState</span> <span class=\"keyword\">extends</span> <span class=\"title\">State</span>&lt;<span class=\"title\">MyHomePage</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">int</span> _counter = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">void</span> _incrementCounter() &#123;</span><br><span class=\"line\">    showDatePicker(context: context,</span><br><span class=\"line\">        initialDate: <span class=\"keyword\">new</span> <span class=\"built_in\">DateTime</span>.now(),</span><br><span class=\"line\">        firstDate: <span class=\"keyword\">new</span> <span class=\"built_in\">DateTime</span>.now().subtract(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(days: <span class=\"number\">30</span>)),</span><br><span class=\"line\">        lastDate: <span class=\"keyword\">new</span> <span class=\"built_in\">DateTime</span>.now().add(<span class=\"keyword\">new</span> <span class=\"built_in\">Duration</span>(days: <span class=\"number\">30</span>))).then((v) &#123;&#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Scaffold(</span><br><span class=\"line\">      appBar: <span class=\"keyword\">new</span> AppBar(</span><br><span class=\"line\">        title: <span class=\"keyword\">new</span> Text(DemoLocalizations.of(context).titleBarTitle),            <span class=\"comment\">// </span></span><br><span class=\"line\">      ),</span><br><span class=\"line\">      body: <span class=\"keyword\">new</span> Center(</span><br><span class=\"line\">        child: <span class=\"keyword\">new</span> Column(</span><br><span class=\"line\">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class=\"line\">          children: &lt;Widget&gt;[</span><br><span class=\"line\">            <span class=\"keyword\">new</span> Text(</span><br><span class=\"line\">              DemoLocalizations.of(context).clickTop,</span><br><span class=\"line\">            ),</span><br><span class=\"line\">            <span class=\"keyword\">new</span> Text(</span><br><span class=\"line\">              <span class=\"string\">&#x27;<span class=\"subst\">$_counter</span>&#x27;</span>,</span><br><span class=\"line\">              style: Theme</span><br><span class=\"line\">                  .of(context)</span><br><span class=\"line\">                  .textTheme</span><br><span class=\"line\">                  .display1,</span><br><span class=\"line\">            ),</span><br><span class=\"line\">          ],</span><br><span class=\"line\">        ),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      floatingActionButton: <span class=\"keyword\">new</span> FloatingActionButton(</span><br><span class=\"line\">        onPressed: _incrementCounter,</span><br><span class=\"line\">        tooltip: DemoLocalizations.of(context).inc,</span><br><span class=\"line\">        child: <span class=\"keyword\">new</span> Icon(Icons.add),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p></p>\n<p><img src=\"http://backup.flutter-dev.cn/device-2017-12-22-001905.png\" alt=\"\"></p>\n<p><img src=\"http://backup.flutter-dev.cn/device-2017-12-22-002133.png\" alt=\"\"></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> MaterialApp  DemoLocalizations Map  DemoLocalizatins </p>\n<p> MaterialApp  MaterialApp  MaterialApp </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MaterialApp(&#123; <span class=\"comment\">// can&#x27;t be const because the asserts use methods on Map :-(</span></span><br><span class=\"line\">  Key key,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.title: <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.onGenerateTitle,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.color,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.theme,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.home,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.routes: <span class=\"keyword\">const</span> &lt;<span class=\"built_in\">String</span>, WidgetBuilder&gt;&#123;&#125;,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.initialRoute,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.onGenerateRoute,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.onUnknownRoute,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.locale,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.localizationsDelegates,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.localeResolutionCallback,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.supportedLocales: <span class=\"keyword\">const</span> &lt;Locale&gt;[<span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>, <span class=\"string\">&#x27;US&#x27;</span>)],</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.navigatorObservers: <span class=\"keyword\">const</span> &lt;NavigatorObserver&gt;[],</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.debugShowMaterialGrid: <span class=\"keyword\">false</span>,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.showPerformanceOverlay: <span class=\"keyword\">false</span>,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.checkerboardRasterCacheImages: <span class=\"keyword\">false</span>,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.checkerboardOffscreenLayers: <span class=\"keyword\">false</span>,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.showSemanticsDebugger: <span class=\"keyword\">false</span>,</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.debugShowCheckedModeBanner: <span class=\"keyword\">true</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p> <code>localizationsDelegates</code> MaterialApp  StatefulWidget State  <code>_MaterialAppState</code> build </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> ThemeData theme = widget.theme ?? <span class=\"keyword\">new</span> ThemeData.fallback();</span><br><span class=\"line\">    Widget result = <span class=\"keyword\">new</span> AnimatedTheme(                                <span class=\"comment\">// 1</span></span><br><span class=\"line\">      data: theme,</span><br><span class=\"line\">      isMaterialAppTheme: <span class=\"keyword\">true</span>,</span><br><span class=\"line\">      child: <span class=\"keyword\">new</span> WidgetsApp(                                          <span class=\"comment\">//2</span></span><br><span class=\"line\">        key: <span class=\"keyword\">new</span> GlobalObjectKey(<span class=\"keyword\">this</span>),</span><br><span class=\"line\">        title: widget.title,</span><br><span class=\"line\">        onGenerateTitle: widget.onGenerateTitle,</span><br><span class=\"line\">        textStyle: _errorTextStyle,</span><br><span class=\"line\">        <span class=\"comment\">// blue is the primary color of the default theme</span></span><br><span class=\"line\">        color: widget.color ?? theme?.primaryColor ?? Colors.blue,</span><br><span class=\"line\">        navigatorObservers:</span><br><span class=\"line\">            <span class=\"keyword\">new</span> <span class=\"built_in\">List</span>&lt;NavigatorObserver&gt;.from(widget.navigatorObservers)</span><br><span class=\"line\">              ..add(_heroController),</span><br><span class=\"line\">        initialRoute: widget.initialRoute,</span><br><span class=\"line\">        onGenerateRoute: _onGenerateRoute,</span><br><span class=\"line\">        onUnknownRoute: _onUnknownRoute,</span><br><span class=\"line\">        locale: widget.locale,</span><br><span class=\"line\">        localizationsDelegates: _localizationsDelegates,                  <span class=\"comment\">//3</span></span><br><span class=\"line\">        localeResolutionCallback: widget.localeResolutionCallback,</span><br><span class=\"line\">        supportedLocales: widget.supportedLocales,</span><br><span class=\"line\">        showPerformanceOverlay: widget.showPerformanceOverlay,</span><br><span class=\"line\">        checkerboardRasterCacheImages: widget.checkerboardRasterCacheImages,</span><br><span class=\"line\">        checkerboardOffscreenLayers: widget.checkerboardOffscreenLayers,</span><br><span class=\"line\">        showSemanticsDebugger: widget.showSemanticsDebugger,</span><br><span class=\"line\">        debugShowCheckedModeBanner: widget.debugShowCheckedModeBanner,</span><br><span class=\"line\">        inspectorSelectButtonBuilder: (BuildContext context, VoidCallback onPressed) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> FloatingActionButton(</span><br><span class=\"line\">            child: <span class=\"keyword\">const</span> Icon(Icons.search),</span><br><span class=\"line\">            onPressed: onPressed,</span><br><span class=\"line\">            mini: <span class=\"keyword\">true</span>,</span><br><span class=\"line\">          );</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      )</span><br><span class=\"line\">    );</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">assert</span>(() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (widget.debugShowMaterialGrid) &#123;    <span class=\"comment\">//</span></span><br><span class=\"line\">        result = <span class=\"keyword\">new</span> GridPaper(</span><br><span class=\"line\">          color: <span class=\"keyword\">const</span> Color(<span class=\"number\">0xE0F9BBE0</span>),</span><br><span class=\"line\">          interval: <span class=\"number\">8.0</span>,</span><br><span class=\"line\">          divisions: <span class=\"number\">2</span>,</span><br><span class=\"line\">          subdivisions: <span class=\"number\">1</span>,</span><br><span class=\"line\">          child: result,</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ScrollConfiguration(                                <span class=\"comment\">// 4</span></span><br><span class=\"line\">      behavior: <span class=\"keyword\">new</span> _MaterialScrollBehavior(),</span><br><span class=\"line\">      child: result,</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<p> 3  _localizationsDelegates  WidgetsApp  localizationsDelegates  124  Widget  widget </p>\n<p><img src=\"http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8A%E5%8D%8810.45.47.png\" alt=\"\"></p>\n<p> WidgetApp  StatefulWidget State  <code>_WidgetsAppState</code> build </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Widget build(BuildContext context) &#123;</span><br><span class=\"line\">   Widget result = <span class=\"keyword\">new</span> Navigator(                                    <span class=\"comment\">// 1</span></span><br><span class=\"line\">     key: _navigator,</span><br><span class=\"line\">     initialRoute: widget.initialRoute ?? ui.<span class=\"built_in\">window</span>.defaultRouteName,</span><br><span class=\"line\">     onGenerateRoute: widget.onGenerateRoute,</span><br><span class=\"line\">     onUnknownRoute: widget.onUnknownRoute,</span><br><span class=\"line\">     observers: widget.navigatorObservers,</span><br><span class=\"line\">   );</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (widget.textStyle != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">     result = <span class=\"keyword\">new</span> DefaultTextStyle(                                    <span class=\"comment\">//2</span></span><br><span class=\"line\">       style: widget.textStyle,</span><br><span class=\"line\">       child: result,</span><br><span class=\"line\">     );</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   ... <span class=\"comment\">//</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MediaQuery(                                              <span class=\"comment\">//3</span></span><br><span class=\"line\">     data: <span class=\"keyword\">new</span> MediaQueryData.fromWindow(ui.<span class=\"built_in\">window</span>),</span><br><span class=\"line\">     child: <span class=\"keyword\">new</span> Localizations(                                         <span class=\"comment\">//4</span></span><br><span class=\"line\">       locale: widget.locale ?? _locale,</span><br><span class=\"line\">       delegates: _localizationsDelegates.toList(),</span><br><span class=\"line\">       <span class=\"comment\">// This Builder exists to provide a context below the Localizations widget.</span></span><br><span class=\"line\">       <span class=\"comment\">// The onGenerateCallback() can refer to Localizations via its context</span></span><br><span class=\"line\">       <span class=\"comment\">// parameter.</span></span><br><span class=\"line\">       child: <span class=\"keyword\">new</span> Builder(                                             <span class=\"comment\">//5</span></span><br><span class=\"line\">         builder: (BuildContext context) &#123;</span><br><span class=\"line\">           <span class=\"built_in\">String</span> title = widget.title;</span><br><span class=\"line\">           <span class=\"keyword\">if</span> (widget.onGenerateTitle != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">             title = widget.onGenerateTitle(context);</span><br><span class=\"line\">             <span class=\"keyword\">assert</span>(title != <span class=\"keyword\">null</span>, <span class=\"string\">&#x27;onGenerateTitle must return a non-null String&#x27;</span>);</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Title(                                            <span class=\"comment\">//6</span></span><br><span class=\"line\">             title: title,</span><br><span class=\"line\">             color: widget.color,</span><br><span class=\"line\">             child: result,</span><br><span class=\"line\">           );</span><br><span class=\"line\">         &#125;,</span><br><span class=\"line\">       ),</span><br><span class=\"line\">     ),</span><br><span class=\"line\">   );</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p> 4  <code>Localizatins</code>_localizationsDelegates  Localizations widget </p>\n<p><img src=\"http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8A%E5%8D%8810.55.52.png\" alt=\"\"></p>\n<p> Localizations Localizations </p>\n<p> Localizations  StatefulWidget build  <code>initState</code> </p>\n<p>initState </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@override</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> initState() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">super</span>.initState();</span><br><span class=\"line\">  load(widget.locale);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> load </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> load(Locale locale) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"built_in\">Iterable</span>&lt;LocalizationsDelegate&lt;<span class=\"built_in\">dynamic</span>&gt;&gt; delegates = widget.delegates; <span class=\"comment\">// 1</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (delegates == <span class=\"keyword\">null</span> || delegates.isEmpty) &#123;</span><br><span class=\"line\">    _locale = locale;</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt; typeToResources;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> Future&lt;<span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt;&gt; typeToResourcesFuture = _loadAll(locale, delegates) <span class=\"comment\">//2</span></span><br><span class=\"line\">    .then((<span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt; value) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> typeToResources = value;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  </span><br><span class=\"line\">  ...</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> 1  delegates  MaterialApp  delegate  2  <code>_loadAll</code>  typeToResourcesFuture  <code>Map&lt;Type, dynamic&gt;</code> Type  Localizations dynamic  _loadAll </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Future&lt;<span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt;&gt; _loadAll(Locale locale, <span class=\"built_in\">Iterable</span>&lt;LocalizationsDelegate&lt;<span class=\"built_in\">dynamic</span>&gt;&gt; allDelegates) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt; output = &lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt;&#123;&#125;;</span><br><span class=\"line\">  <span class=\"built_in\">List</span>&lt;_Pending&gt; pendingList;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Only load the first delegate for each delegate type that supports</span></span><br><span class=\"line\">  <span class=\"comment\">// locale.languageCode.</span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"built_in\">Set</span>&lt;<span class=\"built_in\">Type</span>&gt; types = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>&lt;<span class=\"built_in\">Type</span>&gt;();</span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"built_in\">List</span>&lt;LocalizationsDelegate&lt;<span class=\"built_in\">dynamic</span>&gt;&gt; delegates = &lt;LocalizationsDelegate&lt;<span class=\"built_in\">dynamic</span>&gt;&gt;[];</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (LocalizationsDelegate&lt;<span class=\"built_in\">dynamic</span>&gt; delegate <span class=\"keyword\">in</span> allDelegates) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!types.contains(delegate.type) &amp;&amp; delegate.isSupported(locale)) &#123;</span><br><span class=\"line\">      types.add(delegate.type);</span><br><span class=\"line\">      delegates.add(delegate);          </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (LocalizationsDelegate&lt;<span class=\"built_in\">dynamic</span>&gt; delegate <span class=\"keyword\">in</span> delegates) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> Future&lt;<span class=\"built_in\">dynamic</span>&gt; inputValue = delegate.load(locale);    <span class=\"comment\">// 1</span></span><br><span class=\"line\">    <span class=\"built_in\">dynamic</span> completedValue;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> Future&lt;<span class=\"built_in\">dynamic</span>&gt; futureValue = inputValue.then&lt;<span class=\"built_in\">dynamic</span>&gt;((<span class=\"built_in\">dynamic</span> value) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> completedValue = value;                             <span class=\"comment\">// 2</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (completedValue != <span class=\"keyword\">null</span>) &#123; <span class=\"comment\">// inputValue was a SynchronousFuture</span></span><br><span class=\"line\">      <span class=\"keyword\">final</span> <span class=\"built_in\">Type</span> type = delegate.type;</span><br><span class=\"line\">      <span class=\"keyword\">assert</span>(!output.containsKey(type));</span><br><span class=\"line\">      output[type] = completedValue;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      pendingList ??= &lt;_Pending&gt;[];</span><br><span class=\"line\">      pendingList.add(<span class=\"keyword\">new</span> _Pending(delegate, futureValue));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// All of the delegate.load() values were synchronous futures, we&#x27;re done.</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (pendingList == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> SynchronousFuture&lt;<span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt;&gt;(output);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Some of delegate.load() values were asynchronous futures. Wait for them.</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> Future.wait&lt;<span class=\"built_in\">dynamic</span>&gt;(pendingList.map((_Pending p) =&gt; p.futureValue))</span><br><span class=\"line\">    .then&lt;<span class=\"built_in\">Map</span>&lt;<span class=\"built_in\">Type</span>, <span class=\"built_in\">dynamic</span>&gt;&gt;((<span class=\"built_in\">List</span>&lt;<span class=\"built_in\">dynamic</span>&gt; values) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">assert</span>(values.length == pendingList.length);</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; i &lt; values.length; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> <span class=\"built_in\">Type</span> type = pendingList[i].delegate.type;</span><br><span class=\"line\">        <span class=\"keyword\">assert</span>(!output.containsKey(type));</span><br><span class=\"line\">        output[type] = values[i];</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> output;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> 1  deletegate  load  Future DemoLocalizations  Future Future</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@override</span></span><br><span class=\"line\">Future&lt;DemoLocalizations&gt; load(Locale locale) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> SynchronousFuture&lt;DemoLocalizations&gt;(<span class=\"keyword\">new</span> DemoLocalizations(locale));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> SynchronousFuture  2  completedValue  DemoLocalizations  completedValue  output  _LocalizationsState  _typeToResources </p>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DemoLocalizations.of(context).taskTitle</span><br></pre></td></tr></table></figure>\n<p> DemoLocalizations </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> Localizations.of(context, DemoLocalizations);</span><br></pre></td></tr></table></figure>\n<p> Localizations  of </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> T of&lt;T&gt;(BuildContext context, <span class=\"built_in\">Type</span> type) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">assert</span>(context != <span class=\"keyword\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">assert</span>(type != <span class=\"keyword\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">final</span> _LocalizationsScope scope = context.inheritFromWidgetOfExactType(_LocalizationsScope);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> scope?.localizationsState?.resourcesFor&lt;T&gt;(type);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> context.inheritFromWidgetOfExactType  scope  context  _LocalizationsScope  widget  _LocalizationsScope  widget,</p>\n<p> _LocalizationsState  build </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@override</span></span><br><span class=\"line\">Widget build(BuildContext context) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (_locale == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Container();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> _LocalizationsScope(</span><br><span class=\"line\">    key: _localizedResourcesScopeKey,</span><br><span class=\"line\">    locale: _locale,</span><br><span class=\"line\">    localizationsState: <span class=\"keyword\">this</span>,</span><br><span class=\"line\">    typeToResources: _typeToResources,</span><br><span class=\"line\">    child: <span class=\"keyword\">new</span> Directionality(</span><br><span class=\"line\">      textDirection: _textDirection,</span><br><span class=\"line\">      child: widget.child,</span><br><span class=\"line\">    ),</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>() Localizations  Directionality_LocalizationsScopeContainer  _LocalizationsScope </p>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> scope?.localizationsState?.resourcesFor&lt;T&gt;(type);</span><br></pre></td></tr></table></figure>\n<p> _LocalizationsState  resourcesFor </p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">T resourcesFor&lt;T&gt;(<span class=\"built_in\">Type</span> type) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">assert</span>(type != <span class=\"keyword\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">final</span> T resources = _typeToResources[type];</span><br><span class=\"line\">  <span class=\"keyword\">return</span> resources;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> type  _typeToResources  DemoLocalizations <br> widget </p>\n<p><img src=\"http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8B%E5%8D%882.29.45.png\" alt=\"\"></p>\n<h2 id=\"-App-\"><a href=\"#-App-\" class=\"headerlink\" title=\" App \"></a> App </h2><p> Flutter  Localizations  override  StatefulWidget  FreeLocalizations  State  _FreeLocalizations</p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FreeLocalizations</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatefulWidget</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Widget child;</span><br><span class=\"line\"></span><br><span class=\"line\">  FreeLocalizations(&#123;Key key,<span class=\"keyword\">this</span>.child&#125;):<span class=\"keyword\">super</span>(key:key);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  State&lt;FreeLocalizations&gt; createState() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> _FreeLocalizations();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_FreeLocalizations</span> <span class=\"keyword\">extends</span> <span class=\"title\">State</span>&lt;<span class=\"title\">FreeLocalizations</span>&gt;</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  Locale _locale = <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>,<span class=\"string\">&#x27;CH&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  changeLocale(Locale locale)&#123;</span><br><span class=\"line\">    setState(()&#123;</span><br><span class=\"line\">      _locale = locale;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Localizations.override(</span><br><span class=\"line\">      context: context,</span><br><span class=\"line\">      locale: _locale,</span><br><span class=\"line\">      child: widget.child,</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> changeLocale  widget <br></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> main() &#123;</span><br><span class=\"line\">  runApp(<span class=\"keyword\">new</span> MyApp());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">GlobalKey&lt;_FreeLocalizations&gt; freeLocalizationStateKey = <span class=\"keyword\">new</span> GlobalKey&lt;_FreeLocalizations&gt;();   <span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyApp</span> <span class=\"keyword\">extends</span> <span class=\"title\">StatelessWidget</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@override</span></span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MaterialApp(</span><br><span class=\"line\">      onGenerateTitle: (context)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> DemoLocalizations.of(context).taskTitle;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      theme: <span class=\"keyword\">new</span> ThemeData(</span><br><span class=\"line\">        primarySwatch: Colors.blue,</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      home: <span class=\"keyword\">new</span> Builder(builder: (context)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> FreeLocalizations(</span><br><span class=\"line\">          key: freeLocalizationStateKey,</span><br><span class=\"line\">          child: <span class=\"keyword\">new</span> MyHomePage(),</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;),</span><br><span class=\"line\">      localizationsDelegates: [</span><br><span class=\"line\">        GlobalMaterialLocalizations.delegate,</span><br><span class=\"line\">        GlobalWidgetsLocalizations.delegate,</span><br><span class=\"line\">        DemoLocalizationsDelegate.delegate,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      supportedLocales: [</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>, <span class=\"string\">&#x27;CH&#x27;</span>),</span><br><span class=\"line\">        <span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>, <span class=\"string\">&#x27;US&#x27;</span>),</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> FreeLocalizations  GlobalKey  1  MyHomePage  FreeLocalizations </p>\n<p></p>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> changeLocale()&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(flag)&#123;</span><br><span class=\"line\">    freeLocalizationStateKey.currentState.changeLocale(<span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;zh&#x27;</span>,<span class=\"string\">&quot;CH&quot;</span>));</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    freeLocalizationStateKey.currentState.changeLocale(<span class=\"keyword\">const</span> Locale(<span class=\"string\">&#x27;en&#x27;</span>,<span class=\"string\">&quot;US&quot;</span>));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  flag = !flag;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"http://backup.flutter-dev.cn/localizatiion_free.gif\" alt=\"\"></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"http://backup.flutter-dev.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-22%20%E4%B8%8B%E5%8D%883.34.41.png\" alt=\"\"></p>\n<p><a href=\"https://my.mindnode.com/7u6RudyGs5bqzX1WrxY5XtZZqUDBzqvL2NioVbrr\">https://my.mindnode.com/7u6RudyGs5bqzX1WrxY5XtZZqUDBzqvL2NioVbrr</a><br><a href=\"https://github.com/flutter-dev/internationalizing\">https://github.com/flutter-dev/internationalizing</a></p>"},{"title":"GIF ","date":"2017-11-15T01:38:53.000Z","cover":"http://cdn.zqlxtt.cn/gif_file_stream.gif","_content":" C++  GIF  GIF  LZW  GIF  GIF \n\n\n\n> http://giflib.sourceforge.net/index.html\n> https://www.w3.org/Graphics/GIF/spec-gif89a.txt\n<!-- more -->\n# GIF \n\n http://giflib.sourceforge.net/index.html  GIF \n\n![](http://cdn.zqlxtt.cn/gif_file_stream.gif)\n\n GIF `Header``Logical Screen Descriptor``Image Descriptor``Image Data``Plain Text Extension``Application Extension``Comment Extension``Trailer`\n\n`Global Color Table``Graphic Control Extension``Local Color Table`\n\n Gif  GIF \n\n http://giflib.sourceforge.net/index.html  GIF \n\n![](http://cdn.zqlxtt.cn/sample_1.gif)\n\n\n\n![](http://cdn.zqlxtt.cn/sample_1_enlarged.gif)\n\n 10*10  GIF \n\n    47 49 46 38 39 61 \n    0A 00 0A 00 91 00 00 \n    FF FF FF FF 00 00 00 00 FF 00 00 00 \n    21 F9 04 00 00 00 00 00 \n    2C 00 00 00 00 0A 00 0A 00 00 \n    02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00\n    3B\n    \n## Header\n\nGIF  Header Header \n\n![](http://cdn.zqlxtt.cn/header_block.gif)\n\n ASCII  GIF  GIF  87a  89a \n\n 474946383961  0xED \n\n![](http://cdn.zqlxtt.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-11-14%20%E4%B8%8B%E5%8D%883.41.20.png)\n\n## Logical Screen Descriptor\n\nLogical Screen Descriptor Header  GIF  Global Color Table \n\n![](http://cdn.zqlxtt.cn/logical_screen_desc_block.gif)\n\n\n\n- `Canvas Width` GIF \n- `Canvas Height` GIF \n- `Packed Field` bit\n    -  `Global Color Table Flag` 1  Global Color Table 0 Global Color Table\n    -  `Color Resolution` s Global Color Table  2^(s+1) s = 1, 4  2 \n    -  `Sort Flag` 0  1 0  Global Color Table  1  Global Color Table \n    -  Global Color Table  s 2^(s+1) s = 1 Global Color Table  4 \n- `Background Color Index` GIF  Global Color Table \n- `Pixel Aspect Ratio` 0\n\n Logical Screen Descriptor \n\n    0A 00 0A 00 91 00 00\n    \n\n`Canvas Width` = 0A00 = 10\n`Canvas Height` = 0A00 = 10\n`Packed Field` = 10010001 Global Color Table  1 Global Color TableColor Resolution  1 2 Sort Flag = 0Global Color Table  4 \n`Background Color Index` = 0 GIF  Global Color Table \n`Pixel Aspect Ratio` = 0,\n\n# Global Color Table\n\nGlobal Color Table  Logical Screen Descriptor \n\n![](http://backup.flutter-dev.cn/global_color_table.gif)\n\n Global Color Table  Global Color Table  =  * 3. Logical Screen Descriptor  4  Global Color Table  12  12 \n\n    FF FF FF FF 00 00 00 00 FF 00 00 00 \n\n Global Color Table\n\n||||\n|---|---|---|\n|0|FFFFFF||\n|1|FF0000||\n|2|0000FF||\n|3|000000||\n\n# Graphics Control Extension\n\n Graphics Control Extension Global Color Table `21`21 GIF  Extension Introducer\n\nOK 21 `F9`F9  Graphics Control Extension\n\nGraphics Control Extension  21  F9 \n\n![](http://backup.flutter-dev.cn/graphic_control_ext.gif)\n\n\n\n- `Byte Size`\n- `Packed Field`\n    - Reserved for Future Use\n    -  Display Method0123\n    -  User Input Flag0 1 \n    -  Transparent Flag 1  Transparent Color Index  0 \n- `Delay Time` GIF  0 \n- `Transparent Color Index` Transparent Flag  1  Global Color Table \n- `Block Terminator` Extension \n\n Graphics Control Extension \n\n    21 F9 04 00 00 00 00 00\n\n 21F9  Graphics Control Extension \nByte Size  4\n 0  Graphics Control Extension \n\n# Image Descriptor\n\n 21  Extension  Image Descriptor  `2C` Image Descriptor \n\n![](http://backup.flutter-dev.cn/image_descriptor_block.gif)\n\n\n Image Seperator  2C\n\n- `Image Left` 0 \n- `Image Top` 0 \n- `Image Width`\n- `Image Height`\n- `Packed Field`\n    - Local Color Table Flag1 0 \n    - Interlace Flag1 0 \n    - Sort Flag Local Color Table  Global Color Table\n    - Reserved For Future Use\n    - Size of Local Color Table Global Color Table \n    \n\n\n    2C 00 00 00 00 0A 00 0A 00 00 \n\n2C  Image Descriptor\nImage Left = 0\nImage Top = 0\nImage Width = 10\nImage Height = 10\n 10*10  GIF \n Local Color Table\n\n>  Logical Screen Descriptor  Image Descriptor  GIF  GIF  Image LeftImage TopImage Width  Image Height GIF \n\n\n# Local Color Table\nlocal color table  Global Color Table \n\n# Image Data\n\n Local Color TableImage Data  Image Descriptor  Image Data \n\n![](http://backup.flutter-dev.cn/image_data_block.gif)\n\n- `LZW Minimum Code Size`: GIF  Color Table  LZW  LZW Minimum Code Size  LZW  LZW \n- `Number of bytes of data in sun-blocks01-FF` 01-FF 0 Image Data  FF Data sub-Blocks\n- `Data Sub-Block(s)`\n- `Block Terminator` Image Data \n\n\n\n    02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00\n    \n02  LZW Minimum Code Size\n16  22 \n00  Image Data \n\n# Trailer\n\n 3B GIF GIF \n\n# Plain Text ExtensionApplication ExtensionComment Extension\n\n Extension GIF \n\n# \n GIF GIF  LZW  LZW GIF  LWZ LWZ  GIF ","source":"_posts/gif-bytes-format.md","raw":"---\ntitle: GIF \ndate: 2017-11-15 09:38:53\ntags: \ncover: http://cdn.zqlxtt.cn/gif_file_stream.gif\n---\n C++  GIF  GIF  LZW  GIF  GIF \n\n\n\n> http://giflib.sourceforge.net/index.html\n> https://www.w3.org/Graphics/GIF/spec-gif89a.txt\n<!-- more -->\n# GIF \n\n http://giflib.sourceforge.net/index.html  GIF \n\n![](http://cdn.zqlxtt.cn/gif_file_stream.gif)\n\n GIF `Header``Logical Screen Descriptor``Image Descriptor``Image Data``Plain Text Extension``Application Extension``Comment Extension``Trailer`\n\n`Global Color Table``Graphic Control Extension``Local Color Table`\n\n Gif  GIF \n\n http://giflib.sourceforge.net/index.html  GIF \n\n![](http://cdn.zqlxtt.cn/sample_1.gif)\n\n\n\n![](http://cdn.zqlxtt.cn/sample_1_enlarged.gif)\n\n 10*10  GIF \n\n    47 49 46 38 39 61 \n    0A 00 0A 00 91 00 00 \n    FF FF FF FF 00 00 00 00 FF 00 00 00 \n    21 F9 04 00 00 00 00 00 \n    2C 00 00 00 00 0A 00 0A 00 00 \n    02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00\n    3B\n    \n## Header\n\nGIF  Header Header \n\n![](http://cdn.zqlxtt.cn/header_block.gif)\n\n ASCII  GIF  GIF  87a  89a \n\n 474946383961  0xED \n\n![](http://cdn.zqlxtt.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-11-14%20%E4%B8%8B%E5%8D%883.41.20.png)\n\n## Logical Screen Descriptor\n\nLogical Screen Descriptor Header  GIF  Global Color Table \n\n![](http://cdn.zqlxtt.cn/logical_screen_desc_block.gif)\n\n\n\n- `Canvas Width` GIF \n- `Canvas Height` GIF \n- `Packed Field` bit\n    -  `Global Color Table Flag` 1  Global Color Table 0 Global Color Table\n    -  `Color Resolution` s Global Color Table  2^(s+1) s = 1, 4  2 \n    -  `Sort Flag` 0  1 0  Global Color Table  1  Global Color Table \n    -  Global Color Table  s 2^(s+1) s = 1 Global Color Table  4 \n- `Background Color Index` GIF  Global Color Table \n- `Pixel Aspect Ratio` 0\n\n Logical Screen Descriptor \n\n    0A 00 0A 00 91 00 00\n    \n\n`Canvas Width` = 0A00 = 10\n`Canvas Height` = 0A00 = 10\n`Packed Field` = 10010001 Global Color Table  1 Global Color TableColor Resolution  1 2 Sort Flag = 0Global Color Table  4 \n`Background Color Index` = 0 GIF  Global Color Table \n`Pixel Aspect Ratio` = 0,\n\n# Global Color Table\n\nGlobal Color Table  Logical Screen Descriptor \n\n![](http://backup.flutter-dev.cn/global_color_table.gif)\n\n Global Color Table  Global Color Table  =  * 3. Logical Screen Descriptor  4  Global Color Table  12  12 \n\n    FF FF FF FF 00 00 00 00 FF 00 00 00 \n\n Global Color Table\n\n||||\n|---|---|---|\n|0|FFFFFF||\n|1|FF0000||\n|2|0000FF||\n|3|000000||\n\n# Graphics Control Extension\n\n Graphics Control Extension Global Color Table `21`21 GIF  Extension Introducer\n\nOK 21 `F9`F9  Graphics Control Extension\n\nGraphics Control Extension  21  F9 \n\n![](http://backup.flutter-dev.cn/graphic_control_ext.gif)\n\n\n\n- `Byte Size`\n- `Packed Field`\n    - Reserved for Future Use\n    -  Display Method0123\n    -  User Input Flag0 1 \n    -  Transparent Flag 1  Transparent Color Index  0 \n- `Delay Time` GIF  0 \n- `Transparent Color Index` Transparent Flag  1  Global Color Table \n- `Block Terminator` Extension \n\n Graphics Control Extension \n\n    21 F9 04 00 00 00 00 00\n\n 21F9  Graphics Control Extension \nByte Size  4\n 0  Graphics Control Extension \n\n# Image Descriptor\n\n 21  Extension  Image Descriptor  `2C` Image Descriptor \n\n![](http://backup.flutter-dev.cn/image_descriptor_block.gif)\n\n\n Image Seperator  2C\n\n- `Image Left` 0 \n- `Image Top` 0 \n- `Image Width`\n- `Image Height`\n- `Packed Field`\n    - Local Color Table Flag1 0 \n    - Interlace Flag1 0 \n    - Sort Flag Local Color Table  Global Color Table\n    - Reserved For Future Use\n    - Size of Local Color Table Global Color Table \n    \n\n\n    2C 00 00 00 00 0A 00 0A 00 00 \n\n2C  Image Descriptor\nImage Left = 0\nImage Top = 0\nImage Width = 10\nImage Height = 10\n 10*10  GIF \n Local Color Table\n\n>  Logical Screen Descriptor  Image Descriptor  GIF  GIF  Image LeftImage TopImage Width  Image Height GIF \n\n\n# Local Color Table\nlocal color table  Global Color Table \n\n# Image Data\n\n Local Color TableImage Data  Image Descriptor  Image Data \n\n![](http://backup.flutter-dev.cn/image_data_block.gif)\n\n- `LZW Minimum Code Size`: GIF  Color Table  LZW  LZW Minimum Code Size  LZW  LZW \n- `Number of bytes of data in sun-blocks01-FF` 01-FF 0 Image Data  FF Data sub-Blocks\n- `Data Sub-Block(s)`\n- `Block Terminator` Image Data \n\n\n\n    02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00\n    \n02  LZW Minimum Code Size\n16  22 \n00  Image Data \n\n# Trailer\n\n 3B GIF GIF \n\n# Plain Text ExtensionApplication ExtensionComment Extension\n\n Extension GIF \n\n# \n GIF GIF  LZW  LZW GIF  LWZ LWZ  GIF ","slug":"gif-bytes-format","published":1,"updated":"2024-08-21T03:16:19.784Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vt00175p6t6zskfsfx","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p> C++  GIF  GIF  LZW  GIF  GIF </p>\n<p></p>\n<blockquote>\n<p><a href=\"http://giflib.sourceforge.net/index.html\">http://giflib.sourceforge.net/index.html</a><br><a href=\"https://www.w3.org/Graphics/GIF/spec-gif89a.txt\">https://www.w3.org/Graphics/GIF/spec-gif89a.txt</a></p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"GIF-\"><a href=\"#GIF-\" class=\"headerlink\" title=\"GIF \"></a>GIF </h1><p> <a href=\"http://giflib.sourceforge.net/index.html\">http://giflib.sourceforge.net/index.html</a>  GIF </p>\n<p><img src=\"http://cdn.zqlxtt.cn/gif_file_stream.gif\" alt=\"\"></p>\n<p> GIF <code>Header</code><code>Logical Screen Descriptor</code><code>Image Descriptor</code><code>Image Data</code><code>Plain Text Extension</code><code>Application Extension</code><code>Comment Extension</code><code>Trailer</code></p>\n<p><code>Global Color Table</code><code>Graphic Control Extension</code><code>Local Color Table</code></p>\n<p> Gif  GIF </p>\n<p> <a href=\"http://giflib.sourceforge.net/index.html\">http://giflib.sourceforge.net/index.html</a>  GIF </p>\n<p><img src=\"http://cdn.zqlxtt.cn/sample_1.gif\" alt=\"\"></p>\n<p></p>\n<p><img src=\"http://cdn.zqlxtt.cn/sample_1_enlarged.gif\" alt=\"\"></p>\n<p> 10*10  GIF </p>\n<pre><code>47 49 46 38 39 61 \n0A 00 0A 00 91 00 00 \nFF FF FF FF 00 00 00 00 FF 00 00 00 \n21 F9 04 00 00 00 00 00 \n2C 00 00 00 00 0A 00 0A 00 00 \n02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00\n3B</code></pre><h2 id=\"Header\"><a href=\"#Header\" class=\"headerlink\" title=\"Header\"></a>Header</h2><p>GIF  Header Header </p>\n<p><img src=\"http://cdn.zqlxtt.cn/header_block.gif\" alt=\"\"></p>\n<p> ASCII  GIF  GIF  87a  89a </p>\n<p> 474946383961  0xED </p>\n<p><img src=\"http://cdn.zqlxtt.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-11-14%20%E4%B8%8B%E5%8D%883.41.20.png\" alt=\"\"></p>\n<h2 id=\"Logical-Screen-Descriptor\"><a href=\"#Logical-Screen-Descriptor\" class=\"headerlink\" title=\"Logical Screen Descriptor\"></a>Logical Screen Descriptor</h2><p>Logical Screen Descriptor Header  GIF  Global Color Table </p>\n<p><img src=\"http://cdn.zqlxtt.cn/logical_screen_desc_block.gif\" alt=\"\"></p>\n<p></p>\n<ul>\n<li><code>Canvas Width</code> GIF </li>\n<li><code>Canvas Height</code> GIF </li>\n<li><code>Packed Field</code> bit<ul>\n<li> <code>Global Color Table Flag</code> 1  Global Color Table 0 Global Color Table</li>\n<li> <code>Color Resolution</code> s Global Color Table  2^(s+1) s = 1, 4  2 </li>\n<li> <code>Sort Flag</code> 0  1 0  Global Color Table  1  Global Color Table </li>\n<li> Global Color Table  s 2^(s+1) s = 1 Global Color Table  4 </li>\n</ul>\n</li>\n<li><code>Background Color Index</code> GIF  Global Color Table </li>\n<li><code>Pixel Aspect Ratio</code> 0</li>\n</ul>\n<p> Logical Screen Descriptor </p>\n<pre><code>0A 00 0A 00 91 00 00</code></pre><p><br><code>Canvas Width</code> = 0A00 = 10<br><code>Canvas Height</code> = 0A00 = 10<br><code>Packed Field</code> = 10010001 Global Color Table  1 Global Color TableColor Resolution  1 2 Sort Flag = 0Global Color Table  4 <br><code>Background Color Index</code> = 0 GIF  Global Color Table <br><code>Pixel Aspect Ratio</code> = 0,</p>\n<h1 id=\"Global-Color-Table\"><a href=\"#Global-Color-Table\" class=\"headerlink\" title=\"Global Color Table\"></a>Global Color Table</h1><p>Global Color Table  Logical Screen Descriptor </p>\n<p><img src=\"http://backup.flutter-dev.cn/global_color_table.gif\" alt=\"\"></p>\n<p> Global Color Table  Global Color Table  =  * 3. Logical Screen Descriptor  4  Global Color Table  12  12 </p>\n<pre><code>FF FF FF FF 00 00 00 00 FF 00 00 00 </code></pre><p> Global Color Table</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td>FFFFFF</td>\n<td></td>\n</tr>\n<tr>\n<td>1</td>\n<td>FF0000</td>\n<td></td>\n</tr>\n<tr>\n<td>2</td>\n<td>0000FF</td>\n<td></td>\n</tr>\n<tr>\n<td>3</td>\n<td>000000</td>\n<td></td>\n</tr>\n</tbody></table>\n<h1 id=\"Graphics-Control-Extension\"><a href=\"#Graphics-Control-Extension\" class=\"headerlink\" title=\"Graphics Control Extension\"></a>Graphics Control Extension</h1><p> Graphics Control Extension Global Color Table <code>21</code>21 GIF  Extension Introducer</p>\n<p>OK 21 <code>F9</code>F9  Graphics Control Extension</p>\n<p>Graphics Control Extension  21  F9 </p>\n<p><img src=\"http://backup.flutter-dev.cn/graphic_control_ext.gif\" alt=\"\"></p>\n<p></p>\n<ul>\n<li><code>Byte Size</code></li>\n<li><code>Packed Field</code><ul>\n<li>Reserved for Future Use</li>\n<li> Display Method0123</li>\n<li> User Input Flag0 1 </li>\n<li> Transparent Flag 1  Transparent Color Index  0 </li>\n</ul>\n</li>\n<li><code>Delay Time</code> GIF  0 </li>\n<li><code>Transparent Color Index</code> Transparent Flag  1  Global Color Table </li>\n<li><code>Block Terminator</code> Extension </li>\n</ul>\n<p> Graphics Control Extension </p>\n<pre><code>21 F9 04 00 00 00 00 00</code></pre><p> 21F9  Graphics Control Extension <br>Byte Size  4<br> 0  Graphics Control Extension </p>\n<h1 id=\"Image-Descriptor\"><a href=\"#Image-Descriptor\" class=\"headerlink\" title=\"Image Descriptor\"></a>Image Descriptor</h1><p> 21  Extension  Image Descriptor  <code>2C</code> Image Descriptor </p>\n<p><img src=\"http://backup.flutter-dev.cn/image_descriptor_block.gif\" alt=\"\"></p>\n<p> Image Seperator  2C</p>\n<ul>\n<li><code>Image Left</code> 0 </li>\n<li><code>Image Top</code> 0 </li>\n<li><code>Image Width</code></li>\n<li><code>Image Height</code></li>\n<li><code>Packed Field</code><ul>\n<li>Local Color Table Flag1 0 </li>\n<li>Interlace Flag1 0 </li>\n<li>Sort Flag Local Color Table  Global Color Table</li>\n<li>Reserved For Future Use</li>\n<li>Size of Local Color Table Global Color Table </li>\n</ul>\n</li>\n</ul>\n<p></p>\n<pre><code>2C 00 00 00 00 0A 00 0A 00 00 </code></pre><p>2C  Image Descriptor<br>Image Left = 0<br>Image Top = 0<br>Image Width = 10<br>Image Height = 10<br> 10*10  GIF <br> Local Color Table</p>\n<blockquote>\n<p> Logical Screen Descriptor  Image Descriptor  GIF  GIF  Image LeftImage TopImage Width  Image Height GIF </p>\n</blockquote>\n<h1 id=\"Local-Color-Table\"><a href=\"#Local-Color-Table\" class=\"headerlink\" title=\"Local Color Table\"></a>Local Color Table</h1><p>local color table  Global Color Table </p>\n<h1 id=\"Image-Data\"><a href=\"#Image-Data\" class=\"headerlink\" title=\"Image Data\"></a>Image Data</h1><p> Local Color TableImage Data  Image Descriptor  Image Data </p>\n<p><img src=\"http://backup.flutter-dev.cn/image_data_block.gif\" alt=\"\"></p>\n<ul>\n<li><code>LZW Minimum Code Size</code>: GIF  Color Table  LZW  LZW Minimum Code Size  LZW  LZW </li>\n<li><code>Number of bytes of data in sun-blocks01-FF</code> 01-FF 0 Image Data  FF Data sub-Blocks</li>\n<li><code>Data Sub-Block(s)</code></li>\n<li><code>Block Terminator</code> Image Data </li>\n</ul>\n<p></p>\n<pre><code>02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00</code></pre><p>02  LZW Minimum Code Size<br>16  22 <br>00  Image Data </p>\n<h1 id=\"Trailer\"><a href=\"#Trailer\" class=\"headerlink\" title=\"Trailer\"></a>Trailer</h1><p> 3B GIF GIF </p>\n<h1 id=\"Plain-Text-ExtensionApplication-ExtensionComment-Extension\"><a href=\"#Plain-Text-ExtensionApplication-ExtensionComment-Extension\" class=\"headerlink\" title=\"Plain Text ExtensionApplication ExtensionComment Extension\"></a>Plain Text ExtensionApplication ExtensionComment Extension</h1><p> Extension GIF </p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p> GIF GIF  LZW  LZW GIF  LWZ LWZ  GIF </p>\n","excerpt":"<p> C++  GIF  GIF  LZW  GIF  GIF </p>\n<p></p>\n<blockquote>\n<p><a href=\"http://giflib.sourceforge.net/index.html\">http://giflib.sourceforge.net/index.html</a><br><a href=\"https://www.w3.org/Graphics/GIF/spec-gif89a.txt\">https://www.w3.org/Graphics/GIF/spec-gif89a.txt</a></p>\n</blockquote>","more":"<h1 id=\"GIF-\"><a href=\"#GIF-\" class=\"headerlink\" title=\"GIF \"></a>GIF </h1><p> <a href=\"http://giflib.sourceforge.net/index.html\">http://giflib.sourceforge.net/index.html</a>  GIF </p>\n<p><img src=\"http://cdn.zqlxtt.cn/gif_file_stream.gif\" alt=\"\"></p>\n<p> GIF <code>Header</code><code>Logical Screen Descriptor</code><code>Image Descriptor</code><code>Image Data</code><code>Plain Text Extension</code><code>Application Extension</code><code>Comment Extension</code><code>Trailer</code></p>\n<p><code>Global Color Table</code><code>Graphic Control Extension</code><code>Local Color Table</code></p>\n<p> Gif  GIF </p>\n<p> <a href=\"http://giflib.sourceforge.net/index.html\">http://giflib.sourceforge.net/index.html</a>  GIF </p>\n<p><img src=\"http://cdn.zqlxtt.cn/sample_1.gif\" alt=\"\"></p>\n<p></p>\n<p><img src=\"http://cdn.zqlxtt.cn/sample_1_enlarged.gif\" alt=\"\"></p>\n<p> 10*10  GIF </p>\n<pre><code>47 49 46 38 39 61 \n0A 00 0A 00 91 00 00 \nFF FF FF FF 00 00 00 00 FF 00 00 00 \n21 F9 04 00 00 00 00 00 \n2C 00 00 00 00 0A 00 0A 00 00 \n02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00\n3B</code></pre><h2 id=\"Header\"><a href=\"#Header\" class=\"headerlink\" title=\"Header\"></a>Header</h2><p>GIF  Header Header </p>\n<p><img src=\"http://cdn.zqlxtt.cn/header_block.gif\" alt=\"\"></p>\n<p> ASCII  GIF  GIF  87a  89a </p>\n<p> 474946383961  0xED </p>\n<p><img src=\"http://cdn.zqlxtt.cn/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-11-14%20%E4%B8%8B%E5%8D%883.41.20.png\" alt=\"\"></p>\n<h2 id=\"Logical-Screen-Descriptor\"><a href=\"#Logical-Screen-Descriptor\" class=\"headerlink\" title=\"Logical Screen Descriptor\"></a>Logical Screen Descriptor</h2><p>Logical Screen Descriptor Header  GIF  Global Color Table </p>\n<p><img src=\"http://cdn.zqlxtt.cn/logical_screen_desc_block.gif\" alt=\"\"></p>\n<p></p>\n<ul>\n<li><code>Canvas Width</code> GIF </li>\n<li><code>Canvas Height</code> GIF </li>\n<li><code>Packed Field</code> bit<ul>\n<li> <code>Global Color Table Flag</code> 1  Global Color Table 0 Global Color Table</li>\n<li> <code>Color Resolution</code> s Global Color Table  2^(s+1) s = 1, 4  2 </li>\n<li> <code>Sort Flag</code> 0  1 0  Global Color Table  1  Global Color Table </li>\n<li> Global Color Table  s 2^(s+1) s = 1 Global Color Table  4 </li>\n</ul>\n</li>\n<li><code>Background Color Index</code> GIF  Global Color Table </li>\n<li><code>Pixel Aspect Ratio</code> 0</li>\n</ul>\n<p> Logical Screen Descriptor </p>\n<pre><code>0A 00 0A 00 91 00 00</code></pre><p><br><code>Canvas Width</code> = 0A00 = 10<br><code>Canvas Height</code> = 0A00 = 10<br><code>Packed Field</code> = 10010001 Global Color Table  1 Global Color TableColor Resolution  1 2 Sort Flag = 0Global Color Table  4 <br><code>Background Color Index</code> = 0 GIF  Global Color Table <br><code>Pixel Aspect Ratio</code> = 0,</p>\n<h1 id=\"Global-Color-Table\"><a href=\"#Global-Color-Table\" class=\"headerlink\" title=\"Global Color Table\"></a>Global Color Table</h1><p>Global Color Table  Logical Screen Descriptor </p>\n<p><img src=\"http://backup.flutter-dev.cn/global_color_table.gif\" alt=\"\"></p>\n<p> Global Color Table  Global Color Table  =  * 3. Logical Screen Descriptor  4  Global Color Table  12  12 </p>\n<pre><code>FF FF FF FF 00 00 00 00 FF 00 00 00 </code></pre><p> Global Color Table</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td>FFFFFF</td>\n<td></td>\n</tr>\n<tr>\n<td>1</td>\n<td>FF0000</td>\n<td></td>\n</tr>\n<tr>\n<td>2</td>\n<td>0000FF</td>\n<td></td>\n</tr>\n<tr>\n<td>3</td>\n<td>000000</td>\n<td></td>\n</tr>\n</tbody></table>\n<h1 id=\"Graphics-Control-Extension\"><a href=\"#Graphics-Control-Extension\" class=\"headerlink\" title=\"Graphics Control Extension\"></a>Graphics Control Extension</h1><p> Graphics Control Extension Global Color Table <code>21</code>21 GIF  Extension Introducer</p>\n<p>OK 21 <code>F9</code>F9  Graphics Control Extension</p>\n<p>Graphics Control Extension  21  F9 </p>\n<p><img src=\"http://backup.flutter-dev.cn/graphic_control_ext.gif\" alt=\"\"></p>\n<p></p>\n<ul>\n<li><code>Byte Size</code></li>\n<li><code>Packed Field</code><ul>\n<li>Reserved for Future Use</li>\n<li> Display Method0123</li>\n<li> User Input Flag0 1 </li>\n<li> Transparent Flag 1  Transparent Color Index  0 </li>\n</ul>\n</li>\n<li><code>Delay Time</code> GIF  0 </li>\n<li><code>Transparent Color Index</code> Transparent Flag  1  Global Color Table </li>\n<li><code>Block Terminator</code> Extension </li>\n</ul>\n<p> Graphics Control Extension </p>\n<pre><code>21 F9 04 00 00 00 00 00</code></pre><p> 21F9  Graphics Control Extension <br>Byte Size  4<br> 0  Graphics Control Extension </p>\n<h1 id=\"Image-Descriptor\"><a href=\"#Image-Descriptor\" class=\"headerlink\" title=\"Image Descriptor\"></a>Image Descriptor</h1><p> 21  Extension  Image Descriptor  <code>2C</code> Image Descriptor </p>\n<p><img src=\"http://backup.flutter-dev.cn/image_descriptor_block.gif\" alt=\"\"></p>\n<p> Image Seperator  2C</p>\n<ul>\n<li><code>Image Left</code> 0 </li>\n<li><code>Image Top</code> 0 </li>\n<li><code>Image Width</code></li>\n<li><code>Image Height</code></li>\n<li><code>Packed Field</code><ul>\n<li>Local Color Table Flag1 0 </li>\n<li>Interlace Flag1 0 </li>\n<li>Sort Flag Local Color Table  Global Color Table</li>\n<li>Reserved For Future Use</li>\n<li>Size of Local Color Table Global Color Table </li>\n</ul>\n</li>\n</ul>\n<p></p>\n<pre><code>2C 00 00 00 00 0A 00 0A 00 00 </code></pre><p>2C  Image Descriptor<br>Image Left = 0<br>Image Top = 0<br>Image Width = 10<br>Image Height = 10<br> 10*10  GIF <br> Local Color Table</p>\n<blockquote>\n<p> Logical Screen Descriptor  Image Descriptor  GIF  GIF  Image LeftImage TopImage Width  Image Height GIF </p>\n</blockquote>\n<h1 id=\"Local-Color-Table\"><a href=\"#Local-Color-Table\" class=\"headerlink\" title=\"Local Color Table\"></a>Local Color Table</h1><p>local color table  Global Color Table </p>\n<h1 id=\"Image-Data\"><a href=\"#Image-Data\" class=\"headerlink\" title=\"Image Data\"></a>Image Data</h1><p> Local Color TableImage Data  Image Descriptor  Image Data </p>\n<p><img src=\"http://backup.flutter-dev.cn/image_data_block.gif\" alt=\"\"></p>\n<ul>\n<li><code>LZW Minimum Code Size</code>: GIF  Color Table  LZW  LZW Minimum Code Size  LZW  LZW </li>\n<li><code>Number of bytes of data in sun-blocks01-FF</code> 01-FF 0 Image Data  FF Data sub-Blocks</li>\n<li><code>Data Sub-Block(s)</code></li>\n<li><code>Block Terminator</code> Image Data </li>\n</ul>\n<p></p>\n<pre><code>02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00</code></pre><p>02  LZW Minimum Code Size<br>16  22 <br>00  Image Data </p>\n<h1 id=\"Trailer\"><a href=\"#Trailer\" class=\"headerlink\" title=\"Trailer\"></a>Trailer</h1><p> 3B GIF GIF </p>\n<h1 id=\"Plain-Text-ExtensionApplication-ExtensionComment-Extension\"><a href=\"#Plain-Text-ExtensionApplication-ExtensionComment-Extension\" class=\"headerlink\" title=\"Plain Text ExtensionApplication ExtensionComment Extension\"></a>Plain Text ExtensionApplication ExtensionComment Extension</h1><p> Extension GIF </p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p> GIF GIF  LZW  LZW GIF  LWZ LWZ  GIF </p>"},{"title":"GIF ","date":"2017-11-03T11:08:22.000Z","cover":"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-9a836aaf2873ebc0.webp","_content":"![gif](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-9a836aaf2873ebc0.webp)\n\n\n C++  GIF  GIF  LZW  GIF  GIF \n\n\n\n> http://giflib.sourceforge.net/index.html\n> https://www.w3.org/Graphics/GIF/spec-gif89a.txt\n<!-- more -->\n# GIF \n\n http://giflib.sourceforge.net/index.html  GIF \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-d2847ad5154c6744.webp)\n\n GIF `Header``Logical Screen Descriptor``Image Descriptor``Image Data``Plain Text Extension``Application Extension``Comment Extension``Trailer`\n\n`Global Color Table``Graphic Control Extension``Local Color Table`\n\n Gif  GIF \n\n http://giflib.sourceforge.net/index.html  GIF \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-434075727f059761.webp)\n\n\n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-9da5a168aebb3bf5.webp)\n\n 10*10  GIF \n\n    47 49 46 38 39 61 \n    0A 00 0A 00 91 00 00 \n    FF FF FF FF 00 00 00 00 FF 00 00 00 \n    21 F9 04 00 00 00 00 00 \n    2C 00 00 00 00 0A 00 0A 00 00 \n    02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00\n    3B\n    \n## Header\n\nGIF  Header Header \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-4309aa3f589fbaa8.webp)\n\n ASCII  GIF  GIF  87a  89a \n\n 474946383961  0xED \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-c558f44ea7b41241.webp)\n\n## Logical Screen Descriptor\n\nLogical Screen Descriptor Header  GIF  Global Color Table \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-49686736a5ecb836.webp)\n\n\n\n- `Canvas Width` GIF \n- `Canvas Height` GIF \n- `Packed Field` bit\n    -  `Global Color Table Flag` 1  Global Color Table 0 Global Color Table\n    -  `Color Resolution` s Global Color Table  2^(s+1) s = 1, 4  2 \n    -  `Sort Flag` 0  1 0  Global Color Table  1  Global Color Table \n    -  Global Color Table  s 2^(s+1) s = 1 Global Color Table  4 \n- `Background Color Index` GIF  Global Color Table \n- `Pixel Aspect Ratio` 0\n\n Logical Screen Descriptor \n\n    0A 00 0A 00 91 00 00\n    \n\n`Canvas Width` = 0A00 = 10\n`Canvas Height` = 0A00 = 10\n`Packed Field` = 10010001 Global Color Table  1 Global Color TableColor Resolution  1 2 Sort Flag = 0Global Color Table  4 \n`Background Color Index` = 0 GIF  Global Color Table \n`Pixel Aspect Ratio` = 0,\n\n# Global Color Table\n\nGlobal Color Table  Logical Screen Descriptor \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-49686736a5ecb836.webp)\n\n Global Color Table  Global Color Table  =  * 3. Logical Screen Descriptor  4  Global Color Table  12  12 \n\n    FF FF FF FF 00 00 00 00 FF 00 00 00 \n\n Global Color Table\n\n||||\n|---|---|---|\n|0|FFFFFF||\n|1|FF0000||\n|2|0000FF||\n|3|000000||\n\n# Graphics Control Extension\n\n Graphics Control Extension Global Color Table `21`21 GIF  Extension Introducer\n\nOK 21 `F9`F9  Graphics Control Extension\n\nGraphics Control Extension  21  F9 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-ebc764ba29f365c1.webp)\n\n\n\n- `Byte Size`\n- `Packed Field`\n    - Reserved for Future Use\n    -  Display Method0123\n    -  User Input Flag0 1 \n    -  Transparent Flag 1  Transparent Color Index  0 \n- `Delay Time` GIF  0 \n- `Transparent Color Index` Transparent Flag  1  Global Color Table \n- `Block Terminator` Extension \n\n Graphics Control Extension \n\n    21 F9 04 00 00 00 00 00\n\n 21F9  Graphics Control Extension \nByte Size  4\n 0  Graphics Control Extension \n\n# Image Descriptor\n\n 21  Extension  Image Descriptor  `2C` Image Descriptor \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-607ad12f91e24c47.webp)\n\n\n Image Seperator  2C\n\n- `Image Left` 0 \n- `Image Top` 0 \n- `Image Width`\n- `Image Height`\n- `Packed Field`\n    - Local Color Table Flag1 0 \n    - Interlace Flag1 0 \n    - Sort Flag Local Color Table  Global Color Table\n    - Reserved For Future Use\n    - Size of Local Color Table Global Color Table \n    \n\n\n    2C 00 00 00 00 0A 00 0A 00 00 \n\n2C  Image Descriptor\nImage Left = 0\nImage Top = 0\nImage Width = 10\nImage Height = 10\n 10*10  GIF \n Local Color Table\n\n>  Logical Screen Descriptor  Image Descriptor  GIF  GIF  Image LeftImage TopImage Width  Image Height GIF \n\n\n# Local Color Table\nlocal color table  Global Color Table \n\n# Image Data\n\n Local Color TableImage Data  Image Descriptor  Image Data \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-8b4ded747247ce4a.webp)\n\n- `LZW Minimum Code Size`: GIF  Color Table  LZW  LZW Minimum Code Size  LZW  LZW \n- `Number of bytes of data in sun-blocks01-FF` 01-FF 0 Image Data  FF Data sub-Blocks\n- `Data Sub-Block(s)`\n- `Block Terminator` Image Data \n\n\n\n    02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00\n    \n02  LZW Minimum Code Size\n16  22 \n00  Image Data \n\n# Trailer\n\n 3B GIF GIF \n\n# Plain Text ExtensionApplication ExtensionComment Extension\n\n Extension GIF \n\n# \n GIF GIF  LZW  LZW GIF  LWZ LWZ  GIF ","source":"_posts/git-intro.md","raw":"---\ntitle: GIF \ndate: 2017-11-03 19:08:22\ntags: \ncover: https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-9a836aaf2873ebc0.webp\n---\n![gif](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-9a836aaf2873ebc0.webp)\n\n\n C++  GIF  GIF  LZW  GIF  GIF \n\n\n\n> http://giflib.sourceforge.net/index.html\n> https://www.w3.org/Graphics/GIF/spec-gif89a.txt\n<!-- more -->\n# GIF \n\n http://giflib.sourceforge.net/index.html  GIF \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-d2847ad5154c6744.webp)\n\n GIF `Header``Logical Screen Descriptor``Image Descriptor``Image Data``Plain Text Extension``Application Extension``Comment Extension``Trailer`\n\n`Global Color Table``Graphic Control Extension``Local Color Table`\n\n Gif  GIF \n\n http://giflib.sourceforge.net/index.html  GIF \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-434075727f059761.webp)\n\n\n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-9da5a168aebb3bf5.webp)\n\n 10*10  GIF \n\n    47 49 46 38 39 61 \n    0A 00 0A 00 91 00 00 \n    FF FF FF FF 00 00 00 00 FF 00 00 00 \n    21 F9 04 00 00 00 00 00 \n    2C 00 00 00 00 0A 00 0A 00 00 \n    02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00\n    3B\n    \n## Header\n\nGIF  Header Header \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-4309aa3f589fbaa8.webp)\n\n ASCII  GIF  GIF  87a  89a \n\n 474946383961  0xED \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-c558f44ea7b41241.webp)\n\n## Logical Screen Descriptor\n\nLogical Screen Descriptor Header  GIF  Global Color Table \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-49686736a5ecb836.webp)\n\n\n\n- `Canvas Width` GIF \n- `Canvas Height` GIF \n- `Packed Field` bit\n    -  `Global Color Table Flag` 1  Global Color Table 0 Global Color Table\n    -  `Color Resolution` s Global Color Table  2^(s+1) s = 1, 4  2 \n    -  `Sort Flag` 0  1 0  Global Color Table  1  Global Color Table \n    -  Global Color Table  s 2^(s+1) s = 1 Global Color Table  4 \n- `Background Color Index` GIF  Global Color Table \n- `Pixel Aspect Ratio` 0\n\n Logical Screen Descriptor \n\n    0A 00 0A 00 91 00 00\n    \n\n`Canvas Width` = 0A00 = 10\n`Canvas Height` = 0A00 = 10\n`Packed Field` = 10010001 Global Color Table  1 Global Color TableColor Resolution  1 2 Sort Flag = 0Global Color Table  4 \n`Background Color Index` = 0 GIF  Global Color Table \n`Pixel Aspect Ratio` = 0,\n\n# Global Color Table\n\nGlobal Color Table  Logical Screen Descriptor \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-49686736a5ecb836.webp)\n\n Global Color Table  Global Color Table  =  * 3. Logical Screen Descriptor  4  Global Color Table  12  12 \n\n    FF FF FF FF 00 00 00 00 FF 00 00 00 \n\n Global Color Table\n\n||||\n|---|---|---|\n|0|FFFFFF||\n|1|FF0000||\n|2|0000FF||\n|3|000000||\n\n# Graphics Control Extension\n\n Graphics Control Extension Global Color Table `21`21 GIF  Extension Introducer\n\nOK 21 `F9`F9  Graphics Control Extension\n\nGraphics Control Extension  21  F9 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-ebc764ba29f365c1.webp)\n\n\n\n- `Byte Size`\n- `Packed Field`\n    - Reserved for Future Use\n    -  Display Method0123\n    -  User Input Flag0 1 \n    -  Transparent Flag 1  Transparent Color Index  0 \n- `Delay Time` GIF  0 \n- `Transparent Color Index` Transparent Flag  1  Global Color Table \n- `Block Terminator` Extension \n\n Graphics Control Extension \n\n    21 F9 04 00 00 00 00 00\n\n 21F9  Graphics Control Extension \nByte Size  4\n 0  Graphics Control Extension \n\n# Image Descriptor\n\n 21  Extension  Image Descriptor  `2C` Image Descriptor \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-607ad12f91e24c47.webp)\n\n\n Image Seperator  2C\n\n- `Image Left` 0 \n- `Image Top` 0 \n- `Image Width`\n- `Image Height`\n- `Packed Field`\n    - Local Color Table Flag1 0 \n    - Interlace Flag1 0 \n    - Sort Flag Local Color Table  Global Color Table\n    - Reserved For Future Use\n    - Size of Local Color Table Global Color Table \n    \n\n\n    2C 00 00 00 00 0A 00 0A 00 00 \n\n2C  Image Descriptor\nImage Left = 0\nImage Top = 0\nImage Width = 10\nImage Height = 10\n 10*10  GIF \n Local Color Table\n\n>  Logical Screen Descriptor  Image Descriptor  GIF  GIF  Image LeftImage TopImage Width  Image Height GIF \n\n\n# Local Color Table\nlocal color table  Global Color Table \n\n# Image Data\n\n Local Color TableImage Data  Image Descriptor  Image Data \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-8b4ded747247ce4a.webp)\n\n- `LZW Minimum Code Size`: GIF  Color Table  LZW  LZW Minimum Code Size  LZW  LZW \n- `Number of bytes of data in sun-blocks01-FF` 01-FF 0 Image Data  FF Data sub-Blocks\n- `Data Sub-Block(s)`\n- `Block Terminator` Image Data \n\n\n\n    02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00\n    \n02  LZW Minimum Code Size\n16  22 \n00  Image Data \n\n# Trailer\n\n 3B GIF GIF \n\n# Plain Text ExtensionApplication ExtensionComment Extension\n\n Extension GIF \n\n# \n GIF GIF  LZW  LZW GIF  LWZ LWZ  GIF ","slug":"git-intro","published":1,"updated":"2024-08-21T03:16:19.785Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vu001a5p6tfxsu8hac","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-9a836aaf2873ebc0.webp\" alt=\"gif\"></p>\n<p> C++  GIF  GIF  LZW  GIF  GIF </p>\n<p></p>\n<blockquote>\n<p><a href=\"http://giflib.sourceforge.net/index.html\">http://giflib.sourceforge.net/index.html</a><br><a href=\"https://www.w3.org/Graphics/GIF/spec-gif89a.txt\">https://www.w3.org/Graphics/GIF/spec-gif89a.txt</a></p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"GIF-\"><a href=\"#GIF-\" class=\"headerlink\" title=\"GIF \"></a>GIF </h1><p> <a href=\"http://giflib.sourceforge.net/index.html\">http://giflib.sourceforge.net/index.html</a>  GIF </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-d2847ad5154c6744.webp\" alt=\"image\"></p>\n<p> GIF <code>Header</code><code>Logical Screen Descriptor</code><code>Image Descriptor</code><code>Image Data</code><code>Plain Text Extension</code><code>Application Extension</code><code>Comment Extension</code><code>Trailer</code></p>\n<p><code>Global Color Table</code><code>Graphic Control Extension</code><code>Local Color Table</code></p>\n<p> Gif  GIF </p>\n<p> <a href=\"http://giflib.sourceforge.net/index.html\">http://giflib.sourceforge.net/index.html</a>  GIF </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-434075727f059761.webp\" alt=\"image\"></p>\n<p></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-9da5a168aebb3bf5.webp\" alt=\"image\"></p>\n<p> 10*10  GIF </p>\n<pre><code>47 49 46 38 39 61 \n0A 00 0A 00 91 00 00 \nFF FF FF FF 00 00 00 00 FF 00 00 00 \n21 F9 04 00 00 00 00 00 \n2C 00 00 00 00 0A 00 0A 00 00 \n02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00\n3B</code></pre><h2 id=\"Header\"><a href=\"#Header\" class=\"headerlink\" title=\"Header\"></a>Header</h2><p>GIF  Header Header </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-4309aa3f589fbaa8.webp\" alt=\"image\"></p>\n<p> ASCII  GIF  GIF  87a  89a </p>\n<p> 474946383961  0xED </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-c558f44ea7b41241.webp\" alt=\"image\"></p>\n<h2 id=\"Logical-Screen-Descriptor\"><a href=\"#Logical-Screen-Descriptor\" class=\"headerlink\" title=\"Logical Screen Descriptor\"></a>Logical Screen Descriptor</h2><p>Logical Screen Descriptor Header  GIF  Global Color Table </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-49686736a5ecb836.webp\" alt=\"image\"></p>\n<p></p>\n<ul>\n<li><code>Canvas Width</code> GIF </li>\n<li><code>Canvas Height</code> GIF </li>\n<li><code>Packed Field</code> bit<ul>\n<li> <code>Global Color Table Flag</code> 1  Global Color Table 0 Global Color Table</li>\n<li> <code>Color Resolution</code> s Global Color Table  2^(s+1) s = 1, 4  2 </li>\n<li> <code>Sort Flag</code> 0  1 0  Global Color Table  1  Global Color Table </li>\n<li> Global Color Table  s 2^(s+1) s = 1 Global Color Table  4 </li>\n</ul>\n</li>\n<li><code>Background Color Index</code> GIF  Global Color Table </li>\n<li><code>Pixel Aspect Ratio</code> 0</li>\n</ul>\n<p> Logical Screen Descriptor </p>\n<pre><code>0A 00 0A 00 91 00 00</code></pre><p><br><code>Canvas Width</code> = 0A00 = 10<br><code>Canvas Height</code> = 0A00 = 10<br><code>Packed Field</code> = 10010001 Global Color Table  1 Global Color TableColor Resolution  1 2 Sort Flag = 0Global Color Table  4 <br><code>Background Color Index</code> = 0 GIF  Global Color Table <br><code>Pixel Aspect Ratio</code> = 0,</p>\n<h1 id=\"Global-Color-Table\"><a href=\"#Global-Color-Table\" class=\"headerlink\" title=\"Global Color Table\"></a>Global Color Table</h1><p>Global Color Table  Logical Screen Descriptor </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-49686736a5ecb836.webp\" alt=\"image\"></p>\n<p> Global Color Table  Global Color Table  =  * 3. Logical Screen Descriptor  4  Global Color Table  12  12 </p>\n<pre><code>FF FF FF FF 00 00 00 00 FF 00 00 00 </code></pre><p> Global Color Table</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td>FFFFFF</td>\n<td></td>\n</tr>\n<tr>\n<td>1</td>\n<td>FF0000</td>\n<td></td>\n</tr>\n<tr>\n<td>2</td>\n<td>0000FF</td>\n<td></td>\n</tr>\n<tr>\n<td>3</td>\n<td>000000</td>\n<td></td>\n</tr>\n</tbody></table>\n<h1 id=\"Graphics-Control-Extension\"><a href=\"#Graphics-Control-Extension\" class=\"headerlink\" title=\"Graphics Control Extension\"></a>Graphics Control Extension</h1><p> Graphics Control Extension Global Color Table <code>21</code>21 GIF  Extension Introducer</p>\n<p>OK 21 <code>F9</code>F9  Graphics Control Extension</p>\n<p>Graphics Control Extension  21  F9 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-ebc764ba29f365c1.webp\" alt=\"image\"></p>\n<p></p>\n<ul>\n<li><code>Byte Size</code></li>\n<li><code>Packed Field</code><ul>\n<li>Reserved for Future Use</li>\n<li> Display Method0123</li>\n<li> User Input Flag0 1 </li>\n<li> Transparent Flag 1  Transparent Color Index  0 </li>\n</ul>\n</li>\n<li><code>Delay Time</code> GIF  0 </li>\n<li><code>Transparent Color Index</code> Transparent Flag  1  Global Color Table </li>\n<li><code>Block Terminator</code> Extension </li>\n</ul>\n<p> Graphics Control Extension </p>\n<pre><code>21 F9 04 00 00 00 00 00</code></pre><p> 21F9  Graphics Control Extension <br>Byte Size  4<br> 0  Graphics Control Extension </p>\n<h1 id=\"Image-Descriptor\"><a href=\"#Image-Descriptor\" class=\"headerlink\" title=\"Image Descriptor\"></a>Image Descriptor</h1><p> 21  Extension  Image Descriptor  <code>2C</code> Image Descriptor </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-607ad12f91e24c47.webp\" alt=\"image\"></p>\n<p> Image Seperator  2C</p>\n<ul>\n<li><code>Image Left</code> 0 </li>\n<li><code>Image Top</code> 0 </li>\n<li><code>Image Width</code></li>\n<li><code>Image Height</code></li>\n<li><code>Packed Field</code><ul>\n<li>Local Color Table Flag1 0 </li>\n<li>Interlace Flag1 0 </li>\n<li>Sort Flag Local Color Table  Global Color Table</li>\n<li>Reserved For Future Use</li>\n<li>Size of Local Color Table Global Color Table </li>\n</ul>\n</li>\n</ul>\n<p></p>\n<pre><code>2C 00 00 00 00 0A 00 0A 00 00 </code></pre><p>2C  Image Descriptor<br>Image Left = 0<br>Image Top = 0<br>Image Width = 10<br>Image Height = 10<br> 10*10  GIF <br> Local Color Table</p>\n<blockquote>\n<p> Logical Screen Descriptor  Image Descriptor  GIF  GIF  Image LeftImage TopImage Width  Image Height GIF </p>\n</blockquote>\n<h1 id=\"Local-Color-Table\"><a href=\"#Local-Color-Table\" class=\"headerlink\" title=\"Local Color Table\"></a>Local Color Table</h1><p>local color table  Global Color Table </p>\n<h1 id=\"Image-Data\"><a href=\"#Image-Data\" class=\"headerlink\" title=\"Image Data\"></a>Image Data</h1><p> Local Color TableImage Data  Image Descriptor  Image Data </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-8b4ded747247ce4a.webp\" alt=\"image\"></p>\n<ul>\n<li><code>LZW Minimum Code Size</code>: GIF  Color Table  LZW  LZW Minimum Code Size  LZW  LZW </li>\n<li><code>Number of bytes of data in sun-blocks01-FF</code> 01-FF 0 Image Data  FF Data sub-Blocks</li>\n<li><code>Data Sub-Block(s)</code></li>\n<li><code>Block Terminator</code> Image Data </li>\n</ul>\n<p></p>\n<pre><code>02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00</code></pre><p>02  LZW Minimum Code Size<br>16  22 <br>00  Image Data </p>\n<h1 id=\"Trailer\"><a href=\"#Trailer\" class=\"headerlink\" title=\"Trailer\"></a>Trailer</h1><p> 3B GIF GIF </p>\n<h1 id=\"Plain-Text-ExtensionApplication-ExtensionComment-Extension\"><a href=\"#Plain-Text-ExtensionApplication-ExtensionComment-Extension\" class=\"headerlink\" title=\"Plain Text ExtensionApplication ExtensionComment Extension\"></a>Plain Text ExtensionApplication ExtensionComment Extension</h1><p> Extension GIF </p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p> GIF GIF  LZW  LZW GIF  LWZ LWZ  GIF </p>\n","excerpt":"<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-9a836aaf2873ebc0.webp\" alt=\"gif\"></p>\n<p> C++  GIF  GIF  LZW  GIF  GIF </p>\n<p></p>\n<blockquote>\n<p><a href=\"http://giflib.sourceforge.net/index.html\">http://giflib.sourceforge.net/index.html</a><br><a href=\"https://www.w3.org/Graphics/GIF/spec-gif89a.txt\">https://www.w3.org/Graphics/GIF/spec-gif89a.txt</a></p>\n</blockquote>","more":"<h1 id=\"GIF-\"><a href=\"#GIF-\" class=\"headerlink\" title=\"GIF \"></a>GIF </h1><p> <a href=\"http://giflib.sourceforge.net/index.html\">http://giflib.sourceforge.net/index.html</a>  GIF </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-d2847ad5154c6744.webp\" alt=\"image\"></p>\n<p> GIF <code>Header</code><code>Logical Screen Descriptor</code><code>Image Descriptor</code><code>Image Data</code><code>Plain Text Extension</code><code>Application Extension</code><code>Comment Extension</code><code>Trailer</code></p>\n<p><code>Global Color Table</code><code>Graphic Control Extension</code><code>Local Color Table</code></p>\n<p> Gif  GIF </p>\n<p> <a href=\"http://giflib.sourceforge.net/index.html\">http://giflib.sourceforge.net/index.html</a>  GIF </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-434075727f059761.webp\" alt=\"image\"></p>\n<p></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-9da5a168aebb3bf5.webp\" alt=\"image\"></p>\n<p> 10*10  GIF </p>\n<pre><code>47 49 46 38 39 61 \n0A 00 0A 00 91 00 00 \nFF FF FF FF 00 00 00 00 FF 00 00 00 \n21 F9 04 00 00 00 00 00 \n2C 00 00 00 00 0A 00 0A 00 00 \n02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00\n3B</code></pre><h2 id=\"Header\"><a href=\"#Header\" class=\"headerlink\" title=\"Header\"></a>Header</h2><p>GIF  Header Header </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-4309aa3f589fbaa8.webp\" alt=\"image\"></p>\n<p> ASCII  GIF  GIF  87a  89a </p>\n<p> 474946383961  0xED </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-c558f44ea7b41241.webp\" alt=\"image\"></p>\n<h2 id=\"Logical-Screen-Descriptor\"><a href=\"#Logical-Screen-Descriptor\" class=\"headerlink\" title=\"Logical Screen Descriptor\"></a>Logical Screen Descriptor</h2><p>Logical Screen Descriptor Header  GIF  Global Color Table </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-49686736a5ecb836.webp\" alt=\"image\"></p>\n<p></p>\n<ul>\n<li><code>Canvas Width</code> GIF </li>\n<li><code>Canvas Height</code> GIF </li>\n<li><code>Packed Field</code> bit<ul>\n<li> <code>Global Color Table Flag</code> 1  Global Color Table 0 Global Color Table</li>\n<li> <code>Color Resolution</code> s Global Color Table  2^(s+1) s = 1, 4  2 </li>\n<li> <code>Sort Flag</code> 0  1 0  Global Color Table  1  Global Color Table </li>\n<li> Global Color Table  s 2^(s+1) s = 1 Global Color Table  4 </li>\n</ul>\n</li>\n<li><code>Background Color Index</code> GIF  Global Color Table </li>\n<li><code>Pixel Aspect Ratio</code> 0</li>\n</ul>\n<p> Logical Screen Descriptor </p>\n<pre><code>0A 00 0A 00 91 00 00</code></pre><p><br><code>Canvas Width</code> = 0A00 = 10<br><code>Canvas Height</code> = 0A00 = 10<br><code>Packed Field</code> = 10010001 Global Color Table  1 Global Color TableColor Resolution  1 2 Sort Flag = 0Global Color Table  4 <br><code>Background Color Index</code> = 0 GIF  Global Color Table <br><code>Pixel Aspect Ratio</code> = 0,</p>\n<h1 id=\"Global-Color-Table\"><a href=\"#Global-Color-Table\" class=\"headerlink\" title=\"Global Color Table\"></a>Global Color Table</h1><p>Global Color Table  Logical Screen Descriptor </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-49686736a5ecb836.webp\" alt=\"image\"></p>\n<p> Global Color Table  Global Color Table  =  * 3. Logical Screen Descriptor  4  Global Color Table  12  12 </p>\n<pre><code>FF FF FF FF 00 00 00 00 FF 00 00 00 </code></pre><p> Global Color Table</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td>FFFFFF</td>\n<td></td>\n</tr>\n<tr>\n<td>1</td>\n<td>FF0000</td>\n<td></td>\n</tr>\n<tr>\n<td>2</td>\n<td>0000FF</td>\n<td></td>\n</tr>\n<tr>\n<td>3</td>\n<td>000000</td>\n<td></td>\n</tr>\n</tbody></table>\n<h1 id=\"Graphics-Control-Extension\"><a href=\"#Graphics-Control-Extension\" class=\"headerlink\" title=\"Graphics Control Extension\"></a>Graphics Control Extension</h1><p> Graphics Control Extension Global Color Table <code>21</code>21 GIF  Extension Introducer</p>\n<p>OK 21 <code>F9</code>F9  Graphics Control Extension</p>\n<p>Graphics Control Extension  21  F9 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-ebc764ba29f365c1.webp\" alt=\"image\"></p>\n<p></p>\n<ul>\n<li><code>Byte Size</code></li>\n<li><code>Packed Field</code><ul>\n<li>Reserved for Future Use</li>\n<li> Display Method0123</li>\n<li> User Input Flag0 1 </li>\n<li> Transparent Flag 1  Transparent Color Index  0 </li>\n</ul>\n</li>\n<li><code>Delay Time</code> GIF  0 </li>\n<li><code>Transparent Color Index</code> Transparent Flag  1  Global Color Table </li>\n<li><code>Block Terminator</code> Extension </li>\n</ul>\n<p> Graphics Control Extension </p>\n<pre><code>21 F9 04 00 00 00 00 00</code></pre><p> 21F9  Graphics Control Extension <br>Byte Size  4<br> 0  Graphics Control Extension </p>\n<h1 id=\"Image-Descriptor\"><a href=\"#Image-Descriptor\" class=\"headerlink\" title=\"Image Descriptor\"></a>Image Descriptor</h1><p> 21  Extension  Image Descriptor  <code>2C</code> Image Descriptor </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-607ad12f91e24c47.webp\" alt=\"image\"></p>\n<p> Image Seperator  2C</p>\n<ul>\n<li><code>Image Left</code> 0 </li>\n<li><code>Image Top</code> 0 </li>\n<li><code>Image Width</code></li>\n<li><code>Image Height</code></li>\n<li><code>Packed Field</code><ul>\n<li>Local Color Table Flag1 0 </li>\n<li>Interlace Flag1 0 </li>\n<li>Sort Flag Local Color Table  Global Color Table</li>\n<li>Reserved For Future Use</li>\n<li>Size of Local Color Table Global Color Table </li>\n</ul>\n</li>\n</ul>\n<p></p>\n<pre><code>2C 00 00 00 00 0A 00 0A 00 00 </code></pre><p>2C  Image Descriptor<br>Image Left = 0<br>Image Top = 0<br>Image Width = 10<br>Image Height = 10<br> 10*10  GIF <br> Local Color Table</p>\n<blockquote>\n<p> Logical Screen Descriptor  Image Descriptor  GIF  GIF  Image LeftImage TopImage Width  Image Height GIF </p>\n</blockquote>\n<h1 id=\"Local-Color-Table\"><a href=\"#Local-Color-Table\" class=\"headerlink\" title=\"Local Color Table\"></a>Local Color Table</h1><p>local color table  Global Color Table </p>\n<h1 id=\"Image-Data\"><a href=\"#Image-Data\" class=\"headerlink\" title=\"Image Data\"></a>Image Data</h1><p> Local Color TableImage Data  Image Descriptor  Image Data </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/2702499-8b4ded747247ce4a.webp\" alt=\"image\"></p>\n<ul>\n<li><code>LZW Minimum Code Size</code>: GIF  Color Table  LZW  LZW Minimum Code Size  LZW  LZW </li>\n<li><code>Number of bytes of data in sun-blocks01-FF</code> 01-FF 0 Image Data  FF Data sub-Blocks</li>\n<li><code>Data Sub-Block(s)</code></li>\n<li><code>Block Terminator</code> Image Data </li>\n</ul>\n<p></p>\n<pre><code>02 16 8C 2D 99 87 2A 1C DC 33 A0 02 75 EC 95 FA A8 DE 60 8C 04 91 4C 01 00</code></pre><p>02  LZW Minimum Code Size<br>16  22 <br>00  Image Data </p>\n<h1 id=\"Trailer\"><a href=\"#Trailer\" class=\"headerlink\" title=\"Trailer\"></a>Trailer</h1><p> 3B GIF GIF </p>\n<h1 id=\"Plain-Text-ExtensionApplication-ExtensionComment-Extension\"><a href=\"#Plain-Text-ExtensionApplication-ExtensionComment-Extension\" class=\"headerlink\" title=\"Plain Text ExtensionApplication ExtensionComment Extension\"></a>Plain Text ExtensionApplication ExtensionComment Extension</h1><p> Extension GIF </p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p> GIF GIF  LZW  LZW GIF  LWZ LWZ  GIF </p>"},{"title":"2020 ","date":"2020-01-31T15:52:10.000Z","cover":"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/wanxia.jpg","_content":"\n2020\n\n<!-- more -->\n<iframe src=\"//player.bilibili.com/player.html?aid=86118628&bvid=BV147411x7Tu&cid=147152633&page=1\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" width=\"800\" height=\"600\"> </iframe>","source":"_posts/go-home.md","raw":"---\ntitle: 2020 \ndate: 2020-01-31 23:52:10\ntags: \ncover: https://blog-1256162814.cos.ap-nanjing.myqcloud.com/wanxia.jpg\n---\n\n2020\n\n<!-- more -->\n<iframe src=\"//player.bilibili.com/player.html?aid=86118628&bvid=BV147411x7Tu&cid=147152633&page=1\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" width=\"800\" height=\"600\"> </iframe>","slug":"go-home","published":1,"updated":"2024-08-21T03:16:19.785Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vu001c5p6t738l3jw7","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>2020</p>\n<span id=\"more\"></span>\n<iframe src=\"//player.bilibili.com/player.html?aid=86118628&bvid=BV147411x7Tu&cid=147152633&page=1\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" width=\"800\" height=\"600\"> </iframe>","excerpt":"<p>2020</p>","more":"<iframe src=\"//player.bilibili.com/player.html?aid=86118628&bvid=BV147411x7Tu&cid=147152633&page=1\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" width=\"800\" height=\"600\"> </iframe>"},{"title":"JVM ","date":"2017-12-07T13:38:50.000Z","cover":"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/1.webp","top":6,"_content":"## Java\n Java\n\n```java\npackage com.zqlite.jvm;\n\npublic class HelloJVM {\n\n    private static final int k = 100;\n    public static void main(String ...args){\n        int a = 0,b=3;\n        System.out.println(a+b+k);\n    }\n}\n```\n<!-- more -->\n Java  Java Java \n\n1. Java \n2.  Java \n3. Class \n4. Java API \n5.  Java \n\n 145 23 Java  2  3 Java\n\n## JVM\n\nJVMJava Virtual Machine Java  Class  Class  JVM JVM  Class  JVM  Class Class \n\n### JVM  Java \n\n CC++ \n\n Java  JVM  JVM \n\n JVM  Java  Java \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/1.webp)\n\n\n\n- \n-  GC \n-  Java \n-  Native \n- \n\n\n\n```java\nString str = \"a\";\n```\n\n a \n\n> Java  String  JVM \n\n###  JVM \n\n Java  new \n\n JVM  new JVM  new \n\n\n\n\n\n```java\npackage com.zqlite.jvm;\n\npublic class HelloJVM {\n\n    public static void main(String ...args){\n        Object obj = new Object();\n    }\n}\n```\n javap  class \n\n```class\nClassfile /Users/scott/workspace/jvm/out/production/jvm/com/zqlite/jvm/HelloJVM.class\n  Last modified 2017-11-29; size 446 bytes\n  MD5 checksum bcc0b2d9129748ef0caa00e95cf95a47\n  Compiled from \"HelloJVM.java\"\npublic class com.zqlite.jvm.HelloJVM\n  minor version: 0\n  major version: 52\n  flags: ACC_PUBLIC, ACC_SUPER\nConstant pool:\n   #1 = Methodref          #2.#19         // java/lang/Object.\"<init>\":()V\n   #2 = Class              #20            // java/lang/Object\n   #3 = Class              #21            // com/zqlite/jvm/HelloJVM\n   #4 = Utf8               <init>\n   #5 = Utf8               ()V\n   #6 = Utf8               Code\n   #7 = Utf8               LineNumberTable\n   #8 = Utf8               LocalVariableTable\n   #9 = Utf8               this\n  #10 = Utf8               Lcom/zqlite/jvm/HelloJVM;\n  #11 = Utf8               main\n  #12 = Utf8               ([Ljava/lang/String;)V\n  #13 = Utf8               args\n  #14 = Utf8               [Ljava/lang/String;\n  #15 = Utf8               obj\n  #16 = Utf8               Ljava/lang/Object;\n  #17 = Utf8               SourceFile\n  #18 = Utf8               HelloJVM.java\n  #19 = NameAndType        #4:#5          // \"<init>\":()V\n  #20 = Utf8               java/lang/Object\n  #21 = Utf8               com/zqlite/jvm/HelloJVM\n{\n  public com.zqlite.jvm.HelloJVM();\n    descriptor: ()V\n    flags: ACC_PUBLIC\n    Code:\n      stack=1, locals=1, args_size=1\n         0: aload_0\n         1: invokespecial #1                  // Method java/lang/Object.\"<init>\":()V\n         4: return\n      LineNumberTable:\n        line 6: 0\n      LocalVariableTable:\n        Start  Length  Slot  Name   Signature\n            0       5     0  this   Lcom/zqlite/jvm/HelloJVM;\n\n  public static void main(java.lang.String...);\n    descriptor: ([Ljava/lang/String;)V\n    flags: ACC_PUBLIC, ACC_STATIC, ACC_VARARGS\n    Code:\n      stack=2, locals=2, args_size=1\n         0: new           #2                  // class java/lang/Object\n         3: dup\n         4: invokespecial #1                  // Method java/lang/Object.\"<init>\":()V\n         7: astore_1\n         8: return\n      LineNumberTable:\n        line 9: 0\n        line 10: 8\n      LocalVariableTable:\n        Start  Length  Slot  Name   Signature\n            0       9     0  args   [Ljava/lang/String;\n            8       1     1   obj   Ljava/lang/Object;\n}\nSourceFile: \"HelloJVM.java\"\n\n```\n new \n\n\n\n```class\n0: new           #2\n```\n\n new  #2 #2 Constant pool #2 \n\n```class\n#2 = Class              #20            // java/lang/Object\n```\n\n #2  #20  #20 \n\n```class\n#20 = Utf8               java/lang/Object\n```\n\n #20  ava/lang/Object Object  JVM \n\nJVM  Java \n \nJVM \n \n >  JVM  int i  0 Java  i i  i \n \nJVM  GC \n \n JVM  Java <init>  new  invokespecial  <init>  <init> \n \n### \n \n JVM \n \n\n \nGC JVM \n \n\n \n 8  8 \n \n\n \n ![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/2.webp)\n \n\n## Class \n\n 0  1  0  1  Class \n\n Java  JVM  JVM  JavaJVM  Class  Class  ClojureGroovyJrubyJythonScala  Class  JVM \n\n### Class \n\nClass  8  Class  Class \n\nClass \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/3.webp)\n\n u4u2 u1u8 u1  1 u2  2  constant\\_pool  Class  constant\\_pool  constant\\_pool\\_count constant\\_pool\\_count \n\n Class  Class  Class  javap \n\n```sh\njavap -v ClassFile\n```\n\n### \n\nJVM  JVM  8  JVM  256 \n\n\n iload  int  fload  float \n\ni  int l  longs  shortb  bytec  charf  floatd  doublea  reference\n\n JVM [http://17b84ff5.wiz03.com/share/s/0nK4_R1FrArb2bpd-P3HNDCf0YLy5c0dYAqj2-_XjE3Jsh_A](http://17b84ff5.wiz03.com/share/s/0nK4_R1FrArb2bpd-P3HNDCf0YLy5c0dYAqj2-_XjE3Jsh_A)\n\n\n## JVM  Class \n\n JVM  Class Java \n\n### \n\nClass  JVM \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/4.webp)\n\n\n\n\n-  JVM \n\n1. \n2. \n3.  java.lang.Class \n\n Java \n\n-  Class \n\n- static \n\n- JVM \n\n-  JVM  Java  JVM JVM  <clinit>()  static{ ... } \n\n- \n\n-  JVM \n\n### \n\n JVM JVM  JVM  Java  Java  Java Applet  Java Applet OSGi Java \n\n toString \n\n```java\npackage com.zqlite.jvm;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\n\npublic class HelloJVM {\n\n    public static void main(String ...args){\n        \n        MyNetClassLoader classLoader = new MyNetClassLoader();\n        try {\n            Class<?> clazz = classLoader.findClass(\"http://7xprgn.com1.z0.glb.clouddn.com/RemoteClass.class\");\n            Object o = clazz.newInstance();\n            System.out.print(o.toString());\n        } catch (ClassNotFoundException |IllegalAccessException | InstantiationException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private static class MyNetClassLoader extends ClassLoader{\n        @Override\n        protected Class<?> findClass(String name) throws ClassNotFoundException {\n            try {\n                URL url = new URL(name);\n                HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n                InputStream inputStream =  connection.getInputStream();\n                byte[] b = new byte[inputStream.available()];\n                inputStream.read(b);\n                return defineClass(\"com.zqlite.jvm.RemoteClass\",b,0,b.length);\n\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n            return super.findClass(name);\n        }\n    }\n}\n```\n\n MyNetClassLoader  ClassLoader  findClass  findClass  defineClass  class \n\n class  newInstance  RemoteClass  toString \n\n\n### \n\n JVM  Java  JVM \n\n#### \n\n JVM \n\nJVM \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/5.webp)\n\n#### \n\n\n\n```java\npackage com.zqlite.jvm;\n\npublic class HelloJVM {\n\n    public static void main(String ...args){\n        calc();\n    }\n\n    public static int calc(){\n        int a = 100;\n        int b = 200;\n        int c = 300;\n        return (a + b) * c;\n    }\n}\n```\n\n Java  javap \n\n```class\nClassfile /Users/scott/workspace/jvm/out/production/jvm/com/zqlite/jvm/HelloJVM.class\n  Last modified 2017-11-30; size 549 bytes\n  MD5 checksum 1bf313c415146d6070a30e8addc83a8c\n  Compiled from \"HelloJVM.java\"\npublic class com.zqlite.jvm.HelloJVM\n  minor version: 0\n  major version: 52\n  flags: ACC_PUBLIC, ACC_SUPER\nConstant pool:\n   #1 = Methodref          #4.#24         // java/lang/Object.\"<init>\":()V\n   #2 = Methodref          #3.#25         // com/zqlite/jvm/HelloJVM.calc:()I\n   #3 = Class              #26            // com/zqlite/jvm/HelloJVM\n   #4 = Class              #27            // java/lang/Object\n   #5 = Utf8               <init>\n   #6 = Utf8               ()V\n   #7 = Utf8               Code\n   #8 = Utf8               LineNumberTable\n   #9 = Utf8               LocalVariableTable\n  #10 = Utf8               this\n  #11 = Utf8               Lcom/zqlite/jvm/HelloJVM;\n  #12 = Utf8               main\n  #13 = Utf8               ([Ljava/lang/String;)V\n  #14 = Utf8               args\n  #15 = Utf8               [Ljava/lang/String;\n  #16 = Utf8               calc\n  #17 = Utf8               ()I\n  #18 = Utf8               a\n  #19 = Utf8               I\n  #20 = Utf8               b\n  #21 = Utf8               c\n  #22 = Utf8               SourceFile\n  #23 = Utf8               HelloJVM.java\n  #24 = NameAndType        #5:#6          // \"<init>\":()V\n  #25 = NameAndType        #16:#17        // calc:()I\n  #26 = Utf8               com/zqlite/jvm/HelloJVM\n  #27 = Utf8               java/lang/Object\n{\n  public com.zqlite.jvm.HelloJVM();\n    descriptor: ()V\n    flags: ACC_PUBLIC\n    Code:\n      stack=1, locals=1, args_size=1\n         0: aload_0\n         1: invokespecial #1                  // Method java/lang/Object.\"<init>\":()V\n         4: return\n      LineNumberTable:\n        line 3: 0\n      LocalVariableTable:\n        Start  Length  Slot  Name   Signature\n            0       5     0  this   Lcom/zqlite/jvm/HelloJVM;\n\n  public static void main(java.lang.String...);\n    descriptor: ([Ljava/lang/String;)V\n    flags: ACC_PUBLIC, ACC_STATIC, ACC_VARARGS\n    Code:\n      stack=1, locals=1, args_size=1\n         0: invokestatic  #2                  // Method calc:()I\n         3: pop\n         4: return\n      LineNumberTable:\n        line 6: 0\n        line 7: 4\n      LocalVariableTable:\n        Start  Length  Slot  Name   Signature\n            0       5     0  args   [Ljava/lang/String;\n\n  public static int calc();\n    descriptor: ()I\n    flags: ACC_PUBLIC, ACC_STATIC\n    Code:\n      stack=2, locals=3, args_size=0\n         0: bipush        100\n         2: istore_0\n         3: sipush        200\n         6: istore_1\n         7: sipush        300\n        10: istore_2\n        11: iload_0\n        12: iload_1\n        13: iadd\n        14: iload_2\n        15: imul\n        16: ireturn\n      LineNumberTable:\n        line 10: 0\n        line 11: 3\n        line 12: 7\n        line 13: 11\n      LocalVariableTable:\n        Start  Length  Slot  Name   Signature\n            3      14     0     a   I\n            7      10     1     b   I\n           11       6     2     c   I\n}\nSourceFile: \"HelloJVM.java\"\n\n```\n\n calc \n\n```class\ndescriptor: ()I\n```\n ()I JNI [](https://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/types.html)\n\n\n\n```class\nflags: ACC_PUBLIC, ACC_STATIC\n```\n\n public static \n\n Code  stack = 2  2 locals = 3 args_size = 0 \n\n LocalVariableTable abc  I  Int \n\n 7 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/6.webp)\n\n 0 \n\n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/7.webp)\n\n 2 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/8.webp)\n\n 11 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/9.webp)\n\n 12 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/10.webp)\n\n 13 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/11.webp)\n\n 14 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/12.webp)\n\n 16 \n\n\n\n## \n\n JVM  GC JVM Java -JVM ","source":"_posts/jvm-preview.md","raw":"---\ntitle: JVM \ndate: 2017-12-07 21:38:50\ntags: java \ncover: https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/1.webp\ntop: 6\n---\n## Java\n Java\n\n```java\npackage com.zqlite.jvm;\n\npublic class HelloJVM {\n\n    private static final int k = 100;\n    public static void main(String ...args){\n        int a = 0,b=3;\n        System.out.println(a+b+k);\n    }\n}\n```\n<!-- more -->\n Java  Java Java \n\n1. Java \n2.  Java \n3. Class \n4. Java API \n5.  Java \n\n 145 23 Java  2  3 Java\n\n## JVM\n\nJVMJava Virtual Machine Java  Class  Class  JVM JVM  Class  JVM  Class Class \n\n### JVM  Java \n\n CC++ \n\n Java  JVM  JVM \n\n JVM  Java  Java \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/1.webp)\n\n\n\n- \n-  GC \n-  Java \n-  Native \n- \n\n\n\n```java\nString str = \"a\";\n```\n\n a \n\n> Java  String  JVM \n\n###  JVM \n\n Java  new \n\n JVM  new JVM  new \n\n\n\n\n\n```java\npackage com.zqlite.jvm;\n\npublic class HelloJVM {\n\n    public static void main(String ...args){\n        Object obj = new Object();\n    }\n}\n```\n javap  class \n\n```class\nClassfile /Users/scott/workspace/jvm/out/production/jvm/com/zqlite/jvm/HelloJVM.class\n  Last modified 2017-11-29; size 446 bytes\n  MD5 checksum bcc0b2d9129748ef0caa00e95cf95a47\n  Compiled from \"HelloJVM.java\"\npublic class com.zqlite.jvm.HelloJVM\n  minor version: 0\n  major version: 52\n  flags: ACC_PUBLIC, ACC_SUPER\nConstant pool:\n   #1 = Methodref          #2.#19         // java/lang/Object.\"<init>\":()V\n   #2 = Class              #20            // java/lang/Object\n   #3 = Class              #21            // com/zqlite/jvm/HelloJVM\n   #4 = Utf8               <init>\n   #5 = Utf8               ()V\n   #6 = Utf8               Code\n   #7 = Utf8               LineNumberTable\n   #8 = Utf8               LocalVariableTable\n   #9 = Utf8               this\n  #10 = Utf8               Lcom/zqlite/jvm/HelloJVM;\n  #11 = Utf8               main\n  #12 = Utf8               ([Ljava/lang/String;)V\n  #13 = Utf8               args\n  #14 = Utf8               [Ljava/lang/String;\n  #15 = Utf8               obj\n  #16 = Utf8               Ljava/lang/Object;\n  #17 = Utf8               SourceFile\n  #18 = Utf8               HelloJVM.java\n  #19 = NameAndType        #4:#5          // \"<init>\":()V\n  #20 = Utf8               java/lang/Object\n  #21 = Utf8               com/zqlite/jvm/HelloJVM\n{\n  public com.zqlite.jvm.HelloJVM();\n    descriptor: ()V\n    flags: ACC_PUBLIC\n    Code:\n      stack=1, locals=1, args_size=1\n         0: aload_0\n         1: invokespecial #1                  // Method java/lang/Object.\"<init>\":()V\n         4: return\n      LineNumberTable:\n        line 6: 0\n      LocalVariableTable:\n        Start  Length  Slot  Name   Signature\n            0       5     0  this   Lcom/zqlite/jvm/HelloJVM;\n\n  public static void main(java.lang.String...);\n    descriptor: ([Ljava/lang/String;)V\n    flags: ACC_PUBLIC, ACC_STATIC, ACC_VARARGS\n    Code:\n      stack=2, locals=2, args_size=1\n         0: new           #2                  // class java/lang/Object\n         3: dup\n         4: invokespecial #1                  // Method java/lang/Object.\"<init>\":()V\n         7: astore_1\n         8: return\n      LineNumberTable:\n        line 9: 0\n        line 10: 8\n      LocalVariableTable:\n        Start  Length  Slot  Name   Signature\n            0       9     0  args   [Ljava/lang/String;\n            8       1     1   obj   Ljava/lang/Object;\n}\nSourceFile: \"HelloJVM.java\"\n\n```\n new \n\n\n\n```class\n0: new           #2\n```\n\n new  #2 #2 Constant pool #2 \n\n```class\n#2 = Class              #20            // java/lang/Object\n```\n\n #2  #20  #20 \n\n```class\n#20 = Utf8               java/lang/Object\n```\n\n #20  ava/lang/Object Object  JVM \n\nJVM  Java \n \nJVM \n \n >  JVM  int i  0 Java  i i  i \n \nJVM  GC \n \n JVM  Java <init>  new  invokespecial  <init>  <init> \n \n### \n \n JVM \n \n\n \nGC JVM \n \n\n \n 8  8 \n \n\n \n ![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/2.webp)\n \n\n## Class \n\n 0  1  0  1  Class \n\n Java  JVM  JVM  JavaJVM  Class  Class  ClojureGroovyJrubyJythonScala  Class  JVM \n\n### Class \n\nClass  8  Class  Class \n\nClass \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/3.webp)\n\n u4u2 u1u8 u1  1 u2  2  constant\\_pool  Class  constant\\_pool  constant\\_pool\\_count constant\\_pool\\_count \n\n Class  Class  Class  javap \n\n```sh\njavap -v ClassFile\n```\n\n### \n\nJVM  JVM  8  JVM  256 \n\n\n iload  int  fload  float \n\ni  int l  longs  shortb  bytec  charf  floatd  doublea  reference\n\n JVM [http://17b84ff5.wiz03.com/share/s/0nK4_R1FrArb2bpd-P3HNDCf0YLy5c0dYAqj2-_XjE3Jsh_A](http://17b84ff5.wiz03.com/share/s/0nK4_R1FrArb2bpd-P3HNDCf0YLy5c0dYAqj2-_XjE3Jsh_A)\n\n\n## JVM  Class \n\n JVM  Class Java \n\n### \n\nClass  JVM \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/4.webp)\n\n\n\n\n-  JVM \n\n1. \n2. \n3.  java.lang.Class \n\n Java \n\n-  Class \n\n- static \n\n- JVM \n\n-  JVM  Java  JVM JVM  <clinit>()  static{ ... } \n\n- \n\n-  JVM \n\n### \n\n JVM JVM  JVM  Java  Java  Java Applet  Java Applet OSGi Java \n\n toString \n\n```java\npackage com.zqlite.jvm;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\n\npublic class HelloJVM {\n\n    public static void main(String ...args){\n        \n        MyNetClassLoader classLoader = new MyNetClassLoader();\n        try {\n            Class<?> clazz = classLoader.findClass(\"http://7xprgn.com1.z0.glb.clouddn.com/RemoteClass.class\");\n            Object o = clazz.newInstance();\n            System.out.print(o.toString());\n        } catch (ClassNotFoundException |IllegalAccessException | InstantiationException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private static class MyNetClassLoader extends ClassLoader{\n        @Override\n        protected Class<?> findClass(String name) throws ClassNotFoundException {\n            try {\n                URL url = new URL(name);\n                HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n                InputStream inputStream =  connection.getInputStream();\n                byte[] b = new byte[inputStream.available()];\n                inputStream.read(b);\n                return defineClass(\"com.zqlite.jvm.RemoteClass\",b,0,b.length);\n\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n            return super.findClass(name);\n        }\n    }\n}\n```\n\n MyNetClassLoader  ClassLoader  findClass  findClass  defineClass  class \n\n class  newInstance  RemoteClass  toString \n\n\n### \n\n JVM  Java  JVM \n\n#### \n\n JVM \n\nJVM \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/5.webp)\n\n#### \n\n\n\n```java\npackage com.zqlite.jvm;\n\npublic class HelloJVM {\n\n    public static void main(String ...args){\n        calc();\n    }\n\n    public static int calc(){\n        int a = 100;\n        int b = 200;\n        int c = 300;\n        return (a + b) * c;\n    }\n}\n```\n\n Java  javap \n\n```class\nClassfile /Users/scott/workspace/jvm/out/production/jvm/com/zqlite/jvm/HelloJVM.class\n  Last modified 2017-11-30; size 549 bytes\n  MD5 checksum 1bf313c415146d6070a30e8addc83a8c\n  Compiled from \"HelloJVM.java\"\npublic class com.zqlite.jvm.HelloJVM\n  minor version: 0\n  major version: 52\n  flags: ACC_PUBLIC, ACC_SUPER\nConstant pool:\n   #1 = Methodref          #4.#24         // java/lang/Object.\"<init>\":()V\n   #2 = Methodref          #3.#25         // com/zqlite/jvm/HelloJVM.calc:()I\n   #3 = Class              #26            // com/zqlite/jvm/HelloJVM\n   #4 = Class              #27            // java/lang/Object\n   #5 = Utf8               <init>\n   #6 = Utf8               ()V\n   #7 = Utf8               Code\n   #8 = Utf8               LineNumberTable\n   #9 = Utf8               LocalVariableTable\n  #10 = Utf8               this\n  #11 = Utf8               Lcom/zqlite/jvm/HelloJVM;\n  #12 = Utf8               main\n  #13 = Utf8               ([Ljava/lang/String;)V\n  #14 = Utf8               args\n  #15 = Utf8               [Ljava/lang/String;\n  #16 = Utf8               calc\n  #17 = Utf8               ()I\n  #18 = Utf8               a\n  #19 = Utf8               I\n  #20 = Utf8               b\n  #21 = Utf8               c\n  #22 = Utf8               SourceFile\n  #23 = Utf8               HelloJVM.java\n  #24 = NameAndType        #5:#6          // \"<init>\":()V\n  #25 = NameAndType        #16:#17        // calc:()I\n  #26 = Utf8               com/zqlite/jvm/HelloJVM\n  #27 = Utf8               java/lang/Object\n{\n  public com.zqlite.jvm.HelloJVM();\n    descriptor: ()V\n    flags: ACC_PUBLIC\n    Code:\n      stack=1, locals=1, args_size=1\n         0: aload_0\n         1: invokespecial #1                  // Method java/lang/Object.\"<init>\":()V\n         4: return\n      LineNumberTable:\n        line 3: 0\n      LocalVariableTable:\n        Start  Length  Slot  Name   Signature\n            0       5     0  this   Lcom/zqlite/jvm/HelloJVM;\n\n  public static void main(java.lang.String...);\n    descriptor: ([Ljava/lang/String;)V\n    flags: ACC_PUBLIC, ACC_STATIC, ACC_VARARGS\n    Code:\n      stack=1, locals=1, args_size=1\n         0: invokestatic  #2                  // Method calc:()I\n         3: pop\n         4: return\n      LineNumberTable:\n        line 6: 0\n        line 7: 4\n      LocalVariableTable:\n        Start  Length  Slot  Name   Signature\n            0       5     0  args   [Ljava/lang/String;\n\n  public static int calc();\n    descriptor: ()I\n    flags: ACC_PUBLIC, ACC_STATIC\n    Code:\n      stack=2, locals=3, args_size=0\n         0: bipush        100\n         2: istore_0\n         3: sipush        200\n         6: istore_1\n         7: sipush        300\n        10: istore_2\n        11: iload_0\n        12: iload_1\n        13: iadd\n        14: iload_2\n        15: imul\n        16: ireturn\n      LineNumberTable:\n        line 10: 0\n        line 11: 3\n        line 12: 7\n        line 13: 11\n      LocalVariableTable:\n        Start  Length  Slot  Name   Signature\n            3      14     0     a   I\n            7      10     1     b   I\n           11       6     2     c   I\n}\nSourceFile: \"HelloJVM.java\"\n\n```\n\n calc \n\n```class\ndescriptor: ()I\n```\n ()I JNI [](https://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/types.html)\n\n\n\n```class\nflags: ACC_PUBLIC, ACC_STATIC\n```\n\n public static \n\n Code  stack = 2  2 locals = 3 args_size = 0 \n\n LocalVariableTable abc  I  Int \n\n 7 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/6.webp)\n\n 0 \n\n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/7.webp)\n\n 2 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/8.webp)\n\n 11 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/9.webp)\n\n 12 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/10.webp)\n\n 13 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/11.webp)\n\n 14 \n\n![image](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/12.webp)\n\n 16 \n\n\n\n## \n\n JVM  GC JVM Java -JVM ","slug":"jvm-preview","published":1,"updated":"2024-08-21T03:16:19.785Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vu001f5p6t3f87e7l1","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><p> Java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zqlite.jvm;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloJVM</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">k</span> <span class=\"operator\">=</span> <span class=\"number\">100</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String ...args)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>,b=<span class=\"number\">3</span>;</span><br><span class=\"line\">        System.out.println(a+b+k);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<span id=\"more\"></span>\n<p> Java  Java Java </p>\n<ol>\n<li>Java </li>\n<li> Java </li>\n<li>Class </li>\n<li>Java API </li>\n<li> Java </li>\n</ol>\n<p> 145 23 Java  2  3 Java</p>\n<h2 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h2><p>JVMJava Virtual Machine Java  Class  Class  JVM JVM  Class  JVM  Class Class </p>\n<h3 id=\"JVM--Java-\"><a href=\"#JVM--Java-\" class=\"headerlink\" title=\"JVM  Java \"></a>JVM  Java </h3><p> CC++ </p>\n<p> Java  JVM  JVM </p>\n<p> JVM  Java  Java </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/1.webp\" alt=\"image\"></p>\n<p></p>\n<ul>\n<li></li>\n<li> GC </li>\n<li> Java </li>\n<li> Native </li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">str</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;a&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<p> a </p>\n<blockquote>\n<p>Java  String  JVM </p>\n</blockquote>\n<h3 id=\"-JVM-\"><a href=\"#-JVM-\" class=\"headerlink\" title=\" JVM \"></a> JVM </h3><p> Java  new </p>\n<p> JVM  new JVM  new </p>\n<p></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zqlite.jvm;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloJVM</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String ...args)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Object</span> <span class=\"variable\">obj</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> javap  class </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Classfile /Users/scott/workspace/jvm/out/production/jvm/com/zqlite/jvm/HelloJVM.class</span><br><span class=\"line\">  Last modified 2017-11-29; size 446 bytes</span><br><span class=\"line\">  MD5 checksum bcc0b2d9129748ef0caa00e95cf95a47</span><br><span class=\"line\">  Compiled from &quot;HelloJVM.java&quot;</span><br><span class=\"line\">public class com.zqlite.jvm.HelloJVM</span><br><span class=\"line\">  minor version: 0</span><br><span class=\"line\">  major version: 52</span><br><span class=\"line\">  flags: ACC_PUBLIC, ACC_SUPER</span><br><span class=\"line\">Constant pool:</span><br><span class=\"line\">   #1 = Methodref          #2.#19         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class=\"line\">   #2 = Class              #20            // java/lang/Object</span><br><span class=\"line\">   #3 = Class              #21            // com/zqlite/jvm/HelloJVM</span><br><span class=\"line\">   #4 = Utf8               &lt;init&gt;</span><br><span class=\"line\">   #5 = Utf8               ()V</span><br><span class=\"line\">   #6 = Utf8               Code</span><br><span class=\"line\">   #7 = Utf8               LineNumberTable</span><br><span class=\"line\">   #8 = Utf8               LocalVariableTable</span><br><span class=\"line\">   #9 = Utf8               this</span><br><span class=\"line\">  #10 = Utf8               Lcom/zqlite/jvm/HelloJVM;</span><br><span class=\"line\">  #11 = Utf8               main</span><br><span class=\"line\">  #12 = Utf8               ([Ljava/lang/String;)V</span><br><span class=\"line\">  #13 = Utf8               args</span><br><span class=\"line\">  #14 = Utf8               [Ljava/lang/String;</span><br><span class=\"line\">  #15 = Utf8               obj</span><br><span class=\"line\">  #16 = Utf8               Ljava/lang/Object;</span><br><span class=\"line\">  #17 = Utf8               SourceFile</span><br><span class=\"line\">  #18 = Utf8               HelloJVM.java</span><br><span class=\"line\">  #19 = NameAndType        #4:#5          // &quot;&lt;init&gt;&quot;:()V</span><br><span class=\"line\">  #20 = Utf8               java/lang/Object</span><br><span class=\"line\">  #21 = Utf8               com/zqlite/jvm/HelloJVM</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  public com.zqlite.jvm.HelloJVM();</span><br><span class=\"line\">    descriptor: ()V</span><br><span class=\"line\">    flags: ACC_PUBLIC</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">      stack=1, locals=1, args_size=1</span><br><span class=\"line\">         0: aload_0</span><br><span class=\"line\">         1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class=\"line\">         4: return</span><br><span class=\"line\">      LineNumberTable:</span><br><span class=\"line\">        line 6: 0</span><br><span class=\"line\">      LocalVariableTable:</span><br><span class=\"line\">        Start  Length  Slot  Name   Signature</span><br><span class=\"line\">            0       5     0  this   Lcom/zqlite/jvm/HelloJVM;</span><br><span class=\"line\"></span><br><span class=\"line\">  public static void main(java.lang.String...);</span><br><span class=\"line\">    descriptor: ([Ljava/lang/String;)V</span><br><span class=\"line\">    flags: ACC_PUBLIC, ACC_STATIC, ACC_VARARGS</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">      stack=2, locals=2, args_size=1</span><br><span class=\"line\">         0: new           #2                  // class java/lang/Object</span><br><span class=\"line\">         3: dup</span><br><span class=\"line\">         4: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class=\"line\">         7: astore_1</span><br><span class=\"line\">         8: return</span><br><span class=\"line\">      LineNumberTable:</span><br><span class=\"line\">        line 9: 0</span><br><span class=\"line\">        line 10: 8</span><br><span class=\"line\">      LocalVariableTable:</span><br><span class=\"line\">        Start  Length  Slot  Name   Signature</span><br><span class=\"line\">            0       9     0  args   [Ljava/lang/String;</span><br><span class=\"line\">            8       1     1   obj   Ljava/lang/Object;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">SourceFile: &quot;HelloJVM.java&quot;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p> new </p>\n<p></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0: new           #2</span><br></pre></td></tr></table></figure>\n\n<p> new  #2 #2 Constant pool #2 </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#2 = Class              #20            // java/lang/Object</span><br></pre></td></tr></table></figure>\n\n<p> #2  #20  #20 </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#20 = Utf8               java/lang/Object</span><br></pre></td></tr></table></figure>\n\n<p> #20  ava/lang/Object Object  JVM </p>\n<p>JVM  Java </p>\n<p>JVM </p>\n<blockquote>\n<p> JVM  int i  0 Java  i i  i </p>\n</blockquote>\n<p>JVM  GC </p>\n<p> JVM  Java <init>  new  invokespecial  <init>  <init> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> JVM </p>\n<p></p>\n<p>GC JVM </p>\n<p></p>\n<p> 8  8 </p>\n<p></p>\n<p> <img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/2.webp\" alt=\"image\"></p>\n<h2 id=\"Class-\"><a href=\"#Class-\" class=\"headerlink\" title=\"Class \"></a>Class </h2><p> 0  1  0  1  Class </p>\n<p> Java  JVM  JVM  JavaJVM  Class  Class  ClojureGroovyJrubyJythonScala  Class  JVM </p>\n<h3 id=\"Class-\"><a href=\"#Class-\" class=\"headerlink\" title=\"Class \"></a>Class </h3><p>Class  8  Class  Class </p>\n<p>Class </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/3.webp\" alt=\"image\"></p>\n<p> u4u2 u1u8 u1  1 u2  2  constant_pool  Class  constant_pool  constant_pool_count constant_pool_count </p>\n<p> Class  Class  Class  javap </p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">javap -v ClassFile</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>JVM  JVM  8  JVM  256 </p>\n<p> iload  int  fload  float </p>\n<p>i  int l  longs  shortb  bytec  charf  floatd  doublea  reference</p>\n<p> JVM <a href=\"http://17b84ff5.wiz03.com/share/s/0nK4_R1FrArb2bpd-P3HNDCf0YLy5c0dYAqj2-_XjE3Jsh_A\">http://17b84ff5.wiz03.com/share/s/0nK4_R1FrArb2bpd-P3HNDCf0YLy5c0dYAqj2-_XjE3Jsh_A</a></p>\n<h2 id=\"JVM--Class-\"><a href=\"#JVM--Class-\" class=\"headerlink\" title=\"JVM  Class \"></a>JVM  Class </h2><p> JVM  Class Java </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Class  JVM </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/4.webp\" alt=\"image\"></p>\n<p></p>\n<ul>\n<li> JVM </li>\n</ul>\n<ol>\n<li></li>\n<li></li>\n<li> java.lang.Class </li>\n</ol>\n<p> Java </p>\n<ul>\n<li><p> Class </p>\n</li>\n<li><p>static </p>\n</li>\n<li><p>JVM </p>\n</li>\n<li><p> JVM  Java  JVM JVM  <clinit>()  static{  } </p>\n</li>\n<li><p></p>\n</li>\n<li><p> JVM </p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> JVM JVM  JVM  Java  Java  Java Applet  Java Applet OSGi Java </p>\n<p> toString </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zqlite.jvm;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.HttpURLConnection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URL;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloJVM</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String ...args)</span>&#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"type\">MyNetClassLoader</span> <span class=\"variable\">classLoader</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MyNetClassLoader</span>();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Class&lt;?&gt; clazz = classLoader.findClass(<span class=\"string\">&quot;http://7xprgn.com1.z0.glb.clouddn.com/RemoteClass.class&quot;</span>);</span><br><span class=\"line\">            <span class=\"type\">Object</span> <span class=\"variable\">o</span> <span class=\"operator\">=</span> clazz.newInstance();</span><br><span class=\"line\">            System.out.print(o.toString());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ClassNotFoundException |IllegalAccessException | InstantiationException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyNetClassLoader</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ClassLoader</span>&#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">protected</span> Class&lt;?&gt; findClass(String name) <span class=\"keyword\">throws</span> ClassNotFoundException &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"type\">URL</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">URL</span>(name);</span><br><span class=\"line\">                <span class=\"type\">HttpURLConnection</span> <span class=\"variable\">connection</span> <span class=\"operator\">=</span> (HttpURLConnection) url.openConnection();</span><br><span class=\"line\">                <span class=\"type\">InputStream</span> <span class=\"variable\">inputStream</span> <span class=\"operator\">=</span>  connection.getInputStream();</span><br><span class=\"line\">                <span class=\"type\">byte</span>[] b = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[inputStream.available()];</span><br><span class=\"line\">                inputStream.read(b);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> defineClass(<span class=\"string\">&quot;com.zqlite.jvm.RemoteClass&quot;</span>,b,<span class=\"number\">0</span>,b.length);</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"built_in\">super</span>.findClass(name);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> MyNetClassLoader  ClassLoader  findClass  findClass  defineClass  class </p>\n<p> class  newInstance  RemoteClass  toString </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> JVM  Java  JVM </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> JVM </p>\n<p>JVM </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/5.webp\" alt=\"image\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zqlite.jvm;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloJVM</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String ...args)</span>&#123;</span><br><span class=\"line\">        calc();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">calc</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"number\">100</span>;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">b</span> <span class=\"operator\">=</span> <span class=\"number\">200</span>;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">c</span> <span class=\"operator\">=</span> <span class=\"number\">300</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (a + b) * c;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> Java  javap </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Classfile /Users/scott/workspace/jvm/out/production/jvm/com/zqlite/jvm/HelloJVM.class</span><br><span class=\"line\">  Last modified 2017-11-30; size 549 bytes</span><br><span class=\"line\">  MD5 checksum 1bf313c415146d6070a30e8addc83a8c</span><br><span class=\"line\">  Compiled from &quot;HelloJVM.java&quot;</span><br><span class=\"line\">public class com.zqlite.jvm.HelloJVM</span><br><span class=\"line\">  minor version: 0</span><br><span class=\"line\">  major version: 52</span><br><span class=\"line\">  flags: ACC_PUBLIC, ACC_SUPER</span><br><span class=\"line\">Constant pool:</span><br><span class=\"line\">   #1 = Methodref          #4.#24         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class=\"line\">   #2 = Methodref          #3.#25         // com/zqlite/jvm/HelloJVM.calc:()I</span><br><span class=\"line\">   #3 = Class              #26            // com/zqlite/jvm/HelloJVM</span><br><span class=\"line\">   #4 = Class              #27            // java/lang/Object</span><br><span class=\"line\">   #5 = Utf8               &lt;init&gt;</span><br><span class=\"line\">   #6 = Utf8               ()V</span><br><span class=\"line\">   #7 = Utf8               Code</span><br><span class=\"line\">   #8 = Utf8               LineNumberTable</span><br><span class=\"line\">   #9 = Utf8               LocalVariableTable</span><br><span class=\"line\">  #10 = Utf8               this</span><br><span class=\"line\">  #11 = Utf8               Lcom/zqlite/jvm/HelloJVM;</span><br><span class=\"line\">  #12 = Utf8               main</span><br><span class=\"line\">  #13 = Utf8               ([Ljava/lang/String;)V</span><br><span class=\"line\">  #14 = Utf8               args</span><br><span class=\"line\">  #15 = Utf8               [Ljava/lang/String;</span><br><span class=\"line\">  #16 = Utf8               calc</span><br><span class=\"line\">  #17 = Utf8               ()I</span><br><span class=\"line\">  #18 = Utf8               a</span><br><span class=\"line\">  #19 = Utf8               I</span><br><span class=\"line\">  #20 = Utf8               b</span><br><span class=\"line\">  #21 = Utf8               c</span><br><span class=\"line\">  #22 = Utf8               SourceFile</span><br><span class=\"line\">  #23 = Utf8               HelloJVM.java</span><br><span class=\"line\">  #24 = NameAndType        #5:#6          // &quot;&lt;init&gt;&quot;:()V</span><br><span class=\"line\">  #25 = NameAndType        #16:#17        // calc:()I</span><br><span class=\"line\">  #26 = Utf8               com/zqlite/jvm/HelloJVM</span><br><span class=\"line\">  #27 = Utf8               java/lang/Object</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  public com.zqlite.jvm.HelloJVM();</span><br><span class=\"line\">    descriptor: ()V</span><br><span class=\"line\">    flags: ACC_PUBLIC</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">      stack=1, locals=1, args_size=1</span><br><span class=\"line\">         0: aload_0</span><br><span class=\"line\">         1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class=\"line\">         4: return</span><br><span class=\"line\">      LineNumberTable:</span><br><span class=\"line\">        line 3: 0</span><br><span class=\"line\">      LocalVariableTable:</span><br><span class=\"line\">        Start  Length  Slot  Name   Signature</span><br><span class=\"line\">            0       5     0  this   Lcom/zqlite/jvm/HelloJVM;</span><br><span class=\"line\"></span><br><span class=\"line\">  public static void main(java.lang.String...);</span><br><span class=\"line\">    descriptor: ([Ljava/lang/String;)V</span><br><span class=\"line\">    flags: ACC_PUBLIC, ACC_STATIC, ACC_VARARGS</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">      stack=1, locals=1, args_size=1</span><br><span class=\"line\">         0: invokestatic  #2                  // Method calc:()I</span><br><span class=\"line\">         3: pop</span><br><span class=\"line\">         4: return</span><br><span class=\"line\">      LineNumberTable:</span><br><span class=\"line\">        line 6: 0</span><br><span class=\"line\">        line 7: 4</span><br><span class=\"line\">      LocalVariableTable:</span><br><span class=\"line\">        Start  Length  Slot  Name   Signature</span><br><span class=\"line\">            0       5     0  args   [Ljava/lang/String;</span><br><span class=\"line\"></span><br><span class=\"line\">  public static int calc();</span><br><span class=\"line\">    descriptor: ()I</span><br><span class=\"line\">    flags: ACC_PUBLIC, ACC_STATIC</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">      stack=2, locals=3, args_size=0</span><br><span class=\"line\">         0: bipush        100</span><br><span class=\"line\">         2: istore_0</span><br><span class=\"line\">         3: sipush        200</span><br><span class=\"line\">         6: istore_1</span><br><span class=\"line\">         7: sipush        300</span><br><span class=\"line\">        10: istore_2</span><br><span class=\"line\">        11: iload_0</span><br><span class=\"line\">        12: iload_1</span><br><span class=\"line\">        13: iadd</span><br><span class=\"line\">        14: iload_2</span><br><span class=\"line\">        15: imul</span><br><span class=\"line\">        16: ireturn</span><br><span class=\"line\">      LineNumberTable:</span><br><span class=\"line\">        line 10: 0</span><br><span class=\"line\">        line 11: 3</span><br><span class=\"line\">        line 12: 7</span><br><span class=\"line\">        line 13: 11</span><br><span class=\"line\">      LocalVariableTable:</span><br><span class=\"line\">        Start  Length  Slot  Name   Signature</span><br><span class=\"line\">            3      14     0     a   I</span><br><span class=\"line\">            7      10     1     b   I</span><br><span class=\"line\">           11       6     2     c   I</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">SourceFile: &quot;HelloJVM.java&quot;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> calc </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">descriptor: ()I</span><br></pre></td></tr></table></figure>\n<p> ()I JNI <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/types.html\"></a></p>\n<p></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flags: ACC_PUBLIC, ACC_STATIC</span><br></pre></td></tr></table></figure>\n\n<p> public static </p>\n<p> Code  stack = 2  2 locals = 3 args_size = 0 </p>\n<p> LocalVariableTable abc  I  Int </p>\n<p> 7 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/6.webp\" alt=\"image\"></p>\n<p> 0 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/7.webp\" alt=\"image\"></p>\n<p> 2 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/8.webp\" alt=\"image\"></p>\n<p> 11 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/9.webp\" alt=\"image\"></p>\n<p> 12 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/10.webp\" alt=\"image\"></p>\n<p> 13 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/11.webp\" alt=\"image\"></p>\n<p> 14 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/12.webp\" alt=\"image\"></p>\n<p> 16 </p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> JVM  GC JVM Java -JVM </p>\n","excerpt":"<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><p> Java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zqlite.jvm;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloJVM</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">k</span> <span class=\"operator\">=</span> <span class=\"number\">100</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String ...args)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>,b=<span class=\"number\">3</span>;</span><br><span class=\"line\">        System.out.println(a+b+k);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","more":"<p> Java  Java Java </p>\n<ol>\n<li>Java </li>\n<li> Java </li>\n<li>Class </li>\n<li>Java API </li>\n<li> Java </li>\n</ol>\n<p> 145 23 Java  2  3 Java</p>\n<h2 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h2><p>JVMJava Virtual Machine Java  Class  Class  JVM JVM  Class  JVM  Class Class </p>\n<h3 id=\"JVM--Java-\"><a href=\"#JVM--Java-\" class=\"headerlink\" title=\"JVM  Java \"></a>JVM  Java </h3><p> CC++ </p>\n<p> Java  JVM  JVM </p>\n<p> JVM  Java  Java </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/1.webp\" alt=\"image\"></p>\n<p></p>\n<ul>\n<li></li>\n<li> GC </li>\n<li> Java </li>\n<li> Native </li>\n<li></li>\n</ul>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">str</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;a&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<p> a </p>\n<blockquote>\n<p>Java  String  JVM </p>\n</blockquote>\n<h3 id=\"-JVM-\"><a href=\"#-JVM-\" class=\"headerlink\" title=\" JVM \"></a> JVM </h3><p> Java  new </p>\n<p> JVM  new JVM  new </p>\n<p></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zqlite.jvm;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloJVM</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String ...args)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Object</span> <span class=\"variable\">obj</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> javap  class </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Classfile /Users/scott/workspace/jvm/out/production/jvm/com/zqlite/jvm/HelloJVM.class</span><br><span class=\"line\">  Last modified 2017-11-29; size 446 bytes</span><br><span class=\"line\">  MD5 checksum bcc0b2d9129748ef0caa00e95cf95a47</span><br><span class=\"line\">  Compiled from &quot;HelloJVM.java&quot;</span><br><span class=\"line\">public class com.zqlite.jvm.HelloJVM</span><br><span class=\"line\">  minor version: 0</span><br><span class=\"line\">  major version: 52</span><br><span class=\"line\">  flags: ACC_PUBLIC, ACC_SUPER</span><br><span class=\"line\">Constant pool:</span><br><span class=\"line\">   #1 = Methodref          #2.#19         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class=\"line\">   #2 = Class              #20            // java/lang/Object</span><br><span class=\"line\">   #3 = Class              #21            // com/zqlite/jvm/HelloJVM</span><br><span class=\"line\">   #4 = Utf8               &lt;init&gt;</span><br><span class=\"line\">   #5 = Utf8               ()V</span><br><span class=\"line\">   #6 = Utf8               Code</span><br><span class=\"line\">   #7 = Utf8               LineNumberTable</span><br><span class=\"line\">   #8 = Utf8               LocalVariableTable</span><br><span class=\"line\">   #9 = Utf8               this</span><br><span class=\"line\">  #10 = Utf8               Lcom/zqlite/jvm/HelloJVM;</span><br><span class=\"line\">  #11 = Utf8               main</span><br><span class=\"line\">  #12 = Utf8               ([Ljava/lang/String;)V</span><br><span class=\"line\">  #13 = Utf8               args</span><br><span class=\"line\">  #14 = Utf8               [Ljava/lang/String;</span><br><span class=\"line\">  #15 = Utf8               obj</span><br><span class=\"line\">  #16 = Utf8               Ljava/lang/Object;</span><br><span class=\"line\">  #17 = Utf8               SourceFile</span><br><span class=\"line\">  #18 = Utf8               HelloJVM.java</span><br><span class=\"line\">  #19 = NameAndType        #4:#5          // &quot;&lt;init&gt;&quot;:()V</span><br><span class=\"line\">  #20 = Utf8               java/lang/Object</span><br><span class=\"line\">  #21 = Utf8               com/zqlite/jvm/HelloJVM</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  public com.zqlite.jvm.HelloJVM();</span><br><span class=\"line\">    descriptor: ()V</span><br><span class=\"line\">    flags: ACC_PUBLIC</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">      stack=1, locals=1, args_size=1</span><br><span class=\"line\">         0: aload_0</span><br><span class=\"line\">         1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class=\"line\">         4: return</span><br><span class=\"line\">      LineNumberTable:</span><br><span class=\"line\">        line 6: 0</span><br><span class=\"line\">      LocalVariableTable:</span><br><span class=\"line\">        Start  Length  Slot  Name   Signature</span><br><span class=\"line\">            0       5     0  this   Lcom/zqlite/jvm/HelloJVM;</span><br><span class=\"line\"></span><br><span class=\"line\">  public static void main(java.lang.String...);</span><br><span class=\"line\">    descriptor: ([Ljava/lang/String;)V</span><br><span class=\"line\">    flags: ACC_PUBLIC, ACC_STATIC, ACC_VARARGS</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">      stack=2, locals=2, args_size=1</span><br><span class=\"line\">         0: new           #2                  // class java/lang/Object</span><br><span class=\"line\">         3: dup</span><br><span class=\"line\">         4: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class=\"line\">         7: astore_1</span><br><span class=\"line\">         8: return</span><br><span class=\"line\">      LineNumberTable:</span><br><span class=\"line\">        line 9: 0</span><br><span class=\"line\">        line 10: 8</span><br><span class=\"line\">      LocalVariableTable:</span><br><span class=\"line\">        Start  Length  Slot  Name   Signature</span><br><span class=\"line\">            0       9     0  args   [Ljava/lang/String;</span><br><span class=\"line\">            8       1     1   obj   Ljava/lang/Object;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">SourceFile: &quot;HelloJVM.java&quot;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p> new </p>\n<p></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0: new           #2</span><br></pre></td></tr></table></figure>\n\n<p> new  #2 #2 Constant pool #2 </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#2 = Class              #20            // java/lang/Object</span><br></pre></td></tr></table></figure>\n\n<p> #2  #20  #20 </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#20 = Utf8               java/lang/Object</span><br></pre></td></tr></table></figure>\n\n<p> #20  ava/lang/Object Object  JVM </p>\n<p>JVM  Java </p>\n<p>JVM </p>\n<blockquote>\n<p> JVM  int i  0 Java  i i  i </p>\n</blockquote>\n<p>JVM  GC </p>\n<p> JVM  Java <init>  new  invokespecial  <init>  <init> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> JVM </p>\n<p></p>\n<p>GC JVM </p>\n<p></p>\n<p> 8  8 </p>\n<p></p>\n<p> <img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/2.webp\" alt=\"image\"></p>\n<h2 id=\"Class-\"><a href=\"#Class-\" class=\"headerlink\" title=\"Class \"></a>Class </h2><p> 0  1  0  1  Class </p>\n<p> Java  JVM  JVM  JavaJVM  Class  Class  ClojureGroovyJrubyJythonScala  Class  JVM </p>\n<h3 id=\"Class-\"><a href=\"#Class-\" class=\"headerlink\" title=\"Class \"></a>Class </h3><p>Class  8  Class  Class </p>\n<p>Class </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/3.webp\" alt=\"image\"></p>\n<p> u4u2 u1u8 u1  1 u2  2  constant_pool  Class  constant_pool  constant_pool_count constant_pool_count </p>\n<p> Class  Class  Class  javap </p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">javap -v ClassFile</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>JVM  JVM  8  JVM  256 </p>\n<p> iload  int  fload  float </p>\n<p>i  int l  longs  shortb  bytec  charf  floatd  doublea  reference</p>\n<p> JVM <a href=\"http://17b84ff5.wiz03.com/share/s/0nK4_R1FrArb2bpd-P3HNDCf0YLy5c0dYAqj2-_XjE3Jsh_A\">http://17b84ff5.wiz03.com/share/s/0nK4_R1FrArb2bpd-P3HNDCf0YLy5c0dYAqj2-_XjE3Jsh_A</a></p>\n<h2 id=\"JVM--Class-\"><a href=\"#JVM--Class-\" class=\"headerlink\" title=\"JVM  Class \"></a>JVM  Class </h2><p> JVM  Class Java </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Class  JVM </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/4.webp\" alt=\"image\"></p>\n<p></p>\n<ul>\n<li> JVM </li>\n</ul>\n<ol>\n<li></li>\n<li></li>\n<li> java.lang.Class </li>\n</ol>\n<p> Java </p>\n<ul>\n<li><p> Class </p>\n</li>\n<li><p>static </p>\n</li>\n<li><p>JVM </p>\n</li>\n<li><p> JVM  Java  JVM JVM  <clinit>()  static{  } </p>\n</li>\n<li><p></p>\n</li>\n<li><p> JVM </p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> JVM JVM  JVM  Java  Java  Java Applet  Java Applet OSGi Java </p>\n<p> toString </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zqlite.jvm;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.HttpURLConnection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URL;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloJVM</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String ...args)</span>&#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"type\">MyNetClassLoader</span> <span class=\"variable\">classLoader</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MyNetClassLoader</span>();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Class&lt;?&gt; clazz = classLoader.findClass(<span class=\"string\">&quot;http://7xprgn.com1.z0.glb.clouddn.com/RemoteClass.class&quot;</span>);</span><br><span class=\"line\">            <span class=\"type\">Object</span> <span class=\"variable\">o</span> <span class=\"operator\">=</span> clazz.newInstance();</span><br><span class=\"line\">            System.out.print(o.toString());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ClassNotFoundException |IllegalAccessException | InstantiationException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyNetClassLoader</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ClassLoader</span>&#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">protected</span> Class&lt;?&gt; findClass(String name) <span class=\"keyword\">throws</span> ClassNotFoundException &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"type\">URL</span> <span class=\"variable\">url</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">URL</span>(name);</span><br><span class=\"line\">                <span class=\"type\">HttpURLConnection</span> <span class=\"variable\">connection</span> <span class=\"operator\">=</span> (HttpURLConnection) url.openConnection();</span><br><span class=\"line\">                <span class=\"type\">InputStream</span> <span class=\"variable\">inputStream</span> <span class=\"operator\">=</span>  connection.getInputStream();</span><br><span class=\"line\">                <span class=\"type\">byte</span>[] b = <span class=\"keyword\">new</span> <span class=\"title class_\">byte</span>[inputStream.available()];</span><br><span class=\"line\">                inputStream.read(b);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> defineClass(<span class=\"string\">&quot;com.zqlite.jvm.RemoteClass&quot;</span>,b,<span class=\"number\">0</span>,b.length);</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"built_in\">super</span>.findClass(name);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> MyNetClassLoader  ClassLoader  findClass  findClass  defineClass  class </p>\n<p> class  newInstance  RemoteClass  toString </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> JVM  Java  JVM </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> JVM </p>\n<p>JVM </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/5.webp\" alt=\"image\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.zqlite.jvm;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">HelloJVM</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String ...args)</span>&#123;</span><br><span class=\"line\">        calc();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">calc</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> <span class=\"number\">100</span>;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">b</span> <span class=\"operator\">=</span> <span class=\"number\">200</span>;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">c</span> <span class=\"operator\">=</span> <span class=\"number\">300</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (a + b) * c;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> Java  javap </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Classfile /Users/scott/workspace/jvm/out/production/jvm/com/zqlite/jvm/HelloJVM.class</span><br><span class=\"line\">  Last modified 2017-11-30; size 549 bytes</span><br><span class=\"line\">  MD5 checksum 1bf313c415146d6070a30e8addc83a8c</span><br><span class=\"line\">  Compiled from &quot;HelloJVM.java&quot;</span><br><span class=\"line\">public class com.zqlite.jvm.HelloJVM</span><br><span class=\"line\">  minor version: 0</span><br><span class=\"line\">  major version: 52</span><br><span class=\"line\">  flags: ACC_PUBLIC, ACC_SUPER</span><br><span class=\"line\">Constant pool:</span><br><span class=\"line\">   #1 = Methodref          #4.#24         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class=\"line\">   #2 = Methodref          #3.#25         // com/zqlite/jvm/HelloJVM.calc:()I</span><br><span class=\"line\">   #3 = Class              #26            // com/zqlite/jvm/HelloJVM</span><br><span class=\"line\">   #4 = Class              #27            // java/lang/Object</span><br><span class=\"line\">   #5 = Utf8               &lt;init&gt;</span><br><span class=\"line\">   #6 = Utf8               ()V</span><br><span class=\"line\">   #7 = Utf8               Code</span><br><span class=\"line\">   #8 = Utf8               LineNumberTable</span><br><span class=\"line\">   #9 = Utf8               LocalVariableTable</span><br><span class=\"line\">  #10 = Utf8               this</span><br><span class=\"line\">  #11 = Utf8               Lcom/zqlite/jvm/HelloJVM;</span><br><span class=\"line\">  #12 = Utf8               main</span><br><span class=\"line\">  #13 = Utf8               ([Ljava/lang/String;)V</span><br><span class=\"line\">  #14 = Utf8               args</span><br><span class=\"line\">  #15 = Utf8               [Ljava/lang/String;</span><br><span class=\"line\">  #16 = Utf8               calc</span><br><span class=\"line\">  #17 = Utf8               ()I</span><br><span class=\"line\">  #18 = Utf8               a</span><br><span class=\"line\">  #19 = Utf8               I</span><br><span class=\"line\">  #20 = Utf8               b</span><br><span class=\"line\">  #21 = Utf8               c</span><br><span class=\"line\">  #22 = Utf8               SourceFile</span><br><span class=\"line\">  #23 = Utf8               HelloJVM.java</span><br><span class=\"line\">  #24 = NameAndType        #5:#6          // &quot;&lt;init&gt;&quot;:()V</span><br><span class=\"line\">  #25 = NameAndType        #16:#17        // calc:()I</span><br><span class=\"line\">  #26 = Utf8               com/zqlite/jvm/HelloJVM</span><br><span class=\"line\">  #27 = Utf8               java/lang/Object</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  public com.zqlite.jvm.HelloJVM();</span><br><span class=\"line\">    descriptor: ()V</span><br><span class=\"line\">    flags: ACC_PUBLIC</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">      stack=1, locals=1, args_size=1</span><br><span class=\"line\">         0: aload_0</span><br><span class=\"line\">         1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class=\"line\">         4: return</span><br><span class=\"line\">      LineNumberTable:</span><br><span class=\"line\">        line 3: 0</span><br><span class=\"line\">      LocalVariableTable:</span><br><span class=\"line\">        Start  Length  Slot  Name   Signature</span><br><span class=\"line\">            0       5     0  this   Lcom/zqlite/jvm/HelloJVM;</span><br><span class=\"line\"></span><br><span class=\"line\">  public static void main(java.lang.String...);</span><br><span class=\"line\">    descriptor: ([Ljava/lang/String;)V</span><br><span class=\"line\">    flags: ACC_PUBLIC, ACC_STATIC, ACC_VARARGS</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">      stack=1, locals=1, args_size=1</span><br><span class=\"line\">         0: invokestatic  #2                  // Method calc:()I</span><br><span class=\"line\">         3: pop</span><br><span class=\"line\">         4: return</span><br><span class=\"line\">      LineNumberTable:</span><br><span class=\"line\">        line 6: 0</span><br><span class=\"line\">        line 7: 4</span><br><span class=\"line\">      LocalVariableTable:</span><br><span class=\"line\">        Start  Length  Slot  Name   Signature</span><br><span class=\"line\">            0       5     0  args   [Ljava/lang/String;</span><br><span class=\"line\"></span><br><span class=\"line\">  public static int calc();</span><br><span class=\"line\">    descriptor: ()I</span><br><span class=\"line\">    flags: ACC_PUBLIC, ACC_STATIC</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">      stack=2, locals=3, args_size=0</span><br><span class=\"line\">         0: bipush        100</span><br><span class=\"line\">         2: istore_0</span><br><span class=\"line\">         3: sipush        200</span><br><span class=\"line\">         6: istore_1</span><br><span class=\"line\">         7: sipush        300</span><br><span class=\"line\">        10: istore_2</span><br><span class=\"line\">        11: iload_0</span><br><span class=\"line\">        12: iload_1</span><br><span class=\"line\">        13: iadd</span><br><span class=\"line\">        14: iload_2</span><br><span class=\"line\">        15: imul</span><br><span class=\"line\">        16: ireturn</span><br><span class=\"line\">      LineNumberTable:</span><br><span class=\"line\">        line 10: 0</span><br><span class=\"line\">        line 11: 3</span><br><span class=\"line\">        line 12: 7</span><br><span class=\"line\">        line 13: 11</span><br><span class=\"line\">      LocalVariableTable:</span><br><span class=\"line\">        Start  Length  Slot  Name   Signature</span><br><span class=\"line\">            3      14     0     a   I</span><br><span class=\"line\">            7      10     1     b   I</span><br><span class=\"line\">           11       6     2     c   I</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">SourceFile: &quot;HelloJVM.java&quot;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> calc </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">descriptor: ()I</span><br></pre></td></tr></table></figure>\n<p> ()I JNI <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/types.html\"></a></p>\n<p></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flags: ACC_PUBLIC, ACC_STATIC</span><br></pre></td></tr></table></figure>\n\n<p> public static </p>\n<p> Code  stack = 2  2 locals = 3 args_size = 0 </p>\n<p> LocalVariableTable abc  I  Int </p>\n<p> 7 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/6.webp\" alt=\"image\"></p>\n<p> 0 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/7.webp\" alt=\"image\"></p>\n<p> 2 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/8.webp\" alt=\"image\"></p>\n<p> 11 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/9.webp\" alt=\"image\"></p>\n<p> 12 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/10.webp\" alt=\"image\"></p>\n<p> 13 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/11.webp\" alt=\"image\"></p>\n<p> 14 </p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/jvm/12.webp\" alt=\"image\"></p>\n<p> 16 </p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> JVM  GC JVM Java -JVM </p>"},{"title":"Last Dance","date":"2020-03-23T13:52:08.000Z","cover":"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdancedafengmian.jpg","_content":"\n\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdancedafengmian.jpg)\n<!-- more -->\n{% aplayerlist %}\n{\n    \"narrow\": false,\n    \"autoplay\": false,\n    \"mode\": \"random\",       \n    \"showlrc\": 3, \n    \"mutex\": true,   \n    \"theme\": \"#e6d0b2\",\n    \"preload\": \"metadata\",\n    \"listmaxheight\": \"513px\",\n    \"music\": [\n        {\n            \"title\": \"Last Dance\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdance.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdancefengmian.jpg\",\n            \"lrc\": \"lastdance.lrc\"\n        }\n    ]\n}\n{% endaplayerlist %}","source":"_posts/last-dance.md","raw":"---\ntitle: Last Dance\ndate: 2020-03-23 21:52:08\ntags: \ncover: \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdancedafengmian.jpg\"\n---\n\n\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdancedafengmian.jpg)\n<!-- more -->\n{% aplayerlist %}\n{\n    \"narrow\": false,\n    \"autoplay\": false,\n    \"mode\": \"random\",       \n    \"showlrc\": 3, \n    \"mutex\": true,   \n    \"theme\": \"#e6d0b2\",\n    \"preload\": \"metadata\",\n    \"listmaxheight\": \"513px\",\n    \"music\": [\n        {\n            \"title\": \"Last Dance\",\n            \"author\": \"\",\n            \"url\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdance.mp3\",\n            \"pic\": \"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdancefengmian.jpg\",\n            \"lrc\": \"lastdance.lrc\"\n        }\n    ]\n}\n{% endaplayerlist %}","slug":"last-dance","published":1,"updated":"2024-08-21T03:16:19.785Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vv001h5p6t67m38bhu","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdancedafengmian.jpg\" alt=\"\"></p>\n<span id=\"more\"></span>\n\n        <div id=\"aplayer-pseuYtkj\" class=\"aplayer aplayer-tag-marker\" style=\"margin-bottom: 20px;\"></div>\n\t\t\t  <script>\n\t\t\t\t  var options = {\"narrow\":false,\"autoplay\":false,\"showlrc\":3,\"mode\":\"random\",\"mutex\":true,\"theme\":\"#e6d0b2\",\"preload\":\"metadata\",\"listmaxheight\":\"513px\",\"music\":[{\"title\":\"Last Dance\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdance.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdancefengmian.jpg\",\"lrc\":\"lastdance.lrc\"}]};\n\t\t\t\t  options.element = document.getElementById(\"aplayer-pseuYtkj\");\n\t\t\t\t  var ap = new APlayer(options);\n\t\t\t    window.aplayers || (window.aplayers = []);\n\t\t\t\t  window.aplayers.push(ap);\n\t\t\t  </script>","excerpt":"<p></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdancedafengmian.jpg\" alt=\"\"></p>","more":"<div id=\"aplayer-pseuYtkj\" class=\"aplayer aplayer-tag-marker\" style=\"margin-bottom: 20px;\"></div>\n\t\t\t  <script>\n\t\t\t\t  var options = {\"narrow\":false,\"autoplay\":false,\"showlrc\":3,\"mode\":\"random\",\"mutex\":true,\"theme\":\"#e6d0b2\",\"preload\":\"metadata\",\"listmaxheight\":\"513px\",\"music\":[{\"title\":\"Last Dance\",\"author\":\"\",\"url\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdance.mp3\",\"pic\":\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/%E9%9F%B3%E4%B9%90/lastdancefengmian.jpg\",\"lrc\":\"lastdance.lrc\"}]};\n\t\t\t\t  options.element = document.getElementById(\"aplayer-pseuYtkj\");\n\t\t\t\t  var ap = new APlayer(options);\n\t\t\t    window.aplayers || (window.aplayers = []);\n\t\t\t\t  window.aplayers.push(ap);\n\t\t\t  </script>"},{"title":"","date":"2020-07-13T13:10:12.000Z","cover":"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/ce34b1843142b188ac6930f5dc5e7289.jpg","sticky":1,"top":10,"_content":"\n# \n\n2020``````QPS\n\n\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/100012a173b932cbb31596c11bbb41e6066cc911bf2be7099082800f3657bfa139015.jpg)\n\n\n\n\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/%E7%9B%B4%E6%92%AD%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B.png)\n\n\n\n`````cdn```\n\n\n<!-- more -->\n# \n OBSB  app\n1. \n2. \n3. \n4. \n5. \n6. \n\n``````\n\n\n\n``\n\n> \n\n``````\n\n`````h265``AAC`\n\n `RTMP`  `TCP` TCP  TCP [https://blog.csdn.net/dangzhangjing97/article/details/81008836](https://blog.csdn.net/dangzhangjing97/article/details/81008836) TCP  `UDP` \n UDP `SRT``QUIC`\n\n\n1. \n2. \n3.  SRTQUIC \n\n# CDN\n\n CDN CDN  CDN  1 CDN  RTMP SRT  QUIC CDN  SRT \n\nCDN  CDN  CDN ``\n\n CDN \n\n`` 20M 20M  2.5M/s\n\n`8M``4M``1.5M`\n\nCBR  VBR\n\n CDN \n1.  RTMPSRT  QUIC \n2.  CDN \n3. \n4. CBR  VBR\n\n\n# \n\n\n\n1. \n2. \n3. \n\n 1 2 3 \n\n\n\n# \n\n## \n\n``\n1. \n CDN  2sTCP  \n\n2. \n `ip `\n\n3. \n TCP TCP `` 1.5  `RTT` TCP \n\n4. CDN \n CDN CDN \n\n5. \n CDN \n\n\n` = RTT * 1.5 + CDN  + `\n\n\n\n## \n\n\n``````````\n\n\n\n## \n\n\n1. \n2. \n3. CDN \n4. \n\n## \n\n1. \n2.  pts \n3. \n\n\n# \n","source":"_posts/living-optimize.md","raw":"---\ntitle: \ndate: 2020-07-13 21:10:12\ntags: \ncover: https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/ce34b1843142b188ac6930f5dc5e7289.jpg\nsticky: 1\ntop: 10\n---\n\n# \n\n2020``````QPS\n\n\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/100012a173b932cbb31596c11bbb41e6066cc911bf2be7099082800f3657bfa139015.jpg)\n\n\n\n\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/%E7%9B%B4%E6%92%AD%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B.png)\n\n\n\n`````cdn```\n\n\n<!-- more -->\n# \n OBSB  app\n1. \n2. \n3. \n4. \n5. \n6. \n\n``````\n\n\n\n``\n\n> \n\n``````\n\n`````h265``AAC`\n\n `RTMP`  `TCP` TCP  TCP [https://blog.csdn.net/dangzhangjing97/article/details/81008836](https://blog.csdn.net/dangzhangjing97/article/details/81008836) TCP  `UDP` \n UDP `SRT``QUIC`\n\n\n1. \n2. \n3.  SRTQUIC \n\n# CDN\n\n CDN CDN  CDN  1 CDN  RTMP SRT  QUIC CDN  SRT \n\nCDN  CDN  CDN ``\n\n CDN \n\n`` 20M 20M  2.5M/s\n\n`8M``4M``1.5M`\n\nCBR  VBR\n\n CDN \n1.  RTMPSRT  QUIC \n2.  CDN \n3. \n4. CBR  VBR\n\n\n# \n\n\n\n1. \n2. \n3. \n\n 1 2 3 \n\n\n\n# \n\n## \n\n``\n1. \n CDN  2sTCP  \n\n2. \n `ip `\n\n3. \n TCP TCP `` 1.5  `RTT` TCP \n\n4. CDN \n CDN CDN \n\n5. \n CDN \n\n\n` = RTT * 1.5 + CDN  + `\n\n\n\n## \n\n\n``````````\n\n\n\n## \n\n\n1. \n2. \n3. CDN \n4. \n\n## \n\n1. \n2.  pts \n3. \n\n\n# \n","slug":"living-optimize","published":1,"updated":"2024-08-21T03:16:19.786Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vy002h5p6t1fbghn9x","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>2020<code></code><code></code><code></code>QPS</p>\n<p></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/100012a173b932cbb31596c11bbb41e6066cc911bf2be7099082800f3657bfa139015.jpg\" alt=\"\"></p>\n<p></p>\n<p></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/%E7%9B%B4%E6%92%AD%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B.png\" alt=\"\"></p>\n<p></p>\n<p><code></code><code></code><code>cdn</code><code></code></p>\n<p></p>\n<span id=\"more\"></span>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p> OBSB  app</p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<p><code></code><code></code><code></code></p>\n<p></p>\n<p><code></code></p>\n<blockquote>\n<p></p>\n</blockquote>\n<p><code></code><code></code><code></code></p>\n<p><code></code><code></code><code>h265</code><code>AAC</code></p>\n<p> <code>RTMP</code>  <code>TCP</code> TCP  TCP <a href=\"https://blog.csdn.net/dangzhangjing97/article/details/81008836\">https://blog.csdn.net/dangzhangjing97/article/details/81008836</a> TCP  <code>UDP</code> <br> UDP <code>SRT</code><code>QUIC</code></p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li> SRTQUIC </li>\n</ol>\n<h1 id=\"CDN\"><a href=\"#CDN\" class=\"headerlink\" title=\"CDN\"></a>CDN</h1><p> CDN CDN  CDN  1 CDN  RTMP SRT  QUIC CDN  SRT </p>\n<p>CDN  CDN  CDN <code></code></p>\n<p> CDN </p>\n<p><code></code> 20M 20M  2.5M/s</p>\n<p><code>8M</code><code>4M</code><code>1.5M</code></p>\n<p>CBR  VBR</p>\n<p> CDN </p>\n<ol>\n<li> RTMPSRT  QUIC </li>\n<li> CDN </li>\n<li></li>\n<li>CBR  VBR</li>\n</ol>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<p> 1 2 3 <br></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code></p>\n<ol>\n<li><p><br> CDN  2sTCP  </p>\n</li>\n<li><p><br> <code>ip </code></p>\n</li>\n<li><p><br> TCP TCP <code></code> 1.5  <code>RTT</code> TCP </p>\n</li>\n<li><p>CDN <br> CDN CDN </p>\n</li>\n<li><p><br> CDN </p>\n</li>\n</ol>\n<p><br><code> = RTT * 1.5 + CDN  + </code></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p><code></code><code></code><code></code><code></code><code></code></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br></p>\n<ol>\n<li></li>\n<li></li>\n<li>CDN </li>\n<li></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ol>\n<li></li>\n<li> pts </li>\n<li></li>\n</ol>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n","excerpt":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>2020<code></code><code></code><code></code>QPS</p>\n<p></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/100012a173b932cbb31596c11bbb41e6066cc911bf2be7099082800f3657bfa139015.jpg\" alt=\"\"></p>\n<p></p>\n<p></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/%E7%9B%B4%E6%92%AD%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B.png\" alt=\"\"></p>\n<p></p>\n<p><code></code><code></code><code>cdn</code><code></code></p>\n<p></p>","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p> OBSB  app</p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<p><code></code><code></code><code></code></p>\n<p></p>\n<p><code></code></p>\n<blockquote>\n<p></p>\n</blockquote>\n<p><code></code><code></code><code></code></p>\n<p><code></code><code></code><code>h265</code><code>AAC</code></p>\n<p> <code>RTMP</code>  <code>TCP</code> TCP  TCP <a href=\"https://blog.csdn.net/dangzhangjing97/article/details/81008836\">https://blog.csdn.net/dangzhangjing97/article/details/81008836</a> TCP  <code>UDP</code> <br> UDP <code>SRT</code><code>QUIC</code></p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li> SRTQUIC </li>\n</ol>\n<h1 id=\"CDN\"><a href=\"#CDN\" class=\"headerlink\" title=\"CDN\"></a>CDN</h1><p> CDN CDN  CDN  1 CDN  RTMP SRT  QUIC CDN  SRT </p>\n<p>CDN  CDN  CDN <code></code></p>\n<p> CDN </p>\n<p><code></code> 20M 20M  2.5M/s</p>\n<p><code>8M</code><code>4M</code><code>1.5M</code></p>\n<p>CBR  VBR</p>\n<p> CDN </p>\n<ol>\n<li> RTMPSRT  QUIC </li>\n<li> CDN </li>\n<li></li>\n<li>CBR  VBR</li>\n</ol>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<p> 1 2 3 <br></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code></p>\n<ol>\n<li><p><br> CDN  2sTCP  </p>\n</li>\n<li><p><br> <code>ip </code></p>\n</li>\n<li><p><br> TCP TCP <code></code> 1.5  <code>RTT</code> TCP </p>\n</li>\n<li><p>CDN <br> CDN CDN </p>\n</li>\n<li><p><br> CDN </p>\n</li>\n</ol>\n<p><br><code> = RTT * 1.5 + CDN  + </code></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p><code></code><code></code><code></code><code></code><code></code></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><br></p>\n<ol>\n<li></li>\n<li></li>\n<li>CDN </li>\n<li></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ol>\n<li></li>\n<li> pts </li>\n<li></li>\n</ol>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>"},{"title":"mac","date":"2016-02-25T08:19:25.000Z","_content":"\n# \n```sh\ndefaults write com.apple.Finder AppleShowAllFiles YES && killall Finder\ndefaults write com.apple.Finder AppleShowAllFiles FALSE && killall Finder\n```\n<!-- more -->","source":"_posts/mac-practices.md","raw":"---\ntitle: mac\ndate: 2016-02-25 16:19:25\n---\n\n# \n```sh\ndefaults write com.apple.Finder AppleShowAllFiles YES && killall Finder\ndefaults write com.apple.Finder AppleShowAllFiles FALSE && killall Finder\n```\n<!-- more -->","slug":"mac-practices","published":1,"updated":"2024-08-21T03:16:19.786Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vy002i5p6t6y6kc97x","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">defaults write com.apple.Finder AppleShowAllFiles YES &amp;&amp; killall Finder</span><br><span class=\"line\">defaults write com.apple.Finder AppleShowAllFiles FALSE &amp;&amp; killall Finder</span><br></pre></td></tr></table></figure>\n<span id=\"more\"></span>","excerpt":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">defaults write com.apple.Finder AppleShowAllFiles YES &amp;&amp; killall Finder</span><br><span class=\"line\">defaults write com.apple.Finder AppleShowAllFiles FALSE &amp;&amp; killall Finder</span><br></pre></td></tr></table></figure>","more":""},{"title":"TCP/IP ","date":"2020-09-23T06:33:32.000Z","_content":"\n[http://www.52im.net/thread-180-1-1.html](http://www.52im.net/thread-180-1-1.html)\n\n![TCP-IP](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/tcpip/%E4%BB%85TCP-IP%E5%8D%8F%E8%AE%AE%E5%9B%BE(A3%E7%BA%B8%E5%BC%A0%E8%A7%84%E6%A0%BC)_2020.png)\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/tcpip/%E5%8F%B2%E4%B8%8A%E6%9C%80%E5%85%A8%E4%B8%AD%E6%96%87%E7%89%88%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE%E5%85%B3%E7%B3%BB%E5%9B%BE(52im.net)-2.2MB.png)","source":"_posts/tcpip-overview.md","raw":"---\ntitle: TCP/IP \ndate: 2020-09-23 14:33:32\ntags: \n---\n\n[http://www.52im.net/thread-180-1-1.html](http://www.52im.net/thread-180-1-1.html)\n\n![TCP-IP](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/tcpip/%E4%BB%85TCP-IP%E5%8D%8F%E8%AE%AE%E5%9B%BE(A3%E7%BA%B8%E5%BC%A0%E8%A7%84%E6%A0%BC)_2020.png)\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/tcpip/%E5%8F%B2%E4%B8%8A%E6%9C%80%E5%85%A8%E4%B8%AD%E6%96%87%E7%89%88%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE%E5%85%B3%E7%B3%BB%E5%9B%BE(52im.net)-2.2MB.png)","slug":"tcpip-overview","published":1,"updated":"2024-08-21T03:16:19.786Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vz002k5p6t6ko27qst","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><a href=\"http://www.52im.net/thread-180-1-1.html\">http://www.52im.net/thread-180-1-1.html</a></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/tcpip/%E4%BB%85TCP-IP%E5%8D%8F%E8%AE%AE%E5%9B%BE(A3%E7%BA%B8%E5%BC%A0%E8%A7%84%E6%A0%BC)_2020.png\" alt=\"TCP-IP\"><br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/tcpip/%E5%8F%B2%E4%B8%8A%E6%9C%80%E5%85%A8%E4%B8%AD%E6%96%87%E7%89%88%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE%E5%85%B3%E7%B3%BB%E5%9B%BE(52im.net)-2.2MB.png\" alt=\"\"></p>\n","excerpt":"","more":"<p><a href=\"http://www.52im.net/thread-180-1-1.html\">http://www.52im.net/thread-180-1-1.html</a></p>\n<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/tcpip/%E4%BB%85TCP-IP%E5%8D%8F%E8%AE%AE%E5%9B%BE(A3%E7%BA%B8%E5%BC%A0%E8%A7%84%E6%A0%BC)_2020.png\" alt=\"TCP-IP\"><br><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/tcpip/%E5%8F%B2%E4%B8%8A%E6%9C%80%E5%85%A8%E4%B8%AD%E6%96%87%E7%89%88%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE%E5%85%B3%E7%B3%BB%E5%9B%BE(52im.net)-2.2MB.png\" alt=\"\"></p>\n"},{"title":"app","date":"2020-09-12T13:51:41.000Z","cover":"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/fanqieshasithumb.jpeg","top":10,"_content":"\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/fanqieshasithumb.jpeg)\n\n 2018 \n\n github  cdn ~\n\n> github:[https://github.com/ZhangQinglian/MockAweme](https://github.com/ZhangQinglian/MockAweme)\n> apk :http://cdn.zqlxtt.cn/%E7%95%AA%E8%8C%84%E7%9F%AD%E8%A7%86%E9%A2%91.apk\n\n<iframe src=\"//player.bilibili.com/player.html?aid=712051644&bvid=BV1gD4y1o7M6&cid=234720558&page=1\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" width=\"800\" height=\"600\"> </iframe>\n\n\n","source":"_posts/tiktok-app.md","raw":"---\ntitle: app\ndate: 2020-09-12 21:51:41\ntags: android\ncover: https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/fanqieshasithumb.jpeg\ntop: 10\n---\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/fanqieshasithumb.jpeg)\n\n 2018 \n\n github  cdn ~\n\n> github:[https://github.com/ZhangQinglian/MockAweme](https://github.com/ZhangQinglian/MockAweme)\n> apk :http://cdn.zqlxtt.cn/%E7%95%AA%E8%8C%84%E7%9F%AD%E8%A7%86%E9%A2%91.apk\n\n<iframe src=\"//player.bilibili.com/player.html?aid=712051644&bvid=BV1gD4y1o7M6&cid=234720558&page=1\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" width=\"800\" height=\"600\"> </iframe>\n\n\n","slug":"tiktok-app","published":1,"updated":"2024-08-21T03:16:19.786Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vz002l5p6t84urbtp2","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/fanqieshasithumb.jpeg\" alt=\"\"></p>\n<p> 2018 </p>\n<p> github  cdn ~</p>\n<blockquote>\n<p>github:<a href=\"https://github.com/ZhangQinglian/MockAweme\">https://github.com/ZhangQinglian/MockAweme</a><br>apk :<a href=\"http://cdn.zqlxtt.cn/%E7%95%AA%E8%8C%84%E7%9F%AD%E8%A7%86%E9%A2%91.apk\">http://cdn.zqlxtt.cn/%E7%95%AA%E8%8C%84%E7%9F%AD%E8%A7%86%E9%A2%91.apk</a></p>\n</blockquote>\n<iframe src=\"//player.bilibili.com/player.html?aid=712051644&bvid=BV1gD4y1o7M6&cid=234720558&page=1\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" width=\"800\" height=\"600\"> </iframe>\n\n\n","excerpt":"","more":"<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/normal/fanqieshasithumb.jpeg\" alt=\"\"></p>\n<p> 2018 </p>\n<p> github  cdn ~</p>\n<blockquote>\n<p>github:<a href=\"https://github.com/ZhangQinglian/MockAweme\">https://github.com/ZhangQinglian/MockAweme</a><br>apk :<a href=\"http://cdn.zqlxtt.cn/%E7%95%AA%E8%8C%84%E7%9F%AD%E8%A7%86%E9%A2%91.apk\">http://cdn.zqlxtt.cn/%E7%95%AA%E8%8C%84%E7%9F%AD%E8%A7%86%E9%A2%91.apk</a></p>\n</blockquote>\n<iframe src=\"//player.bilibili.com/player.html?aid=712051644&bvid=BV1gD4y1o7M6&cid=234720558&page=1\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" width=\"800\" height=\"600\"> </iframe>\n\n\n"},{"title":"Android StudiolibraryJcenter","date":"2016-08-12T01:38:17.000Z","cover":"http://upload-images.jianshu.io/upload_images/2702499-b829cacc3324bdc6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240","_content":"\n#   \nAndroid StudioGradleJcenter  \n\n```gradle\nbuildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.1.2'\n    }\n}\n```\n\ndependencieslibeclipsejar\n<!-- more -->\n```gradle\ndependencies {\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:23.+'\n}\n```\n\ngithubdependencies  \n\n![github](http://upload-images.jianshu.io/upload_images/2702499-42abe9c7fae76121.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nbuild.gradleAndroid Studio LibraryJcenter\n\n-----\n\n# Bintray\n[bintray](https://bintray.com/)githubJcenter\n\nprofile\n![profile](http://upload-images.jianshu.io/upload_images/2702499-8edca1463c8d4c4d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nEdit\n\n\n![Edit](http://upload-images.jianshu.io/upload_images/2702499-0a52b0f26a391f0e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nAPI Key\n![API Key](http://upload-images.jianshu.io/upload_images/2702499-435ac7a15ac873a9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nAPI Key\n\n-----\n# \nCommitToJcenterAndroidjadandroid library,jadJcenter\n\n\n![project](http://upload-images.jianshu.io/upload_images/2702499-1b9486f540a998d0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nlocal.properties\n\n```properties\nbintray.user=***\nbintray.apikey=***\n```\nusertapikey\n\n**build.gradle**\n\n```gradle\nbuildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.1.2'\n\n        //classpath\n        // for jcenter\n        // version: https://bintray.com/jfrog/jfrog-jars/gradle-bintray-plugin\n        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.7.1'\n        // version: https://bintray.com/dcendents/gradle-plugins/com.github.dcendents%3Aandroid-maven-gradle-plugin\n        classpath 'com.github.dcendents:android-maven-gradle-plugin:1.3'\n    }\n}\n\n...\n```\n\n**jad****build.gradle**\n\n```gradle\n...\n\napply plugin: 'com.github.dcendents.android-maven'\napply plugin: 'com.jfrog.bintray'\n\nversion = \"1.0\" //Jcenter\ndef siteUrl = *** // project homepage\ndef gitUrl = ***  // project git\ngroup = \"com.zql.android\"\n\ninstall {\n    repositories.mavenInstaller {\n        // This generates POM.xml with proper parameters\n        pom {\n            project {\n                packaging 'aar'\n                name 'Just a demo for jcenter'\n                url siteUrl\n                licenses {\n                    license {\n                        name 'The Apache Software License, Version 2.0'\n                        url 'http://www.apache.org/licenses/LICENSE-2.0.txt'\n                    }\n                }\n                developers {\n                    developer {\n                        id *** //Jcenter id\n                        name *** //Jcenter name\n                        email *** //e-mail\n                    }\n                }\n                scm {\n                    connection gitUrl\n                    developerConnection gitUrl\n                    url siteUrl\n                }\n            }\n        }\n    }\n}\n\n\ntask sourcesJar(type: Jar) {\n    from android.sourceSets.main.java.srcDirs\n    classifier = 'sources'\n}\n\n\ntask javadoc(type: Javadoc) {\n    source = android.sourceSets.main.java.srcDirs\n    classpath += project.files(android.getBootClasspath().join(File.pathSeparator))\n}\n\n\ntask javadocJar(type: Jar, dependsOn: javadoc) {\n    classifier = 'javadoc'\n    from javadoc.destinationDir\n}\n\nartifacts {\n    archives javadocJar\n    archives sourcesJar\n}\n\nProperties properties = new Properties()\nproperties.load(project.rootProject.file('local.properties').newDataInputStream())\nbintray {\n    user = properties.getProperty(\"bintray.user\")\n    key = properties.getProperty(\"bintray.apikey\")\n    configurations = ['archives']\n    pkg {\n        repo = \"maven\"\n        name = \"jad\" // project name in jcenter\n        websiteUrl = siteUrl\n        vcsUrl = gitUrl\n        licenses = [\"Apache-2.0\"]\n        publish = true\n    }\n}\n```\n\nsyncsync\n\n-----------\n\n# \nGradletask\n- javadocJar\n- sourcesJar\n- install\n- bintrayUpload\n\n\n![gradle](http://upload-images.jianshu.io/upload_images/2702499-533046f6c436da02.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n\n![gradle](http://upload-images.jianshu.io/upload_images/2702499-31c2fe030fd96b4f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n[bintray](https://bintray.com/)profilelast activity\n\n\n![last activity](http://upload-images.jianshu.io/upload_images/2702499-4fdebda66957ce39.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\njad,add to Jcenter\n\n\n![add to jcenter](http://upload-images.jianshu.io/upload_images/2702499-373dbbe4e6c717de.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n100%\n\n![request](http://upload-images.jianshu.io/upload_images/2702499-13f6fdab4fb08960.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n\n\n\n![response](http://upload-images.jianshu.io/upload_images/2702499-f9ffbca647f83632.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nOK,\n\n-----\n\n# \n\njadJAD.java\n\n```java\npackage android.zql.com.jad;\n\nimport android.content.Context;\nimport android.widget.Toast;\n\n/**\n * Created by scott on 8/11/16.\n */\npublic final class JAD {\n\n    public static final void sayHello(Context context){\n        Toast.makeText(context,\"hello man\",Toast.LENGTH_LONG).show();\n    }\n}\n```\nToastHello man\nJcenterJcenter1.0.1\n\n```gradle\napply plugin: 'com.github.dcendents.android-maven'\napply plugin: 'com.jfrog.bintray'\nversion = \"1.0.1\"\n```\n\n- javadocJar\n- sourcesJar\n- install\n- bintrayUpload\n\n[bintray](https://bintray.com/)jad:\n\n1.0.1\n![1.0.0](http://upload-images.jianshu.io/upload_images/2702499-2b0ea00c02876595.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\njadgradle\n![gradle usage](http://upload-images.jianshu.io/upload_images/2702499-94200416061d1072.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\njadbuild.gradle\n```gradle\ndependencies {\n    ...\n    compile 'com.zql.android:jad:1.0.1'\n}\n```\nActivity\n```java\n  @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        JAD.sayHello(this);\n    }\n```\n\n\n![](http://upload-images.jianshu.io/upload_images/2702499-cece63e6f12e99e1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n# \n\nCommitToJcenter[github](https://github.com/ZhangQinglian/CommitToJcenter)\n\n\n![Steven Paul Jobs](http://upload-images.jianshu.io/upload_images/2702499-0f57daa362c8a84e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n","source":"_posts/upload-jcenter.md","raw":"---\ntitle: Android StudiolibraryJcenter\ndate: 2016-08-12 09:38:17\ntags: android\ncover: http://upload-images.jianshu.io/upload_images/2702499-b829cacc3324bdc6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\n---\n\n#   \nAndroid StudioGradleJcenter  \n\n```gradle\nbuildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.1.2'\n    }\n}\n```\n\ndependencieslibeclipsejar\n<!-- more -->\n```gradle\ndependencies {\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:23.+'\n}\n```\n\ngithubdependencies  \n\n![github](http://upload-images.jianshu.io/upload_images/2702499-42abe9c7fae76121.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nbuild.gradleAndroid Studio LibraryJcenter\n\n-----\n\n# Bintray\n[bintray](https://bintray.com/)githubJcenter\n\nprofile\n![profile](http://upload-images.jianshu.io/upload_images/2702499-8edca1463c8d4c4d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nEdit\n\n\n![Edit](http://upload-images.jianshu.io/upload_images/2702499-0a52b0f26a391f0e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nAPI Key\n![API Key](http://upload-images.jianshu.io/upload_images/2702499-435ac7a15ac873a9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nAPI Key\n\n-----\n# \nCommitToJcenterAndroidjadandroid library,jadJcenter\n\n\n![project](http://upload-images.jianshu.io/upload_images/2702499-1b9486f540a998d0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nlocal.properties\n\n```properties\nbintray.user=***\nbintray.apikey=***\n```\nusertapikey\n\n**build.gradle**\n\n```gradle\nbuildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.1.2'\n\n        //classpath\n        // for jcenter\n        // version: https://bintray.com/jfrog/jfrog-jars/gradle-bintray-plugin\n        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.7.1'\n        // version: https://bintray.com/dcendents/gradle-plugins/com.github.dcendents%3Aandroid-maven-gradle-plugin\n        classpath 'com.github.dcendents:android-maven-gradle-plugin:1.3'\n    }\n}\n\n...\n```\n\n**jad****build.gradle**\n\n```gradle\n...\n\napply plugin: 'com.github.dcendents.android-maven'\napply plugin: 'com.jfrog.bintray'\n\nversion = \"1.0\" //Jcenter\ndef siteUrl = *** // project homepage\ndef gitUrl = ***  // project git\ngroup = \"com.zql.android\"\n\ninstall {\n    repositories.mavenInstaller {\n        // This generates POM.xml with proper parameters\n        pom {\n            project {\n                packaging 'aar'\n                name 'Just a demo for jcenter'\n                url siteUrl\n                licenses {\n                    license {\n                        name 'The Apache Software License, Version 2.0'\n                        url 'http://www.apache.org/licenses/LICENSE-2.0.txt'\n                    }\n                }\n                developers {\n                    developer {\n                        id *** //Jcenter id\n                        name *** //Jcenter name\n                        email *** //e-mail\n                    }\n                }\n                scm {\n                    connection gitUrl\n                    developerConnection gitUrl\n                    url siteUrl\n                }\n            }\n        }\n    }\n}\n\n\ntask sourcesJar(type: Jar) {\n    from android.sourceSets.main.java.srcDirs\n    classifier = 'sources'\n}\n\n\ntask javadoc(type: Javadoc) {\n    source = android.sourceSets.main.java.srcDirs\n    classpath += project.files(android.getBootClasspath().join(File.pathSeparator))\n}\n\n\ntask javadocJar(type: Jar, dependsOn: javadoc) {\n    classifier = 'javadoc'\n    from javadoc.destinationDir\n}\n\nartifacts {\n    archives javadocJar\n    archives sourcesJar\n}\n\nProperties properties = new Properties()\nproperties.load(project.rootProject.file('local.properties').newDataInputStream())\nbintray {\n    user = properties.getProperty(\"bintray.user\")\n    key = properties.getProperty(\"bintray.apikey\")\n    configurations = ['archives']\n    pkg {\n        repo = \"maven\"\n        name = \"jad\" // project name in jcenter\n        websiteUrl = siteUrl\n        vcsUrl = gitUrl\n        licenses = [\"Apache-2.0\"]\n        publish = true\n    }\n}\n```\n\nsyncsync\n\n-----------\n\n# \nGradletask\n- javadocJar\n- sourcesJar\n- install\n- bintrayUpload\n\n\n![gradle](http://upload-images.jianshu.io/upload_images/2702499-533046f6c436da02.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n\n![gradle](http://upload-images.jianshu.io/upload_images/2702499-31c2fe030fd96b4f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n[bintray](https://bintray.com/)profilelast activity\n\n\n![last activity](http://upload-images.jianshu.io/upload_images/2702499-4fdebda66957ce39.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\njad,add to Jcenter\n\n\n![add to jcenter](http://upload-images.jianshu.io/upload_images/2702499-373dbbe4e6c717de.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n100%\n\n![request](http://upload-images.jianshu.io/upload_images/2702499-13f6fdab4fb08960.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n\n\n\n![response](http://upload-images.jianshu.io/upload_images/2702499-f9ffbca647f83632.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nOK,\n\n-----\n\n# \n\njadJAD.java\n\n```java\npackage android.zql.com.jad;\n\nimport android.content.Context;\nimport android.widget.Toast;\n\n/**\n * Created by scott on 8/11/16.\n */\npublic final class JAD {\n\n    public static final void sayHello(Context context){\n        Toast.makeText(context,\"hello man\",Toast.LENGTH_LONG).show();\n    }\n}\n```\nToastHello man\nJcenterJcenter1.0.1\n\n```gradle\napply plugin: 'com.github.dcendents.android-maven'\napply plugin: 'com.jfrog.bintray'\nversion = \"1.0.1\"\n```\n\n- javadocJar\n- sourcesJar\n- install\n- bintrayUpload\n\n[bintray](https://bintray.com/)jad:\n\n1.0.1\n![1.0.0](http://upload-images.jianshu.io/upload_images/2702499-2b0ea00c02876595.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\njadgradle\n![gradle usage](http://upload-images.jianshu.io/upload_images/2702499-94200416061d1072.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\njadbuild.gradle\n```gradle\ndependencies {\n    ...\n    compile 'com.zql.android:jad:1.0.1'\n}\n```\nActivity\n```java\n  @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        JAD.sayHello(this);\n    }\n```\n\n\n![](http://upload-images.jianshu.io/upload_images/2702499-cece63e6f12e99e1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n# \n\nCommitToJcenter[github](https://github.com/ZhangQinglian/CommitToJcenter)\n\n\n![Steven Paul Jobs](http://upload-images.jianshu.io/upload_images/2702499-0f57daa362c8a84e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n","slug":"upload-jcenter","published":1,"updated":"2024-08-21T03:16:19.787Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vz002m5p6t5gyvhhe9","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>Android StudioGradleJcenter  </p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">buildscript</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">repositories</span> &#123;</span><br><span class=\"line\">        jcenter()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">classpath</span> <span class=\"string\">&#x27;com.android.tools.build:gradle:2.1.2&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>dependencieslibeclipsejar</p>\n<span id=\"more\"></span>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">compile</span> <span class=\"keyword\">fileTree</span>(<span class=\"keyword\">include</span>: [<span class=\"string\">&#x27;*.jar&#x27;</span>], dir: <span class=\"string\">&#x27;libs&#x27;</span>)</span><br><span class=\"line\">    testCompile <span class=\"string\">&#x27;junit:junit:4.12&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">compile</span> <span class=\"string\">&#x27;com.android.support:appcompat-v7:23.+&#x27;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>githubdependencies  </p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-42abe9c7fae76121.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"github\"></p>\n<p>build.gradleAndroid Studio LibraryJcenter</p>\n<hr>\n<h1 id=\"Bintray\"><a href=\"#Bintray\" class=\"headerlink\" title=\"Bintray\"></a>Bintray</h1><p><a href=\"https://bintray.com/\">bintray</a>githubJcenter</p>\n<p>profile<br><img src=\"http://upload-images.jianshu.io/upload_images/2702499-8edca1463c8d4c4d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"profile\"></p>\n<p>Edit</p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-0a52b0f26a391f0e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"Edit\"></p>\n<p>API Key<br><img src=\"http://upload-images.jianshu.io/upload_images/2702499-435ac7a15ac873a9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"API Key\"></p>\n<p>API Key</p>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>CommitToJcenterAndroidjadandroid library,jadJcenter</p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-1b9486f540a998d0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"project\"></p>\n<p>local.properties</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">bintray.user</span>=<span class=\"string\">***</span></span><br><span class=\"line\"><span class=\"attr\">bintray.apikey</span>=<span class=\"string\">***</span></span><br></pre></td></tr></table></figure>\n<p>usertapikey</p>\n<p><strong>build.gradle</strong></p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">buildscript</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">repositories</span> &#123;</span><br><span class=\"line\">        jcenter()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">classpath</span> <span class=\"string\">&#x27;com.android.tools.build:gradle:2.1.2&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//classpath</span></span><br><span class=\"line\">        <span class=\"comment\">// for jcenter</span></span><br><span class=\"line\">        <span class=\"comment\">// version: https://bintray.com/jfrog/jfrog-jars/gradle-bintray-plugin</span></span><br><span class=\"line\">        <span class=\"keyword\">classpath</span> <span class=\"string\">&#x27;com.jfrog.bintray.gradle:gradle-bintray-plugin:1.7.1&#x27;</span></span><br><span class=\"line\">        <span class=\"comment\">// version: https://bintray.com/dcendents/gradle-plugins/com.github.dcendents%3Aandroid-maven-gradle-plugin</span></span><br><span class=\"line\">        <span class=\"keyword\">classpath</span> <span class=\"string\">&#x27;com.github.dcendents:android-maven-gradle-plugin:1.3&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p><strong>jad</strong><strong>build.gradle</strong></p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">apply plugin: <span class=\"string\">&#x27;com.github.dcendents.android-maven&#x27;</span></span><br><span class=\"line\">apply plugin: <span class=\"string\">&#x27;com.jfrog.bintray&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">version = <span class=\"string\">&quot;1.0&quot;</span> <span class=\"comment\">//Jcenter</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> siteUrl = *** <span class=\"comment\">// project homepage</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> gitUrl = ***  <span class=\"comment\">// project git</span></span><br><span class=\"line\"><span class=\"keyword\">group</span> = <span class=\"string\">&quot;com.zql.android&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">install &#123;</span><br><span class=\"line\">    <span class=\"keyword\">repositories</span>.mavenInstaller &#123;</span><br><span class=\"line\">        <span class=\"comment\">// This generates POM.xml with proper parameters</span></span><br><span class=\"line\">        pom &#123;</span><br><span class=\"line\">            <span class=\"keyword\">project</span> &#123;</span><br><span class=\"line\">                packaging <span class=\"string\">&#x27;aar&#x27;</span></span><br><span class=\"line\">                name <span class=\"string\">&#x27;Just a demo for jcenter&#x27;</span></span><br><span class=\"line\">                url siteUrl</span><br><span class=\"line\">                licenses &#123;</span><br><span class=\"line\">                    license &#123;</span><br><span class=\"line\">                        name <span class=\"string\">&#x27;The Apache Software License, Version 2.0&#x27;</span></span><br><span class=\"line\">                        url <span class=\"string\">&#x27;http://www.apache.org/licenses/LICENSE-2.0.txt&#x27;</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                developers &#123;</span><br><span class=\"line\">                    developer &#123;</span><br><span class=\"line\">                        id *** <span class=\"comment\">//Jcenter id</span></span><br><span class=\"line\">                        name *** <span class=\"comment\">//Jcenter name</span></span><br><span class=\"line\">                        email *** <span class=\"comment\">//e-mail</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                scm &#123;</span><br><span class=\"line\">                    connection gitUrl</span><br><span class=\"line\">                    developerConnection gitUrl</span><br><span class=\"line\">                    url siteUrl</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">task</span> sourcesJar(type: Jar) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">from</span> android.<span class=\"keyword\">sourceSets</span>.main.java.srcDirs</span><br><span class=\"line\">    classifier = <span class=\"string\">&#x27;sources&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">task</span> javadoc(type: Javadoc) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">source</span> = android.<span class=\"keyword\">sourceSets</span>.main.java.srcDirs</span><br><span class=\"line\">    <span class=\"keyword\">classpath</span> += <span class=\"keyword\">project</span>.files(android.getBootClasspath().<span class=\"keyword\">join</span>(<span class=\"keyword\">File</span>.pathSeparator))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">task</span> javadocJar(type: Jar, dependsOn: javadoc) &#123;</span><br><span class=\"line\">    classifier = <span class=\"string\">&#x27;javadoc&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">from</span> javadoc.<span class=\"keyword\">destinationDir</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">artifacts</span> &#123;</span><br><span class=\"line\">    archives javadocJar</span><br><span class=\"line\">    archives sourcesJar</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Properties properties = <span class=\"keyword\">new</span> Properties()</span><br><span class=\"line\">properties.load(<span class=\"keyword\">project</span>.rootProject.<span class=\"keyword\">file</span>(<span class=\"string\">&#x27;local.properties&#x27;</span>).newDataInputStream())</span><br><span class=\"line\">bintray &#123;</span><br><span class=\"line\">    user = properties.getProperty(<span class=\"string\">&quot;bintray.user&quot;</span>)</span><br><span class=\"line\">    key = properties.getProperty(<span class=\"string\">&quot;bintray.apikey&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">configurations</span> = [<span class=\"string\">&#x27;archives&#x27;</span>]</span><br><span class=\"line\">    pkg &#123;</span><br><span class=\"line\">        repo = <span class=\"string\">&quot;maven&quot;</span></span><br><span class=\"line\">        name = <span class=\"string\">&quot;jad&quot;</span> <span class=\"comment\">// project name in jcenter</span></span><br><span class=\"line\">        websiteUrl = siteUrl</span><br><span class=\"line\">        vcsUrl = gitUrl</span><br><span class=\"line\">        licenses = [<span class=\"string\">&quot;Apache-2.0&quot;</span>]</span><br><span class=\"line\">        publish = <span class=\"keyword\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>syncsync</p>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>Gradletask</p>\n<ul>\n<li>javadocJar</li>\n<li>sourcesJar</li>\n<li>install</li>\n<li>bintrayUpload</li>\n</ul>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-533046f6c436da02.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"gradle\"></p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-31c2fe030fd96b4f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"gradle\"></p>\n<p><a href=\"https://bintray.com/\">bintray</a>profilelast activity</p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-4fdebda66957ce39.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"last activity\"></p>\n<p>jad,add to Jcenter</p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-373dbbe4e6c717de.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"add to jcenter\"></p>\n<p>100%</p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-13f6fdab4fb08960.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"request\"></p>\n<p></p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-f9ffbca647f83632.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"response\"></p>\n<p>OK,</p>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>jadJAD.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> android.zql.com.jad;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.widget.Toast;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Created by scott on 8/11/16.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">class</span> <span class=\"title class_\">JAD</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sayHello</span><span class=\"params\">(Context context)</span>&#123;</span><br><span class=\"line\">        Toast.makeText(context,<span class=\"string\">&quot;hello man&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ToastHello man<br>JcenterJcenter1.0.1</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apply plugin: <span class=\"string\">&#x27;com.github.dcendents.android-maven&#x27;</span></span><br><span class=\"line\">apply plugin: <span class=\"string\">&#x27;com.jfrog.bintray&#x27;</span></span><br><span class=\"line\">version = <span class=\"string\">&quot;1.0.1&quot;</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li>javadocJar</li>\n<li>sourcesJar</li>\n<li>install</li>\n<li>bintrayUpload</li>\n</ul>\n<p><a href=\"https://bintray.com/\">bintray</a>jad:</p>\n<p>1.0.1<br><img src=\"http://upload-images.jianshu.io/upload_images/2702499-2b0ea00c02876595.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"1.0.0\"></p>\n<p>jadgradle<br><img src=\"http://upload-images.jianshu.io/upload_images/2702499-94200416061d1072.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"gradle usage\"></p>\n<p>jadbuild.gradle</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"keyword\">compile</span> <span class=\"string\">&#x27;com.zql.android:jad:1.0.1&#x27;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Activity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">      setContentView(R.layout.activity_main);</span><br><span class=\"line\">      JAD.sayHello(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-cece63e6f12e99e1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><br>CommitToJcenter<a href=\"https://github.com/ZhangQinglian/CommitToJcenter\">github</a><br></p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-0f57daa362c8a84e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"Steven Paul Jobs\"></p>\n","excerpt":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>Android StudioGradleJcenter  </p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">buildscript</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">repositories</span> &#123;</span><br><span class=\"line\">        jcenter()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">classpath</span> <span class=\"string\">&#x27;com.android.tools.build:gradle:2.1.2&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>dependencieslibeclipsejar</p>","more":"<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">compile</span> <span class=\"keyword\">fileTree</span>(<span class=\"keyword\">include</span>: [<span class=\"string\">&#x27;*.jar&#x27;</span>], dir: <span class=\"string\">&#x27;libs&#x27;</span>)</span><br><span class=\"line\">    testCompile <span class=\"string\">&#x27;junit:junit:4.12&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">compile</span> <span class=\"string\">&#x27;com.android.support:appcompat-v7:23.+&#x27;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>githubdependencies  </p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-42abe9c7fae76121.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"github\"></p>\n<p>build.gradleAndroid Studio LibraryJcenter</p>\n<hr>\n<h1 id=\"Bintray\"><a href=\"#Bintray\" class=\"headerlink\" title=\"Bintray\"></a>Bintray</h1><p><a href=\"https://bintray.com/\">bintray</a>githubJcenter</p>\n<p>profile<br><img src=\"http://upload-images.jianshu.io/upload_images/2702499-8edca1463c8d4c4d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"profile\"></p>\n<p>Edit</p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-0a52b0f26a391f0e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"Edit\"></p>\n<p>API Key<br><img src=\"http://upload-images.jianshu.io/upload_images/2702499-435ac7a15ac873a9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"API Key\"></p>\n<p>API Key</p>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>CommitToJcenterAndroidjadandroid library,jadJcenter</p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-1b9486f540a998d0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"project\"></p>\n<p>local.properties</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">bintray.user</span>=<span class=\"string\">***</span></span><br><span class=\"line\"><span class=\"attr\">bintray.apikey</span>=<span class=\"string\">***</span></span><br></pre></td></tr></table></figure>\n<p>usertapikey</p>\n<p><strong>build.gradle</strong></p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">buildscript</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">repositories</span> &#123;</span><br><span class=\"line\">        jcenter()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">classpath</span> <span class=\"string\">&#x27;com.android.tools.build:gradle:2.1.2&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//classpath</span></span><br><span class=\"line\">        <span class=\"comment\">// for jcenter</span></span><br><span class=\"line\">        <span class=\"comment\">// version: https://bintray.com/jfrog/jfrog-jars/gradle-bintray-plugin</span></span><br><span class=\"line\">        <span class=\"keyword\">classpath</span> <span class=\"string\">&#x27;com.jfrog.bintray.gradle:gradle-bintray-plugin:1.7.1&#x27;</span></span><br><span class=\"line\">        <span class=\"comment\">// version: https://bintray.com/dcendents/gradle-plugins/com.github.dcendents%3Aandroid-maven-gradle-plugin</span></span><br><span class=\"line\">        <span class=\"keyword\">classpath</span> <span class=\"string\">&#x27;com.github.dcendents:android-maven-gradle-plugin:1.3&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p><strong>jad</strong><strong>build.gradle</strong></p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">apply plugin: <span class=\"string\">&#x27;com.github.dcendents.android-maven&#x27;</span></span><br><span class=\"line\">apply plugin: <span class=\"string\">&#x27;com.jfrog.bintray&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">version = <span class=\"string\">&quot;1.0&quot;</span> <span class=\"comment\">//Jcenter</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> siteUrl = *** <span class=\"comment\">// project homepage</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> gitUrl = ***  <span class=\"comment\">// project git</span></span><br><span class=\"line\"><span class=\"keyword\">group</span> = <span class=\"string\">&quot;com.zql.android&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">install &#123;</span><br><span class=\"line\">    <span class=\"keyword\">repositories</span>.mavenInstaller &#123;</span><br><span class=\"line\">        <span class=\"comment\">// This generates POM.xml with proper parameters</span></span><br><span class=\"line\">        pom &#123;</span><br><span class=\"line\">            <span class=\"keyword\">project</span> &#123;</span><br><span class=\"line\">                packaging <span class=\"string\">&#x27;aar&#x27;</span></span><br><span class=\"line\">                name <span class=\"string\">&#x27;Just a demo for jcenter&#x27;</span></span><br><span class=\"line\">                url siteUrl</span><br><span class=\"line\">                licenses &#123;</span><br><span class=\"line\">                    license &#123;</span><br><span class=\"line\">                        name <span class=\"string\">&#x27;The Apache Software License, Version 2.0&#x27;</span></span><br><span class=\"line\">                        url <span class=\"string\">&#x27;http://www.apache.org/licenses/LICENSE-2.0.txt&#x27;</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                developers &#123;</span><br><span class=\"line\">                    developer &#123;</span><br><span class=\"line\">                        id *** <span class=\"comment\">//Jcenter id</span></span><br><span class=\"line\">                        name *** <span class=\"comment\">//Jcenter name</span></span><br><span class=\"line\">                        email *** <span class=\"comment\">//e-mail</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                scm &#123;</span><br><span class=\"line\">                    connection gitUrl</span><br><span class=\"line\">                    developerConnection gitUrl</span><br><span class=\"line\">                    url siteUrl</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">task</span> sourcesJar(type: Jar) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">from</span> android.<span class=\"keyword\">sourceSets</span>.main.java.srcDirs</span><br><span class=\"line\">    classifier = <span class=\"string\">&#x27;sources&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">task</span> javadoc(type: Javadoc) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">source</span> = android.<span class=\"keyword\">sourceSets</span>.main.java.srcDirs</span><br><span class=\"line\">    <span class=\"keyword\">classpath</span> += <span class=\"keyword\">project</span>.files(android.getBootClasspath().<span class=\"keyword\">join</span>(<span class=\"keyword\">File</span>.pathSeparator))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">task</span> javadocJar(type: Jar, dependsOn: javadoc) &#123;</span><br><span class=\"line\">    classifier = <span class=\"string\">&#x27;javadoc&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">from</span> javadoc.<span class=\"keyword\">destinationDir</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">artifacts</span> &#123;</span><br><span class=\"line\">    archives javadocJar</span><br><span class=\"line\">    archives sourcesJar</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Properties properties = <span class=\"keyword\">new</span> Properties()</span><br><span class=\"line\">properties.load(<span class=\"keyword\">project</span>.rootProject.<span class=\"keyword\">file</span>(<span class=\"string\">&#x27;local.properties&#x27;</span>).newDataInputStream())</span><br><span class=\"line\">bintray &#123;</span><br><span class=\"line\">    user = properties.getProperty(<span class=\"string\">&quot;bintray.user&quot;</span>)</span><br><span class=\"line\">    key = properties.getProperty(<span class=\"string\">&quot;bintray.apikey&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">configurations</span> = [<span class=\"string\">&#x27;archives&#x27;</span>]</span><br><span class=\"line\">    pkg &#123;</span><br><span class=\"line\">        repo = <span class=\"string\">&quot;maven&quot;</span></span><br><span class=\"line\">        name = <span class=\"string\">&quot;jad&quot;</span> <span class=\"comment\">// project name in jcenter</span></span><br><span class=\"line\">        websiteUrl = siteUrl</span><br><span class=\"line\">        vcsUrl = gitUrl</span><br><span class=\"line\">        licenses = [<span class=\"string\">&quot;Apache-2.0&quot;</span>]</span><br><span class=\"line\">        publish = <span class=\"keyword\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>syncsync</p>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>Gradletask</p>\n<ul>\n<li>javadocJar</li>\n<li>sourcesJar</li>\n<li>install</li>\n<li>bintrayUpload</li>\n</ul>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-533046f6c436da02.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"gradle\"></p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-31c2fe030fd96b4f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"gradle\"></p>\n<p><a href=\"https://bintray.com/\">bintray</a>profilelast activity</p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-4fdebda66957ce39.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"last activity\"></p>\n<p>jad,add to Jcenter</p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-373dbbe4e6c717de.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"add to jcenter\"></p>\n<p>100%</p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-13f6fdab4fb08960.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"request\"></p>\n<p></p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-f9ffbca647f83632.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"response\"></p>\n<p>OK,</p>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>jadJAD.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> android.zql.com.jad;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.widget.Toast;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Created by scott on 8/11/16.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">class</span> <span class=\"title class_\">JAD</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sayHello</span><span class=\"params\">(Context context)</span>&#123;</span><br><span class=\"line\">        Toast.makeText(context,<span class=\"string\">&quot;hello man&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ToastHello man<br>JcenterJcenter1.0.1</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apply plugin: <span class=\"string\">&#x27;com.github.dcendents.android-maven&#x27;</span></span><br><span class=\"line\">apply plugin: <span class=\"string\">&#x27;com.jfrog.bintray&#x27;</span></span><br><span class=\"line\">version = <span class=\"string\">&quot;1.0.1&quot;</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li>javadocJar</li>\n<li>sourcesJar</li>\n<li>install</li>\n<li>bintrayUpload</li>\n</ul>\n<p><a href=\"https://bintray.com/\">bintray</a>jad:</p>\n<p>1.0.1<br><img src=\"http://upload-images.jianshu.io/upload_images/2702499-2b0ea00c02876595.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"1.0.0\"></p>\n<p>jadgradle<br><img src=\"http://upload-images.jianshu.io/upload_images/2702499-94200416061d1072.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"gradle usage\"></p>\n<p>jadbuild.gradle</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"keyword\">compile</span> <span class=\"string\">&#x27;com.zql.android:jad:1.0.1&#x27;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Activity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">      setContentView(R.layout.activity_main);</span><br><span class=\"line\">      JAD.sayHello(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-cece63e6f12e99e1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><br>CommitToJcenter<a href=\"https://github.com/ZhangQinglian/CommitToJcenter\">github</a><br></p>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/2702499-0f57daa362c8a84e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"Steven Paul Jobs\"></p>"},{"title":"","date":"2016-01-03T14:57:24.000Z","_content":"\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/375ebcdfea8842d5c023e569ca999d9c.jpg)","source":"_posts/welcome.md","raw":"---\ntitle: \ndate: 2016-01-03 22:57:24\ntags:\n---\n\n![](https://blog-1256162814.cos.ap-nanjing.myqcloud.com/375ebcdfea8842d5c023e569ca999d9c.jpg)","slug":"welcome","published":1,"updated":"2024-08-21T03:16:19.787Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vz002p5p6tfgohalrf","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/375ebcdfea8842d5c023e569ca999d9c.jpg\" alt=\"\"></p>\n","excerpt":"","more":"<p><img src=\"https://blog-1256162814.cos.ap-nanjing.myqcloud.com/375ebcdfea8842d5c023e569ca999d9c.jpg\" alt=\"\"></p>\n"},{"title":"","date":"2016-08-06T13:02:26.000Z","cover":"http://cdn.zqlxtt.cn/xiangsu1.gif","_content":"\nTumblr1041uuu\n\n![](http://cdn.zqlxtt.cn/xiangsu1.gif)\n![](http://cdn.zqlxtt.cn/xiangsu2.gif)\n![](http://cdn.zqlxtt.cn.cn/xiangsu3.gif)\n![](http://cdn.zqlxtt.cn/xiangsu4.gif)\n![](http://cdn.zqlxtt.cn/xiangsu5.gif)\n![](http://cdn.zqlxtt.cn/xiangsu6.gif)\n![](http://cdn.zqlxtt.cn/xiangsu7.gif)\n![](http://cdn.zqlxtt.cn/xiangsu8.gif)\n![](http://cdn.zqlxtt.cn/xiangsu9.gif)\n","source":"_posts/xiangsuhua20160806.md","raw":"---\ntitle: \ndate: 2016-08-06 21:02:26\ntags: \ncover: http://cdn.zqlxtt.cn/xiangsu1.gif\n---\n\nTumblr1041uuu\n\n![](http://cdn.zqlxtt.cn/xiangsu1.gif)\n![](http://cdn.zqlxtt.cn/xiangsu2.gif)\n![](http://cdn.zqlxtt.cn.cn/xiangsu3.gif)\n![](http://cdn.zqlxtt.cn/xiangsu4.gif)\n![](http://cdn.zqlxtt.cn/xiangsu5.gif)\n![](http://cdn.zqlxtt.cn/xiangsu6.gif)\n![](http://cdn.zqlxtt.cn/xiangsu7.gif)\n![](http://cdn.zqlxtt.cn/xiangsu8.gif)\n![](http://cdn.zqlxtt.cn/xiangsu9.gif)\n","slug":"xiangsuhua20160806","published":1,"updated":"2024-08-21T03:16:19.787Z","comments":1,"layout":"post","photos":[],"_id":"cm03be2vz002r5p6tg8nz5rni","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>Tumblr1041uuu</p>\n<p><img src=\"http://cdn.zqlxtt.cn/xiangsu1.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn/xiangsu2.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn.cn/xiangsu3.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn/xiangsu4.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn/xiangsu5.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn/xiangsu6.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn/xiangsu7.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn/xiangsu8.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn/xiangsu9.gif\" alt=\"\"></p>\n","excerpt":"","more":"<p>Tumblr1041uuu</p>\n<p><img src=\"http://cdn.zqlxtt.cn/xiangsu1.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn/xiangsu2.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn.cn/xiangsu3.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn/xiangsu4.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn/xiangsu5.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn/xiangsu6.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn/xiangsu7.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn/xiangsu8.gif\" alt=\"\"><br><img src=\"http://cdn.zqlxtt.cn/xiangsu9.gif\" alt=\"\"></p>\n"}],"PostAsset":[{"_id":"source/_posts/last-dance/lastdance.lrc","slug":"lastdance.lrc","post":"cm03be2vv001h5p6t67m38bhu","modified":0,"renderable":0}],"PostCategory":[],"PostTag":[{"post_id":"cm03be2vk00015p6t1gax1sfi","tag_id":"cm03be2vn00045p6tfgjj9utq","_id":"cm03be2vp000c5p6t0av2fmkb"},{"post_id":"cm03be2vm00035p6t3cnm8bc6","tag_id":"cm03be2vp000b5p6t2zvo30xf","_id":"cm03be2vq000h5p6t9wyh1yay"},{"post_id":"cm03be2vo00065p6t41ok1m8h","tag_id":"cm03be2vp000f5p6t7lydejag","_id":"cm03be2vq000l5p6t2l3nbqad"},{"post_id":"cm03be2vo00085p6tcea01j2b","tag_id":"cm03be2vq000j5p6t5vbh9kkv","_id":"cm03be2vr000p5p6tahl504pg"},{"post_id":"cm03be2vp000a5p6t9jn177u6","tag_id":"cm03be2vq000j5p6t5vbh9kkv","_id":"cm03be2vs000t5p6t1pxj83zn"},{"post_id":"cm03be2vp000d5p6tcfb63h5x","tag_id":"cm03be2vq000j5p6t5vbh9kkv","_id":"cm03be2vs000x5p6t36n2a4pb"},{"post_id":"cm03be2vp000e5p6t4ss151rw","tag_id":"cm03be2vq000j5p6t5vbh9kkv","_id":"cm03be2vt00115p6t3o1p4ufm"},{"post_id":"cm03be2vt00105p6td87k4i7a","tag_id":"cm03be2vq000j5p6t5vbh9kkv","_id":"cm03be2vt00135p6tg4rx9x7y"},{"post_id":"cm03be2vq000g5p6t46pa5jq6","tag_id":"cm03be2vs000z5p6t6l6oc7qs","_id":"cm03be2vu00195p6tc4jwezw5"},{"post_id":"cm03be2vq000g5p6t46pa5jq6","tag_id":"cm03be2vq000j5p6t5vbh9kkv","_id":"cm03be2vu001b5p6t0f2y7gpy"},{"post_id":"cm03be2vt00175p6t6zskfsfx","tag_id":"cm03be2vp000f5p6t7lydejag","_id":"cm03be2vu001e5p6tdaqdbqv7"},{"post_id":"cm03be2vu001a5p6tfxsu8hac","tag_id":"cm03be2vp000f5p6t7lydejag","_id":"cm03be2vv001g5p6t8n5qfn0c"},{"post_id":"cm03be2vq000i5p6t21qo2uiq","tag_id":"cm03be2vq000j5p6t5vbh9kkv","_id":"cm03be2vv001j5p6te1aq75ck"},{"post_id":"cm03be2vq000k5p6t7gy91ff4","tag_id":"cm03be2vq000j5p6t5vbh9kkv","_id":"cm03be2vv001k5p6tfsy613nz"},{"post_id":"cm03be2vq000k5p6t7gy91ff4","tag_id":"cm03be2vs000z5p6t6l6oc7qs","_id":"cm03be2vv001m5p6t3is740qj"},{"post_id":"cm03be2vq000m5p6t0dgcfd9f","tag_id":"cm03be2vq000j5p6t5vbh9kkv","_id":"cm03be2vv001o5p6tb9310z6y"},{"post_id":"cm03be2vq000m5p6t0dgcfd9f","tag_id":"cm03be2vv001i5p6t5g7tfm31","_id":"cm03be2vv001p5p6t3fhsa39f"},{"post_id":"cm03be2vq000m5p6t0dgcfd9f","tag_id":"cm03be2vv001l5p6t6r4z8c4p","_id":"cm03be2vv001r5p6tgfrm8j28"},{"post_id":"cm03be2vr000o5p6te6j87r4c","tag_id":"cm03be2vq000j5p6t5vbh9kkv","_id":"cm03be2vv001s5p6tagykeoyr"},{"post_id":"cm03be2vr000o5p6te6j87r4c","tag_id":"cm03be2vs000z5p6t6l6oc7qs","_id":"cm03be2vv001u5p6t0xcc9ebk"},{"post_id":"cm03be2vr000q5p6tgcre352i","tag_id":"cm03be2vq000j5p6t5vbh9kkv","_id":"cm03be2vv001v5p6t7a0jg2b6"},{"post_id":"cm03be2vr000q5p6tgcre352i","tag_id":"cm03be2vs000z5p6t6l6oc7qs","_id":"cm03be2vv001x5p6t09ohg4z7"},{"post_id":"cm03be2vs000s5p6tapel2y81","tag_id":"cm03be2vv001t5p6t93lege3e","_id":"cm03be2vv001y5p6teczs1yqs"},{"post_id":"cm03be2vs000s5p6tapel2y81","tag_id":"cm03be2vq000j5p6t5vbh9kkv","_id":"cm03be2vv00205p6t281ohskf"},{"post_id":"cm03be2vs000u5p6tdyukg30q","tag_id":"cm03be2vv001w5p6t59vm5n6s","_id":"cm03be2vv00215p6tgsh9d6tl"},{"post_id":"cm03be2vs000w5p6ta4a7270n","tag_id":"cm03be2vv001z5p6t4pnr0buk","_id":"cm03be2vw00235p6tc2uu59us"},{"post_id":"cm03be2vs000y5p6tgnci8img","tag_id":"cm03be2vw00225p6tfa3qcx46","_id":"cm03be2vw00255p6t3ls69dm5"},{"post_id":"cm03be2vt00125p6tajzd4i0t","tag_id":"cm03be2vv001l5p6t6r4z8c4p","_id":"cm03be2vw00275p6t89gtd630"},{"post_id":"cm03be2vt00145p6tenfj3xvl","tag_id":"cm03be2vw00265p6t45klcwy3","_id":"cm03be2vw00295p6t1s6f4nw9"},{"post_id":"cm03be2vt00165p6ta3v9607c","tag_id":"cm03be2vw00265p6t45klcwy3","_id":"cm03be2vw002b5p6tbhkzacfz"},{"post_id":"cm03be2vu001c5p6t738l3jw7","tag_id":"cm03be2vw002a5p6teyegar4w","_id":"cm03be2vw002d5p6t7f3p1yhf"},{"post_id":"cm03be2vu001f5p6t3f87e7l1","tag_id":"cm03be2vw002c5p6t1sz0cnct","_id":"cm03be2vw002f5p6thgzsf0zn"},{"post_id":"cm03be2vv001h5p6t67m38bhu","tag_id":"cm03be2vw002e5p6tdgen1h31","_id":"cm03be2vw002g5p6tabydg558"},{"post_id":"cm03be2vz002l5p6t84urbtp2","tag_id":"cm03be2vq000j5p6t5vbh9kkv","_id":"cm03be2vz002o5p6t97mp1qud"},{"post_id":"cm03be2vy002h5p6t1fbghn9x","tag_id":"cm03be2vz002j5p6t4ftq7aks","_id":"cm03be2vz002q5p6tgwkn51h2"},{"post_id":"cm03be2vz002m5p6t5gyvhhe9","tag_id":"cm03be2vq000j5p6t5vbh9kkv","_id":"cm03be2w0002s5p6t99dr447r"},{"post_id":"cm03be2vz002k5p6t6ko27qst","tag_id":"cm03be2vz002n5p6t3li1fp3r","_id":"cm03be2w0002u5p6t7s8e1kun"},{"post_id":"cm03be2vz002r5p6tg8nz5rni","tag_id":"cm03be2w0002t5p6tfrci7hql","_id":"cm03be2w0002v5p6tdzb0fxji"}],"Tag":[{"name":"","_id":"cm03be2vn00045p6tfgjj9utq"},{"name":"","_id":"cm03be2vp000b5p6t2zvo30xf"},{"name":"","_id":"cm03be2vp000f5p6t7lydejag"},{"name":"android","_id":"cm03be2vq000j5p6t5vbh9kkv"},{"name":"opengl","_id":"cm03be2vs000z5p6t6l6oc7qs"},{"name":"OpenGL ES","_id":"cm03be2vv001i5p6t5g7tfm31"},{"name":"EGL","_id":"cm03be2vv001l5p6t6r4z8c4p"},{"name":"player","_id":"cm03be2vv001t5p6t93lege3e"},{"name":"C","_id":"cm03be2vv001w5p6t59vm5n6s"},{"name":"Dart","_id":"cm03be2vv001z5p6t4pnr0buk"},{"name":"dart","_id":"cm03be2vw00225p6tfa3qcx46"},{"name":"flutter","_id":"cm03be2vw00265p6t45klcwy3"},{"name":"","_id":"cm03be2vw002a5p6teyegar4w"},{"name":"java","_id":"cm03be2vw002c5p6t1sz0cnct"},{"name":"","_id":"cm03be2vw002e5p6tdgen1h31"},{"name":"","_id":"cm03be2vz002j5p6t4ftq7aks"},{"name":"","_id":"cm03be2vz002n5p6t3li1fp3r"},{"name":"","_id":"cm03be2w0002t5p6tfrci7hql"}]}}